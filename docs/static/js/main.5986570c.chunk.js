(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{326:function(e,t,a){e.exports=a(605)},338:function(e,t){},339:function(e,t){},340:function(e,t){},605:function(e,t,a){"use strict";a.r(t);var s=a(123),n=a(3),i=a(5),r=a(9),o=a(8),l=a(10),c=a(1),d=a.n(c),u=a(73),h=a(310),p=a(201),m=a(355),v=m.Chart,b=m.Bars,f=(m.Cloud,m.Dots,m.Labels,m.Lines,m.Pies,m.RadialLines,m.Ticks,m.Title,m.Layer,m.Animate,m.Transform),w=(m.Handlers,m.DropShadow,m.Gradient,m.helpers,{lightsPosition:[-125,50.5,5e3,-122.8,48.5,8e3],ambientRatio:.2,diffuseRatio:.5,specularRatio:.3,lightsStrength:[1,0,2,0],numberOfLights:2}),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).state={showStats:!1,stats:null},a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.viewport,n=t.postmap,i=t.statistics;if(!n||!i||!i.postcodes)return null;var r=Object(s.a)({},n,{features:n.features.filter(function(e){return e.properties.POSTCODE in i.postcodes})}),o=function(e,t,a){var s=e.properties.POSTCODE;return s in i.postcodes?(i.postcodes[s].r-i.minprice)/(3750-i.minprice)*a:t},l=new p.a({id:"geojson",data:r,opacity:.3,stroked:!1,filled:!0,extruded:!0,wireframe:!0,fp64:!0,getElevation:function(e){return o(e,0,5e3)},getFillColor:function(e){return[255*(t=o(e,0,1)),140,200*(1-t)];var t},getLineColor:function(e){return[255,255,255]},lightSettings:w,pickable:!0,onClick:function(t){console.warn(t);var a=t.object.properties.POSTCODE,s=a in e.props.statistics.postcodes?e.props.statistics.postcodes[a]:null;e.setState({showStats:!0,stats:{properties:t.object.properties,statistics:s}})}});return d.a.createElement("div",null,d.a.createElement(p.b,Object.assign({},a,{layers:[l],initWebGLParameters:!0})),this.state.showStats&&d.a.createElement("div",{className:"postalDetails"},d.a.createElement("h2",null,this.state.stats.properties.POSTCODE,", ",this.state.stats.properties.GM_NAAM),d.a.createElement("h3",null,Math.round(this.state.stats.statistics.r)," \u20ac/\u33a1"),d.a.createElement("span",null,"Men/Woman"),d.a.createElement(v,{width:240,height:20,series:[{data:[this.state.stats.properties.AANT_MAN]},{data:[this.state.stats.properties.AANT_VROUW]}]},d.a.createElement(f,{method:["stack","rotate"]},d.a.createElement(b,{combined:!0,innerPadding:"2%"}))),d.a.createElement("span",null,"0-14, 15-24, 25-44, 45-64, 65+"),d.a.createElement(v,{width:240,height:20,series:[{data:[this.state.stats.properties.P_00_14_JR]},{data:[this.state.stats.properties.P_15_24_JR]},{data:[this.state.stats.properties.P_25_44_JR]},{data:[this.state.stats.properties.P_45_64_JR]},{data:[this.state.stats.properties.P_65_EO_JR]}]},d.a.createElement(f,{method:["stack","rotate"]},d.a.createElement(b,{combined:!0,innerPadding:"2%"})))))}}],[{key:"defaultViewport",get:function(){return{latitude:52.2125708,longitude:4.9636486,zoom:7,maxZoom:16,pitch:5,bearing:0}}}]),t}(c.Component),E=a(158),O=(a(514),a(516),a(304)),_=a(306),j=a(200),y=a(307),C=a(125),S=a(202);C.b.add(y.a);var k="map/postcodemap.wsg.json",N="generated/overview.json",P=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._onDateChanged=function(e){a.setState({selectedDate:e}),a.loadStatisticsFile(e.value+a.state.selectedOtherStatistics.value)},a._onOtherChanged=function(e){a.setState({selectedOtherStatistics:e}),a.loadStatisticsFile(a.state.selectedDate.value+e.value)},a.state={viewport:Object(s.a)({},g.defaultViewport,{width:500,height:500}),data:null,statistics:null,overview:null,loading:!0,overviewLoaded:!1,selectedDate:null,selectedOtherStatistics:{value:"",label:"All"}},Promise.all([fetch(k),fetch(N)]).then(function(e){return Promise.all(e.map(function(e){return e.json()}))}).then(function(e){var t=e[1].dates.reverse().map(function(e){return{value:e,label:e}}),s=t[0];a.setState({data:e[0],overview:t,overviewLoaded:!0,selectedDate:s}),a.loadStatisticsFile(s.value)}).catch(function(e){console.warn(e),E.toast.error("Could not load the map data")}),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"loadStatisticsFile",value:function(e){var t=this;fetch("generated/".concat(e,".json")).then(function(e){return e.json()}).then(function(e){t.setState({statistics:e,loading:!1})}).catch(function(e){console.warn(e),E.toast.error("Could not load the statistics data")})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this._resize.bind(this)),this._resize()}},{key:"_resize",value:function(){this._onViewportChange({width:window.innerWidth,height:window.innerHeight})}},{key:"_onViewportChange",value:function(e){this.setState({viewport:Object(s.a)({},this.state.viewport,e)})}},{key:"render",value:function(){var e=this.state,t=e.viewport,a=e.data,s=e.statistics;return d.a.createElement("div",null,d.a.createElement(E.ToastContainer,null),this.state.loading&&d.a.createElement("div",{className:"loaderBox"},d.a.createElement("div",{className:"loaderContainer"},d.a.createElement(O.BounceLoader,{sizeUnit:"px",size:150,margin:"0 auto",color:"#43c92c",loading:!0})),d.a.createElement("h3",null,"Loading rescources...")),this.state.overviewLoaded&&d.a.createElement(_.slide,null,d.a.createElement("h1",{className:"header"},"Price per \u33a1"),d.a.createElement("hr",null),d.a.createElement("h3",{className:"select-header"},"Date"),d.a.createElement(S.a,{className:"menu-select",value:this.state.selectedDate,onChange:this._onDateChanged,options:this.state.overview}),d.a.createElement("h3",{className:"select-header"},"Other statistics"),d.a.createElement(S.a,{className:"menu-select",value:this.state.selectedOtherStatistics,onChange:this._onOtherChanged,options:[{value:"",label:"All"},{value:".slaap.1",label:"1 bedroom"},{value:".slaap.2",label:"2 bedrooms"},{value:".slaap.3",label:"3 bedrooms"},{value:".slaap.4",label:"4 bedrooms"},{value:".slaap.5",label:"5 bedrooms"},{value:".slaap.6",label:"6 bedrooms"},{value:".year.0",label:" 0 - 5 years old"},{value:".year.5",label:" 5 - 10 years old"},{value:".year.10",label:"10 - 20 years old"},{value:".year.20",label:"20 - 40 years old"},{value:".year.40",label:">40 years old"}]}),d.a.createElement("div",{className:"sociallinks"},d.a.createElement("a",{className:"icon-link",target:"_blank",href:"https://github.com/coens97/funda-pricemap"},d.a.createElement(j.a,{icon:["fab","github"],size:"3x"})),d.a.createElement("a",{className:"icon-link",target:"_blank",href:"https://www.linkedin.com/in/coen-stange/"},d.a.createElement(j.a,{className:"font-icon",icon:["fab","linkedin"],size:"3x"})))),d.a.createElement(h.a,Object.assign({},t,{mapStyle:"mapbox://styles/mapbox/streets-v10",onViewportChange:this._onViewportChange.bind(this),mapboxApiAccessToken:"pk.eyJ1IjoiY29lbnM5NyIsImEiOiJjam5objg4YWQwNWVlM3B0ZHd0NGV2aDdpIn0.0Jg6jNjAROAafiP9QB_i6w"}),d.a.createElement(g,{viewport:t,postmap:a,statistics:s})))}}]),t}(c.Component);Object(u.render)(d.a.createElement(P,null),document.getElementById("root"))}},[[326,2,1]]]);
//# sourceMappingURL=main.5986570c.chunk.js.map