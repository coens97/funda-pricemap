{"version":3,"sources":["deckgl-overlay.js","index.js"],"names":["LIGHT_SETTINGS","lightsPosition","ambientRatio","diffuseRatio","specularRatio","lightsStrength","numberOfLights","DeckGLOverlay","_this$props","this","props","viewport","data","statistics","layer","GeoJsonLayer","id","opacity","stroked","filled","extruded","wireframe","fp64","getElevation","f","postcode","properties","POSTCODE","listHouses","length","reduce","p","c","vraagprijs","woonoppervlakte","getFillColor","getLineColor","lightSettings","pickable","Boolean","onHover","react_default","a","createElement","dist_esm","Object","assign","layers","initWebGLParameters","latitude","longitude","zoom","maxZoom","pitch","bearing","Component","DATA_URL","Root","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","objectSpread","defaultViewport","width","height","Promise","all","fetch","then","response","map","x","json","jsonData","setState","catch","ex","console","warn","toast","error","window","addEventListener","_resize","bind","_onViewportChange","innerWidth","innerHeight","_this$state","lib","esm","onViewportChange","mapboxApiAccessToken","deckgl_overlay_DeckGLOverlay","render","src_Root","document","getElementById"],"mappings":"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","file":"static/js/main.61d59f9b.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport DeckGL, { GeoJsonLayer } from 'deck.gl';\n\nconst LIGHT_SETTINGS = {\n  lightsPosition: [-125, 50.5, 5000, -122.8, 48.5, 8000],\n  ambientRatio: 0.2,\n  diffuseRatio: 0.5,\n  specularRatio: 0.3,\n  lightsStrength: [1.0, 0.0, 2.0, 0.0],\n  numberOfLights: 2\n};\n\nexport default class DeckGLOverlay extends Component {\n\n  static get defaultViewport() {\n    return {\n      latitude: 52.2125708,\n      longitude: 4.9636486,\n      zoom: 14,//7,\n      maxZoom: 16,\n      pitch: 20,\n      bearing: 0\n    };\n  }\n\n  render() {\n    const { viewport, data, statistics } = this.props;\n\n    if (!data) {\n      return null;\n    }\n\n    const layer = new GeoJsonLayer({\n      id: 'geojson',\n      data,\n      opacity: 0.3,\n      stroked: false,\n      filled: true,\n      extruded: true,\n      wireframe: true,\n      fp64: true,\n      getElevation: f => {\n        const postcode = f.properties.POSTCODE;\n        if (postcode in statistics) {\n          const listHouses = statistics[postcode];\n          if (listHouses.length == 0) {\n            return 5;\n          }\n          const averageHouseprice = listHouses.reduce((p, c) => p.vraagprijs + c.vraagprijs, 0) / listHouses.length;\n          const averageSize = listHouses.reduce((p, c) => p.woonoppervlakte + c.woonoppervlakte, 0) / listHouses.length;\n          return averageHouseprice / (100 * averageSize);\n        }\n        else {\n          return 10;\n        }\n      },\n      getFillColor: f => [255, 0, 255],//const colorScale = r => [r * 255, 140, 200 * (1 - r)];\n      getLineColor: f => [255, 255, 255],\n      lightSettings: LIGHT_SETTINGS,\n      pickable: Boolean(this.props.onHover),\n      onHover: this.props.onHover\n    });\n\n    return (\n      <DeckGL {...viewport} layers={[layer]} initWebGLParameters />\n    );\n  }\n}","/* global window,document */\nimport React, { Component } from 'react';\nimport { render } from 'react-dom';\nimport MapGL from 'react-map-gl';\nimport DeckGLOverlay from './deckgl-overlay.js';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'mapbox-gl/dist/mapbox-gl.css'\n\n// Set your mapbox token here\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiY29lbnM5NyIsImEiOiJjam5objg4YWQwNWVlM3B0ZHd0NGV2aDdpIn0.0Jg6jNjAROAafiP9QB_i6w'; // eslint-disable-line\n\n// Source data GeoJSON\nconst DATA_URL = 'map/postcodemap.wsg.json'; // eslint-disable-line\n\nclass Root extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewport: {\n        ...DeckGLOverlay.defaultViewport,\n        width: 500,\n        height: 500\n      },\n      data: null,\n      statistics: null\n    };\n\n    Promise.all([fetch(DATA_URL), fetch('generated/2018-10-15.json')])\n      .then(response =>\n        Promise.all(response.map(x => x.json()))\n      )\n      .then(jsonData => {\n        this.setState(\n          {\n            data: jsonData[0],\n            statistics: jsonData[1]\n          });\n      }).catch(ex => {\n        console.warn(ex);\n        toast.error(\"Could not load the map data\");\n      });\n\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this._resize.bind(this));\n    this._resize();\n  }\n\n  _resize() {\n    this._onViewportChange({\n      width: window.innerWidth,\n      height: window.innerHeight\n    });\n  }\n\n  _onViewportChange(viewport) {\n    this.setState({\n      viewport: { ...this.state.viewport, ...viewport }\n    });\n  }\n\n  render() {\n    const { viewport, data, statistics } = this.state;\n\n    return (\n      <div>\n        <ToastContainer />\n        <MapGL\n          {...viewport}\n          onViewportChange={this._onViewportChange.bind(this)}\n          mapboxApiAccessToken={MAPBOX_TOKEN}>\n          <DeckGLOverlay viewport={viewport}\n            data={data}\n            statistics={statistics} />\n        </MapGL>\n      </div>\n    );\n  }\n}\n\nrender(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}