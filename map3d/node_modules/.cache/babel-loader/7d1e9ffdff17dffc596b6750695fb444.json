{"ast":null,"code":"var _WEBGL_PARAMETERS;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-disable no-inline-comments, max-len, camelcase */\n\n\nimport GL from './constants';\nvar OES_element_index = 'OES_element_index';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nvar GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8B8B;\nvar GL_DONT_CARE = 0x1100;\nvar GL_GPU_DISJOINT_EXT = 0x8FBB;\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84FF;\nvar GL_UNMASKED_VENDOR_WEBGL = 0x9245; // vendor string of the graphics driver.\n\nvar GL_UNMASKED_RENDERER_WEBGL = 0x9246; // renderer string of the graphics driver.\n\nvar getWebGL2ValueOrZero = function getWebGL2ValueOrZero(gl) {\n  return !isWebGL2(gl) ? 0 : undefined;\n}; // if a function returns undefined in this table,\n// the original getParameter will be called, defeating the override\n\n\nvar WEBGL_PARAMETERS = (_WEBGL_PARAMETERS = {}, _defineProperty(_WEBGL_PARAMETERS, GL_FRAGMENT_SHADER_DERIVATIVE_HINT, function (gl) {\n  return !isWebGL2(gl) ? GL_DONT_CARE : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.RASTERIZER_DISCARD, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.SAMPLES, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL_GPU_DISJOINT_EXT, function (gl, getParameter) {\n  var ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n  return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_VENDOR_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || GL.VENDOR);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_RENDERER_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || GL.RENDERER);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, function (gl, getParameter) {\n  var ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n  return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_3D_TEXTURE_SIZE, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_ARRAY_TEXTURE_LAYERS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_CLIENT_WAIT_TIMEOUT_WEBGL, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_COLOR_ATTACHMENTS, function (gl, getParameter) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_COMBINED_UNIFORM_BLOCKS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_DRAW_BUFFERS, function (gl) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_ELEMENT_INDEX, // Guess: per webglstats.com 99.6% of webgl2 supports 2147483647\nfunction (gl) {\n  return gl.getExtension(OES_element_index) ? 2147483647 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_ELEMENTS_INDICES, // Guess: \"Reasonably safe\" per webglstats.com - could be higher/lower (on some mobile devices)\nfunction (gl) {\n  return gl.getExtension(OES_element_index) ? 16777216 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_ELEMENTS_VERTICES, // Guess: \"Reasonably safe\" per webglstats.com - could be higher/lower (on some mobile devices)\nfunction (gl) {\n  return 16777216;\n}), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_FRAGMENT_INPUT_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_FRAGMENT_UNIFORM_BLOCKS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_FRAGMENT_UNIFORM_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_SAMPLES, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_SERVER_WAIT_TIMEOUT, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_TEXTURE_LOD_BIAS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_UNIFORM_BLOCK_SIZE, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_UNIFORM_BUFFER_BINDINGS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_VARYING_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_VERTEX_OUTPUT_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_VERTEX_UNIFORM_BLOCKS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_VERTEX_UNIFORM_COMPONENTS, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MIN_PROGRAM_TEXEL_OFFSET, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.MAX_PROGRAM_TEXEL_OFFSET, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL.UNIFORM_BUFFER_OFFSET_ALIGNMENT, getWebGL2ValueOrZero), _WEBGL_PARAMETERS); // Return true if WebGL2 context\n\nfunction isWebGL2(gl) {\n  var GL_TEXTURE_BINDING_3D = 0x806A;\n  return gl && gl.TEXTURE_BINDING_3D === GL_TEXTURE_BINDING_3D;\n} // A \"replacement\" gl.getParameter that accepts \"enums\" from extensions and WebGL2\n// and returns reasonably safe defaults\n\n\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  // Return mock limits (usually 0) for WebGL2 constants to ensure these\n  // can be queries without error\n  var limit = WEBGL_PARAMETERS[pname];\n  var value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  var result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}","map":null,"metadata":{},"sourceType":"module"}