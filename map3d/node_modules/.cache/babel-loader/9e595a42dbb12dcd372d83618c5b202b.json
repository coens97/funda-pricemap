{"ast":null,"code":"(function (f) {\n  if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n    module.exports = f();\n  } else if (typeof define === \"function\" && define.amd) {\n    define([], f);\n  } else {\n    var g;\n\n    if (typeof window !== \"undefined\") {\n      g = window;\n    } else if (typeof global !== \"undefined\") {\n      g = global;\n    } else if (typeof self !== \"undefined\") {\n      g = self;\n    } else {\n      g = this;\n    }\n\n    g.mapboxgl = f();\n  }\n})(function () {\n  var define, module, exports;\n  return function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == \"function\" && require;\n          if (!u && a) return a(o, !0);\n          if (i) return i(o, !0);\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\n          throw f.code = \"MODULE_NOT_FOUND\", f;\n        }\n\n        var l = n[o] = {\n          exports: {}\n        };\n        t[o][0].call(l.exports, function (e) {\n          var n = t[o][1][e];\n          return s(n ? n : e);\n        }, l, l.exports, e, t, n, r);\n      }\n\n      return n[o].exports;\n    }\n\n    var i = typeof require == \"function\" && require;\n\n    for (var o = 0; o < r.length; o++) {\n      s(r[o]);\n    }\n\n    return s;\n  }({\n    1: [function (_dereq_, module, exports) {\n      !function (t, r) {\n        \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = r() : \"function\" == typeof define && define.amd ? define(r) : t.glMatrix = r();\n      }(this, function () {\n        \"use strict\";\n\n        function t() {\n          var t = new Float32Array(3);\n          return t[0] = 0, t[1] = 0, t[2] = 0, t;\n        }\n\n        function r(t, r, n) {\n          var e = r[0],\n              a = r[1],\n              o = r[2];\n          return t[0] = e * n[0] + a * n[3] + o * n[6], t[1] = e * n[1] + a * n[4] + o * n[7], t[2] = e * n[2] + a * n[5] + o * n[8], t;\n        }\n\n        function n() {\n          var t = new Float32Array(4);\n          return t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0, t;\n        }\n\n        function e(t, r, n) {\n          var e = r[0],\n              a = r[1],\n              o = r[2],\n              u = r[3];\n          return t[0] = n[0] * e + n[4] * a + n[8] * o + n[12] * u, t[1] = n[1] * e + n[5] * a + n[9] * o + n[13] * u, t[2] = n[2] * e + n[6] * a + n[10] * o + n[14] * u, t[3] = n[3] * e + n[7] * a + n[11] * o + n[15] * u, t;\n        }\n\n        function a() {\n          var t = new Float32Array(4);\n          return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t;\n        }\n\n        function o(t, r, n) {\n          var e = r[0],\n              a = r[1],\n              o = r[2],\n              u = r[3],\n              i = Math.sin(n),\n              c = Math.cos(n);\n          return t[0] = e * c + o * i, t[1] = a * c + u * i, t[2] = e * -i + o * c, t[3] = a * -i + u * c, t;\n        }\n\n        function u(t, r, n) {\n          var e = r[0],\n              a = r[1],\n              o = r[2],\n              u = r[3],\n              i = n[0],\n              c = n[1];\n          return t[0] = e * i, t[1] = a * i, t[2] = o * c, t[3] = u * c, t;\n        }\n\n        function i() {\n          var t = new Float32Array(9);\n          return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t;\n        }\n\n        function c(t, r) {\n          var n = Math.sin(r),\n              e = Math.cos(r);\n          return t[0] = e, t[1] = n, t[2] = 0, t[3] = -n, t[4] = e, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t;\n        }\n\n        function f() {\n          var t = new Float32Array(16);\n          return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n        }\n\n        function v(t) {\n          return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n        }\n\n        function s(t, r) {\n          var n = r[0],\n              e = r[1],\n              a = r[2],\n              o = r[3],\n              u = r[4],\n              i = r[5],\n              c = r[6],\n              f = r[7],\n              v = r[8],\n              s = r[9],\n              l = r[10],\n              M = r[11],\n              h = r[12],\n              m = r[13],\n              y = r[14],\n              d = r[15],\n              p = n * i - e * u,\n              w = n * c - a * u,\n              A = n * f - o * u,\n              F = e * c - a * i,\n              x = e * f - o * i,\n              b = a * f - o * c,\n              g = v * m - s * h,\n              j = v * y - l * h,\n              R = v * d - M * h,\n              X = s * y - l * m,\n              Z = s * d - M * m,\n              k = l * d - M * y,\n              q = p * k - w * Z + A * X + F * R - x * j + b * g;\n          return q ? (q = 1 / q, t[0] = (i * k - c * Z + f * X) * q, t[1] = (a * Z - e * k - o * X) * q, t[2] = (m * b - y * x + d * F) * q, t[3] = (l * x - s * b - M * F) * q, t[4] = (c * R - u * k - f * j) * q, t[5] = (n * k - a * R + o * j) * q, t[6] = (y * A - h * b - d * w) * q, t[7] = (v * b - l * A + M * w) * q, t[8] = (u * Z - i * R + f * g) * q, t[9] = (e * R - n * Z - o * g) * q, t[10] = (h * x - m * A + d * p) * q, t[11] = (s * A - v * x - M * p) * q, t[12] = (i * j - u * X - c * g) * q, t[13] = (n * X - e * j + a * g) * q, t[14] = (m * w - h * F - y * p) * q, t[15] = (v * F - s * w + l * p) * q, t) : null;\n        }\n\n        function l(t, r, n) {\n          var e = r[0],\n              a = r[1],\n              o = r[2],\n              u = r[3],\n              i = r[4],\n              c = r[5],\n              f = r[6],\n              v = r[7],\n              s = r[8],\n              l = r[9],\n              M = r[10],\n              h = r[11],\n              m = r[12],\n              y = r[13],\n              d = r[14],\n              p = r[15],\n              w = n[0],\n              A = n[1],\n              F = n[2],\n              x = n[3];\n          return t[0] = w * e + A * i + F * s + x * m, t[1] = w * a + A * c + F * l + x * y, t[2] = w * o + A * f + F * M + x * d, t[3] = w * u + A * v + F * h + x * p, w = n[4], A = n[5], F = n[6], x = n[7], t[4] = w * e + A * i + F * s + x * m, t[5] = w * a + A * c + F * l + x * y, t[6] = w * o + A * f + F * M + x * d, t[7] = w * u + A * v + F * h + x * p, w = n[8], A = n[9], F = n[10], x = n[11], t[8] = w * e + A * i + F * s + x * m, t[9] = w * a + A * c + F * l + x * y, t[10] = w * o + A * f + F * M + x * d, t[11] = w * u + A * v + F * h + x * p, w = n[12], A = n[13], F = n[14], x = n[15], t[12] = w * e + A * i + F * s + x * m, t[13] = w * a + A * c + F * l + x * y, t[14] = w * o + A * f + F * M + x * d, t[15] = w * u + A * v + F * h + x * p, t;\n        }\n\n        function M(t, r, n) {\n          var e,\n              a,\n              o,\n              u,\n              i,\n              c,\n              f,\n              v,\n              s,\n              l,\n              M,\n              h,\n              m = n[0],\n              y = n[1],\n              d = n[2];\n          return r === t ? (t[12] = r[0] * m + r[4] * y + r[8] * d + r[12], t[13] = r[1] * m + r[5] * y + r[9] * d + r[13], t[14] = r[2] * m + r[6] * y + r[10] * d + r[14], t[15] = r[3] * m + r[7] * y + r[11] * d + r[15]) : (e = r[0], a = r[1], o = r[2], u = r[3], i = r[4], c = r[5], f = r[6], v = r[7], s = r[8], l = r[9], M = r[10], h = r[11], t[0] = e, t[1] = a, t[2] = o, t[3] = u, t[4] = i, t[5] = c, t[6] = f, t[7] = v, t[8] = s, t[9] = l, t[10] = M, t[11] = h, t[12] = e * m + i * y + s * d + r[12], t[13] = a * m + c * y + l * d + r[13], t[14] = o * m + f * y + M * d + r[14], t[15] = u * m + v * y + h * d + r[15]), t;\n        }\n\n        function h(t, r, n) {\n          var e = n[0],\n              a = n[1],\n              o = n[2];\n          return t[0] = r[0] * e, t[1] = r[1] * e, t[2] = r[2] * e, t[3] = r[3] * e, t[4] = r[4] * a, t[5] = r[5] * a, t[6] = r[6] * a, t[7] = r[7] * a, t[8] = r[8] * o, t[9] = r[9] * o, t[10] = r[10] * o, t[11] = r[11] * o, t[12] = r[12], t[13] = r[13], t[14] = r[14], t[15] = r[15], t;\n        }\n\n        function m(t, r, n) {\n          var e = Math.sin(n),\n              a = Math.cos(n),\n              o = r[4],\n              u = r[5],\n              i = r[6],\n              c = r[7],\n              f = r[8],\n              v = r[9],\n              s = r[10],\n              l = r[11];\n          return r !== t && (t[0] = r[0], t[1] = r[1], t[2] = r[2], t[3] = r[3], t[12] = r[12], t[13] = r[13], t[14] = r[14], t[15] = r[15]), t[4] = o * a + f * e, t[5] = u * a + v * e, t[6] = i * a + s * e, t[7] = c * a + l * e, t[8] = f * a - o * e, t[9] = v * a - u * e, t[10] = s * a - i * e, t[11] = l * a - c * e, t;\n        }\n\n        function y(t, r, n) {\n          var e = Math.sin(n),\n              a = Math.cos(n),\n              o = r[0],\n              u = r[1],\n              i = r[2],\n              c = r[3],\n              f = r[4],\n              v = r[5],\n              s = r[6],\n              l = r[7];\n          return r !== t && (t[8] = r[8], t[9] = r[9], t[10] = r[10], t[11] = r[11], t[12] = r[12], t[13] = r[13], t[14] = r[14], t[15] = r[15]), t[0] = o * a + f * e, t[1] = u * a + v * e, t[2] = i * a + s * e, t[3] = c * a + l * e, t[4] = f * a - o * e, t[5] = v * a - u * e, t[6] = s * a - i * e, t[7] = l * a - c * e, t;\n        }\n\n        function d(t, r, n, e, a) {\n          var o = 1 / Math.tan(r / 2),\n              u = 1 / (e - a);\n          return t[0] = o / n, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = o, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = (a + e) * u, t[11] = -1, t[12] = 0, t[13] = 0, t[14] = 2 * a * e * u, t[15] = 0, t;\n        }\n\n        function p(t, r, n, e, a, o, u) {\n          var i = 1 / (r - n),\n              c = 1 / (e - a),\n              f = 1 / (o - u);\n          return t[0] = -2 * i, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * c, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * f, t[11] = 0, t[12] = (r + n) * i, t[13] = (a + e) * c, t[14] = (u + o) * f, t[15] = 1, t;\n        }\n\n        var w = (t(), n(), {\n          vec3: {\n            transformMat3: r\n          },\n          vec4: {\n            transformMat4: e\n          },\n          mat2: {\n            create: a,\n            rotate: o,\n            scale: u\n          },\n          mat3: {\n            create: i,\n            fromRotation: c\n          },\n          mat4: {\n            create: f,\n            identity: v,\n            translate: M,\n            scale: h,\n            multiply: l,\n            perspective: d,\n            rotateX: m,\n            rotateZ: y,\n            invert: s,\n            ortho: p\n          }\n        });\n        return w;\n      });\n    }, {}],\n    2: [function (_dereq_, module, exports) {\n      !function (t, e) {\n        \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define(e) : t.ShelfPack = e();\n      }(this, function () {\n        function t(t, e, i) {\n          i = i || {}, this.w = t || 64, this.h = e || 64, this.autoResize = !!i.autoResize, this.shelves = [], this.freebins = [], this.stats = {}, this.bins = {}, this.maxId = 0;\n        }\n\n        function e(t, e, i) {\n          this.x = 0, this.y = t, this.w = this.free = e, this.h = i;\n        }\n\n        function i(t, e, i, s, h, n, r) {\n          this.id = t, this.x = e, this.y = i, this.w = s, this.h = h, this.maxw = n || s, this.maxh = r || h, this.refcount = 0;\n        }\n\n        return t.prototype.pack = function (t, e) {\n          t = [].concat(t), e = e || {};\n\n          for (var i, s, h, n, r = [], f = 0; f < t.length; f++) {\n            if (i = t[f].w || t[f].width, s = t[f].h || t[f].height, h = t[f].id, i && s) {\n              if (n = this.packOne(i, s, h), !n) continue;\n              e.inPlace && (t[f].x = n.x, t[f].y = n.y, t[f].id = n.id), r.push(n);\n            }\n          }\n\n          if (this.shelves.length > 0) {\n            for (var o = 0, a = 0, u = 0; u < this.shelves.length; u++) {\n              var l = this.shelves[u];\n              a += l.h, o = Math.max(l.w - l.free, o);\n            }\n\n            this.resize(o, a);\n          }\n\n          return r;\n        }, t.prototype.packOne = function (t, i, s) {\n          var h,\n              n,\n              r,\n              f,\n              o = {\n            freebin: -1,\n            shelf: -1,\n            waste: 1 / 0\n          },\n              a = 0;\n\n          if (\"string\" == typeof s || \"number\" == typeof s) {\n            if (h = this.getBin(s)) return this.ref(h), h;\n            \"number\" == typeof s && (this.maxId = Math.max(s, this.maxId));\n          } else s = ++this.maxId;\n\n          for (f = 0; f < this.freebins.length; f++) {\n            if (h = this.freebins[f], i === h.maxh && t === h.maxw) return this.allocFreebin(f, t, i, s);\n            i > h.maxh || t > h.maxw || i <= h.maxh && t <= h.maxw && (r = h.maxw * h.maxh - t * i, r < o.waste && (o.waste = r, o.freebin = f));\n          }\n\n          for (f = 0; f < this.shelves.length; f++) {\n            if (n = this.shelves[f], a += n.h, !(t > n.free)) {\n              if (i === n.h) return this.allocShelf(f, t, i, s);\n              i > n.h || i < n.h && (r = (n.h - i) * t, r < o.waste && (o.freebin = -1, o.waste = r, o.shelf = f));\n            }\n          }\n\n          if (o.freebin !== -1) return this.allocFreebin(o.freebin, t, i, s);\n          if (o.shelf !== -1) return this.allocShelf(o.shelf, t, i, s);\n          if (i <= this.h - a && t <= this.w) return n = new e(a, this.w, i), this.allocShelf(this.shelves.push(n) - 1, t, i, s);\n\n          if (this.autoResize) {\n            var u, l, c, p;\n            return u = l = this.h, c = p = this.w, (c <= u || t > c) && (p = 2 * Math.max(t, c)), (u < c || i > u) && (l = 2 * Math.max(i, u)), this.resize(p, l), this.packOne(t, i, s);\n          }\n\n          return null;\n        }, t.prototype.allocFreebin = function (t, e, i, s) {\n          var h = this.freebins.splice(t, 1)[0];\n          return h.id = s, h.w = e, h.h = i, h.refcount = 0, this.bins[s] = h, this.ref(h), h;\n        }, t.prototype.allocShelf = function (t, e, i, s) {\n          var h = this.shelves[t],\n              n = h.alloc(e, i, s);\n          return this.bins[s] = n, this.ref(n), n;\n        }, t.prototype.getBin = function (t) {\n          return this.bins[t];\n        }, t.prototype.ref = function (t) {\n          if (1 === ++t.refcount) {\n            var e = t.h;\n            this.stats[e] = (0 | this.stats[e]) + 1;\n          }\n\n          return t.refcount;\n        }, t.prototype.unref = function (t) {\n          return 0 === t.refcount ? 0 : (0 === --t.refcount && (this.stats[t.h]--, delete this.bins[t.id], this.freebins.push(t)), t.refcount);\n        }, t.prototype.clear = function () {\n          this.shelves = [], this.freebins = [], this.stats = {}, this.bins = {}, this.maxId = 0;\n        }, t.prototype.resize = function (t, e) {\n          this.w = t, this.h = e;\n\n          for (var i = 0; i < this.shelves.length; i++) {\n            this.shelves[i].resize(t);\n          }\n\n          return !0;\n        }, e.prototype.alloc = function (t, e, s) {\n          if (t > this.free || e > this.h) return null;\n          var h = this.x;\n          return this.x += t, this.free -= t, new i(s, h, this.y, t, e, t, this.h);\n        }, e.prototype.resize = function (t) {\n          return this.free += t - this.w, this.w = t, !0;\n        }, t;\n      });\n    }, {}],\n    3: [function (_dereq_, module, exports) {\n      function UnitBezier(t, i, e, r) {\n        this.cx = 3 * t, this.bx = 3 * (e - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * i, this.by = 3 * (r - i) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = r, this.p2x = e, this.p2y = r;\n      }\n\n      module.exports = UnitBezier, UnitBezier.prototype.sampleCurveX = function (t) {\n        return ((this.ax * t + this.bx) * t + this.cx) * t;\n      }, UnitBezier.prototype.sampleCurveY = function (t) {\n        return ((this.ay * t + this.by) * t + this.cy) * t;\n      }, UnitBezier.prototype.sampleCurveDerivativeX = function (t) {\n        return (3 * this.ax * t + 2 * this.bx) * t + this.cx;\n      }, UnitBezier.prototype.solveCurveX = function (t, i) {\n        \"undefined\" == typeof i && (i = 1e-6);\n        var e, r, s, h, n;\n\n        for (s = t, n = 0; n < 8; n++) {\n          if (h = this.sampleCurveX(s) - t, Math.abs(h) < i) return s;\n          var u = this.sampleCurveDerivativeX(s);\n          if (Math.abs(u) < 1e-6) break;\n          s -= h / u;\n        }\n\n        if (e = 0, r = 1, s = t, s < e) return e;\n        if (s > r) return r;\n\n        for (; e < r;) {\n          if (h = this.sampleCurveX(s), Math.abs(h - t) < i) return s;\n          t > h ? e = s : r = s, s = .5 * (r - e) + e;\n        }\n\n        return s;\n      }, UnitBezier.prototype.solve = function (t, i) {\n        return this.sampleCurveY(this.solveCurveX(t, i));\n      };\n    }, {}],\n    4: [function (_dereq_, module, exports) {\n      !function (e, t) {\n        \"object\" == typeof exports && \"undefined\" != typeof module ? t(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], t) : t(e.WhooTS = e.WhooTS || {});\n      }(this, function (e) {\n        function t(e, t, r, n, i, s) {\n          s = s || {};\n          var f = e + \"?\" + [\"bbox=\" + o(r, n, i), \"format=\" + (s.format || \"image/png\"), \"service=\" + (s.service || \"WMS\"), \"version=\" + (s.version || \"1.1.1\"), \"request=\" + (s.request || \"GetMap\"), \"srs=\" + (s.srs || \"EPSG:3857\"), \"width=\" + (s.width || 256), \"height=\" + (s.height || 256), \"layers=\" + t].join(\"&\");\n          return f;\n        }\n\n        function o(e, t, o) {\n          t = Math.pow(2, o) - t - 1;\n          var n = r(256 * e, 256 * t, o),\n              i = r(256 * (e + 1), 256 * (t + 1), o);\n          return n[0] + \",\" + n[1] + \",\" + i[0] + \",\" + i[1];\n        }\n\n        function r(e, t, o) {\n          var r = 2 * Math.PI * 6378137 / 256 / Math.pow(2, o),\n              n = e * r - 2 * Math.PI * 6378137 / 2,\n              i = t * r - 2 * Math.PI * 6378137 / 2;\n          return [n, i];\n        }\n\n        e.getURL = t, e.getTileBBox = o, e.getMercCoords = r, Object.defineProperty(e, \"__esModule\", {\n          value: !0\n        });\n      });\n    }, {}],\n    5: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function earcut(e, n, r) {\n        r = r || 2;\n        var t = n && n.length,\n            i = t ? n[0] * r : e.length,\n            x = linkedList(e, 0, i, r, !0),\n            a = [];\n        if (!x) return a;\n        var o, l, u, s, v, f, y;\n\n        if (t && (x = eliminateHoles(e, n, x, r)), e.length > 80 * r) {\n          o = u = e[0], l = s = e[1];\n\n          for (var d = r; d < i; d += r) {\n            v = e[d], f = e[d + 1], v < o && (o = v), f < l && (l = f), v > u && (u = v), f > s && (s = f);\n          }\n\n          y = Math.max(u - o, s - l);\n        }\n\n        return earcutLinked(x, a, r, o, l, y), a;\n      }\n\n      function linkedList(e, n, r, t, i) {\n        var x, a;\n        if (i === signedArea(e, n, r, t) > 0) for (x = n; x < r; x += t) {\n          a = insertNode(x, e[x], e[x + 1], a);\n        } else for (x = r - t; x >= n; x -= t) {\n          a = insertNode(x, e[x], e[x + 1], a);\n        }\n        return a && equals(a, a.next) && (removeNode(a), a = a.next), a;\n      }\n\n      function filterPoints(e, n) {\n        if (!e) return e;\n        n || (n = e);\n        var r,\n            t = e;\n\n        do {\n          if (r = !1, t.steiner || !equals(t, t.next) && 0 !== area(t.prev, t, t.next)) t = t.next;else {\n            if (removeNode(t), t = n = t.prev, t === t.next) return null;\n            r = !0;\n          }\n        } while (r || t !== n);\n\n        return n;\n      }\n\n      function earcutLinked(e, n, r, t, i, x, a) {\n        if (e) {\n          !a && x && indexCurve(e, t, i, x);\n\n          for (var o, l, u = e; e.prev !== e.next;) {\n            if (o = e.prev, l = e.next, x ? isEarHashed(e, t, i, x) : isEar(e)) n.push(o.i / r), n.push(e.i / r), n.push(l.i / r), removeNode(e), e = l.next, u = l.next;else if (e = l, e === u) {\n              a ? 1 === a ? (e = cureLocalIntersections(e, n, r), earcutLinked(e, n, r, t, i, x, 2)) : 2 === a && splitEarcut(e, n, r, t, i, x) : earcutLinked(filterPoints(e), n, r, t, i, x, 1);\n              break;\n            }\n          }\n        }\n      }\n\n      function isEar(e) {\n        var n = e.prev,\n            r = e,\n            t = e.next;\n        if (area(n, r, t) >= 0) return !1;\n\n        for (var i = e.next.next; i !== e.prev;) {\n          if (pointInTriangle(n.x, n.y, r.x, r.y, t.x, t.y, i.x, i.y) && area(i.prev, i, i.next) >= 0) return !1;\n          i = i.next;\n        }\n\n        return !0;\n      }\n\n      function isEarHashed(e, n, r, t) {\n        var i = e.prev,\n            x = e,\n            a = e.next;\n        if (area(i, x, a) >= 0) return !1;\n\n        for (var o = i.x < x.x ? i.x < a.x ? i.x : a.x : x.x < a.x ? x.x : a.x, l = i.y < x.y ? i.y < a.y ? i.y : a.y : x.y < a.y ? x.y : a.y, u = i.x > x.x ? i.x > a.x ? i.x : a.x : x.x > a.x ? x.x : a.x, s = i.y > x.y ? i.y > a.y ? i.y : a.y : x.y > a.y ? x.y : a.y, v = zOrder(o, l, n, r, t), f = zOrder(u, s, n, r, t), y = e.nextZ; y && y.z <= f;) {\n          if (y !== e.prev && y !== e.next && pointInTriangle(i.x, i.y, x.x, x.y, a.x, a.y, y.x, y.y) && area(y.prev, y, y.next) >= 0) return !1;\n          y = y.nextZ;\n        }\n\n        for (y = e.prevZ; y && y.z >= v;) {\n          if (y !== e.prev && y !== e.next && pointInTriangle(i.x, i.y, x.x, x.y, a.x, a.y, y.x, y.y) && area(y.prev, y, y.next) >= 0) return !1;\n          y = y.prevZ;\n        }\n\n        return !0;\n      }\n\n      function cureLocalIntersections(e, n, r) {\n        var t = e;\n\n        do {\n          var i = t.prev,\n              x = t.next.next;\n          !equals(i, x) && intersects(i, t, t.next, x) && locallyInside(i, x) && locallyInside(x, i) && (n.push(i.i / r), n.push(t.i / r), n.push(x.i / r), removeNode(t), removeNode(t.next), t = e = x), t = t.next;\n        } while (t !== e);\n\n        return t;\n      }\n\n      function splitEarcut(e, n, r, t, i, x) {\n        var a = e;\n\n        do {\n          for (var o = a.next.next; o !== a.prev;) {\n            if (a.i !== o.i && isValidDiagonal(a, o)) {\n              var l = splitPolygon(a, o);\n              return a = filterPoints(a, a.next), l = filterPoints(l, l.next), earcutLinked(a, n, r, t, i, x), void earcutLinked(l, n, r, t, i, x);\n            }\n\n            o = o.next;\n          }\n\n          a = a.next;\n        } while (a !== e);\n      }\n\n      function eliminateHoles(e, n, r, t) {\n        var i,\n            x,\n            a,\n            o,\n            l,\n            u = [];\n\n        for (i = 0, x = n.length; i < x; i++) {\n          a = n[i] * t, o = i < x - 1 ? n[i + 1] * t : e.length, l = linkedList(e, a, o, t, !1), l === l.next && (l.steiner = !0), u.push(getLeftmost(l));\n        }\n\n        for (u.sort(compareX), i = 0; i < u.length; i++) {\n          eliminateHole(u[i], r), r = filterPoints(r, r.next);\n        }\n\n        return r;\n      }\n\n      function compareX(e, n) {\n        return e.x - n.x;\n      }\n\n      function eliminateHole(e, n) {\n        if (n = findHoleBridge(e, n)) {\n          var r = splitPolygon(n, e);\n          filterPoints(r, r.next);\n        }\n      }\n\n      function findHoleBridge(e, n) {\n        var r,\n            t = n,\n            i = e.x,\n            x = e.y,\n            a = -(1 / 0);\n\n        do {\n          if (x <= t.y && x >= t.next.y) {\n            var o = t.x + (x - t.y) * (t.next.x - t.x) / (t.next.y - t.y);\n\n            if (o <= i && o > a) {\n              if (a = o, o === i) {\n                if (x === t.y) return t;\n                if (x === t.next.y) return t.next;\n              }\n\n              r = t.x < t.next.x ? t : t.next;\n            }\n          }\n\n          t = t.next;\n        } while (t !== n);\n\n        if (!r) return null;\n        if (i === a) return r.prev;\n        var l,\n            u = r,\n            s = r.x,\n            v = r.y,\n            f = 1 / 0;\n\n        for (t = r.next; t !== u;) {\n          i >= t.x && t.x >= s && pointInTriangle(x < v ? i : a, x, s, v, x < v ? a : i, x, t.x, t.y) && (l = Math.abs(x - t.y) / (i - t.x), (l < f || l === f && t.x > r.x) && locallyInside(t, e) && (r = t, f = l)), t = t.next;\n        }\n\n        return r;\n      }\n\n      function indexCurve(e, n, r, t) {\n        var i = e;\n\n        do {\n          null === i.z && (i.z = zOrder(i.x, i.y, n, r, t)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next;\n        } while (i !== e);\n\n        i.prevZ.nextZ = null, i.prevZ = null, sortLinked(i);\n      }\n\n      function sortLinked(e) {\n        var n,\n            r,\n            t,\n            i,\n            x,\n            a,\n            o,\n            l,\n            u = 1;\n\n        do {\n          for (r = e, e = null, x = null, a = 0; r;) {\n            for (a++, t = r, o = 0, n = 0; n < u && (o++, t = t.nextZ, t); n++) {\n              ;\n            }\n\n            for (l = u; o > 0 || l > 0 && t;) {\n              0 === o ? (i = t, t = t.nextZ, l--) : 0 !== l && t ? r.z <= t.z ? (i = r, r = r.nextZ, o--) : (i = t, t = t.nextZ, l--) : (i = r, r = r.nextZ, o--), x ? x.nextZ = i : e = i, i.prevZ = x, x = i;\n            }\n\n            r = t;\n          }\n\n          x.nextZ = null, u *= 2;\n        } while (a > 1);\n\n        return e;\n      }\n\n      function zOrder(e, n, r, t, i) {\n        return e = 32767 * (e - r) / i, n = 32767 * (n - t) / i, e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2), e = 1431655765 & (e | e << 1), n = 16711935 & (n | n << 8), n = 252645135 & (n | n << 4), n = 858993459 & (n | n << 2), n = 1431655765 & (n | n << 1), e | n << 1;\n      }\n\n      function getLeftmost(e) {\n        var n = e,\n            r = e;\n\n        do {\n          n.x < r.x && (r = n), n = n.next;\n        } while (n !== e);\n\n        return r;\n      }\n\n      function pointInTriangle(e, n, r, t, i, x, a, o) {\n        return (i - a) * (n - o) - (e - a) * (x - o) >= 0 && (e - a) * (t - o) - (r - a) * (n - o) >= 0 && (r - a) * (x - o) - (i - a) * (t - o) >= 0;\n      }\n\n      function isValidDiagonal(e, n) {\n        return e.next.i !== n.i && e.prev.i !== n.i && !intersectsPolygon(e, n) && locallyInside(e, n) && locallyInside(n, e) && middleInside(e, n);\n      }\n\n      function area(e, n, r) {\n        return (n.y - e.y) * (r.x - n.x) - (n.x - e.x) * (r.y - n.y);\n      }\n\n      function equals(e, n) {\n        return e.x === n.x && e.y === n.y;\n      }\n\n      function intersects(e, n, r, t) {\n        return !!(equals(e, n) && equals(r, t) || equals(e, t) && equals(r, n)) || area(e, n, r) > 0 != area(e, n, t) > 0 && area(r, t, e) > 0 != area(r, t, n) > 0;\n      }\n\n      function intersectsPolygon(e, n) {\n        var r = e;\n\n        do {\n          if (r.i !== e.i && r.next.i !== e.i && r.i !== n.i && r.next.i !== n.i && intersects(r, r.next, e, n)) return !0;\n          r = r.next;\n        } while (r !== e);\n\n        return !1;\n      }\n\n      function locallyInside(e, n) {\n        return area(e.prev, e, e.next) < 0 ? area(e, n, e.next) >= 0 && area(e, e.prev, n) >= 0 : area(e, n, e.prev) < 0 || area(e, e.next, n) < 0;\n      }\n\n      function middleInside(e, n) {\n        var r = e,\n            t = !1,\n            i = (e.x + n.x) / 2,\n            x = (e.y + n.y) / 2;\n\n        do {\n          r.y > x != r.next.y > x && i < (r.next.x - r.x) * (x - r.y) / (r.next.y - r.y) + r.x && (t = !t), r = r.next;\n        } while (r !== e);\n\n        return t;\n      }\n\n      function splitPolygon(e, n) {\n        var r = new Node(e.i, e.x, e.y),\n            t = new Node(n.i, n.x, n.y),\n            i = e.next,\n            x = n.prev;\n        return e.next = n, n.prev = e, r.next = i, i.prev = r, t.next = r, r.prev = t, x.next = t, t.prev = x, t;\n      }\n\n      function insertNode(e, n, r, t) {\n        var i = new Node(e, n, r);\n        return t ? (i.next = t.next, i.prev = t, t.next.prev = i, t.next = i) : (i.prev = i, i.next = i), i;\n      }\n\n      function removeNode(e) {\n        e.next.prev = e.prev, e.prev.next = e.next, e.prevZ && (e.prevZ.nextZ = e.nextZ), e.nextZ && (e.nextZ.prevZ = e.prevZ);\n      }\n\n      function Node(e, n, r) {\n        this.i = e, this.x = n, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;\n      }\n\n      function signedArea(e, n, r, t) {\n        for (var i = 0, x = n, a = r - t; x < r; x += t) {\n          i += (e[a] - e[x]) * (e[x + 1] + e[a + 1]), a = x;\n        }\n\n        return i;\n      }\n\n      module.exports = earcut, earcut.deviation = function (e, n, r, t) {\n        var i = n && n.length,\n            x = i ? n[0] * r : e.length,\n            a = Math.abs(signedArea(e, 0, x, r));\n        if (i) for (var o = 0, l = n.length; o < l; o++) {\n          var u = n[o] * r,\n              s = o < l - 1 ? n[o + 1] * r : e.length;\n          a -= Math.abs(signedArea(e, u, s, r));\n        }\n        var v = 0;\n\n        for (o = 0; o < t.length; o += 3) {\n          var f = t[o] * r,\n              y = t[o + 1] * r,\n              d = t[o + 2] * r;\n          v += Math.abs((e[f] - e[d]) * (e[y + 1] - e[f + 1]) - (e[f] - e[y]) * (e[d + 1] - e[f + 1]));\n        }\n\n        return 0 === a && 0 === v ? 0 : Math.abs((v - a) / a);\n      }, earcut.flatten = function (e) {\n        for (var n = e[0][0].length, r = {\n          vertices: [],\n          holes: [],\n          dimensions: n\n        }, t = 0, i = 0; i < e.length; i++) {\n          for (var x = 0; x < e[i].length; x++) {\n            for (var a = 0; a < n; a++) {\n              r.vertices.push(e[i][x][a]);\n            }\n          }\n\n          i > 0 && (t += e[i - 1].length, r.holes.push(t));\n        }\n\n        return r;\n      };\n    }, {}],\n    6: [function (_dereq_, module, exports) {\n      function geometry(r) {\n        if (\"Polygon\" === r.type) return polygonArea(r.coordinates);\n\n        if (\"MultiPolygon\" === r.type) {\n          for (var e = 0, n = 0; n < r.coordinates.length; n++) {\n            e += polygonArea(r.coordinates[n]);\n          }\n\n          return e;\n        }\n\n        return null;\n      }\n\n      function polygonArea(r) {\n        var e = 0;\n\n        if (r && r.length > 0) {\n          e += Math.abs(ringArea(r[0]));\n\n          for (var n = 1; n < r.length; n++) {\n            e -= Math.abs(ringArea(r[n]));\n          }\n        }\n\n        return e;\n      }\n\n      function ringArea(r) {\n        var e = 0;\n\n        if (r.length > 2) {\n          for (var n, t, o = 0; o < r.length - 1; o++) {\n            n = r[o], t = r[o + 1], e += rad(t[0] - n[0]) * (2 + Math.sin(rad(n[1])) + Math.sin(rad(t[1])));\n          }\n\n          e = e * wgs84.RADIUS * wgs84.RADIUS / 2;\n        }\n\n        return e;\n      }\n\n      function rad(r) {\n        return r * Math.PI / 180;\n      }\n\n      var wgs84 = _dereq_(\"wgs84\");\n\n      module.exports.geometry = geometry, module.exports.ring = ringArea;\n    }, {\n      \"wgs84\": 41\n    }],\n    7: [function (_dereq_, module, exports) {\n      function rewind(r, e) {\n        switch (r && r.type || null) {\n          case \"FeatureCollection\":\n            return r.features = r.features.map(curryOuter(rewind, e)), r;\n\n          case \"Feature\":\n            return r.geometry = rewind(r.geometry, e), r;\n\n          case \"Polygon\":\n          case \"MultiPolygon\":\n            return correct(r, e);\n\n          default:\n            return r;\n        }\n      }\n\n      function curryOuter(r, e) {\n        return function (n) {\n          return r(n, e);\n        };\n      }\n\n      function correct(r, e) {\n        return \"Polygon\" === r.type ? r.coordinates = correctRings(r.coordinates, e) : \"MultiPolygon\" === r.type && (r.coordinates = r.coordinates.map(curryOuter(correctRings, e))), r;\n      }\n\n      function correctRings(r, e) {\n        e = !!e, r[0] = wind(r[0], !e);\n\n        for (var n = 1; n < r.length; n++) {\n          r[n] = wind(r[n], e);\n        }\n\n        return r;\n      }\n\n      function wind(r, e) {\n        return cw(r) === e ? r : r.reverse();\n      }\n\n      function cw(r) {\n        return geojsonArea.ring(r) >= 0;\n      }\n\n      var geojsonArea = _dereq_(\"geojson-area\");\n\n      module.exports = rewind;\n    }, {\n      \"geojson-area\": 6\n    }],\n    8: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function clip(e, r, t, n, u, i, l, s) {\n        if (t /= r, n /= r, l >= t && s <= n) return e;\n        if (l > n || s < t) return null;\n\n        for (var h = [], p = 0; p < e.length; p++) {\n          var a,\n              c,\n              o = e[p],\n              f = o.geometry,\n              g = o.type;\n          if (a = o.min[u], c = o.max[u], a >= t && c <= n) h.push(o);else if (!(a > n || c < t)) {\n            var v = 1 === g ? clipPoints(f, t, n, u) : clipGeometry(f, t, n, u, i, 3 === g);\n            v.length && h.push(createFeature(o.tags, g, v, o.id));\n          }\n        }\n\n        return h.length ? h : null;\n      }\n\n      function clipPoints(e, r, t, n) {\n        for (var u = [], i = 0; i < e.length; i++) {\n          var l = e[i],\n              s = l[n];\n          s >= r && s <= t && u.push(l);\n        }\n\n        return u;\n      }\n\n      function clipGeometry(e, r, t, n, u, i) {\n        for (var l = [], s = 0; s < e.length; s++) {\n          var h,\n              p,\n              a,\n              c = 0,\n              o = 0,\n              f = null,\n              g = e[s],\n              v = g.area,\n              m = g.dist,\n              w = g.outer,\n              S = g.length,\n              d = [];\n\n          for (p = 0; p < S - 1; p++) {\n            h = f || g[p], f = g[p + 1], c = o || h[n], o = f[n], c < r ? o > t ? (d.push(u(h, f, r), u(h, f, t)), i || (d = newSlice(l, d, v, m, w))) : o >= r && d.push(u(h, f, r)) : c > t ? o < r ? (d.push(u(h, f, t), u(h, f, r)), i || (d = newSlice(l, d, v, m, w))) : o <= t && d.push(u(h, f, t)) : (d.push(h), o < r ? (d.push(u(h, f, r)), i || (d = newSlice(l, d, v, m, w))) : o > t && (d.push(u(h, f, t)), i || (d = newSlice(l, d, v, m, w))));\n          }\n\n          h = g[S - 1], c = h[n], c >= r && c <= t && d.push(h), a = d[d.length - 1], i && a && (d[0][0] !== a[0] || d[0][1] !== a[1]) && d.push(d[0]), newSlice(l, d, v, m, w);\n        }\n\n        return l;\n      }\n\n      function newSlice(e, r, t, n, u) {\n        return r.length && (r.area = t, r.dist = n, void 0 !== u && (r.outer = u), e.push(r)), [];\n      }\n\n      module.exports = clip;\n\n      var createFeature = _dereq_(\"./feature\");\n    }, {\n      \"./feature\": 10\n    }],\n    9: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function convert(e, t) {\n        var r = [];\n        if (\"FeatureCollection\" === e.type) for (var o = 0; o < e.features.length; o++) {\n          convertFeature(r, e.features[o], t);\n        } else \"Feature\" === e.type ? convertFeature(r, e, t) : convertFeature(r, {\n          geometry: e\n        }, t);\n        return r;\n      }\n\n      function convertFeature(e, t, r) {\n        if (null !== t.geometry) {\n          var o,\n              a,\n              i,\n              n,\n              u = t.geometry,\n              c = u.type,\n              l = u.coordinates,\n              s = t.properties,\n              p = t.id;\n          if (\"Point\" === c) e.push(createFeature(s, 1, [projectPoint(l)], p));else if (\"MultiPoint\" === c) e.push(createFeature(s, 1, project(l), p));else if (\"LineString\" === c) e.push(createFeature(s, 2, [project(l, r)], p));else if (\"MultiLineString\" === c || \"Polygon\" === c) {\n            for (i = [], o = 0; o < l.length; o++) {\n              n = project(l[o], r), \"Polygon\" === c && (n.outer = 0 === o), i.push(n);\n            }\n\n            e.push(createFeature(s, \"Polygon\" === c ? 3 : 2, i, p));\n          } else if (\"MultiPolygon\" === c) {\n            for (i = [], o = 0; o < l.length; o++) {\n              for (a = 0; a < l[o].length; a++) {\n                n = project(l[o][a], r), n.outer = 0 === a, i.push(n);\n              }\n            }\n\n            e.push(createFeature(s, 3, i, p));\n          } else {\n            if (\"GeometryCollection\" !== c) throw new Error(\"Input data is not a valid GeoJSON object.\");\n\n            for (o = 0; o < u.geometries.length; o++) {\n              convertFeature(e, {\n                geometry: u.geometries[o],\n                properties: s\n              }, r);\n            }\n          }\n        }\n      }\n\n      function project(e, t) {\n        for (var r = [], o = 0; o < e.length; o++) {\n          r.push(projectPoint(e[o]));\n        }\n\n        return t && (simplify(r, t), calcSize(r)), r;\n      }\n\n      function projectPoint(e) {\n        var t = Math.sin(e[1] * Math.PI / 180),\n            r = e[0] / 360 + .5,\n            o = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n        return o = o < 0 ? 0 : o > 1 ? 1 : o, [r, o, 0];\n      }\n\n      function calcSize(e) {\n        for (var t, r, o = 0, a = 0, i = 0; i < e.length - 1; i++) {\n          t = r || e[i], r = e[i + 1], o += t[0] * r[1] - r[0] * t[1], a += Math.abs(r[0] - t[0]) + Math.abs(r[1] - t[1]);\n        }\n\n        e.area = Math.abs(o / 2), e.dist = a;\n      }\n\n      module.exports = convert;\n\n      var simplify = _dereq_(\"./simplify\"),\n          createFeature = _dereq_(\"./feature\");\n    }, {\n      \"./feature\": 10,\n      \"./simplify\": 12\n    }],\n    10: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createFeature(e, t, a, n) {\n        var r = {\n          id: n || null,\n          type: t,\n          geometry: a,\n          tags: e || null,\n          min: [1 / 0, 1 / 0],\n          max: [-(1 / 0), -(1 / 0)]\n        };\n        return calcBBox(r), r;\n      }\n\n      function calcBBox(e) {\n        var t = e.geometry,\n            a = e.min,\n            n = e.max;\n        if (1 === e.type) calcRingBBox(a, n, t);else for (var r = 0; r < t.length; r++) {\n          calcRingBBox(a, n, t[r]);\n        }\n        return e;\n      }\n\n      function calcRingBBox(e, t, a) {\n        for (var n, r = 0; r < a.length; r++) {\n          n = a[r], e[0] = Math.min(n[0], e[0]), t[0] = Math.max(n[0], t[0]), e[1] = Math.min(n[1], e[1]), t[1] = Math.max(n[1], t[1]);\n        }\n      }\n\n      module.exports = createFeature;\n    }, {}],\n    11: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function geojsonvt(e, t) {\n        return new GeoJSONVT(e, t);\n      }\n\n      function GeoJSONVT(e, t) {\n        t = this.options = extend(Object.create(this.options), t);\n        var i = t.debug;\n        i && console.time(\"preprocess data\");\n        var o = 1 << t.maxZoom,\n            n = convert(e, t.tolerance / (o * t.extent));\n        this.tiles = {}, this.tileCoords = [], i && (console.timeEnd(\"preprocess data\"), console.log(\"index: maxZoom: %d, maxPoints: %d\", t.indexMaxZoom, t.indexMaxPoints), console.time(\"generate tiles\"), this.stats = {}, this.total = 0), n = wrap(n, t.buffer / t.extent, intersectX), n.length && this.splitTile(n, 0, 0, 0), i && (n.length && console.log(\"features: %d, points: %d\", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd(\"generate tiles\"), console.log(\"tiles generated:\", this.total, JSON.stringify(this.stats)));\n      }\n\n      function toID(e, t, i) {\n        return 32 * ((1 << e) * i + t) + e;\n      }\n\n      function intersectX(e, t, i) {\n        return [i, (i - e[0]) * (t[1] - e[1]) / (t[0] - e[0]) + e[1], 1];\n      }\n\n      function intersectY(e, t, i) {\n        return [(i - e[1]) * (t[0] - e[0]) / (t[1] - e[1]) + e[0], i, 1];\n      }\n\n      function extend(e, t) {\n        for (var i in t) {\n          e[i] = t[i];\n        }\n\n        return e;\n      }\n\n      function isClippedSquare(e, t, i) {\n        var o = e.source;\n        if (1 !== o.length) return !1;\n        var n = o[0];\n        if (3 !== n.type || n.geometry.length > 1) return !1;\n        var r = n.geometry[0].length;\n        if (5 !== r) return !1;\n\n        for (var s = 0; s < r; s++) {\n          var l = transform.point(n.geometry[0][s], t, e.z2, e.x, e.y);\n          if (l[0] !== -i && l[0] !== t + i || l[1] !== -i && l[1] !== t + i) return !1;\n        }\n\n        return !0;\n      }\n\n      module.exports = geojsonvt;\n\n      var convert = _dereq_(\"./convert\"),\n          transform = _dereq_(\"./transform\"),\n          clip = _dereq_(\"./clip\"),\n          wrap = _dereq_(\"./wrap\"),\n          createTile = _dereq_(\"./tile\");\n\n      GeoJSONVT.prototype.options = {\n        maxZoom: 14,\n        indexMaxZoom: 5,\n        indexMaxPoints: 1e5,\n        solidChildren: !1,\n        tolerance: 3,\n        extent: 4096,\n        buffer: 64,\n        debug: 0\n      }, GeoJSONVT.prototype.splitTile = function (e, t, i, o, n, r, s) {\n        for (var l = [e, t, i, o], a = this.options, u = a.debug, c = null; l.length;) {\n          o = l.pop(), i = l.pop(), t = l.pop(), e = l.pop();\n          var p = 1 << t,\n              d = toID(t, i, o),\n              m = this.tiles[d],\n              f = t === a.maxZoom ? 0 : a.tolerance / (p * a.extent);\n\n          if (!m && (u > 1 && console.time(\"creation\"), m = this.tiles[d] = createTile(e, p, i, o, f, t === a.maxZoom), this.tileCoords.push({\n            z: t,\n            x: i,\n            y: o\n          }), u)) {\n            u > 1 && (console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\", t, i, o, m.numFeatures, m.numPoints, m.numSimplified), console.timeEnd(\"creation\"));\n            var h = \"z\" + t;\n            this.stats[h] = (this.stats[h] || 0) + 1, this.total++;\n          }\n\n          if (m.source = e, n) {\n            if (t === a.maxZoom || t === n) continue;\n            var x = 1 << n - t;\n            if (i !== Math.floor(r / x) || o !== Math.floor(s / x)) continue;\n          } else if (t === a.indexMaxZoom || m.numPoints <= a.indexMaxPoints) continue;\n\n          if (a.solidChildren || !isClippedSquare(m, a.extent, a.buffer)) {\n            m.source = null, u > 1 && console.time(\"clipping\");\n            var g,\n                v,\n                M,\n                T,\n                b,\n                y,\n                S = .5 * a.buffer / a.extent,\n                Z = .5 - S,\n                q = .5 + S,\n                w = 1 + S;\n            g = v = M = T = null, b = clip(e, p, i - S, i + q, 0, intersectX, m.min[0], m.max[0]), y = clip(e, p, i + Z, i + w, 0, intersectX, m.min[0], m.max[0]), b && (g = clip(b, p, o - S, o + q, 1, intersectY, m.min[1], m.max[1]), v = clip(b, p, o + Z, o + w, 1, intersectY, m.min[1], m.max[1])), y && (M = clip(y, p, o - S, o + q, 1, intersectY, m.min[1], m.max[1]), T = clip(y, p, o + Z, o + w, 1, intersectY, m.min[1], m.max[1])), u > 1 && console.timeEnd(\"clipping\"), e.length && (l.push(g || [], t + 1, 2 * i, 2 * o), l.push(v || [], t + 1, 2 * i, 2 * o + 1), l.push(M || [], t + 1, 2 * i + 1, 2 * o), l.push(T || [], t + 1, 2 * i + 1, 2 * o + 1));\n          } else n && (c = t);\n        }\n\n        return c;\n      }, GeoJSONVT.prototype.getTile = function (e, t, i) {\n        var o = this.options,\n            n = o.extent,\n            r = o.debug,\n            s = 1 << e;\n        t = (t % s + s) % s;\n        var l = toID(e, t, i);\n        if (this.tiles[l]) return transform.tile(this.tiles[l], n);\n        r > 1 && console.log(\"drilling down to z%d-%d-%d\", e, t, i);\n\n        for (var a, u = e, c = t, p = i; !a && u > 0;) {\n          u--, c = Math.floor(c / 2), p = Math.floor(p / 2), a = this.tiles[toID(u, c, p)];\n        }\n\n        if (!a || !a.source) return null;\n        if (r > 1 && console.log(\"found parent tile z%d-%d-%d\", u, c, p), isClippedSquare(a, n, o.buffer)) return transform.tile(a, n);\n        r > 1 && console.time(\"drilling down\");\n        var d = this.splitTile(a.source, u, c, p, e, t, i);\n\n        if (r > 1 && console.timeEnd(\"drilling down\"), null !== d) {\n          var m = 1 << e - d;\n          l = toID(d, Math.floor(t / m), Math.floor(i / m));\n        }\n\n        return this.tiles[l] ? transform.tile(this.tiles[l], n) : null;\n      };\n    }, {\n      \"./clip\": 8,\n      \"./convert\": 9,\n      \"./tile\": 13,\n      \"./transform\": 14,\n      \"./wrap\": 15\n    }],\n    12: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function simplify(t, i) {\n        var e,\n            p,\n            r,\n            s,\n            o = i * i,\n            f = t.length,\n            u = 0,\n            n = f - 1,\n            g = [];\n\n        for (t[u][2] = 1, t[n][2] = 1; n;) {\n          for (p = 0, e = u + 1; e < n; e++) {\n            r = getSqSegDist(t[e], t[u], t[n]), r > p && (s = e, p = r);\n          }\n\n          p > o ? (t[s][2] = p, g.push(u), g.push(s), u = s) : (n = g.pop(), u = g.pop());\n        }\n      }\n\n      function getSqSegDist(t, i, e) {\n        var p = i[0],\n            r = i[1],\n            s = e[0],\n            o = e[1],\n            f = t[0],\n            u = t[1],\n            n = s - p,\n            g = o - r;\n\n        if (0 !== n || 0 !== g) {\n          var l = ((f - p) * n + (u - r) * g) / (n * n + g * g);\n          l > 1 ? (p = s, r = o) : l > 0 && (p += n * l, r += g * l);\n        }\n\n        return n = f - p, g = u - r, n * n + g * g;\n      }\n\n      module.exports = simplify;\n    }, {}],\n    13: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createTile(e, n, r, i, t, u) {\n        for (var a = {\n          features: [],\n          numPoints: 0,\n          numSimplified: 0,\n          numFeatures: 0,\n          source: null,\n          x: r,\n          y: i,\n          z2: n,\n          transformed: !1,\n          min: [2, 1],\n          max: [-1, 0]\n        }, m = 0; m < e.length; m++) {\n          a.numFeatures++, addFeature(a, e[m], t, u);\n          var s = e[m].min,\n              l = e[m].max;\n          s[0] < a.min[0] && (a.min[0] = s[0]), s[1] < a.min[1] && (a.min[1] = s[1]), l[0] > a.max[0] && (a.max[0] = l[0]), l[1] > a.max[1] && (a.max[1] = l[1]);\n        }\n\n        return a;\n      }\n\n      function addFeature(e, n, r, i) {\n        var t,\n            u,\n            a,\n            m,\n            s = n.geometry,\n            l = n.type,\n            o = [],\n            f = r * r;\n        if (1 === l) for (t = 0; t < s.length; t++) {\n          o.push(s[t]), e.numPoints++, e.numSimplified++;\n        } else for (t = 0; t < s.length; t++) {\n          if (a = s[t], i || !(2 === l && a.dist < r || 3 === l && a.area < f)) {\n            var d = [];\n\n            for (u = 0; u < a.length; u++) {\n              m = a[u], (i || m[2] > f) && (d.push(m), e.numSimplified++), e.numPoints++;\n            }\n\n            3 === l && rewind(d, a.outer), o.push(d);\n          } else e.numPoints += a.length;\n        }\n\n        if (o.length) {\n          var g = {\n            geometry: o,\n            type: l,\n            tags: n.tags || null\n          };\n          null !== n.id && (g.id = n.id), e.features.push(g);\n        }\n      }\n\n      function rewind(e, n) {\n        var r = signedArea(e);\n        r < 0 === n && e.reverse();\n      }\n\n      function signedArea(e) {\n        for (var n, r, i = 0, t = 0, u = e.length, a = u - 1; t < u; a = t++) {\n          n = e[t], r = e[a], i += (r[0] - n[0]) * (n[1] + r[1]);\n        }\n\n        return i;\n      }\n\n      module.exports = createTile;\n    }, {}],\n    14: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function transformTile(r, t) {\n        if (r.transformed) return r;\n        var n,\n            e,\n            o,\n            f = r.z2,\n            a = r.x,\n            s = r.y;\n\n        for (n = 0; n < r.features.length; n++) {\n          var i = r.features[n],\n              u = i.geometry,\n              m = i.type;\n          if (1 === m) for (e = 0; e < u.length; e++) {\n            u[e] = transformPoint(u[e], t, f, a, s);\n          } else for (e = 0; e < u.length; e++) {\n            var l = u[e];\n\n            for (o = 0; o < l.length; o++) {\n              l[o] = transformPoint(l[o], t, f, a, s);\n            }\n          }\n        }\n\n        return r.transformed = !0, r;\n      }\n\n      function transformPoint(r, t, n, e, o) {\n        var f = Math.round(t * (r[0] * n - e)),\n            a = Math.round(t * (r[1] * n - o));\n        return [f, a];\n      }\n\n      exports.tile = transformTile, exports.point = transformPoint;\n    }, {}],\n    15: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function wrap(r, e, t) {\n        var o = r,\n            a = clip(r, 1, -1 - e, e, 0, t, -1, 2),\n            s = clip(r, 1, 1 - e, 2 + e, 0, t, -1, 2);\n        return (a || s) && (o = clip(r, 1, -e, 1 + e, 0, t, -1, 2) || [], a && (o = shiftFeatureCoords(a, 1).concat(o)), s && (o = o.concat(shiftFeatureCoords(s, -1)))), o;\n      }\n\n      function shiftFeatureCoords(r, e) {\n        for (var t = [], o = 0; o < r.length; o++) {\n          var a,\n              s = r[o],\n              i = s.type;\n          if (1 === i) a = shiftCoords(s.geometry, e);else {\n            a = [];\n\n            for (var u = 0; u < s.geometry.length; u++) {\n              a.push(shiftCoords(s.geometry[u], e));\n            }\n          }\n          t.push(createFeature(s.tags, i, a, s.id));\n        }\n\n        return t;\n      }\n\n      function shiftCoords(r, e) {\n        var t = [];\n        t.area = r.area, t.dist = r.dist;\n\n        for (var o = 0; o < r.length; o++) {\n          t.push([r[o][0] + e, r[o][1], r[o][2]]);\n        }\n\n        return t;\n      }\n\n      var clip = _dereq_(\"./clip\"),\n          createFeature = _dereq_(\"./feature\");\n\n      module.exports = wrap;\n    }, {\n      \"./clip\": 8,\n      \"./feature\": 10\n    }],\n    16: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function GridIndex(t, r, e) {\n        var s = this.cells = [];\n\n        if (t instanceof ArrayBuffer) {\n          this.arrayBuffer = t;\n          var i = new Int32Array(this.arrayBuffer);\n          t = i[0], r = i[1], e = i[2], this.d = r + 2 * e;\n\n          for (var h = 0; h < this.d * this.d; h++) {\n            var n = i[NUM_PARAMS + h],\n                o = i[NUM_PARAMS + h + 1];\n            s.push(n === o ? null : i.subarray(n, o));\n          }\n\n          var l = i[NUM_PARAMS + s.length],\n              a = i[NUM_PARAMS + s.length + 1];\n          this.keys = i.subarray(l, a), this.bboxes = i.subarray(a), this.insert = this._insertReadonly;\n        } else {\n          this.d = r + 2 * e;\n\n          for (var d = 0; d < this.d * this.d; d++) {\n            s.push([]);\n          }\n\n          this.keys = [], this.bboxes = [];\n        }\n\n        this.n = r, this.extent = t, this.padding = e, this.scale = r / t, this.uid = 0;\n        var f = e / r * t;\n        this.min = -f, this.max = t + f;\n      }\n\n      module.exports = GridIndex;\n      var NUM_PARAMS = 3;\n      GridIndex.prototype.insert = function (t, r, e, s, i) {\n        this._forEachCell(r, e, s, i, this._insertCell, this.uid++), this.keys.push(t), this.bboxes.push(r), this.bboxes.push(e), this.bboxes.push(s), this.bboxes.push(i);\n      }, GridIndex.prototype._insertReadonly = function () {\n        throw \"Cannot insert into a GridIndex created from an ArrayBuffer.\";\n      }, GridIndex.prototype._insertCell = function (t, r, e, s, i, h) {\n        this.cells[i].push(h);\n      }, GridIndex.prototype.query = function (t, r, e, s) {\n        var i = this.min,\n            h = this.max;\n        if (t <= i && r <= i && h <= e && h <= s) return Array.prototype.slice.call(this.keys);\n        var n = [],\n            o = {};\n        return this._forEachCell(t, r, e, s, this._queryCell, n, o), n;\n      }, GridIndex.prototype._queryCell = function (t, r, e, s, i, h, n) {\n        var o = this.cells[i];\n        if (null !== o) for (var l = this.keys, a = this.bboxes, d = 0; d < o.length; d++) {\n          var f = o[d];\n\n          if (void 0 === n[f]) {\n            var u = 4 * f;\n            t <= a[u + 2] && r <= a[u + 3] && e >= a[u + 0] && s >= a[u + 1] ? (n[f] = !0, h.push(l[f])) : n[f] = !1;\n          }\n        }\n      }, GridIndex.prototype._forEachCell = function (t, r, e, s, i, h, n) {\n        for (var o = this._convertToCellCoord(t), l = this._convertToCellCoord(r), a = this._convertToCellCoord(e), d = this._convertToCellCoord(s), f = o; f <= a; f++) {\n          for (var u = l; u <= d; u++) {\n            var y = this.d * u + f;\n            if (i.call(this, t, r, e, s, y, h, n)) return;\n          }\n        }\n      }, GridIndex.prototype._convertToCellCoord = function (t) {\n        return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding));\n      }, GridIndex.prototype.toArrayBuffer = function () {\n        if (this.arrayBuffer) return this.arrayBuffer;\n\n        for (var t = this.cells, r = NUM_PARAMS + this.cells.length + 1 + 1, e = 0, s = 0; s < this.cells.length; s++) {\n          e += this.cells[s].length;\n        }\n\n        var i = new Int32Array(r + e + this.keys.length + this.bboxes.length);\n        i[0] = this.extent, i[1] = this.n, i[2] = this.padding;\n\n        for (var h = r, n = 0; n < t.length; n++) {\n          var o = t[n];\n          i[NUM_PARAMS + n] = h, i.set(o, h), h += o.length;\n        }\n\n        return i[NUM_PARAMS + t.length] = h, i.set(this.keys, h), h += this.keys.length, i[NUM_PARAMS + t.length + 1] = h, i.set(this.bboxes, h), h += this.bboxes.length, i.buffer;\n      };\n    }, {}],\n    17: [function (_dereq_, module, exports) {\n      exports.read = function (a, o, t, r, h) {\n        var M,\n            p,\n            w = 8 * h - r - 1,\n            f = (1 << w) - 1,\n            e = f >> 1,\n            i = -7,\n            N = t ? h - 1 : 0,\n            n = t ? -1 : 1,\n            s = a[o + N];\n\n        for (N += n, M = s & (1 << -i) - 1, s >>= -i, i += w; i > 0; M = 256 * M + a[o + N], N += n, i -= 8) {\n          ;\n        }\n\n        for (p = M & (1 << -i) - 1, M >>= -i, i += r; i > 0; p = 256 * p + a[o + N], N += n, i -= 8) {\n          ;\n        }\n\n        if (0 === M) M = 1 - e;else {\n          if (M === f) return p ? NaN : (s ? -1 : 1) * (1 / 0);\n          p += Math.pow(2, r), M -= e;\n        }\n        return (s ? -1 : 1) * p * Math.pow(2, M - r);\n      }, exports.write = function (a, o, t, r, h, M) {\n        var p,\n            w,\n            f,\n            e = 8 * M - h - 1,\n            i = (1 << e) - 1,\n            N = i >> 1,\n            n = 23 === h ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n            s = r ? 0 : M - 1,\n            u = r ? 1 : -1,\n            l = o < 0 || 0 === o && 1 / o < 0 ? 1 : 0;\n\n        for (o = Math.abs(o), isNaN(o) || o === 1 / 0 ? (w = isNaN(o) ? 1 : 0, p = i) : (p = Math.floor(Math.log(o) / Math.LN2), o * (f = Math.pow(2, -p)) < 1 && (p--, f *= 2), o += p + N >= 1 ? n / f : n * Math.pow(2, 1 - N), o * f >= 2 && (p++, f /= 2), p + N >= i ? (w = 0, p = i) : p + N >= 1 ? (w = (o * f - 1) * Math.pow(2, h), p += N) : (w = o * Math.pow(2, N - 1) * Math.pow(2, h), p = 0)); h >= 8; a[t + s] = 255 & w, s += u, w /= 256, h -= 8) {\n          ;\n        }\n\n        for (p = p << h | w, e += h; e > 0; a[t + s] = 255 & p, s += u, p /= 256, e -= 8) {\n          ;\n        }\n\n        a[t + s - u] |= 128 * l;\n      };\n    }, {}],\n    18: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function kdbush(t, i, e, s, n) {\n        return new KDBush(t, i, e, s, n);\n      }\n\n      function KDBush(t, i, e, s, n) {\n        i = i || defaultGetX, e = e || defaultGetY, n = n || Array, this.nodeSize = s || 64, this.points = t, this.ids = new n(t.length), this.coords = new n(2 * t.length);\n\n        for (var r = 0; r < t.length; r++) {\n          this.ids[r] = r, this.coords[2 * r] = i(t[r]), this.coords[2 * r + 1] = e(t[r]);\n        }\n\n        sort(this.ids, this.coords, this.nodeSize, 0, this.ids.length - 1, 0);\n      }\n\n      function defaultGetX(t) {\n        return t[0];\n      }\n\n      function defaultGetY(t) {\n        return t[1];\n      }\n\n      var sort = _dereq_(\"./sort\"),\n          _range = _dereq_(\"./range\"),\n          _within = _dereq_(\"./within\");\n\n      module.exports = kdbush, KDBush.prototype = {\n        range: function range(t, i, e, s) {\n          return _range(this.ids, this.coords, t, i, e, s, this.nodeSize);\n        },\n        within: function within(t, i, e) {\n          return _within(this.ids, this.coords, t, i, e, this.nodeSize);\n        }\n      };\n    }, {\n      \"./range\": 19,\n      \"./sort\": 20,\n      \"./within\": 21\n    }],\n    19: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function range(p, r, s, u, h, e, o) {\n        for (var a, t, n = [0, p.length - 1, 0], f = []; n.length;) {\n          var l = n.pop(),\n              v = n.pop(),\n              g = n.pop();\n          if (v - g <= o) for (var i = g; i <= v; i++) {\n            a = r[2 * i], t = r[2 * i + 1], a >= s && a <= h && t >= u && t <= e && f.push(p[i]);\n          } else {\n            var c = Math.floor((g + v) / 2);\n            a = r[2 * c], t = r[2 * c + 1], a >= s && a <= h && t >= u && t <= e && f.push(p[c]);\n            var d = (l + 1) % 2;\n            (0 === l ? s <= a : u <= t) && (n.push(g), n.push(c - 1), n.push(d)), (0 === l ? h >= a : e >= t) && (n.push(c + 1), n.push(v), n.push(d));\n          }\n        }\n\n        return f;\n      }\n\n      module.exports = range;\n    }, {}],\n    20: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function sortKD(t, a, o, s, r, e) {\n        if (!(r - s <= o)) {\n          var f = Math.floor((s + r) / 2);\n          select(t, a, f, s, r, e % 2), sortKD(t, a, o, s, f - 1, e + 1), sortKD(t, a, o, f + 1, r, e + 1);\n        }\n      }\n\n      function select(t, a, o, s, r, e) {\n        for (; r > s;) {\n          if (r - s > 600) {\n            var f = r - s + 1,\n                p = o - s + 1,\n                w = Math.log(f),\n                m = .5 * Math.exp(2 * w / 3),\n                n = .5 * Math.sqrt(w * m * (f - m) / f) * (p - f / 2 < 0 ? -1 : 1),\n                c = Math.max(s, Math.floor(o - p * m / f + n)),\n                h = Math.min(r, Math.floor(o + (f - p) * m / f + n));\n            select(t, a, o, c, h, e);\n          }\n\n          var i = a[2 * o + e],\n              l = s,\n              M = r;\n\n          for (swapItem(t, a, s, o), a[2 * r + e] > i && swapItem(t, a, s, r); l < M;) {\n            for (swapItem(t, a, l, M), l++, M--; a[2 * l + e] < i;) {\n              l++;\n            }\n\n            for (; a[2 * M + e] > i;) {\n              M--;\n            }\n          }\n\n          a[2 * s + e] === i ? swapItem(t, a, s, M) : (M++, swapItem(t, a, M, r)), M <= o && (s = M + 1), o <= M && (r = M - 1);\n        }\n      }\n\n      function swapItem(t, a, o, s) {\n        swap(t, o, s), swap(a, 2 * o, 2 * s), swap(a, 2 * o + 1, 2 * s + 1);\n      }\n\n      function swap(t, a, o) {\n        var s = t[a];\n        t[a] = t[o], t[o] = s;\n      }\n\n      module.exports = sortKD;\n    }, {}],\n    21: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function within(s, p, r, t, u, h) {\n        for (var i = [0, s.length - 1, 0], o = [], n = u * u; i.length;) {\n          var e = i.pop(),\n              a = i.pop(),\n              f = i.pop();\n          if (a - f <= h) for (var v = f; v <= a; v++) {\n            sqDist(p[2 * v], p[2 * v + 1], r, t) <= n && o.push(s[v]);\n          } else {\n            var l = Math.floor((f + a) / 2),\n                c = p[2 * l],\n                q = p[2 * l + 1];\n            sqDist(c, q, r, t) <= n && o.push(s[l]);\n            var D = (e + 1) % 2;\n            (0 === e ? r - u <= c : t - u <= q) && (i.push(f), i.push(l - 1), i.push(D)), (0 === e ? r + u >= c : t + u >= q) && (i.push(l + 1), i.push(a), i.push(D));\n          }\n        }\n\n        return o;\n      }\n\n      function sqDist(s, p, r, t) {\n        var u = s - r,\n            h = p - t;\n        return u * u + h * h;\n      }\n\n      module.exports = within;\n    }, {}],\n    22: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function isSupported(e) {\n        return !!(isBrowser() && isArraySupported() && isFunctionSupported() && isObjectSupported() && isJSONSupported() && isWorkerSupported() && isUint8ClampedArraySupported() && isWebGLSupportedCached(e && e.failIfMajorPerformanceCaveat));\n      }\n\n      function isBrowser() {\n        return \"undefined\" != typeof window && \"undefined\" != typeof document;\n      }\n\n      function isArraySupported() {\n        return Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray;\n      }\n\n      function isFunctionSupported() {\n        return Function.prototype && Function.prototype.bind;\n      }\n\n      function isObjectSupported() {\n        return Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions;\n      }\n\n      function isJSONSupported() {\n        return \"JSON\" in window && \"parse\" in JSON && \"stringify\" in JSON;\n      }\n\n      function isWorkerSupported() {\n        return \"Worker\" in window;\n      }\n\n      function isUint8ClampedArraySupported() {\n        return \"Uint8ClampedArray\" in window;\n      }\n\n      function isWebGLSupportedCached(e) {\n        return void 0 === isWebGLSupportedCache[e] && (isWebGLSupportedCache[e] = isWebGLSupported(e)), isWebGLSupportedCache[e];\n      }\n\n      function isWebGLSupported(e) {\n        var t = document.createElement(\"canvas\"),\n            r = Object.create(isSupported.webGLContextAttributes);\n        return r.failIfMajorPerformanceCaveat = e, t.probablySupportsContext ? t.probablySupportsContext(\"webgl\", r) || t.probablySupportsContext(\"experimental-webgl\", r) : t.supportsContext ? t.supportsContext(\"webgl\", r) || t.supportsContext(\"experimental-webgl\", r) : t.getContext(\"webgl\", r) || t.getContext(\"experimental-webgl\", r);\n      }\n\n      \"undefined\" != typeof module && module.exports ? module.exports = isSupported : window && (window.mapboxgl = window.mapboxgl || {}, window.mapboxgl.supported = isSupported);\n      var isWebGLSupportedCache = {};\n      isSupported.webGLContextAttributes = {\n        antialias: !1,\n        alpha: !0,\n        stencil: !0,\n        depth: !0\n      };\n    }, {}],\n    23: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function Buffer(t) {\n        var e;\n        t && t.length && (e = t, t = e.length);\n        var r = new Uint8Array(t || 0);\n        return e && r.set(e), r.readUInt32LE = BufferMethods.readUInt32LE, r.writeUInt32LE = BufferMethods.writeUInt32LE, r.readInt32LE = BufferMethods.readInt32LE, r.writeInt32LE = BufferMethods.writeInt32LE, r.readFloatLE = BufferMethods.readFloatLE, r.writeFloatLE = BufferMethods.writeFloatLE, r.readDoubleLE = BufferMethods.readDoubleLE, r.writeDoubleLE = BufferMethods.writeDoubleLE, r.toString = BufferMethods.toString, r.write = BufferMethods.write, r.slice = BufferMethods.slice, r.copy = BufferMethods.copy, r._isBuffer = !0, r;\n      }\n\n      function encodeString(t) {\n        for (var e, r, n = t.length, i = [], o = 0; o < n; o++) {\n          if (e = t.charCodeAt(o), e > 55295 && e < 57344) {\n            if (!r) {\n              e > 56319 || o + 1 === n ? i.push(239, 191, 189) : r = e;\n              continue;\n            }\n\n            if (e < 56320) {\n              i.push(239, 191, 189), r = e;\n              continue;\n            }\n\n            e = r - 55296 << 10 | e - 56320 | 65536, r = null;\n          } else r && (i.push(239, 191, 189), r = null);\n\n          e < 128 ? i.push(e) : e < 2048 ? i.push(e >> 6 | 192, 63 & e | 128) : e < 65536 ? i.push(e >> 12 | 224, e >> 6 & 63 | 128, 63 & e | 128) : i.push(e >> 18 | 240, e >> 12 & 63 | 128, e >> 6 & 63 | 128, 63 & e | 128);\n        }\n\n        return i;\n      }\n\n      module.exports = Buffer;\n\n      var ieee754 = _dereq_(\"ieee754\"),\n          BufferMethods,\n          lastStr,\n          lastStrEncoded;\n\n      BufferMethods = {\n        readUInt32LE: function readUInt32LE(t) {\n          return (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3];\n        },\n        writeUInt32LE: function writeUInt32LE(t, e) {\n          this[e] = t, this[e + 1] = t >>> 8, this[e + 2] = t >>> 16, this[e + 3] = t >>> 24;\n        },\n        readInt32LE: function readInt32LE(t) {\n          return (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + (this[t + 3] << 24);\n        },\n        readFloatLE: function readFloatLE(t) {\n          return ieee754.read(this, t, !0, 23, 4);\n        },\n        readDoubleLE: function readDoubleLE(t) {\n          return ieee754.read(this, t, !0, 52, 8);\n        },\n        writeFloatLE: function writeFloatLE(t, e) {\n          return ieee754.write(this, t, e, !0, 23, 4);\n        },\n        writeDoubleLE: function writeDoubleLE(t, e) {\n          return ieee754.write(this, t, e, !0, 52, 8);\n        },\n        toString: function toString(t, e, r) {\n          var n = \"\",\n              i = \"\";\n          e = e || 0, r = Math.min(this.length, r || this.length);\n\n          for (var o = e; o < r; o++) {\n            var u = this[o];\n            u <= 127 ? (n += decodeURIComponent(i) + String.fromCharCode(u), i = \"\") : i += \"%\" + u.toString(16);\n          }\n\n          return n += decodeURIComponent(i);\n        },\n        write: function write(t, e) {\n          for (var r = t === lastStr ? lastStrEncoded : encodeString(t), n = 0; n < r.length; n++) {\n            this[e + n] = r[n];\n          }\n        },\n        slice: function slice(t, e) {\n          return this.subarray(t, e);\n        },\n        copy: function copy(t, e) {\n          e = e || 0;\n\n          for (var r = 0; r < this.length; r++) {\n            t[e + r] = this[r];\n          }\n        }\n      }, BufferMethods.writeInt32LE = BufferMethods.writeUInt32LE, Buffer.byteLength = function (t) {\n        return lastStr = t, lastStrEncoded = encodeString(t), lastStrEncoded.length;\n      }, Buffer.isBuffer = function (t) {\n        return !(!t || !t._isBuffer);\n      };\n    }, {\n      \"ieee754\": 17\n    }],\n    24: [function (_dereq_, module, exports) {\n      (function (global) {\n        \"use strict\";\n\n        function Pbf(t) {\n          this.buf = Buffer.isBuffer(t) ? t : new Buffer(t || 0), this.pos = 0, this.length = this.buf.length;\n        }\n\n        function readVarintRemainder(t, i) {\n          var e,\n              r = i.buf;\n          if (e = r[i.pos++], t += 268435456 * (127 & e), e < 128) return t;\n          if (e = r[i.pos++], t += 34359738368 * (127 & e), e < 128) return t;\n          if (e = r[i.pos++], t += 4398046511104 * (127 & e), e < 128) return t;\n          if (e = r[i.pos++], t += 562949953421312 * (127 & e), e < 128) return t;\n          if (e = r[i.pos++], t += 72057594037927940 * (127 & e), e < 128) return t;\n          if (e = r[i.pos++], t += 0x8000000000000000 * (127 & e), e < 128) return t;\n          throw new Error(\"Expected varint not more than 10 bytes\");\n        }\n\n        function writeBigVarint(t, i) {\n          i.realloc(10);\n\n          for (var e = i.pos + 10; t >= 1;) {\n            if (i.pos >= e) throw new Error(\"Given varint doesn't fit into 10 bytes\");\n            var r = 255 & t;\n            i.buf[i.pos++] = r | (t >= 128 ? 128 : 0), t /= 128;\n          }\n        }\n\n        function reallocForRawMessage(t, i, e) {\n          var r = i <= 16383 ? 1 : i <= 2097151 ? 2 : i <= 268435455 ? 3 : Math.ceil(Math.log(i) / (7 * Math.LN2));\n          e.realloc(r);\n\n          for (var s = e.pos - 1; s >= t; s--) {\n            e.buf[s + r] = e.buf[s];\n          }\n        }\n\n        function _writePackedVarint(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeVarint(t[e]);\n          }\n        }\n\n        function _writePackedSVarint(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeSVarint(t[e]);\n          }\n        }\n\n        function _writePackedFloat(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeFloat(t[e]);\n          }\n        }\n\n        function _writePackedDouble(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeDouble(t[e]);\n          }\n        }\n\n        function _writePackedBoolean(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeBoolean(t[e]);\n          }\n        }\n\n        function _writePackedFixed(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeFixed32(t[e]);\n          }\n        }\n\n        function _writePackedSFixed(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeSFixed32(t[e]);\n          }\n        }\n\n        function _writePackedFixed2(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeFixed64(t[e]);\n          }\n        }\n\n        function _writePackedSFixed2(t, i) {\n          for (var e = 0; e < t.length; e++) {\n            i.writeSFixed64(t[e]);\n          }\n        }\n\n        module.exports = Pbf;\n\n        var Buffer = global.Buffer || _dereq_(\"./buffer\");\n\n        Pbf.Varint = 0, Pbf.Fixed64 = 1, Pbf.Bytes = 2, Pbf.Fixed32 = 5;\n        var SHIFT_LEFT_32 = 4294967296,\n            SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32,\n            POW_2_63 = Math.pow(2, 63);\n        Pbf.prototype = {\n          destroy: function destroy() {\n            this.buf = null;\n          },\n          readFields: function readFields(t, i, e) {\n            for (e = e || this.length; this.pos < e;) {\n              var r = this.readVarint(),\n                  s = r >> 3,\n                  n = this.pos;\n              t(s, i, this), this.pos === n && this.skip(r);\n            }\n\n            return i;\n          },\n          readMessage: function readMessage(t, i) {\n            return this.readFields(t, i, this.readVarint() + this.pos);\n          },\n          readFixed32: function readFixed32() {\n            var t = this.buf.readUInt32LE(this.pos);\n            return this.pos += 4, t;\n          },\n          readSFixed32: function readSFixed32() {\n            var t = this.buf.readInt32LE(this.pos);\n            return this.pos += 4, t;\n          },\n          readFixed64: function readFixed64() {\n            var t = this.buf.readUInt32LE(this.pos) + this.buf.readUInt32LE(this.pos + 4) * SHIFT_LEFT_32;\n            return this.pos += 8, t;\n          },\n          readSFixed64: function readSFixed64() {\n            var t = this.buf.readUInt32LE(this.pos) + this.buf.readInt32LE(this.pos + 4) * SHIFT_LEFT_32;\n            return this.pos += 8, t;\n          },\n          readFloat: function readFloat() {\n            var t = this.buf.readFloatLE(this.pos);\n            return this.pos += 4, t;\n          },\n          readDouble: function readDouble() {\n            var t = this.buf.readDoubleLE(this.pos);\n            return this.pos += 8, t;\n          },\n          readVarint: function readVarint() {\n            var t,\n                i,\n                e = this.buf;\n            return i = e[this.pos++], t = 127 & i, i < 128 ? t : (i = e[this.pos++], t |= (127 & i) << 7, i < 128 ? t : (i = e[this.pos++], t |= (127 & i) << 14, i < 128 ? t : (i = e[this.pos++], t |= (127 & i) << 21, i < 128 ? t : readVarintRemainder(t, this))));\n          },\n          readVarint64: function readVarint64() {\n            var t = this.pos,\n                i = this.readVarint();\n            if (i < POW_2_63) return i;\n\n            for (var e = this.pos - 2; 255 === this.buf[e];) {\n              e--;\n            }\n\n            e < t && (e = t), i = 0;\n\n            for (var r = 0; r < e - t + 1; r++) {\n              var s = 127 & ~this.buf[t + r];\n              i += r < 4 ? s << 7 * r : s * Math.pow(2, 7 * r);\n            }\n\n            return -i - 1;\n          },\n          readSVarint: function readSVarint() {\n            var t = this.readVarint();\n            return t % 2 === 1 ? (t + 1) / -2 : t / 2;\n          },\n          readBoolean: function readBoolean() {\n            return Boolean(this.readVarint());\n          },\n          readString: function readString() {\n            var t = this.readVarint() + this.pos,\n                i = this.buf.toString(\"utf8\", this.pos, t);\n            return this.pos = t, i;\n          },\n          readBytes: function readBytes() {\n            var t = this.readVarint() + this.pos,\n                i = this.buf.slice(this.pos, t);\n            return this.pos = t, i;\n          },\n          readPackedVarint: function readPackedVarint() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readVarint());\n            }\n\n            return i;\n          },\n          readPackedSVarint: function readPackedSVarint() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readSVarint());\n            }\n\n            return i;\n          },\n          readPackedBoolean: function readPackedBoolean() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readBoolean());\n            }\n\n            return i;\n          },\n          readPackedFloat: function readPackedFloat() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readFloat());\n            }\n\n            return i;\n          },\n          readPackedDouble: function readPackedDouble() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readDouble());\n            }\n\n            return i;\n          },\n          readPackedFixed32: function readPackedFixed32() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readFixed32());\n            }\n\n            return i;\n          },\n          readPackedSFixed32: function readPackedSFixed32() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readSFixed32());\n            }\n\n            return i;\n          },\n          readPackedFixed64: function readPackedFixed64() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readFixed64());\n            }\n\n            return i;\n          },\n          readPackedSFixed64: function readPackedSFixed64() {\n            for (var t = this.readVarint() + this.pos, i = []; this.pos < t;) {\n              i.push(this.readSFixed64());\n            }\n\n            return i;\n          },\n          skip: function skip(t) {\n            var i = 7 & t;\n            if (i === Pbf.Varint) for (; this.buf[this.pos++] > 127;) {\n              ;\n            } else if (i === Pbf.Bytes) this.pos = this.readVarint() + this.pos;else if (i === Pbf.Fixed32) this.pos += 4;else {\n              if (i !== Pbf.Fixed64) throw new Error(\"Unimplemented type: \" + i);\n              this.pos += 8;\n            }\n          },\n          writeTag: function writeTag(t, i) {\n            this.writeVarint(t << 3 | i);\n          },\n          realloc: function realloc(t) {\n            for (var i = this.length || 16; i < this.pos + t;) {\n              i *= 2;\n            }\n\n            if (i !== this.length) {\n              var e = new Buffer(i);\n              this.buf.copy(e), this.buf = e, this.length = i;\n            }\n          },\n          finish: function finish() {\n            return this.length = this.pos, this.pos = 0, this.buf.slice(0, this.length);\n          },\n          writeFixed32: function writeFixed32(t) {\n            this.realloc(4), this.buf.writeUInt32LE(t, this.pos), this.pos += 4;\n          },\n          writeSFixed32: function writeSFixed32(t) {\n            this.realloc(4), this.buf.writeInt32LE(t, this.pos), this.pos += 4;\n          },\n          writeFixed64: function writeFixed64(t) {\n            this.realloc(8), this.buf.writeInt32LE(t & -1, this.pos), this.buf.writeUInt32LE(Math.floor(t * SHIFT_RIGHT_32), this.pos + 4), this.pos += 8;\n          },\n          writeSFixed64: function writeSFixed64(t) {\n            this.realloc(8), this.buf.writeInt32LE(t & -1, this.pos), this.buf.writeInt32LE(Math.floor(t * SHIFT_RIGHT_32), this.pos + 4), this.pos += 8;\n          },\n          writeVarint: function writeVarint(t) {\n            return t = +t, t > 268435455 ? void writeBigVarint(t, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), void (t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127)))));\n          },\n          writeSVarint: function writeSVarint(t) {\n            this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);\n          },\n          writeBoolean: function writeBoolean(t) {\n            this.writeVarint(Boolean(t));\n          },\n          writeString: function writeString(t) {\n            t = String(t);\n            var i = Buffer.byteLength(t);\n            this.writeVarint(i), this.realloc(i), this.buf.write(t, this.pos), this.pos += i;\n          },\n          writeFloat: function writeFloat(t) {\n            this.realloc(4), this.buf.writeFloatLE(t, this.pos), this.pos += 4;\n          },\n          writeDouble: function writeDouble(t) {\n            this.realloc(8), this.buf.writeDoubleLE(t, this.pos), this.pos += 8;\n          },\n          writeBytes: function writeBytes(t) {\n            var i = t.length;\n            this.writeVarint(i), this.realloc(i);\n\n            for (var e = 0; e < i; e++) {\n              this.buf[this.pos++] = t[e];\n            }\n          },\n          writeRawMessage: function writeRawMessage(t, i) {\n            this.pos++;\n            var e = this.pos;\n            t(i, this);\n            var r = this.pos - e;\n            r >= 128 && reallocForRawMessage(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;\n          },\n          writeMessage: function writeMessage(t, i, e) {\n            this.writeTag(t, Pbf.Bytes), this.writeRawMessage(i, e);\n          },\n          writePackedVarint: function writePackedVarint(t, i) {\n            this.writeMessage(t, _writePackedVarint, i);\n          },\n          writePackedSVarint: function writePackedSVarint(t, i) {\n            this.writeMessage(t, _writePackedSVarint, i);\n          },\n          writePackedBoolean: function writePackedBoolean(t, i) {\n            this.writeMessage(t, _writePackedBoolean, i);\n          },\n          writePackedFloat: function writePackedFloat(t, i) {\n            this.writeMessage(t, _writePackedFloat, i);\n          },\n          writePackedDouble: function writePackedDouble(t, i) {\n            this.writeMessage(t, _writePackedDouble, i);\n          },\n          writePackedFixed32: function writePackedFixed32(t, i) {\n            this.writeMessage(t, _writePackedFixed, i);\n          },\n          writePackedSFixed32: function writePackedSFixed32(t, i) {\n            this.writeMessage(t, _writePackedSFixed, i);\n          },\n          writePackedFixed64: function writePackedFixed64(t, i) {\n            this.writeMessage(t, _writePackedFixed2, i);\n          },\n          writePackedSFixed64: function writePackedSFixed64(t, i) {\n            this.writeMessage(t, _writePackedSFixed2, i);\n          },\n          writeBytesField: function writeBytesField(t, i) {\n            this.writeTag(t, Pbf.Bytes), this.writeBytes(i);\n          },\n          writeFixed32Field: function writeFixed32Field(t, i) {\n            this.writeTag(t, Pbf.Fixed32), this.writeFixed32(i);\n          },\n          writeSFixed32Field: function writeSFixed32Field(t, i) {\n            this.writeTag(t, Pbf.Fixed32), this.writeSFixed32(i);\n          },\n          writeFixed64Field: function writeFixed64Field(t, i) {\n            this.writeTag(t, Pbf.Fixed64), this.writeFixed64(i);\n          },\n          writeSFixed64Field: function writeSFixed64Field(t, i) {\n            this.writeTag(t, Pbf.Fixed64), this.writeSFixed64(i);\n          },\n          writeVarintField: function writeVarintField(t, i) {\n            this.writeTag(t, Pbf.Varint), this.writeVarint(i);\n          },\n          writeSVarintField: function writeSVarintField(t, i) {\n            this.writeTag(t, Pbf.Varint), this.writeSVarint(i);\n          },\n          writeStringField: function writeStringField(t, i) {\n            this.writeTag(t, Pbf.Bytes), this.writeString(i);\n          },\n          writeFloatField: function writeFloatField(t, i) {\n            this.writeTag(t, Pbf.Fixed32), this.writeFloat(i);\n          },\n          writeDoubleField: function writeDoubleField(t, i) {\n            this.writeTag(t, Pbf.Fixed64), this.writeDouble(i);\n          },\n          writeBooleanField: function writeBooleanField(t, i) {\n            this.writeVarintField(t, Boolean(i));\n          }\n        };\n      }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n    }, {\n      \"./buffer\": 23\n    }],\n    25: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function Point(t, n) {\n        this.x = t, this.y = n;\n      }\n\n      module.exports = Point, Point.prototype = {\n        clone: function clone() {\n          return new Point(this.x, this.y);\n        },\n        add: function add(t) {\n          return this.clone()._add(t);\n        },\n        sub: function sub(t) {\n          return this.clone()._sub(t);\n        },\n        mult: function mult(t) {\n          return this.clone()._mult(t);\n        },\n        div: function div(t) {\n          return this.clone()._div(t);\n        },\n        rotate: function rotate(t) {\n          return this.clone()._rotate(t);\n        },\n        matMult: function matMult(t) {\n          return this.clone()._matMult(t);\n        },\n        unit: function unit() {\n          return this.clone()._unit();\n        },\n        perp: function perp() {\n          return this.clone()._perp();\n        },\n        round: function round() {\n          return this.clone()._round();\n        },\n        mag: function mag() {\n          return Math.sqrt(this.x * this.x + this.y * this.y);\n        },\n        equals: function equals(t) {\n          return this.x === t.x && this.y === t.y;\n        },\n        dist: function dist(t) {\n          return Math.sqrt(this.distSqr(t));\n        },\n        distSqr: function distSqr(t) {\n          var n = t.x - this.x,\n              i = t.y - this.y;\n          return n * n + i * i;\n        },\n        angle: function angle() {\n          return Math.atan2(this.y, this.x);\n        },\n        angleTo: function angleTo(t) {\n          return Math.atan2(this.y - t.y, this.x - t.x);\n        },\n        angleWith: function angleWith(t) {\n          return this.angleWithSep(t.x, t.y);\n        },\n        angleWithSep: function angleWithSep(t, n) {\n          return Math.atan2(this.x * n - this.y * t, this.x * t + this.y * n);\n        },\n        _matMult: function _matMult(t) {\n          var n = t[0] * this.x + t[1] * this.y,\n              i = t[2] * this.x + t[3] * this.y;\n          return this.x = n, this.y = i, this;\n        },\n        _add: function _add(t) {\n          return this.x += t.x, this.y += t.y, this;\n        },\n        _sub: function _sub(t) {\n          return this.x -= t.x, this.y -= t.y, this;\n        },\n        _mult: function _mult(t) {\n          return this.x *= t, this.y *= t, this;\n        },\n        _div: function _div(t) {\n          return this.x /= t, this.y /= t, this;\n        },\n        _unit: function _unit() {\n          return this._div(this.mag()), this;\n        },\n        _perp: function _perp() {\n          var t = this.y;\n          return this.y = this.x, this.x = -t, this;\n        },\n        _rotate: function _rotate(t) {\n          var n = Math.cos(t),\n              i = Math.sin(t),\n              s = n * this.x - i * this.y,\n              r = i * this.x + n * this.y;\n          return this.x = s, this.y = r, this;\n        },\n        _round: function _round() {\n          return this.x = Math.round(this.x), this.y = Math.round(this.y), this;\n        }\n      }, Point.convert = function (t) {\n        return t instanceof Point ? t : Array.isArray(t) ? new Point(t[0], t[1]) : t;\n      };\n    }, {}],\n    26: [function (_dereq_, module, exports) {\n      function defaultSetTimout() {\n        throw new Error(\"setTimeout has not been defined\");\n      }\n\n      function defaultClearTimeout() {\n        throw new Error(\"clearTimeout has not been defined\");\n      }\n\n      function runTimeout(e) {\n        if (cachedSetTimeout === setTimeout) return setTimeout(e, 0);\n        if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) return cachedSetTimeout = setTimeout, setTimeout(e, 0);\n\n        try {\n          return cachedSetTimeout(e, 0);\n        } catch (t) {\n          try {\n            return cachedSetTimeout.call(null, e, 0);\n          } catch (t) {\n            return cachedSetTimeout.call(this, e, 0);\n          }\n        }\n      }\n\n      function runClearTimeout(e) {\n        if (cachedClearTimeout === clearTimeout) return clearTimeout(e);\n        if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) return cachedClearTimeout = clearTimeout, clearTimeout(e);\n\n        try {\n          return cachedClearTimeout(e);\n        } catch (t) {\n          try {\n            return cachedClearTimeout.call(null, e);\n          } catch (t) {\n            return cachedClearTimeout.call(this, e);\n          }\n        }\n      }\n\n      function cleanUpNextTick() {\n        draining && currentQueue && (draining = !1, currentQueue.length ? queue = currentQueue.concat(queue) : queueIndex = -1, queue.length && drainQueue());\n      }\n\n      function drainQueue() {\n        if (!draining) {\n          var e = runTimeout(cleanUpNextTick);\n          draining = !0;\n\n          for (var t = queue.length; t;) {\n            for (currentQueue = queue, queue = []; ++queueIndex < t;) {\n              currentQueue && currentQueue[queueIndex].run();\n            }\n\n            queueIndex = -1, t = queue.length;\n          }\n\n          currentQueue = null, draining = !1, runClearTimeout(e);\n        }\n      }\n\n      function Item(e, t) {\n        this.fun = e, this.array = t;\n      }\n\n      function noop() {}\n\n      var process = module.exports = {},\n          cachedSetTimeout,\n          cachedClearTimeout;\n      !function () {\n        try {\n          cachedSetTimeout = \"function\" == typeof setTimeout ? setTimeout : defaultSetTimout;\n        } catch (e) {\n          cachedSetTimeout = defaultSetTimout;\n        }\n\n        try {\n          cachedClearTimeout = \"function\" == typeof clearTimeout ? clearTimeout : defaultClearTimeout;\n        } catch (e) {\n          cachedClearTimeout = defaultClearTimeout;\n        }\n      }();\n      var queue = [],\n          draining = !1,\n          currentQueue,\n          queueIndex = -1;\n      process.nextTick = function (e) {\n        var t = new Array(arguments.length - 1);\n        if (arguments.length > 1) for (var u = 1; u < arguments.length; u++) {\n          t[u - 1] = arguments[u];\n        }\n        queue.push(new Item(e, t)), 1 !== queue.length || draining || runTimeout(drainQueue);\n      }, Item.prototype.run = function () {\n        this.fun.apply(null, this.array);\n      }, process.title = \"browser\", process.browser = !0, process.env = {}, process.argv = [], process.version = \"\", process.versions = {}, process.on = noop, process.addListener = noop, process.once = noop, process.off = noop, process.removeListener = noop, process.removeAllListeners = noop, process.emit = noop, process.binding = function (e) {\n        throw new Error(\"process.binding is not supported\");\n      }, process.cwd = function () {\n        return \"/\";\n      }, process.chdir = function (e) {\n        throw new Error(\"process.chdir is not supported\");\n      }, process.umask = function () {\n        return 0;\n      };\n    }, {}],\n    27: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function partialSort(a, t, r, o, p) {\n        for (r = r || 0, o = o || a.length - 1, p = p || defaultCompare; o > r;) {\n          if (o - r > 600) {\n            var f = o - r + 1,\n                e = t - r + 1,\n                l = Math.log(f),\n                s = .5 * Math.exp(2 * l / 3),\n                i = .5 * Math.sqrt(l * s * (f - s) / f) * (e - f / 2 < 0 ? -1 : 1),\n                n = Math.max(r, Math.floor(t - e * s / f + i)),\n                h = Math.min(o, Math.floor(t + (f - e) * s / f + i));\n            partialSort(a, t, n, h, p);\n          }\n\n          var u = a[t],\n              M = r,\n              w = o;\n\n          for (swap(a, r, t), p(a[o], u) > 0 && swap(a, r, o); M < w;) {\n            for (swap(a, M, w), M++, w--; p(a[M], u) < 0;) {\n              M++;\n            }\n\n            for (; p(a[w], u) > 0;) {\n              w--;\n            }\n          }\n\n          0 === p(a[r], u) ? swap(a, r, w) : (w++, swap(a, w, o)), w <= t && (r = w + 1), t <= w && (o = w - 1);\n        }\n      }\n\n      function swap(a, t, r) {\n        var o = a[t];\n        a[t] = a[r], a[r] = o;\n      }\n\n      function defaultCompare(a, t) {\n        return a < t ? -1 : a > t ? 1 : 0;\n      }\n\n      module.exports = partialSort;\n    }, {}],\n    28: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function supercluster(t) {\n        return new SuperCluster(t);\n      }\n\n      function SuperCluster(t) {\n        this.options = extend(Object.create(this.options), t), this.trees = new Array(this.options.maxZoom + 1);\n      }\n\n      function createCluster(t, e, o, n) {\n        return {\n          x: t,\n          y: e,\n          zoom: 1 / 0,\n          id: n,\n          numPoints: o\n        };\n      }\n\n      function createPointCluster(t, e) {\n        var o = t.geometry.coordinates;\n        return createCluster(lngX(o[0]), latY(o[1]), 1, e);\n      }\n\n      function getClusterJSON(t) {\n        return {\n          type: \"Feature\",\n          properties: getClusterProperties(t),\n          geometry: {\n            type: \"Point\",\n            coordinates: [xLng(t.x), yLat(t.y)]\n          }\n        };\n      }\n\n      function getClusterProperties(t) {\n        var e = t.numPoints,\n            o = e >= 1e4 ? Math.round(e / 1e3) + \"k\" : e >= 1e3 ? Math.round(e / 100) / 10 + \"k\" : e;\n        return {\n          cluster: !0,\n          point_count: e,\n          point_count_abbreviated: o\n        };\n      }\n\n      function lngX(t) {\n        return t / 360 + .5;\n      }\n\n      function latY(t) {\n        var e = Math.sin(t * Math.PI / 180),\n            o = .5 - .25 * Math.log((1 + e) / (1 - e)) / Math.PI;\n        return o < 0 ? 0 : o > 1 ? 1 : o;\n      }\n\n      function xLng(t) {\n        return 360 * (t - .5);\n      }\n\n      function yLat(t) {\n        var e = (180 - 360 * t) * Math.PI / 180;\n        return 360 * Math.atan(Math.exp(e)) / Math.PI - 90;\n      }\n\n      function extend(t, e) {\n        for (var o in e) {\n          t[o] = e[o];\n        }\n\n        return t;\n      }\n\n      function getX(t) {\n        return t.x;\n      }\n\n      function getY(t) {\n        return t.y;\n      }\n\n      var kdbush = _dereq_(\"kdbush\");\n\n      module.exports = supercluster, SuperCluster.prototype = {\n        options: {\n          minZoom: 0,\n          maxZoom: 16,\n          radius: 40,\n          extent: 512,\n          nodeSize: 64,\n          log: !1\n        },\n        load: function load(t) {\n          var e = this.options.log;\n          e && console.time(\"total time\");\n          var o = \"prepare \" + t.length + \" points\";\n          e && console.time(o), this.points = t;\n          var n = t.map(createPointCluster);\n          e && console.timeEnd(o);\n\n          for (var r = this.options.maxZoom; r >= this.options.minZoom; r--) {\n            var i = +Date.now();\n            this.trees[r + 1] = kdbush(n, getX, getY, this.options.nodeSize, Float32Array), n = this._cluster(n, r), e && console.log(\"z%d: %d clusters in %dms\", r, n.length, +Date.now() - i);\n          }\n\n          return this.trees[this.options.minZoom] = kdbush(n, getX, getY, this.options.nodeSize, Float32Array), e && console.timeEnd(\"total time\"), this;\n        },\n        getClusters: function getClusters(t, e) {\n          for (var o = this.trees[this._limitZoom(e)], n = o.range(lngX(t[0]), latY(t[3]), lngX(t[2]), latY(t[1])), r = [], i = 0; i < n.length; i++) {\n            var s = o.points[n[i]];\n            r.push(s.id !== -1 ? this.points[s.id] : getClusterJSON(s));\n          }\n\n          return r;\n        },\n        getTile: function getTile(t, e, o) {\n          var n = this.trees[this._limitZoom(t)],\n              r = Math.pow(2, t),\n              i = this.options.extent,\n              s = this.options.radius,\n              u = s / i,\n              a = (o - u) / r,\n              h = (o + 1 + u) / r,\n              l = {\n            features: []\n          };\n\n          return this._addTileFeatures(n.range((e - u) / r, a, (e + 1 + u) / r, h), n.points, e, o, r, l), 0 === e && this._addTileFeatures(n.range(1 - u / r, a, 1, h), n.points, r, o, r, l), e === r - 1 && this._addTileFeatures(n.range(0, a, u / r, h), n.points, -1, o, r, l), l.features.length ? l : null;\n        },\n        _addTileFeatures: function _addTileFeatures(t, e, o, n, r, i) {\n          for (var s = 0; s < t.length; s++) {\n            var u = e[t[s]];\n            i.features.push({\n              type: 1,\n              geometry: [[Math.round(this.options.extent * (u.x * r - o)), Math.round(this.options.extent * (u.y * r - n))]],\n              tags: u.id !== -1 ? this.points[u.id].properties : getClusterProperties(u)\n            });\n          }\n        },\n        _limitZoom: function _limitZoom(t) {\n          return Math.max(this.options.minZoom, Math.min(t, this.options.maxZoom + 1));\n        },\n        _cluster: function _cluster(t, e) {\n          for (var o = [], n = this.options.radius / (this.options.extent * Math.pow(2, e)), r = 0; r < t.length; r++) {\n            var i = t[r];\n\n            if (!(i.zoom <= e)) {\n              i.zoom = e;\n\n              for (var s = this.trees[e + 1], u = s.within(i.x, i.y, n), a = !1, h = i.numPoints, l = i.x * h, p = i.y * h, m = 0; m < u.length; m++) {\n                var c = s.points[u[m]];\n                e < c.zoom && (a = !0, c.zoom = e, l += c.x * c.numPoints, p += c.y * c.numPoints, h += c.numPoints);\n              }\n\n              o.push(a ? createCluster(l / h, p / h, h, -1) : i);\n            }\n          }\n\n          return o;\n        }\n      };\n    }, {\n      \"kdbush\": 18\n    }],\n    29: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function TinyQueue(t, i) {\n        if (!(this instanceof TinyQueue)) return new TinyQueue(t, i);\n        if (this.data = t || [], this.length = this.data.length, this.compare = i || defaultCompare, t) for (var a = Math.floor(this.length / 2); a >= 0; a--) {\n          this._down(a);\n        }\n      }\n\n      function defaultCompare(t, i) {\n        return t < i ? -1 : t > i ? 1 : 0;\n      }\n\n      function swap(t, i, a) {\n        var n = t[i];\n        t[i] = t[a], t[a] = n;\n      }\n\n      module.exports = TinyQueue, TinyQueue.prototype = {\n        push: function push(t) {\n          this.data.push(t), this.length++, this._up(this.length - 1);\n        },\n        pop: function pop() {\n          var t = this.data[0];\n          return this.data[0] = this.data[this.length - 1], this.length--, this.data.pop(), this._down(0), t;\n        },\n        peek: function peek() {\n          return this.data[0];\n        },\n        _up: function _up(t) {\n          for (var i = this.data, a = this.compare; t > 0;) {\n            var n = Math.floor((t - 1) / 2);\n            if (!(a(i[t], i[n]) < 0)) break;\n            swap(i, n, t), t = n;\n          }\n        },\n        _down: function _down(t) {\n          for (var i = this.data, a = this.compare, n = this.length;;) {\n            var e = 2 * t + 1,\n                h = e + 1,\n                s = t;\n            if (e < n && a(i[e], i[s]) < 0 && (s = e), h < n && a(i[h], i[s]) < 0 && (s = h), s === t) return;\n            swap(i, s, t), t = s;\n          }\n        }\n      };\n    }, {}],\n    30: [function (_dereq_, module, exports) {\n      \"function\" == typeof Object.create ? module.exports = function (t, e) {\n        t.super_ = e, t.prototype = Object.create(e.prototype, {\n          constructor: {\n            value: t,\n            enumerable: !1,\n            writable: !0,\n            configurable: !0\n          }\n        });\n      } : module.exports = function (t, e) {\n        t.super_ = e;\n\n        var o = function o() {};\n\n        o.prototype = e.prototype, t.prototype = new o(), t.prototype.constructor = t;\n      };\n    }, {}],\n    31: [function (_dereq_, module, exports) {\n      module.exports = function (o) {\n        return o && \"object\" == typeof o && \"function\" == typeof o.copy && \"function\" == typeof o.fill && \"function\" == typeof o.readUInt8;\n      };\n    }, {}],\n    32: [function (_dereq_, module, exports) {\n      (function (process, global) {\n        function inspect(e, r) {\n          var t = {\n            seen: [],\n            stylize: stylizeNoColor\n          };\n          return arguments.length >= 3 && (t.depth = arguments[2]), arguments.length >= 4 && (t.colors = arguments[3]), isBoolean(r) ? t.showHidden = r : r && exports._extend(t, r), isUndefined(t.showHidden) && (t.showHidden = !1), isUndefined(t.depth) && (t.depth = 2), isUndefined(t.colors) && (t.colors = !1), isUndefined(t.customInspect) && (t.customInspect = !0), t.colors && (t.stylize = stylizeWithColor), formatValue(t, e, t.depth);\n        }\n\n        function stylizeWithColor(e, r) {\n          var t = inspect.styles[r];\n          return t ? \"\u001b[\" + inspect.colors[t][0] + \"m\" + e + \"\u001b[\" + inspect.colors[t][1] + \"m\" : e;\n        }\n\n        function stylizeNoColor(e, r) {\n          return e;\n        }\n\n        function arrayToHash(e) {\n          var r = {};\n          return e.forEach(function (e, t) {\n            r[e] = !0;\n          }), r;\n        }\n\n        function formatValue(e, r, t) {\n          if (e.customInspect && r && isFunction(r.inspect) && r.inspect !== exports.inspect && (!r.constructor || r.constructor.prototype !== r)) {\n            var n = r.inspect(t, e);\n            return isString(n) || (n = formatValue(e, n, t)), n;\n          }\n\n          var i = formatPrimitive(e, r);\n          if (i) return i;\n          var o = Object.keys(r),\n              s = arrayToHash(o);\n          if (e.showHidden && (o = Object.getOwnPropertyNames(r)), isError(r) && (o.indexOf(\"message\") >= 0 || o.indexOf(\"description\") >= 0)) return formatError(r);\n\n          if (0 === o.length) {\n            if (isFunction(r)) {\n              var u = r.name ? \": \" + r.name : \"\";\n              return e.stylize(\"[Function\" + u + \"]\", \"special\");\n            }\n\n            if (isRegExp(r)) return e.stylize(RegExp.prototype.toString.call(r), \"regexp\");\n            if (isDate(r)) return e.stylize(Date.prototype.toString.call(r), \"date\");\n            if (isError(r)) return formatError(r);\n          }\n\n          var c = \"\",\n              a = !1,\n              l = [\"{\", \"}\"];\n\n          if (isArray(r) && (a = !0, l = [\"[\", \"]\"]), isFunction(r)) {\n            var p = r.name ? \": \" + r.name : \"\";\n            c = \" [Function\" + p + \"]\";\n          }\n\n          if (isRegExp(r) && (c = \" \" + RegExp.prototype.toString.call(r)), isDate(r) && (c = \" \" + Date.prototype.toUTCString.call(r)), isError(r) && (c = \" \" + formatError(r)), 0 === o.length && (!a || 0 == r.length)) return l[0] + c + l[1];\n          if (t < 0) return isRegExp(r) ? e.stylize(RegExp.prototype.toString.call(r), \"regexp\") : e.stylize(\"[Object]\", \"special\");\n          e.seen.push(r);\n          var f;\n          return f = a ? formatArray(e, r, t, s, o) : o.map(function (n) {\n            return formatProperty(e, r, t, s, n, a);\n          }), e.seen.pop(), reduceToSingleString(f, c, l);\n        }\n\n        function formatPrimitive(e, r) {\n          if (isUndefined(r)) return e.stylize(\"undefined\", \"undefined\");\n\n          if (isString(r)) {\n            var t = \"'\" + JSON.stringify(r).replace(/^\"|\"$/g, \"\").replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"') + \"'\";\n            return e.stylize(t, \"string\");\n          }\n\n          return isNumber(r) ? e.stylize(\"\" + r, \"number\") : isBoolean(r) ? e.stylize(\"\" + r, \"boolean\") : isNull(r) ? e.stylize(\"null\", \"null\") : void 0;\n        }\n\n        function formatError(e) {\n          return \"[\" + Error.prototype.toString.call(e) + \"]\";\n        }\n\n        function formatArray(e, r, t, n, i) {\n          for (var o = [], s = 0, u = r.length; s < u; ++s) {\n            hasOwnProperty(r, String(s)) ? o.push(formatProperty(e, r, t, n, String(s), !0)) : o.push(\"\");\n          }\n\n          return i.forEach(function (i) {\n            i.match(/^\\d+$/) || o.push(formatProperty(e, r, t, n, i, !0));\n          }), o;\n        }\n\n        function formatProperty(e, r, t, n, i, o) {\n          var s, u, c;\n\n          if (c = Object.getOwnPropertyDescriptor(r, i) || {\n            value: r[i]\n          }, c.get ? u = c.set ? e.stylize(\"[Getter/Setter]\", \"special\") : e.stylize(\"[Getter]\", \"special\") : c.set && (u = e.stylize(\"[Setter]\", \"special\")), hasOwnProperty(n, i) || (s = \"[\" + i + \"]\"), u || (e.seen.indexOf(c.value) < 0 ? (u = isNull(t) ? formatValue(e, c.value, null) : formatValue(e, c.value, t - 1), u.indexOf(\"\\n\") > -1 && (u = o ? u.split(\"\\n\").map(function (e) {\n            return \"  \" + e;\n          }).join(\"\\n\").substr(2) : \"\\n\" + u.split(\"\\n\").map(function (e) {\n            return \"   \" + e;\n          }).join(\"\\n\"))) : u = e.stylize(\"[Circular]\", \"special\")), isUndefined(s)) {\n            if (o && i.match(/^\\d+$/)) return u;\n            s = JSON.stringify(\"\" + i), s.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/) ? (s = s.substr(1, s.length - 2), s = e.stylize(s, \"name\")) : (s = s.replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"').replace(/(^\"|\"$)/g, \"'\"), s = e.stylize(s, \"string\"));\n          }\n\n          return s + \": \" + u;\n        }\n\n        function reduceToSingleString(e, r, t) {\n          var n = 0,\n              i = e.reduce(function (e, r) {\n            return n++, r.indexOf(\"\\n\") >= 0 && n++, e + r.replace(/\\u001b\\[\\d\\d?m/g, \"\").length + 1;\n          }, 0);\n          return i > 60 ? t[0] + (\"\" === r ? \"\" : r + \"\\n \") + \" \" + e.join(\",\\n  \") + \" \" + t[1] : t[0] + r + \" \" + e.join(\", \") + \" \" + t[1];\n        }\n\n        function isArray(e) {\n          return Array.isArray(e);\n        }\n\n        function isBoolean(e) {\n          return \"boolean\" == typeof e;\n        }\n\n        function isNull(e) {\n          return null === e;\n        }\n\n        function isNullOrUndefined(e) {\n          return null == e;\n        }\n\n        function isNumber(e) {\n          return \"number\" == typeof e;\n        }\n\n        function isString(e) {\n          return \"string\" == typeof e;\n        }\n\n        function isSymbol(e) {\n          return \"symbol\" == typeof e;\n        }\n\n        function isUndefined(e) {\n          return void 0 === e;\n        }\n\n        function isRegExp(e) {\n          return isObject(e) && \"[object RegExp]\" === objectToString(e);\n        }\n\n        function isObject(e) {\n          return \"object\" == typeof e && null !== e;\n        }\n\n        function isDate(e) {\n          return isObject(e) && \"[object Date]\" === objectToString(e);\n        }\n\n        function isError(e) {\n          return isObject(e) && (\"[object Error]\" === objectToString(e) || e instanceof Error);\n        }\n\n        function isFunction(e) {\n          return \"function\" == typeof e;\n        }\n\n        function isPrimitive(e) {\n          return null === e || \"boolean\" == typeof e || \"number\" == typeof e || \"string\" == typeof e || \"symbol\" == typeof e || \"undefined\" == typeof e;\n        }\n\n        function objectToString(e) {\n          return Object.prototype.toString.call(e);\n        }\n\n        function pad(e) {\n          return e < 10 ? \"0\" + e.toString(10) : e.toString(10);\n        }\n\n        function timestamp() {\n          var e = new Date(),\n              r = [pad(e.getHours()), pad(e.getMinutes()), pad(e.getSeconds())].join(\":\");\n          return [e.getDate(), months[e.getMonth()], r].join(\" \");\n        }\n\n        function hasOwnProperty(e, r) {\n          return Object.prototype.hasOwnProperty.call(e, r);\n        }\n\n        var formatRegExp = /%[sdj%]/g;\n        exports.format = function (e) {\n          if (!isString(e)) {\n            for (var r = [], t = 0; t < arguments.length; t++) {\n              r.push(inspect(arguments[t]));\n            }\n\n            return r.join(\" \");\n          }\n\n          for (var t = 1, n = arguments, i = n.length, o = String(e).replace(formatRegExp, function (e) {\n            if (\"%%\" === e) return \"%\";\n            if (t >= i) return e;\n\n            switch (e) {\n              case \"%s\":\n                return String(n[t++]);\n\n              case \"%d\":\n                return Number(n[t++]);\n\n              case \"%j\":\n                try {\n                  return JSON.stringify(n[t++]);\n                } catch (e) {\n                  return \"[Circular]\";\n                }\n\n              default:\n                return e;\n            }\n          }), s = n[t]; t < i; s = n[++t]) {\n            o += isNull(s) || !isObject(s) ? \" \" + s : \" \" + inspect(s);\n          }\n\n          return o;\n        }, exports.deprecate = function (e, r) {\n          function t() {\n            if (!n) {\n              if (process.throwDeprecation) throw new Error(r);\n              process.traceDeprecation ? console.trace(r) : console.error(r), n = !0;\n            }\n\n            return e.apply(this, arguments);\n          }\n\n          if (isUndefined(global.process)) return function () {\n            return exports.deprecate(e, r).apply(this, arguments);\n          };\n          if (process.noDeprecation === !0) return e;\n          var n = !1;\n          return t;\n        };\n        var debugs = {},\n            debugEnviron;\n        exports.debuglog = function (e) {\n          if (isUndefined(debugEnviron) && (debugEnviron = process.env.NODE_DEBUG || \"\"), e = e.toUpperCase(), !debugs[e]) if (new RegExp(\"\\\\b\" + e + \"\\\\b\", \"i\").test(debugEnviron)) {\n            var r = process.pid;\n\n            debugs[e] = function () {\n              var t = exports.format.apply(exports, arguments);\n              console.error(\"%s %d: %s\", e, r, t);\n            };\n          } else debugs[e] = function () {};\n          return debugs[e];\n        }, exports.inspect = inspect, inspect.colors = {\n          bold: [1, 22],\n          italic: [3, 23],\n          underline: [4, 24],\n          inverse: [7, 27],\n          white: [37, 39],\n          grey: [90, 39],\n          black: [30, 39],\n          blue: [34, 39],\n          cyan: [36, 39],\n          green: [32, 39],\n          magenta: [35, 39],\n          red: [31, 39],\n          yellow: [33, 39]\n        }, inspect.styles = {\n          special: \"cyan\",\n          number: \"yellow\",\n          boolean: \"yellow\",\n          undefined: \"grey\",\n          null: \"bold\",\n          string: \"green\",\n          date: \"magenta\",\n          regexp: \"red\"\n        }, exports.isArray = isArray, exports.isBoolean = isBoolean, exports.isNull = isNull, exports.isNullOrUndefined = isNullOrUndefined, exports.isNumber = isNumber, exports.isString = isString, exports.isSymbol = isSymbol, exports.isUndefined = isUndefined, exports.isRegExp = isRegExp, exports.isObject = isObject, exports.isDate = isDate, exports.isError = isError, exports.isFunction = isFunction, exports.isPrimitive = isPrimitive, exports.isBuffer = _dereq_(\"./support/isBuffer\");\n        var months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n        exports.log = function () {\n          console.log(\"%s - %s\", timestamp(), exports.format.apply(exports, arguments));\n        }, exports.inherits = _dereq_(\"inherits\"), exports._extend = function (e, r) {\n          if (!r || !isObject(r)) return e;\n\n          for (var t = Object.keys(r), n = t.length; n--;) {\n            e[t[n]] = r[t[n]];\n          }\n\n          return e;\n        };\n      }).call(this, _dereq_('_process'), typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n    }, {\n      \"./support/isBuffer\": 31,\n      \"_process\": 26,\n      \"inherits\": 30\n    }],\n    33: [function (_dereq_, module, exports) {\n      module.exports.VectorTile = _dereq_(\"./lib/vectortile.js\"), module.exports.VectorTileFeature = _dereq_(\"./lib/vectortilefeature.js\"), module.exports.VectorTileLayer = _dereq_(\"./lib/vectortilelayer.js\");\n    }, {\n      \"./lib/vectortile.js\": 34,\n      \"./lib/vectortilefeature.js\": 35,\n      \"./lib/vectortilelayer.js\": 36\n    }],\n    34: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function VectorTile(e, r) {\n        this.layers = e.readFields(readTile, {}, r);\n      }\n\n      function readTile(e, r, i) {\n        if (3 === e) {\n          var t = new VectorTileLayer(i, i.readVarint() + i.pos);\n          t.length && (r[t.name] = t);\n        }\n      }\n\n      var VectorTileLayer = _dereq_(\"./vectortilelayer\");\n\n      module.exports = VectorTile;\n    }, {\n      \"./vectortilelayer\": 36\n    }],\n    35: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function VectorTileFeature(e, t, r, i, a) {\n        this.properties = {}, this.extent = r, this.type = 0, this._pbf = e, this._geometry = -1, this._keys = i, this._values = a, e.readFields(readFeature, this, t);\n      }\n\n      function readFeature(e, t, r) {\n        1 == e ? t.id = r.readVarint() : 2 == e ? readTag(r, t) : 3 == e ? t.type = r.readVarint() : 4 == e && (t._geometry = r.pos);\n      }\n\n      function readTag(e, t) {\n        for (var r = e.readVarint() + e.pos; e.pos < r;) {\n          var i = t._keys[e.readVarint()],\n              a = t._values[e.readVarint()];\n\n          t.properties[i] = a;\n        }\n      }\n\n      function classifyRings(e) {\n        var t = e.length;\n        if (t <= 1) return [e];\n\n        for (var r, i, a = [], o = 0; o < t; o++) {\n          var n = signedArea(e[o]);\n          0 !== n && (void 0 === i && (i = n < 0), i === n < 0 ? (r && a.push(r), r = [e[o]]) : r.push(e[o]));\n        }\n\n        return r && a.push(r), a;\n      }\n\n      function signedArea(e) {\n        for (var t, r, i = 0, a = 0, o = e.length, n = o - 1; a < o; n = a++) {\n          t = e[a], r = e[n], i += (r.x - t.x) * (t.y + r.y);\n        }\n\n        return i;\n      }\n\n      var Point = _dereq_(\"point-geometry\");\n\n      module.exports = VectorTileFeature, VectorTileFeature.types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"], VectorTileFeature.prototype.loadGeometry = function () {\n        var e = this._pbf;\n        e.pos = this._geometry;\n\n        for (var t, r = e.readVarint() + e.pos, i = 1, a = 0, o = 0, n = 0, s = []; e.pos < r;) {\n          if (!a) {\n            var p = e.readVarint();\n            i = 7 & p, a = p >> 3;\n          }\n\n          if (a--, 1 === i || 2 === i) o += e.readSVarint(), n += e.readSVarint(), 1 === i && (t && s.push(t), t = []), t.push(new Point(o, n));else {\n            if (7 !== i) throw new Error(\"unknown command \" + i);\n            t && t.push(t[0].clone());\n          }\n        }\n\n        return t && s.push(t), s;\n      }, VectorTileFeature.prototype.bbox = function () {\n        var e = this._pbf;\n        e.pos = this._geometry;\n\n        for (var t = e.readVarint() + e.pos, r = 1, i = 0, a = 0, o = 0, n = 1 / 0, s = -(1 / 0), p = 1 / 0, h = -(1 / 0); e.pos < t;) {\n          if (!i) {\n            var u = e.readVarint();\n            r = 7 & u, i = u >> 3;\n          }\n\n          if (i--, 1 === r || 2 === r) a += e.readSVarint(), o += e.readSVarint(), a < n && (n = a), a > s && (s = a), o < p && (p = o), o > h && (h = o);else if (7 !== r) throw new Error(\"unknown command \" + r);\n        }\n\n        return [n, p, s, h];\n      }, VectorTileFeature.prototype.toGeoJSON = function (e, t, r) {\n        function i(e) {\n          for (var t = 0; t < e.length; t++) {\n            var r = e[t],\n                i = 180 - 360 * (r.y + p) / n;\n            e[t] = [360 * (r.x + s) / n - 180, 360 / Math.PI * Math.atan(Math.exp(i * Math.PI / 180)) - 90];\n          }\n        }\n\n        var a,\n            o,\n            n = this.extent * Math.pow(2, r),\n            s = this.extent * e,\n            p = this.extent * t,\n            h = this.loadGeometry(),\n            u = VectorTileFeature.types[this.type];\n\n        switch (this.type) {\n          case 1:\n            var d = [];\n\n            for (a = 0; a < h.length; a++) {\n              d[a] = h[a][0];\n            }\n\n            h = d, i(h);\n            break;\n\n          case 2:\n            for (a = 0; a < h.length; a++) {\n              i(h[a]);\n            }\n\n            break;\n\n          case 3:\n            for (h = classifyRings(h), a = 0; a < h.length; a++) {\n              for (o = 0; o < h[a].length; o++) {\n                i(h[a][o]);\n              }\n            }\n\n        }\n\n        1 === h.length ? h = h[0] : u = \"Multi\" + u;\n        var f = {\n          type: \"Feature\",\n          geometry: {\n            type: u,\n            coordinates: h\n          },\n          properties: this.properties\n        };\n        return \"id\" in this && (f.id = this.id), f;\n      };\n    }, {\n      \"point-geometry\": 25\n    }],\n    36: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function VectorTileLayer(e, t) {\n        this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = e, this._keys = [], this._values = [], this._features = [], e.readFields(readLayer, this, t), this.length = this._features.length;\n      }\n\n      function readLayer(e, t, r) {\n        15 === e ? t.version = r.readVarint() : 1 === e ? t.name = r.readString() : 5 === e ? t.extent = r.readVarint() : 2 === e ? t._features.push(r.pos) : 3 === e ? t._keys.push(r.readString()) : 4 === e && t._values.push(readValueMessage(r));\n      }\n\n      function readValueMessage(e) {\n        for (var t = null, r = e.readVarint() + e.pos; e.pos < r;) {\n          var a = e.readVarint() >> 3;\n          t = 1 === a ? e.readString() : 2 === a ? e.readFloat() : 3 === a ? e.readDouble() : 4 === a ? e.readVarint64() : 5 === a ? e.readVarint() : 6 === a ? e.readSVarint() : 7 === a ? e.readBoolean() : null;\n        }\n\n        return t;\n      }\n\n      var VectorTileFeature = _dereq_(\"./vectortilefeature.js\");\n\n      module.exports = VectorTileLayer, VectorTileLayer.prototype.feature = function (e) {\n        if (e < 0 || e >= this._features.length) throw new Error(\"feature index out of bounds\");\n        this._pbf.pos = this._features[e];\n\n        var t = this._pbf.readVarint() + this._pbf.pos;\n\n        return new VectorTileFeature(this._pbf, t, this.extent, this._keys, this._values);\n      };\n    }, {\n      \"./vectortilefeature.js\": 35\n    }],\n    37: [function (_dereq_, module, exports) {\n      function fromVectorTileJs(e) {\n        var r = [];\n\n        for (var o in e.layers) {\n          r.push(prepareLayer(e.layers[o]));\n        }\n\n        var t = new Pbf();\n        return vtpb.tile.write({\n          layers: r\n        }, t), t.finish();\n      }\n\n      function fromGeojsonVt(e) {\n        var r = {};\n\n        for (var o in e) {\n          r[o] = new GeoJSONWrapper(e[o].features), r[o].name = o;\n        }\n\n        return fromVectorTileJs({\n          layers: r\n        });\n      }\n\n      function prepareLayer(e) {\n        for (var r = {\n          name: e.name || \"\",\n          version: e.version || 1,\n          extent: e.extent || 4096,\n          keys: [],\n          values: [],\n          features: []\n        }, o = {}, t = {}, n = 0; n < e.length; n++) {\n          var a = e.feature(n);\n          a.geometry = encodeGeometry(a.loadGeometry());\n          var u = [];\n\n          for (var s in a.properties) {\n            var i = o[s];\n            \"undefined\" == typeof i && (r.keys.push(s), i = r.keys.length - 1, o[s] = i);\n            var p = wrapValue(a.properties[s]),\n                l = t[p.key];\n            \"undefined\" == typeof l && (r.values.push(p), l = r.values.length - 1, t[p.key] = l), u.push(i), u.push(l);\n          }\n\n          a.tags = u, r.features.push(a);\n        }\n\n        return r;\n      }\n\n      function command(e, r) {\n        return (r << 3) + (7 & e);\n      }\n\n      function zigzag(e) {\n        return e << 1 ^ e >> 31;\n      }\n\n      function encodeGeometry(e) {\n        for (var r = [], o = 0, t = 0, n = e.length, a = 0; a < n; a++) {\n          var u = e[a];\n          r.push(command(1, 1));\n\n          for (var s = 0; s < u.length; s++) {\n            1 === s && r.push(command(2, u.length - 1));\n            var i = u[s].x - o,\n                p = u[s].y - t;\n            r.push(zigzag(i), zigzag(p)), o += i, t += p;\n          }\n        }\n\n        return r;\n      }\n\n      function wrapValue(e) {\n        var r,\n            o = typeof e;\n        return \"string\" === o ? r = {\n          string_value: e\n        } : \"boolean\" === o ? r = {\n          bool_value: e\n        } : \"number\" === o ? r = e % 1 !== 0 ? {\n          double_value: e\n        } : e < 0 ? {\n          sint_value: e\n        } : {\n          uint_value: e\n        } : (e = JSON.stringify(e), r = {\n          string_value: e\n        }), r.key = o + \":\" + e, r;\n      }\n\n      var Pbf = _dereq_(\"pbf\"),\n          vtpb = _dereq_(\"./vector-tile-pb\"),\n          GeoJSONWrapper = _dereq_(\"./lib/geojson_wrapper\");\n\n      module.exports = fromVectorTileJs, module.exports.fromVectorTileJs = fromVectorTileJs, module.exports.fromGeojsonVt = fromGeojsonVt, module.exports.GeoJSONWrapper = GeoJSONWrapper;\n    }, {\n      \"./lib/geojson_wrapper\": 38,\n      \"./vector-tile-pb\": 39,\n      \"pbf\": 24\n    }],\n    38: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function GeoJSONWrapper(e) {\n        this.features = e, this.length = e.length;\n      }\n\n      function FeatureWrapper(e) {\n        this.id = \"number\" == typeof e.id ? e.id : void 0, this.type = e.type, this.rawGeometry = 1 === e.type ? [e.geometry] : e.geometry, this.properties = e.tags, this.extent = 4096;\n      }\n\n      var Point = _dereq_(\"point-geometry\"),\n          VectorTileFeature = _dereq_(\"vector-tile\").VectorTileFeature;\n\n      module.exports = GeoJSONWrapper, GeoJSONWrapper.prototype.feature = function (e) {\n        return new FeatureWrapper(this.features[e]);\n      }, FeatureWrapper.prototype.loadGeometry = function () {\n        var e = this.rawGeometry;\n        this.geometry = [];\n\n        for (var t = 0; t < e.length; t++) {\n          for (var r = e[t], o = [], a = 0; a < r.length; a++) {\n            o.push(new Point(r[a][0], r[a][1]));\n          }\n\n          this.geometry.push(o);\n        }\n\n        return this.geometry;\n      }, FeatureWrapper.prototype.bbox = function () {\n        this.geometry || this.loadGeometry();\n\n        for (var e = this.geometry, t = 1 / 0, r = -(1 / 0), o = 1 / 0, a = -(1 / 0), i = 0; i < e.length; i++) {\n          for (var p = e[i], n = 0; n < p.length; n++) {\n            var h = p[n];\n            t = Math.min(t, h.x), r = Math.max(r, h.x), o = Math.min(o, h.y), a = Math.max(a, h.y);\n          }\n        }\n\n        return [t, o, r, a];\n      }, FeatureWrapper.prototype.toGeoJSON = VectorTileFeature.prototype.toGeoJSON;\n    }, {\n      \"point-geometry\": 25,\n      \"vector-tile\": 33\n    }],\n    39: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function readTile(e, r) {\n        return e.readFields(readTileField, {\n          layers: []\n        }, r);\n      }\n\n      function readTileField(e, r, i) {\n        3 === e && r.layers.push(readLayer(i, i.readVarint() + i.pos));\n      }\n\n      function writeTile(e, r) {\n        var i;\n        if (void 0 !== e.layers) for (i = 0; i < e.layers.length; i++) {\n          r.writeMessage(3, writeLayer, e.layers[i]);\n        }\n      }\n\n      function readValue(e, r) {\n        return e.readFields(readValueField, {}, r);\n      }\n\n      function readValueField(e, r, i) {\n        1 === e ? r.string_value = i.readString() : 2 === e ? r.float_value = i.readFloat() : 3 === e ? r.double_value = i.readDouble() : 4 === e ? r.int_value = i.readVarint() : 5 === e ? r.uint_value = i.readVarint() : 6 === e ? r.sint_value = i.readSVarint() : 7 === e && (r.bool_value = i.readBoolean());\n      }\n\n      function writeValue(e, r) {\n        void 0 !== e.string_value && r.writeStringField(1, e.string_value), void 0 !== e.float_value && r.writeFloatField(2, e.float_value), void 0 !== e.double_value && r.writeDoubleField(3, e.double_value), void 0 !== e.int_value && r.writeVarintField(4, e.int_value), void 0 !== e.uint_value && r.writeVarintField(5, e.uint_value), void 0 !== e.sint_value && r.writeSVarintField(6, e.sint_value), void 0 !== e.bool_value && r.writeBooleanField(7, e.bool_value);\n      }\n\n      function readFeature(e, r) {\n        var i = e.readFields(readFeatureField, {}, r);\n        return void 0 === i.type && (i.type = \"Unknown\"), i;\n      }\n\n      function readFeatureField(e, r, i) {\n        1 === e ? r.id = i.readVarint() : 2 === e ? r.tags = i.readPackedVarint() : 3 === e ? r.type = i.readVarint() : 4 === e && (r.geometry = i.readPackedVarint());\n      }\n\n      function writeFeature(e, r) {\n        void 0 !== e.id && r.writeVarintField(1, e.id), void 0 !== e.tags && r.writePackedVarint(2, e.tags), void 0 !== e.type && r.writeVarintField(3, e.type), void 0 !== e.geometry && r.writePackedVarint(4, e.geometry);\n      }\n\n      function readLayer(e, r) {\n        return e.readFields(readLayerField, {\n          features: [],\n          keys: [],\n          values: []\n        }, r);\n      }\n\n      function readLayerField(e, r, i) {\n        15 === e ? r.version = i.readVarint() : 1 === e ? r.name = i.readString() : 2 === e ? r.features.push(readFeature(i, i.readVarint() + i.pos)) : 3 === e ? r.keys.push(i.readString()) : 4 === e ? r.values.push(readValue(i, i.readVarint() + i.pos)) : 5 === e && (r.extent = i.readVarint());\n      }\n\n      function writeLayer(e, r) {\n        void 0 !== e.version && r.writeVarintField(15, e.version), void 0 !== e.name && r.writeStringField(1, e.name);\n        var i;\n        if (void 0 !== e.features) for (i = 0; i < e.features.length; i++) {\n          r.writeMessage(2, writeFeature, e.features[i]);\n        }\n        if (void 0 !== e.keys) for (i = 0; i < e.keys.length; i++) {\n          r.writeStringField(3, e.keys[i]);\n        }\n        if (void 0 !== e.values) for (i = 0; i < e.values.length; i++) {\n          r.writeMessage(4, writeValue, e.values[i]);\n        }\n        void 0 !== e.extent && r.writeVarintField(5, e.extent);\n      }\n\n      var tile = exports.tile = {\n        read: readTile,\n        write: writeTile\n      };\n      tile.GeomType = {\n        Unknown: 0,\n        Point: 1,\n        LineString: 2,\n        Polygon: 3\n      }, tile.value = {\n        read: readValue,\n        write: writeValue\n      }, tile.feature = {\n        read: readFeature,\n        write: writeFeature\n      }, tile.layer = {\n        read: readLayer,\n        write: writeLayer\n      };\n    }, {}],\n    40: [function (_dereq_, module, exports) {\n      var bundleFn = arguments[3],\n          sources = arguments[4],\n          cache = arguments[5],\n          stringify = JSON.stringify;\n\n      module.exports = function (r, e) {\n        function t(r) {\n          d[r] = !0;\n\n          for (var e in sources[r][1]) {\n            var n = sources[r][1][e];\n            d[n] || t(n);\n          }\n        }\n\n        for (var n, o = Object.keys(cache), a = 0, i = o.length; a < i; a++) {\n          var s = o[a],\n              u = cache[s].exports;\n\n          if (u === r || u && u.default === r) {\n            n = s;\n            break;\n          }\n        }\n\n        if (!n) {\n          n = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n          for (var f = {}, a = 0, i = o.length; a < i; a++) {\n            var s = o[a];\n            f[s] = s;\n          }\n\n          sources[n] = [Function([\"require\", \"module\", \"exports\"], \"(\" + r + \")(self)\"), f];\n        }\n\n        var c = Math.floor(Math.pow(16, 8) * Math.random()).toString(16),\n            l = {};\n        l[n] = n, sources[c] = [Function([\"require\"], \"var f = require(\" + stringify(n) + \");(f.default ? f.default : f)(self);\"), l];\n        var d = {};\n        t(c);\n        var g = \"(\" + bundleFn + \")({\" + Object.keys(d).map(function (r) {\n          return stringify(r) + \":[\" + sources[r][0] + \",\" + stringify(sources[r][1]) + \"]\";\n        }).join(\",\") + \"},{},[\" + stringify(c) + \"])\",\n            v = window.URL || window.webkitURL || window.mozURL || window.msURL,\n            w = new Blob([g], {\n          type: \"text/javascript\"\n        });\n        if (e && e.bare) return w;\n        var h = v.createObjectURL(w),\n            b = new Worker(h);\n        return b.objectURL = h, b;\n      };\n    }, {}],\n    41: [function (_dereq_, module, exports) {\n      module.exports.RADIUS = 6378137, module.exports.FLATTENING = 1 / 298.257223563, module.exports.POLAR_RADIUS = 6356752.3142;\n    }, {}],\n    42: [function (_dereq_, module, exports) {\n      module.exports = {\n        \"version\": \"0.38.0\"\n      };\n    }, {}],\n    43: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function serializePaintVertexArrays(r, e) {\n        var t = {};\n\n        for (var a in r) {\n          var i = r[a].paintVertexArray;\n\n          if (0 !== i.length) {\n            var n = i.serialize(e),\n                s = i.constructor.serialize();\n            t[a] = {\n              array: n,\n              type: s\n            };\n          }\n        }\n\n        return t;\n      }\n\n      var ProgramConfiguration = _dereq_(\"./program_configuration\"),\n          createVertexArrayType = _dereq_(\"./vertex_array_type\"),\n          Segment = function Segment(r, e) {\n        this.vertexOffset = r, this.primitiveOffset = e, this.vertexLength = 0, this.primitiveLength = 0;\n      },\n          ArrayGroup = function ArrayGroup(r, e, t) {\n        var a = this;\n        this.globalProperties = {\n          zoom: t\n        };\n        var i = createVertexArrayType(r.layoutAttributes);\n        this.layoutVertexArray = new i();\n        var n = r.elementArrayType;\n        n && (this.elementArray = new n());\n        var s = r.elementArrayType2;\n        s && (this.elementArray2 = new s()), this.layerData = {};\n\n        for (var y = 0, o = e; y < o.length; y += 1) {\n          var p = o[y],\n              l = ProgramConfiguration.createDynamic(r, p, t);\n          a.layerData[p.id] = {\n            layer: p,\n            programConfiguration: l,\n            paintVertexArray: new l.PaintVertexArray(),\n            paintPropertyStatistics: l.createPaintPropertyStatistics()\n          };\n        }\n\n        this.segments = [], this.segments2 = [];\n      };\n\n      ArrayGroup.prototype.prepareSegment = function (r) {\n        var e = this.segments[this.segments.length - 1];\n        return (!e || e.vertexLength + r > ArrayGroup.MAX_VERTEX_ARRAY_LENGTH) && (e = new Segment(this.layoutVertexArray.length, this.elementArray.length), this.segments.push(e)), e;\n      }, ArrayGroup.prototype.prepareSegment2 = function (r) {\n        var e = this.segments2[this.segments2.length - 1];\n        return (!e || e.vertexLength + r > ArrayGroup.MAX_VERTEX_ARRAY_LENGTH) && (e = new Segment(this.layoutVertexArray.length, this.elementArray2.length), this.segments2.push(e)), e;\n      }, ArrayGroup.prototype.populatePaintArrays = function (r) {\n        var e = this;\n\n        for (var t in e.layerData) {\n          var a = e.layerData[t];\n          0 !== a.paintVertexArray.bytesPerElement && a.programConfiguration.populatePaintArray(a.layer, a.paintVertexArray, a.paintPropertyStatistics, e.layoutVertexArray.length, e.globalProperties, r);\n        }\n      }, ArrayGroup.prototype.isEmpty = function () {\n        return 0 === this.layoutVertexArray.length;\n      }, ArrayGroup.prototype.serialize = function (r) {\n        return {\n          layoutVertexArray: this.layoutVertexArray.serialize(r),\n          elementArray: this.elementArray && this.elementArray.serialize(r),\n          elementArray2: this.elementArray2 && this.elementArray2.serialize(r),\n          paintVertexArrays: serializePaintVertexArrays(this.layerData, r),\n          segments: this.segments,\n          segments2: this.segments2\n        };\n      }, ArrayGroup.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, module.exports = ArrayGroup;\n    }, {\n      \"./program_configuration\": 57,\n      \"./vertex_array_type\": 59\n    }],\n    44: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ArrayGroup = _dereq_(\"./array_group\"),\n          BufferGroup = _dereq_(\"./buffer_group\"),\n          util = _dereq_(\"../util/util\"),\n          Bucket = function Bucket(r, t) {\n        this.zoom = r.zoom, this.overscaling = r.overscaling, this.layers = r.layers, this.index = r.index, r.arrays ? this.buffers = new BufferGroup(t, r.layers, r.zoom, r.arrays) : this.arrays = new ArrayGroup(t, r.layers, r.zoom);\n      };\n\n      Bucket.prototype.populate = function (r, t) {\n        for (var e = this, i = 0, a = r; i < a.length; i += 1) {\n          var u = a[i];\n          e.layers[0].filter(u) && (e.addFeature(u), t.featureIndex.insert(u, e.index));\n        }\n      }, Bucket.prototype.getPaintPropertyStatistics = function () {\n        return util.mapObject(this.arrays.layerData, function (r) {\n          return r.paintPropertyStatistics;\n        });\n      }, Bucket.prototype.isEmpty = function () {\n        return this.arrays.isEmpty();\n      }, Bucket.prototype.serialize = function (r) {\n        return {\n          zoom: this.zoom,\n          layerIds: this.layers.map(function (r) {\n            return r.id;\n          }),\n          arrays: this.arrays.serialize(r)\n        };\n      }, Bucket.prototype.destroy = function () {\n        this.buffers && (this.buffers.destroy(), this.buffers = null);\n      }, module.exports = Bucket, Bucket.deserialize = function (r, t) {\n        if (t) {\n          for (var e = {}, i = 0, a = r; i < a.length; i += 1) {\n            var u = a[i],\n                o = u.layerIds.map(function (r) {\n              return t.getLayer(r);\n            }).filter(Boolean);\n            if (0 !== o.length) for (var s = o[0].createBucket(util.extend({\n              layers: o\n            }, u)), n = 0, f = o; n < f.length; n += 1) {\n              var y = f[n];\n              e[y.id] = s;\n            }\n          }\n\n          return e;\n        }\n      };\n    }, {\n      \"../util/util\": 215,\n      \"./array_group\": 43,\n      \"./buffer_group\": 51\n    }],\n    45: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function addCircleVertex(e, r, t, c, i) {\n        e.emplaceBack(2 * r + (c + 1) / 2, 2 * t + (i + 1) / 2);\n      }\n\n      var Bucket = _dereq_(\"../bucket\"),\n          createElementArrayType = _dereq_(\"../element_array_type\"),\n          loadGeometry = _dereq_(\"../load_geometry\"),\n          EXTENT = _dereq_(\"../extent\"),\n          circleInterface = {\n        layoutAttributes: [{\n          name: \"a_pos\",\n          components: 2,\n          type: \"Int16\"\n        }],\n        elementArrayType: createElementArrayType(),\n        paintAttributes: [{\n          property: \"circle-color\",\n          type: \"Uint8\"\n        }, {\n          property: \"circle-radius\",\n          type: \"Uint16\",\n          multiplier: 10\n        }, {\n          property: \"circle-blur\",\n          type: \"Uint16\",\n          multiplier: 10\n        }, {\n          property: \"circle-opacity\",\n          type: \"Uint8\",\n          multiplier: 255\n        }, {\n          property: \"circle-stroke-color\",\n          type: \"Uint8\"\n        }, {\n          property: \"circle-stroke-width\",\n          type: \"Uint16\",\n          multiplier: 10\n        }, {\n          property: \"circle-stroke-opacity\",\n          type: \"Uint8\",\n          multiplier: 255\n        }]\n      },\n          CircleBucket = function (e) {\n        function r(r) {\n          e.call(this, r, circleInterface);\n        }\n\n        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.addFeature = function (e) {\n          for (var r = this.arrays, t = 0, c = loadGeometry(e); t < c.length; t += 1) {\n            for (var i = c[t], a = 0, p = i; a < p.length; a += 1) {\n              var l = p[a],\n                  o = l.x,\n                  y = l.y;\n\n              if (!(o < 0 || o >= EXTENT || y < 0 || y >= EXTENT)) {\n                var n = r.prepareSegment(4),\n                    u = n.vertexLength;\n                addCircleVertex(r.layoutVertexArray, o, y, -1, -1), addCircleVertex(r.layoutVertexArray, o, y, 1, -1), addCircleVertex(r.layoutVertexArray, o, y, 1, 1), addCircleVertex(r.layoutVertexArray, o, y, -1, 1), r.elementArray.emplaceBack(u, u + 1, u + 2), r.elementArray.emplaceBack(u, u + 3, u + 2), n.vertexLength += 4, n.primitiveLength += 2;\n              }\n            }\n          }\n\n          r.populatePaintArrays(e.properties);\n        }, r;\n      }(Bucket);\n\n      CircleBucket.programInterface = circleInterface, module.exports = CircleBucket;\n    }, {\n      \"../bucket\": 44,\n      \"../element_array_type\": 52,\n      \"../extent\": 53,\n      \"../load_geometry\": 55\n    }],\n    46: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Bucket = _dereq_(\"../bucket\"),\n          createElementArrayType = _dereq_(\"../element_array_type\"),\n          loadGeometry = _dereq_(\"../load_geometry\"),\n          earcut = _dereq_(\"earcut\"),\n          classifyRings = _dereq_(\"../../util/classify_rings\"),\n          EARCUT_MAX_RINGS = 500,\n          fillInterface = {\n        layoutAttributes: [{\n          name: \"a_pos\",\n          components: 2,\n          type: \"Int16\"\n        }],\n        elementArrayType: createElementArrayType(3),\n        elementArrayType2: createElementArrayType(2),\n        paintAttributes: [{\n          property: \"fill-color\",\n          type: \"Uint8\"\n        }, {\n          property: \"fill-outline-color\",\n          type: \"Uint8\"\n        }, {\n          property: \"fill-opacity\",\n          type: \"Uint8\",\n          multiplier: 255\n        }]\n      },\n          FillBucket = function (e) {\n        function t(t) {\n          e.call(this, t, fillInterface);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.addFeature = function (e) {\n          for (var t = this.arrays, r = 0, a = classifyRings(loadGeometry(e), EARCUT_MAX_RINGS); r < a.length; r += 1) {\n            for (var l = a[r], n = 0, p = 0, i = l; p < i.length; p += 1) {\n              var o = i[p];\n              n += o.length;\n            }\n\n            for (var y = t.prepareSegment(n), c = y.vertexLength, u = [], s = [], g = 0, h = l; g < h.length; g += 1) {\n              var m = h[g];\n\n              if (0 !== m.length) {\n                m !== l[0] && s.push(u.length / 2);\n                var f = t.prepareSegment2(m.length),\n                    A = f.vertexLength;\n                t.layoutVertexArray.emplaceBack(m[0].x, m[0].y), t.elementArray2.emplaceBack(A + m.length - 1, A), u.push(m[0].x), u.push(m[0].y);\n\n                for (var v = 1; v < m.length; v++) {\n                  t.layoutVertexArray.emplaceBack(m[v].x, m[v].y), t.elementArray2.emplaceBack(A + v - 1, A + v), u.push(m[v].x), u.push(m[v].y);\n                }\n\n                f.vertexLength += m.length, f.primitiveLength += m.length;\n              }\n            }\n\n            for (var _ = earcut(u, s), k = 0; k < _.length; k += 3) {\n              t.elementArray.emplaceBack(c + _[k], c + _[k + 1], c + _[k + 2]);\n            }\n\n            y.vertexLength += n, y.primitiveLength += _.length / 3;\n          }\n\n          t.populatePaintArrays(e.properties);\n        }, t;\n      }(Bucket);\n\n      FillBucket.programInterface = fillInterface, module.exports = FillBucket;\n    }, {\n      \"../../util/classify_rings\": 197,\n      \"../bucket\": 44,\n      \"../element_array_type\": 52,\n      \"../load_geometry\": 55,\n      \"earcut\": 5\n    }],\n    47: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function addVertex(e, t, r, a, n, o, i, y) {\n        e.emplaceBack(t, r, 2 * Math.floor(a * FACTOR) + i, n * FACTOR * 2, o * FACTOR * 2, Math.round(y));\n      }\n\n      function isBoundaryEdge(e, t) {\n        return e.x === t.x && (e.x < 0 || e.x > EXTENT) || e.y === t.y && (e.y < 0 || e.y > EXTENT);\n      }\n\n      var Bucket = _dereq_(\"../bucket\"),\n          createElementArrayType = _dereq_(\"../element_array_type\"),\n          loadGeometry = _dereq_(\"../load_geometry\"),\n          EXTENT = _dereq_(\"../extent\"),\n          earcut = _dereq_(\"earcut\"),\n          classifyRings = _dereq_(\"../../util/classify_rings\"),\n          EARCUT_MAX_RINGS = 500,\n          fillExtrusionInterface = {\n        layoutAttributes: [{\n          name: \"a_pos\",\n          components: 2,\n          type: \"Int16\"\n        }, {\n          name: \"a_normal\",\n          components: 3,\n          type: \"Int16\"\n        }, {\n          name: \"a_edgedistance\",\n          components: 1,\n          type: \"Int16\"\n        }],\n        elementArrayType: createElementArrayType(3),\n        paintAttributes: [{\n          property: \"fill-extrusion-base\",\n          type: \"Uint16\"\n        }, {\n          property: \"fill-extrusion-height\",\n          type: \"Uint16\"\n        }, {\n          property: \"fill-extrusion-color\",\n          type: \"Uint8\"\n        }]\n      },\n          FACTOR = Math.pow(2, 13),\n          FillExtrusionBucket = function (e) {\n        function t(t) {\n          e.call(this, t, fillExtrusionInterface);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.addFeature = function (e) {\n          for (var t = this.arrays, r = 0, a = classifyRings(loadGeometry(e), EARCUT_MAX_RINGS); r < a.length; r += 1) {\n            for (var n = a[r], o = 0, i = 0, y = n; i < y.length; i += 1) {\n              var l = y[i];\n              o += l.length;\n            }\n\n            for (var u = t.prepareSegment(5 * o), p = [], s = [], c = [], x = 0, f = n; x < f.length; x += 1) {\n              var d = f[x];\n\n              if (0 !== d.length) {\n                d !== n[0] && s.push(p.length / 2);\n\n                for (var m = 0, h = 0; h < d.length; h++) {\n                  var g = d[h];\n\n                  if (addVertex(t.layoutVertexArray, g.x, g.y, 0, 0, 1, 1, 0), c.push(u.vertexLength++), h >= 1) {\n                    var A = d[h - 1];\n\n                    if (!isBoundaryEdge(g, A)) {\n                      var E = g.sub(A)._perp()._unit();\n\n                      addVertex(t.layoutVertexArray, g.x, g.y, E.x, E.y, 0, 0, m), addVertex(t.layoutVertexArray, g.x, g.y, E.x, E.y, 0, 1, m), m += A.dist(g), addVertex(t.layoutVertexArray, A.x, A.y, E.x, E.y, 0, 0, m), addVertex(t.layoutVertexArray, A.x, A.y, E.x, E.y, 0, 1, m);\n                      var v = u.vertexLength;\n                      t.elementArray.emplaceBack(v, v + 1, v + 2), t.elementArray.emplaceBack(v + 1, v + 2, v + 3), u.vertexLength += 4, u.primitiveLength += 2;\n                    }\n                  }\n\n                  p.push(g.x), p.push(g.y);\n                }\n              }\n            }\n\n            for (var _ = earcut(p, s), T = 0; T < _.length; T += 3) {\n              t.elementArray.emplaceBack(c[_[T]], c[_[T + 1]], c[_[T + 2]]);\n            }\n\n            u.primitiveLength += _.length / 3;\n          }\n\n          t.populatePaintArrays(e.properties);\n        }, t;\n      }(Bucket);\n\n      FillExtrusionBucket.programInterface = fillExtrusionInterface, module.exports = FillExtrusionBucket;\n    }, {\n      \"../../util/classify_rings\": 197,\n      \"../bucket\": 44,\n      \"../element_array_type\": 52,\n      \"../extent\": 53,\n      \"../load_geometry\": 55,\n      \"earcut\": 5\n    }],\n    48: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function addLineVertex(e, t, r, i, a, n, d) {\n        e.emplaceBack(t.x << 1 | i, t.y << 1 | a, Math.round(EXTRUDE_SCALE * r.x) + 128, Math.round(EXTRUDE_SCALE * r.y) + 128, (0 === n ? 0 : n < 0 ? -1 : 1) + 1 | (d * LINE_DISTANCE_SCALE & 63) << 2, d * LINE_DISTANCE_SCALE >> 6);\n      }\n\n      var Bucket = _dereq_(\"../bucket\"),\n          createElementArrayType = _dereq_(\"../element_array_type\"),\n          loadGeometry = _dereq_(\"../load_geometry\"),\n          EXTENT = _dereq_(\"../extent\"),\n          VectorTileFeature = _dereq_(\"vector-tile\").VectorTileFeature,\n          EXTRUDE_SCALE = 63,\n          COS_HALF_SHARP_CORNER = Math.cos(37.5 * (Math.PI / 180)),\n          SHARP_CORNER_OFFSET = 15,\n          LINE_DISTANCE_BUFFER_BITS = 15,\n          LINE_DISTANCE_SCALE = .5,\n          MAX_LINE_DISTANCE = Math.pow(2, LINE_DISTANCE_BUFFER_BITS - 1) / LINE_DISTANCE_SCALE,\n          lineInterface = {\n        layoutAttributes: [{\n          name: \"a_pos\",\n          components: 2,\n          type: \"Int16\"\n        }, {\n          name: \"a_data\",\n          components: 4,\n          type: \"Uint8\"\n        }],\n        paintAttributes: [{\n          property: \"line-color\",\n          type: \"Uint8\"\n        }, {\n          property: \"line-blur\",\n          multiplier: 10,\n          type: \"Uint8\"\n        }, {\n          property: \"line-opacity\",\n          multiplier: 10,\n          type: \"Uint8\"\n        }, {\n          property: \"line-gap-width\",\n          multiplier: 10,\n          type: \"Uint8\",\n          name: \"a_gapwidth\"\n        }, {\n          property: \"line-offset\",\n          multiplier: 1,\n          type: \"Int8\"\n        }],\n        elementArrayType: createElementArrayType()\n      },\n          LineBucket = function (e) {\n        function t(t) {\n          e.call(this, t, lineInterface);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.addFeature = function (e) {\n          for (var t = this, r = this.layers[0].layout, i = r[\"line-join\"], a = r[\"line-cap\"], n = r[\"line-miter-limit\"], d = r[\"line-round-limit\"], s = 0, u = loadGeometry(e, LINE_DISTANCE_BUFFER_BITS); s < u.length; s += 1) {\n            var l = u[s];\n            t.addLine(l, e, i, a, n, d);\n          }\n        }, t.prototype.addLine = function (e, t, r, i, a, n) {\n          for (var d = this, s = t.properties, u = \"Polygon\" === VectorTileFeature.types[t.type], l = e.length; l >= 2 && e[l - 1].equals(e[l - 2]);) {\n            l--;\n          }\n\n          for (var o = 0; o < l - 1 && e[o].equals(e[o + 1]);) {\n            o++;\n          }\n\n          if (!(l < (u ? 3 : 2))) {\n            \"bevel\" === r && (a = 1.05);\n\n            var p = SHARP_CORNER_OFFSET * (EXTENT / (512 * this.overscaling)),\n                c = e[o],\n                _ = this.arrays,\n                h = _.prepareSegment(10 * l);\n\n            this.distance = 0;\n            var y,\n                m,\n                E,\n                x,\n                C,\n                v,\n                f,\n                A = i,\n                L = u ? \"butt\" : i,\n                S = !0;\n            this.e1 = this.e2 = this.e3 = -1, u && (y = e[l - 2], C = c.sub(y)._unit()._perp());\n\n            for (var V = o; V < l; V++) {\n              if (E = u && V === l - 1 ? e[o + 1] : e[V + 1], !E || !e[V].equals(E)) {\n                C && (x = C), y && (m = y), y = e[V], C = E ? E.sub(y)._unit()._perp() : x, x = x || C;\n                var I = x.add(C);\n                0 === I.x && 0 === I.y || I._unit();\n                var T = I.x * C.x + I.y * C.y,\n                    N = 0 !== T ? 1 / T : 1 / 0,\n                    b = T < COS_HALF_SHARP_CORNER && m && E;\n\n                if (b && V > o) {\n                  var R = y.dist(m);\n\n                  if (R > 2 * p) {\n                    var g = y.sub(y.sub(m)._mult(p / R)._round());\n                    d.distance += g.dist(m), d.addCurrentVertex(g, d.distance, x.mult(1), 0, 0, !1, h), m = g;\n                  }\n                }\n\n                var F = m && E,\n                    B = F ? r : E ? A : L;\n                if (F && \"round\" === B && (N < n ? B = \"miter\" : N <= 2 && (B = \"fakeround\")), \"miter\" === B && N > a && (B = \"bevel\"), \"bevel\" === B && (N > 2 && (B = \"flipbevel\"), N < a && (B = \"miter\")), m && (d.distance += y.dist(m)), \"miter\" === B) I._mult(N), d.addCurrentVertex(y, d.distance, I, 0, 0, !1, h);else if (\"flipbevel\" === B) {\n                  if (N > 100) I = C.clone().mult(-1);else {\n                    var k = x.x * C.y - x.y * C.x > 0 ? -1 : 1,\n                        D = N * x.add(C).mag() / x.sub(C).mag();\n\n                    I._perp()._mult(D * k);\n                  }\n                  d.addCurrentVertex(y, d.distance, I, 0, 0, !1, h), d.addCurrentVertex(y, d.distance, I.mult(-1), 0, 0, !1, h);\n                } else if (\"bevel\" === B || \"fakeround\" === B) {\n                  var P = x.x * C.y - x.y * C.x > 0,\n                      U = -Math.sqrt(N * N - 1);\n\n                  if (P ? (f = 0, v = U) : (v = 0, f = U), S || d.addCurrentVertex(y, d.distance, x, v, f, !1, h), \"fakeround\" === B) {\n                    for (var q = Math.floor(8 * (.5 - (T - .5))), M = void 0, O = 0; O < q; O++) {\n                      M = C.mult((O + 1) / (q + 1))._add(x)._unit(), d.addPieSliceVertex(y, d.distance, M, P, h);\n                    }\n\n                    d.addPieSliceVertex(y, d.distance, I, P, h);\n\n                    for (var X = q - 1; X >= 0; X--) {\n                      M = x.mult((X + 1) / (q + 1))._add(C)._unit(), d.addPieSliceVertex(y, d.distance, M, P, h);\n                    }\n                  }\n\n                  E && d.addCurrentVertex(y, d.distance, C, -v, -f, !1, h);\n                } else \"butt\" === B ? (S || d.addCurrentVertex(y, d.distance, x, 0, 0, !1, h), E && d.addCurrentVertex(y, d.distance, C, 0, 0, !1, h)) : \"square\" === B ? (S || (d.addCurrentVertex(y, d.distance, x, 1, 1, !1, h), d.e1 = d.e2 = -1), E && d.addCurrentVertex(y, d.distance, C, -1, -1, !1, h)) : \"round\" === B && (S || (d.addCurrentVertex(y, d.distance, x, 0, 0, !1, h), d.addCurrentVertex(y, d.distance, x, 1, 1, !0, h), d.e1 = d.e2 = -1), E && (d.addCurrentVertex(y, d.distance, C, -1, -1, !0, h), d.addCurrentVertex(y, d.distance, C, 0, 0, !1, h)));\n\n                if (b && V < l - 1) {\n                  var H = y.dist(E);\n\n                  if (H > 2 * p) {\n                    var w = y.add(E.sub(y)._mult(p / H)._round());\n                    d.distance += w.dist(y), d.addCurrentVertex(w, d.distance, C.mult(1), 0, 0, !1, h), y = w;\n                  }\n                }\n\n                S = !1;\n              }\n            }\n\n            _.populatePaintArrays(s);\n          }\n        }, t.prototype.addCurrentVertex = function (e, t, r, i, a, n, d) {\n          var s,\n              u = n ? 1 : 0,\n              l = this.arrays,\n              o = l.layoutVertexArray,\n              p = l.elementArray;\n          s = r.clone(), i && s._sub(r.perp()._mult(i)), addLineVertex(o, e, s, u, 0, i, t), this.e3 = d.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (p.emplaceBack(this.e1, this.e2, this.e3), d.primitiveLength++), this.e1 = this.e2, this.e2 = this.e3, s = r.mult(-1), a && s._sub(r.perp()._mult(a)), addLineVertex(o, e, s, u, 1, -a, t), this.e3 = d.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (p.emplaceBack(this.e1, this.e2, this.e3), d.primitiveLength++), this.e1 = this.e2, this.e2 = this.e3, t > MAX_LINE_DISTANCE / 2 && (this.distance = 0, this.addCurrentVertex(e, this.distance, r, i, a, n, d));\n        }, t.prototype.addPieSliceVertex = function (e, t, r, i, a) {\n          var n = i ? 1 : 0;\n          r = r.mult(i ? -1 : 1);\n          var d = this.arrays,\n              s = d.layoutVertexArray,\n              u = d.elementArray;\n          addLineVertex(s, e, r, 0, n, 0, t), this.e3 = a.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (u.emplaceBack(this.e1, this.e2, this.e3), a.primitiveLength++), i ? this.e2 = this.e3 : this.e1 = this.e3;\n        }, t;\n      }(Bucket);\n\n      LineBucket.programInterface = lineInterface, module.exports = LineBucket;\n    }, {\n      \"../bucket\": 44,\n      \"../element_array_type\": 52,\n      \"../extent\": 53,\n      \"../load_geometry\": 55,\n      \"vector-tile\": 33\n    }],\n    49: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function addVertex(e, t, o, a, i, r, n, s, l, c, y, u, p, h) {\n        e.emplaceBack(t, o, Math.round(64 * a), Math.round(64 * i), r, n, s, l, packUint8ToFloat(10 * (p || 0), h % 256), packUint8ToFloat(10 * (y || 0), 10 * Math.min(u || 25, 25)), c ? c[0] : void 0, c ? c[1] : void 0, c ? c[2] : void 0);\n      }\n\n      function addCollisionBoxVertex(e, t, o, a, i, r) {\n        return e.emplaceBack(t.x, t.y, o.x, o.y, Math.round(a.x), Math.round(a.y), 10 * i, 10 * r);\n      }\n\n      function getSizeData(e, t, o) {\n        var a = {\n          isFeatureConstant: t.isLayoutValueFeatureConstant(o),\n          isZoomConstant: t.isLayoutValueZoomConstant(o)\n        };\n\n        if (a.isFeatureConstant && (a.layoutSize = t.getLayoutValue(o, {\n          zoom: e + 1\n        })), !a.isZoomConstant) {\n          for (var i = t.getLayoutValueStopZoomLevels(o), r = 0; r < i.length && i[r] <= e;) {\n            r++;\n          }\n\n          r = Math.max(0, r - 1);\n\n          for (var n = r; n < i.length && i[n] < e + 1;) {\n            n++;\n          }\n\n          n = Math.min(i.length - 1, n), a.coveringZoomRange = [i[r], i[n]], t.isLayoutValueFeatureConstant(o) && (a.coveringStopValues = [t.getLayoutValue(o, {\n            zoom: i[r]\n          }), t.getLayoutValue(o, {\n            zoom: i[n]\n          })]), a.functionBase = t.getLayoutProperty(o).base, \"undefined\" == typeof a.functionBase && (a.functionBase = 1), a.functionType = t.getLayoutProperty(o).type || \"exponential\";\n        }\n\n        return a;\n      }\n\n      function getSizeAttributeDeclarations(e, t) {\n        return e.isLayoutValueZoomConstant(t) && !e.isLayoutValueFeatureConstant(t) ? [{\n          name: \"a_size\",\n          components: 1,\n          type: \"Uint16\"\n        }] : e.isLayoutValueZoomConstant(t) || e.isLayoutValueFeatureConstant(t) ? [] : [{\n          name: \"a_size\",\n          components: 3,\n          type: \"Uint16\"\n        }];\n      }\n\n      function getSizeVertexData(e, t, o, a, i) {\n        return e.isLayoutValueZoomConstant(a) && !e.isLayoutValueFeatureConstant(a) ? [10 * e.getLayoutValue(a, {}, i)] : e.isLayoutValueZoomConstant(a) || e.isLayoutValueFeatureConstant(a) ? null : [10 * e.getLayoutValue(a, {\n          zoom: o[0]\n        }, i), 10 * e.getLayoutValue(a, {\n          zoom: o[1]\n        }, i), 10 * e.getLayoutValue(a, {\n          zoom: 1 + t\n        }, i)];\n      }\n\n      var Point = _dereq_(\"point-geometry\"),\n          ArrayGroup = _dereq_(\"../array_group\"),\n          BufferGroup = _dereq_(\"../buffer_group\"),\n          createElementArrayType = _dereq_(\"../element_array_type\"),\n          EXTENT = _dereq_(\"../extent\"),\n          packUint8ToFloat = _dereq_(\"../../shaders/encode_attribute\").packUint8ToFloat,\n          Anchor = _dereq_(\"../../symbol/anchor\"),\n          getAnchors = _dereq_(\"../../symbol/get_anchors\"),\n          resolveTokens = _dereq_(\"../../util/token\"),\n          Quads = _dereq_(\"../../symbol/quads\"),\n          Shaping = _dereq_(\"../../symbol/shaping\"),\n          transformText = _dereq_(\"../../symbol/transform_text\"),\n          mergeLines = _dereq_(\"../../symbol/mergelines\"),\n          clipLine = _dereq_(\"../../symbol/clip_line\"),\n          util = _dereq_(\"../../util/util\"),\n          scriptDetection = _dereq_(\"../../util/script_detection\"),\n          loadGeometry = _dereq_(\"../load_geometry\"),\n          CollisionFeature = _dereq_(\"../../symbol/collision_feature\"),\n          findPoleOfInaccessibility = _dereq_(\"../../util/find_pole_of_inaccessibility\"),\n          classifyRings = _dereq_(\"../../util/classify_rings\"),\n          VectorTileFeature = _dereq_(\"vector-tile\").VectorTileFeature,\n          shapeText = Shaping.shapeText,\n          shapeIcon = Shaping.shapeIcon,\n          WritingMode = Shaping.WritingMode,\n          getGlyphQuads = Quads.getGlyphQuads,\n          getIconQuads = Quads.getIconQuads,\n          elementArrayType = createElementArrayType(),\n          layoutAttributes = [{\n        name: \"a_pos_offset\",\n        components: 4,\n        type: \"Int16\"\n      }, {\n        name: \"a_label_pos\",\n        components: 2,\n        type: \"Int16\"\n      }, {\n        name: \"a_data\",\n        components: 4,\n        type: \"Uint16\"\n      }],\n          symbolInterfaces = {\n        glyph: {\n          layoutAttributes: layoutAttributes,\n          elementArrayType: elementArrayType,\n          paintAttributes: [{\n            name: \"a_fill_color\",\n            property: \"text-color\",\n            type: \"Uint8\"\n          }, {\n            name: \"a_halo_color\",\n            property: \"text-halo-color\",\n            type: \"Uint8\"\n          }, {\n            name: \"a_halo_width\",\n            property: \"text-halo-width\",\n            type: \"Uint16\",\n            multiplier: 10\n          }, {\n            name: \"a_halo_blur\",\n            property: \"text-halo-blur\",\n            type: \"Uint16\",\n            multiplier: 10\n          }, {\n            name: \"a_opacity\",\n            property: \"text-opacity\",\n            type: \"Uint8\",\n            multiplier: 255\n          }]\n        },\n        icon: {\n          layoutAttributes: layoutAttributes,\n          elementArrayType: elementArrayType,\n          paintAttributes: [{\n            name: \"a_fill_color\",\n            property: \"icon-color\",\n            type: \"Uint8\"\n          }, {\n            name: \"a_halo_color\",\n            property: \"icon-halo-color\",\n            type: \"Uint8\"\n          }, {\n            name: \"a_halo_width\",\n            property: \"icon-halo-width\",\n            type: \"Uint16\",\n            multiplier: 10\n          }, {\n            name: \"a_halo_blur\",\n            property: \"icon-halo-blur\",\n            type: \"Uint16\",\n            multiplier: 10\n          }, {\n            name: \"a_opacity\",\n            property: \"icon-opacity\",\n            type: \"Uint8\",\n            multiplier: 255\n          }]\n        },\n        collisionBox: {\n          layoutAttributes: [{\n            name: \"a_pos\",\n            components: 2,\n            type: \"Int16\"\n          }, {\n            name: \"a_anchor_pos\",\n            components: 2,\n            type: \"Int16\"\n          }, {\n            name: \"a_extrude\",\n            components: 2,\n            type: \"Int16\"\n          }, {\n            name: \"a_data\",\n            components: 2,\n            type: \"Uint8\"\n          }],\n          elementArrayType: createElementArrayType(2)\n        }\n      },\n          SymbolBucket = function SymbolBucket(e) {\n        var t = this;\n        this.collisionBoxArray = e.collisionBoxArray, this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.index = e.index, this.sdfIcons = e.sdfIcons, this.iconsNeedLinear = e.iconsNeedLinear, this.fontstack = e.fontstack;\n        var o = this.layers[0];\n\n        if (this.symbolInterfaces = {\n          glyph: util.extend({}, symbolInterfaces.glyph, {\n            layoutAttributes: [].concat(symbolInterfaces.glyph.layoutAttributes, getSizeAttributeDeclarations(o, \"text-size\"))\n          }),\n          icon: util.extend({}, symbolInterfaces.icon, {\n            layoutAttributes: [].concat(symbolInterfaces.icon.layoutAttributes, getSizeAttributeDeclarations(o, \"icon-size\"))\n          }),\n          collisionBox: util.extend({}, symbolInterfaces.collisionBox, {\n            layoutAttributes: [].concat(symbolInterfaces.collisionBox.layoutAttributes)\n          })\n        }, e.arrays) {\n          this.buffers = {};\n\n          for (var a in e.arrays) {\n            e.arrays[a] && (t.buffers[a] = new BufferGroup(t.symbolInterfaces[a], e.layers, e.zoom, e.arrays[a]));\n          }\n\n          this.textSizeData = e.textSizeData, this.iconSizeData = e.iconSizeData;\n        } else this.textSizeData = getSizeData(this.zoom, o, \"text-size\"), this.iconSizeData = getSizeData(this.zoom, o, \"icon-size\");\n      };\n\n      SymbolBucket.prototype.populate = function (e, t) {\n        var o = this,\n            a = this.layers[0],\n            i = a.layout,\n            r = i[\"text-font\"],\n            n = (!a.isLayoutValueFeatureConstant(\"text-field\") || i[\"text-field\"]) && r,\n            s = !a.isLayoutValueFeatureConstant(\"icon-image\") || i[\"icon-image\"];\n\n        if (this.features = [], n || s) {\n          for (var l = t.iconDependencies, c = t.glyphDependencies, y = c[r] = c[r] || {}, u = {\n            zoom: this.zoom\n          }, p = 0; p < e.length; p++) {\n            var h = e[p];\n\n            if (a.filter(h)) {\n              var m = void 0;\n              n && (m = a.getLayoutValue(\"text-field\", u, h.properties), a.isLayoutValueFeatureConstant(\"text-field\") && (m = resolveTokens(h.properties, m)), m = transformText(m, a, u, h.properties));\n              var x = void 0;\n              if (s && (x = a.getLayoutValue(\"icon-image\", u, h.properties), a.isLayoutValueFeatureConstant(\"icon-image\") && (x = resolveTokens(h.properties, x))), (m || x) && (o.features.push({\n                text: m,\n                icon: x,\n                index: p,\n                sourceLayerIndex: h.sourceLayerIndex,\n                geometry: loadGeometry(h),\n                properties: h.properties,\n                type: VectorTileFeature.types[h.type]\n              }), x && (l[x] = !0), m)) for (var d = 0; d < m.length; d++) {\n                y[m.charCodeAt(d)] = !0;\n              }\n            }\n          }\n\n          \"line\" === i[\"symbol-placement\"] && (this.features = mergeLines(this.features));\n        }\n      }, SymbolBucket.prototype.isEmpty = function () {\n        return this.arrays.icon.isEmpty() && this.arrays.glyph.isEmpty() && this.arrays.collisionBox.isEmpty();\n      }, SymbolBucket.prototype.getPaintPropertyStatistics = function () {\n        for (var e = this, t = {}, o = 0, a = e.layers; o < a.length; o += 1) {\n          var i = a[o];\n          t[i.id] = util.extend({}, e.arrays.icon.layerData[i.id].paintPropertyStatistics, e.arrays.glyph.layerData[i.id].paintPropertyStatistics);\n        }\n\n        return t;\n      }, SymbolBucket.prototype.serialize = function (e) {\n        return {\n          zoom: this.zoom,\n          layerIds: this.layers.map(function (e) {\n            return e.id;\n          }),\n          sdfIcons: this.sdfIcons,\n          iconsNeedLinear: this.iconsNeedLinear,\n          textSizeData: this.textSizeData,\n          iconSizeData: this.iconSizeData,\n          fontstack: this.fontstack,\n          arrays: util.mapObject(this.arrays, function (t) {\n            return t.isEmpty() ? null : t.serialize(e);\n          })\n        };\n      }, SymbolBucket.prototype.destroy = function () {\n        this.buffers && (this.buffers.icon && this.buffers.icon.destroy(), this.buffers.glyph && this.buffers.glyph.destroy(), this.buffers.collisionBox && this.buffers.collisionBox.destroy(), this.buffers = null);\n      }, SymbolBucket.prototype.createArrays = function () {\n        var e = this;\n        this.arrays = util.mapObject(this.symbolInterfaces, function (t) {\n          return new ArrayGroup(t, e.layers, e.zoom);\n        });\n      }, SymbolBucket.prototype.prepare = function (e, t) {\n        var o = this;\n        this.symbolInstances = [];\n        var a = 512 * this.overscaling;\n        this.tilePixelRatio = EXTENT / a, this.compareText = {}, this.iconsNeedLinear = !1;\n        var i = this.layers[0].layout,\n            r = .5,\n            n = .5;\n\n        switch (i[\"text-anchor\"]) {\n          case \"right\":\n          case \"top-right\":\n          case \"bottom-right\":\n            r = 1;\n            break;\n\n          case \"left\":\n          case \"top-left\":\n          case \"bottom-left\":\n            r = 0;\n        }\n\n        switch (i[\"text-anchor\"]) {\n          case \"bottom\":\n          case \"bottom-right\":\n          case \"bottom-left\":\n            n = 1;\n            break;\n\n          case \"top\":\n          case \"top-right\":\n          case \"top-left\":\n            n = 0;\n        }\n\n        for (var s = \"right\" === i[\"text-justify\"] ? 1 : \"left\" === i[\"text-justify\"] ? 0 : .5, l = 24, c = i[\"text-line-height\"] * l, y = \"line\" !== i[\"symbol-placement\"] ? i[\"text-max-width\"] * l : 0, u = i[\"text-letter-spacing\"] * l, p = this.fontstack = i[\"text-font\"].join(\",\"), h = \"map\" === i[\"text-rotation-alignment\"] && \"line\" === i[\"symbol-placement\"], m = 0, x = o.features; m < x.length; m += 1) {\n          var d = x[m],\n              g = void 0;\n\n          if (d.text) {\n            var f = scriptDetection.allowsVerticalWritingMode(d.text),\n                b = o.layers[0].getLayoutValue(\"text-offset\", {\n              zoom: o.zoom\n            }, d.properties).map(function (e) {\n              return e * l;\n            }),\n                v = scriptDetection.allowsLetterSpacing(d.text) ? u : 0;\n            g = {}, g[WritingMode.horizontal] = shapeText(d.text, e[p], y, c, r, n, s, v, b, l, WritingMode.horizontal), g[WritingMode.vertical] = f && h && shapeText(d.text, e[p], y, c, r, n, s, v, b, l, WritingMode.vertical);\n          } else g = {};\n\n          var S = void 0;\n\n          if (d.icon) {\n            var I = t[d.icon];\n            I && (S = shapeIcon(I, o.layers[0].getLayoutValue(\"icon-offset\", {\n              zoom: o.zoom\n            }, d.properties)), void 0 === o.sdfIcons ? o.sdfIcons = I.sdf : o.sdfIcons !== I.sdf && util.warnOnce(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"), I.isNativePixelRatio ? 0 === i[\"icon-rotate\"] && o.layers[0].isLayoutValueFeatureConstant(\"icon-rotate\") || (o.iconsNeedLinear = !0) : o.iconsNeedLinear = !0);\n          }\n\n          (g[WritingMode.horizontal] || S) && o.addFeature(d, g, S);\n        }\n      }, SymbolBucket.prototype.addFeature = function (e, t, o) {\n        var a = this,\n            i = this.layers[0].getLayoutValue(\"text-size\", {\n          zoom: this.zoom + 1\n        }, e.properties),\n            r = this.layers[0].getLayoutValue(\"icon-size\", {\n          zoom: this.zoom + 1\n        }, e.properties),\n            n = this.layers[0].getLayoutValue(\"text-size\", {\n          zoom: 18\n        }, e.properties);\n        void 0 === n && (n = i);\n\n        var s = this.layers[0].layout,\n            l = 24,\n            c = i / l,\n            y = this.tilePixelRatio * c,\n            u = this.tilePixelRatio * n / l,\n            p = this.tilePixelRatio * r,\n            h = this.tilePixelRatio * s[\"symbol-spacing\"],\n            m = s[\"symbol-avoid-edges\"],\n            x = s[\"text-padding\"] * this.tilePixelRatio,\n            d = s[\"icon-padding\"] * this.tilePixelRatio,\n            g = s[\"text-max-angle\"] / 180 * Math.PI,\n            f = \"map\" === s[\"text-rotation-alignment\"] && \"line\" === s[\"symbol-placement\"],\n            b = \"map\" === s[\"icon-rotation-alignment\"] && \"line\" === s[\"symbol-placement\"],\n            v = s[\"text-allow-overlap\"] || s[\"icon-allow-overlap\"] || s[\"text-ignore-placement\"] || s[\"icon-ignore-placement\"],\n            S = s[\"symbol-placement\"],\n            I = h / 2,\n            z = function z(i, r) {\n          var n = !(r.x < 0 || r.x > EXTENT || r.y < 0 || r.y > EXTENT);\n\n          if (!m || n) {\n            var s = n || v;\n            a.addSymbolInstance(r, i, t, o, a.layers[0], s, a.collisionBoxArray, e.index, e.sourceLayerIndex, a.index, y, x, f, p, d, b, {\n              zoom: a.zoom\n            }, e.properties);\n          }\n        };\n\n        if (\"line\" === S) for (var B = 0, M = clipLine(e.geometry, 0, 0, EXTENT, EXTENT); B < M.length; B += 1) {\n          for (var L = M[B], A = getAnchors(L, h, g, t[WritingMode.vertical] || t[WritingMode.horizontal], o, l, u, a.overscaling, EXTENT), _ = 0, T = A; _ < T.length; _ += 1) {\n            var V = T[_],\n                k = t[WritingMode.horizontal];\n            k && a.anchorIsTooClose(k.text, I, V) || z(L, V);\n          }\n        } else if (\"Polygon\" === e.type) for (var C = 0, P = classifyRings(e.geometry, 0); C < P.length; C += 1) {\n          var E = P[C],\n              w = findPoleOfInaccessibility(E, 16);\n          z(E[0], new Anchor(w.x, w.y, 0));\n        } else if (\"LineString\" === e.type) for (var F = 0, D = e.geometry; F < D.length; F += 1) {\n          var N = D[F];\n          z(N, new Anchor(N[0].x, N[0].y, 0));\n        } else if (\"Point\" === e.type) for (var q = 0, U = e.geometry; q < U.length; q += 1) {\n          for (var W = U[q], R = 0, Q = W; R < Q.length; R += 1) {\n            var Z = Q[R];\n            z([Z], new Anchor(Z.x, Z.y, 0));\n          }\n        }\n      }, SymbolBucket.prototype.anchorIsTooClose = function (e, t, o) {\n        var a = this.compareText;\n\n        if (e in a) {\n          for (var i = a[e], r = i.length - 1; r >= 0; r--) {\n            if (o.dist(i[r]) < t) return !0;\n          }\n        } else a[e] = [];\n\n        return a[e].push(o), !1;\n      }, SymbolBucket.prototype.place = function (e, t) {\n        var o = this;\n        this.createArrays();\n        var a = this.layers[0],\n            i = a.layout,\n            r = e.maxScale,\n            n = \"map\" === i[\"text-rotation-alignment\"] && \"line\" === i[\"symbol-placement\"],\n            s = \"map\" === i[\"icon-rotation-alignment\"] && \"line\" === i[\"symbol-placement\"],\n            l = i[\"text-allow-overlap\"] || i[\"icon-allow-overlap\"] || i[\"text-ignore-placement\"] || i[\"icon-ignore-placement\"];\n\n        if (l) {\n          var c = e.angle,\n              y = Math.sin(c),\n              u = Math.cos(c);\n          this.symbolInstances.sort(function (e, t) {\n            var o = y * e.anchor.x + u * e.anchor.y | 0,\n                a = y * t.anchor.x + u * t.anchor.y | 0;\n            return o - a || t.featureIndex - e.featureIndex;\n          });\n        }\n\n        for (var p = 0, h = o.symbolInstances; p < h.length; p += 1) {\n          var m = h[p],\n              x = {\n            boxStartIndex: m.textBoxStartIndex,\n            boxEndIndex: m.textBoxEndIndex\n          },\n              d = {\n            boxStartIndex: m.iconBoxStartIndex,\n            boxEndIndex: m.iconBoxEndIndex\n          },\n              g = !(m.textBoxStartIndex === m.textBoxEndIndex),\n              f = !(m.iconBoxStartIndex === m.iconBoxEndIndex),\n              b = i[\"text-optional\"] || !g,\n              v = i[\"icon-optional\"] || !f,\n              S = g ? e.placeCollisionFeature(x, i[\"text-allow-overlap\"], i[\"symbol-avoid-edges\"]) : e.minScale,\n              I = f ? e.placeCollisionFeature(d, i[\"icon-allow-overlap\"], i[\"symbol-avoid-edges\"]) : e.minScale;\n\n          if (b || v ? !v && S ? S = Math.max(I, S) : !b && I && (I = Math.max(I, S)) : I = S = Math.max(I, S), g && (e.insertCollisionFeature(x, S, i[\"text-ignore-placement\"]), S <= r)) {\n            var z = getSizeVertexData(a, o.zoom, o.textSizeData.coveringZoomRange, \"text-size\", m.featureProperties);\n            o.addSymbols(o.arrays.glyph, m.glyphQuads, S, z, i[\"text-keep-upright\"], n, e.angle, m.featureProperties, m.writingModes, m.anchor);\n          }\n\n          if (f && (e.insertCollisionFeature(d, I, i[\"icon-ignore-placement\"]), I <= r)) {\n            var B = getSizeVertexData(a, o.zoom, o.iconSizeData.coveringZoomRange, \"icon-size\", m.featureProperties);\n            o.addSymbols(o.arrays.icon, m.iconQuads, I, B, i[\"icon-keep-upright\"], s, e.angle, m.featureProperties, null, m.anchor);\n          }\n        }\n\n        t && this.addToDebugBuffers(e);\n      }, SymbolBucket.prototype.addSymbols = function (e, t, o, a, i, r, n, s, l, c) {\n        for (var y = e.elementArray, u = e.layoutVertexArray, p = this.zoom, h = Math.max(Math.log(o) / Math.LN2 + p, 0), m = 0, x = t; m < x.length; m += 1) {\n          var d = x[m],\n              g = (d.anchorAngle + n + Math.PI) % (2 * Math.PI);\n\n          if (l & WritingMode.vertical) {\n            if (r && d.writingMode === WritingMode.vertical) {\n              if (i && r && g <= 5 * Math.PI / 4 || g > 7 * Math.PI / 4) continue;\n            } else if (i && r && g <= 3 * Math.PI / 4 || g > 5 * Math.PI / 4) continue;\n          } else if (i && r && (g <= Math.PI / 2 || g > 3 * Math.PI / 2)) continue;\n\n          var f = d.tl,\n              b = d.tr,\n              v = d.bl,\n              S = d.br,\n              I = d.tex,\n              z = d.anchorPoint,\n              B = Math.max(p + Math.log(d.minScale) / Math.LN2, h),\n              M = Math.min(p + Math.log(d.maxScale) / Math.LN2, 25);\n\n          if (!(M <= B)) {\n            B === h && (B = 0);\n            var L = Math.round(d.glyphAngle / (2 * Math.PI) * 256),\n                A = e.prepareSegment(4),\n                _ = A.vertexLength;\n            addVertex(u, z.x, z.y, f.x, f.y, c.x, c.y, I.x, I.y, a, B, M, h, L), addVertex(u, z.x, z.y, b.x, b.y, c.x, c.y, I.x + I.w, I.y, a, B, M, h, L), addVertex(u, z.x, z.y, v.x, v.y, c.x, c.y, I.x, I.y + I.h, a, B, M, h, L), addVertex(u, z.x, z.y, S.x, S.y, c.x, c.y, I.x + I.w, I.y + I.h, a, B, M, h, L), y.emplaceBack(_, _ + 1, _ + 2), y.emplaceBack(_ + 1, _ + 2, _ + 3), A.vertexLength += 4, A.primitiveLength += 2;\n          }\n        }\n\n        e.populatePaintArrays(s);\n      }, SymbolBucket.prototype.addToDebugBuffers = function (e) {\n        for (var t = this, o = this.arrays.collisionBox, a = o.layoutVertexArray, i = o.elementArray, r = -e.angle, n = e.yStretch, s = 0, l = t.symbolInstances; s < l.length; s += 1) {\n          var c = l[s];\n          c.textCollisionFeature = {\n            boxStartIndex: c.textBoxStartIndex,\n            boxEndIndex: c.textBoxEndIndex\n          }, c.iconCollisionFeature = {\n            boxStartIndex: c.iconBoxStartIndex,\n            boxEndIndex: c.iconBoxEndIndex\n          };\n\n          for (var y = 0; y < 2; y++) {\n            var u = c[0 === y ? \"textCollisionFeature\" : \"iconCollisionFeature\"];\n            if (u) for (var p = u.boxStartIndex; p < u.boxEndIndex; p++) {\n              var h = t.collisionBoxArray.get(p);\n\n              if (!(1 === e.perspectiveRatio && h.maxScale < 1)) {\n                var m = h.anchorPoint,\n                    x = new Point(h.x1, h.y1 * n)._rotate(r),\n                    d = new Point(h.x2, h.y1 * n)._rotate(r),\n                    g = new Point(h.x1, h.y2 * n)._rotate(r),\n                    f = new Point(h.x2, h.y2 * n)._rotate(r),\n                    b = Math.max(0, Math.min(25, t.zoom + Math.log(h.maxScale) / Math.LN2)),\n                    v = Math.max(0, Math.min(25, t.zoom + Math.log(h.placementScale) / Math.LN2)),\n                    S = o.prepareSegment(4),\n                    I = S.vertexLength;\n\n                addCollisionBoxVertex(a, m, c.anchor, x, b, v), addCollisionBoxVertex(a, m, c.anchor, d, b, v), addCollisionBoxVertex(a, m, c.anchor, f, b, v), addCollisionBoxVertex(a, m, c.anchor, g, b, v), i.emplaceBack(I, I + 1), i.emplaceBack(I + 1, I + 2), i.emplaceBack(I + 2, I + 3), i.emplaceBack(I + 3, I), S.vertexLength += 4, S.primitiveLength += 4;\n              }\n            }\n          }\n        }\n      }, SymbolBucket.prototype.addSymbolInstance = function (e, t, o, a, i, r, n, s, l, c, y, u, p, h, m, x, d, g) {\n        var f,\n            b,\n            v = [],\n            S = [];\n\n        for (var I in o) {\n          var z = parseInt(I, 10);\n          o[z] && (S = S.concat(r ? getGlyphQuads(e, o[z], y, t, i, p, d, g) : []), f = new CollisionFeature(n, t, e, s, l, c, o[z], y, u, p, !1));\n        }\n\n        var B = f ? f.boxStartIndex : this.collisionBoxArray.length,\n            M = f ? f.boxEndIndex : this.collisionBoxArray.length;\n        a && (v = r ? getIconQuads(e, a, h, t, i, x, o[WritingMode.horizontal], d, g) : [], b = new CollisionFeature(n, t, e, s, l, c, a, h, m, x, !0));\n        var L = b ? b.boxStartIndex : this.collisionBoxArray.length,\n            A = b ? b.boxEndIndex : this.collisionBoxArray.length;\n        M > SymbolBucket.MAX_INSTANCES && util.warnOnce(\"Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"), A > SymbolBucket.MAX_INSTANCES && util.warnOnce(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\");\n\n        var _ = (o[WritingMode.vertical] ? WritingMode.vertical : 0) | (o[WritingMode.horizontal] ? WritingMode.horizontal : 0);\n\n        this.symbolInstances.push({\n          textBoxStartIndex: B,\n          textBoxEndIndex: M,\n          iconBoxStartIndex: L,\n          iconBoxEndIndex: A,\n          glyphQuads: S,\n          iconQuads: v,\n          anchor: e,\n          featureIndex: s,\n          featureProperties: g,\n          writingModes: _\n        });\n      }, SymbolBucket.programInterfaces = symbolInterfaces, SymbolBucket.MAX_INSTANCES = 65535, module.exports = SymbolBucket;\n    }, {\n      \"../../shaders/encode_attribute\": 80,\n      \"../../symbol/anchor\": 159,\n      \"../../symbol/clip_line\": 161,\n      \"../../symbol/collision_feature\": 163,\n      \"../../symbol/get_anchors\": 165,\n      \"../../symbol/mergelines\": 168,\n      \"../../symbol/quads\": 169,\n      \"../../symbol/shaping\": 170,\n      \"../../symbol/transform_text\": 172,\n      \"../../util/classify_rings\": 197,\n      \"../../util/find_pole_of_inaccessibility\": 203,\n      \"../../util/script_detection\": 210,\n      \"../../util/token\": 214,\n      \"../../util/util\": 215,\n      \"../array_group\": 43,\n      \"../buffer_group\": 51,\n      \"../element_array_type\": 52,\n      \"../extent\": 53,\n      \"../load_geometry\": 55,\n      \"point-geometry\": 25,\n      \"vector-tile\": 33\n    }],\n    50: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var AttributeType = {\n        Int8: \"BYTE\",\n        Uint8: \"UNSIGNED_BYTE\",\n        Int16: \"SHORT\",\n        Uint16: \"UNSIGNED_SHORT\"\n      },\n          Buffer = function Buffer(t, e, r) {\n        this.arrayBuffer = t.arrayBuffer, this.length = t.length, this.attributes = e.members, this.itemSize = e.bytesPerElement, this.type = r, this.arrayType = e;\n      };\n\n      Buffer.fromStructArray = function (t, e) {\n        return new Buffer(t.serialize(), t.constructor.serialize(), e);\n      }, Buffer.prototype.bind = function (t) {\n        var e = t[this.type];\n        this.buffer ? t.bindBuffer(e, this.buffer) : (this.gl = t, this.buffer = t.createBuffer(), t.bindBuffer(e, this.buffer), t.bufferData(e, this.arrayBuffer, t.STATIC_DRAW), this.arrayBuffer = null);\n      }, Buffer.prototype.enableAttributes = function (t, e) {\n        for (var r = this, f = 0; f < this.attributes.length; f++) {\n          var i = r.attributes[f],\n              u = e[i.name];\n          void 0 !== u && t.enableVertexAttribArray(u);\n        }\n      }, Buffer.prototype.setVertexAttribPointers = function (t, e, r) {\n        for (var f = this, i = 0; i < this.attributes.length; i++) {\n          var u = f.attributes[i],\n              s = e[u.name];\n          void 0 !== s && t.vertexAttribPointer(s, u.components, t[AttributeType[u.type]], !1, f.arrayType.bytesPerElement, u.offset + (f.arrayType.bytesPerElement * r || 0));\n        }\n      }, Buffer.prototype.destroy = function () {\n        this.buffer && this.gl.deleteBuffer(this.buffer);\n      }, Buffer.BufferType = {\n        VERTEX: \"ARRAY_BUFFER\",\n        ELEMENT: \"ELEMENT_ARRAY_BUFFER\"\n      }, module.exports = Buffer;\n    }, {}],\n    51: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          Buffer = _dereq_(\"./buffer\"),\n          ProgramConfiguration = _dereq_(\"./program_configuration\"),\n          createVertexArrayType = _dereq_(\"./vertex_array_type\"),\n          VertexArrayObject = _dereq_(\"../render/vertex_array_object\"),\n          BufferGroup = function BufferGroup(e, r, t, a) {\n        var f = this,\n            u = createVertexArrayType(e.layoutAttributes);\n        this.layoutVertexBuffer = new Buffer(a.layoutVertexArray, u.serialize(), Buffer.BufferType.VERTEX), a.elementArray && (this.elementBuffer = new Buffer(a.elementArray, e.elementArrayType.serialize(), Buffer.BufferType.ELEMENT)), a.elementArray2 && (this.elementBuffer2 = new Buffer(a.elementArray2, e.elementArrayType2.serialize(), Buffer.BufferType.ELEMENT)), this.layerData = {};\n\n        for (var n = 0, i = r; n < i.length; n += 1) {\n          var s = i[n],\n              o = a.paintVertexArrays && a.paintVertexArrays[s.id],\n              y = ProgramConfiguration.createDynamic(e, s, t),\n              l = o ? new Buffer(o.array, o.type, Buffer.BufferType.VERTEX) : null;\n          f.layerData[s.id] = {\n            programConfiguration: y,\n            paintVertexBuffer: l\n          };\n        }\n\n        this.segments = a.segments, this.segments2 = a.segments2;\n\n        for (var m = 0, B = [f.segments, f.segments2]; m < B.length; m += 1) {\n          for (var p = B[m], g = 0, v = p || []; g < v.length; g += 1) {\n            var h = v[g];\n            h.vaos = util.mapObject(f.layerData, function () {\n              return new VertexArrayObject();\n            });\n          }\n        }\n      };\n\n      BufferGroup.prototype.destroy = function () {\n        var e = this;\n        this.layoutVertexBuffer.destroy(), this.elementBuffer && this.elementBuffer.destroy(), this.elementBuffer2 && this.elementBuffer2.destroy();\n\n        for (var r in e.layerData) {\n          var t = e.layerData[r].paintVertexBuffer;\n          t && t.destroy();\n        }\n\n        for (var a = 0, f = [e.segments, e.segments2]; a < f.length; a += 1) {\n          for (var u = f[a], n = 0, i = u || []; n < i.length; n += 1) {\n            var s = i[n];\n\n            for (var o in s.vaos) {\n              s.vaos[o].destroy();\n            }\n          }\n        }\n      }, module.exports = BufferGroup;\n    }, {\n      \"../render/vertex_array_object\": 79,\n      \"../util/util\": 215,\n      \"./buffer\": 50,\n      \"./program_configuration\": 57,\n      \"./vertex_array_type\": 59\n    }],\n    52: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createElementArrayType(e) {\n        return createStructArrayType({\n          members: [{\n            type: \"Uint16\",\n            name: \"vertices\",\n            components: e || 3\n          }]\n        });\n      }\n\n      var createStructArrayType = _dereq_(\"../util/struct_array\");\n\n      module.exports = createElementArrayType;\n    }, {\n      \"../util/struct_array\": 212\n    }],\n    53: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = 8192;\n    }, {}],\n    54: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function translateDistance(e) {\n        return Math.sqrt(e[0] * e[0] + e[1] * e[1]);\n      }\n\n      function topDownFeatureComparator(e, t) {\n        return t - e;\n      }\n\n      function getLineWidth(e, t) {\n        return t > 0 ? t + 2 * e : e;\n      }\n\n      function translate(e, t, r, i, a) {\n        if (!t[0] && !t[1]) return e;\n        t = Point.convert(t), \"viewport\" === r && t._rotate(-i);\n\n        for (var n = [], s = 0; s < e.length; s++) {\n          for (var o = e[s], l = [], u = 0; u < o.length; u++) {\n            l.push(o[u].sub(t._mult(a)));\n          }\n\n          n.push(l);\n        }\n\n        return n;\n      }\n\n      function offsetLine(e, t) {\n        for (var r = [], i = new Point(0, 0), a = 0; a < e.length; a++) {\n          for (var n = e[a], s = [], o = 0; o < n.length; o++) {\n            var l = n[o - 1],\n                u = n[o],\n                c = n[o + 1],\n                y = 0 === o ? i : u.sub(l)._unit()._perp(),\n                f = o === n.length - 1 ? i : c.sub(u)._unit()._perp(),\n                h = y._add(f)._unit(),\n                d = h.x * f.x + h.y * f.y;\n\n            h._mult(1 / d), s.push(h._mult(t)._add(u));\n          }\n\n          r.push(s);\n        }\n\n        return r;\n      }\n\n      var Point = _dereq_(\"point-geometry\"),\n          loadGeometry = _dereq_(\"./load_geometry\"),\n          EXTENT = _dereq_(\"./extent\"),\n          featureFilter = _dereq_(\"../style-spec/feature_filter\"),\n          createStructArrayType = _dereq_(\"../util/struct_array\"),\n          Grid = _dereq_(\"grid-index\"),\n          DictionaryCoder = _dereq_(\"../util/dictionary_coder\"),\n          vt = _dereq_(\"vector-tile\"),\n          Protobuf = _dereq_(\"pbf\"),\n          GeoJSONFeature = _dereq_(\"../util/vectortile_to_geojson\"),\n          arraysIntersect = _dereq_(\"../util/util\").arraysIntersect,\n          intersection = _dereq_(\"../util/intersection_tests\"),\n          multiPolygonIntersectsBufferedMultiPoint = intersection.multiPolygonIntersectsBufferedMultiPoint,\n          multiPolygonIntersectsMultiPolygon = intersection.multiPolygonIntersectsMultiPolygon,\n          multiPolygonIntersectsBufferedMultiLine = intersection.multiPolygonIntersectsBufferedMultiLine,\n          FeatureIndexArray = createStructArrayType({\n        members: [{\n          type: \"Uint32\",\n          name: \"featureIndex\"\n        }, {\n          type: \"Uint16\",\n          name: \"sourceLayerIndex\"\n        }, {\n          type: \"Uint16\",\n          name: \"bucketIndex\"\n        }]\n      }),\n          FeatureIndex = function FeatureIndex(e, t, r) {\n        if (e.grid) {\n          var i = e,\n              a = t;\n          e = i.coord, t = i.overscaling, this.grid = new Grid(i.grid), this.featureIndexArray = new FeatureIndexArray(i.featureIndexArray), this.rawTileData = a, this.bucketLayerIDs = i.bucketLayerIDs, this.paintPropertyStatistics = i.paintPropertyStatistics;\n        } else this.grid = new Grid(EXTENT, 16, 0), this.featureIndexArray = new FeatureIndexArray();\n\n        this.coord = e, this.overscaling = t, this.x = e.x, this.y = e.y, this.z = e.z - Math.log(t) / Math.LN2, this.setCollisionTile(r);\n      };\n\n      FeatureIndex.prototype.insert = function (e, t) {\n        var r = this,\n            i = this.featureIndexArray.length;\n        this.featureIndexArray.emplaceBack(e.index, e.sourceLayerIndex, t);\n\n        for (var a = loadGeometry(e), n = 0; n < a.length; n++) {\n          for (var s = a[n], o = [1 / 0, 1 / 0, -(1 / 0), -(1 / 0)], l = 0; l < s.length; l++) {\n            var u = s[l];\n            o[0] = Math.min(o[0], u.x), o[1] = Math.min(o[1], u.y), o[2] = Math.max(o[2], u.x), o[3] = Math.max(o[3], u.y);\n          }\n\n          r.grid.insert(i, o[0], o[1], o[2], o[3]);\n        }\n      }, FeatureIndex.prototype.setCollisionTile = function (e) {\n        this.collisionTile = e;\n      }, FeatureIndex.prototype.serialize = function (e) {\n        var t = this.grid.toArrayBuffer();\n        return e && e.push(t), {\n          coord: this.coord,\n          overscaling: this.overscaling,\n          grid: t,\n          featureIndexArray: this.featureIndexArray.serialize(e),\n          bucketLayerIDs: this.bucketLayerIDs,\n          paintPropertyStatistics: this.paintPropertyStatistics\n        };\n      }, FeatureIndex.prototype.query = function (e, t) {\n        var r = this;\n        this.vtLayers || (this.vtLayers = new vt.VectorTile(new Protobuf(this.rawTileData)).layers, this.sourceLayerCoder = new DictionaryCoder(this.vtLayers ? Object.keys(this.vtLayers).sort() : [\"_geojsonTileLayer\"]));\n        var i = {},\n            a = e.params || {},\n            n = EXTENT / e.tileSize / e.scale,\n            s = featureFilter(a.filter),\n            o = 0;\n\n        for (var l in t) {\n          if (r.hasLayer(l)) {\n            var u = t[l],\n                c = 0;\n\n            if (\"line\" === u.type) {\n              var y = getLineWidth(r.getPaintValue(\"line-width\", u), r.getPaintValue(\"line-gap-width\", u)),\n                  f = r.getPaintValue(\"line-offset\", u),\n                  h = r.getPaintValue(\"line-translate\", u);\n              c = y / 2 + Math.abs(f) + translateDistance(h);\n            } else \"fill\" === u.type ? c = translateDistance(r.getPaintValue(\"fill-translate\", u)) : \"fill-extrusion\" === u.type ? c = translateDistance(r.getPaintValue(\"fill-extrusion-translate\", u)) : \"circle\" === u.type && (c = r.getPaintValue(\"circle-radius\", u) + translateDistance(r.getPaintValue(\"circle-translate\", u)));\n\n            o = Math.max(o, c * n);\n          }\n        }\n\n        for (var d = e.queryGeometry.map(function (e) {\n          return e.map(function (e) {\n            return new Point(e.x, e.y);\n          });\n        }), g = 1 / 0, p = 1 / 0, v = -(1 / 0), x = -(1 / 0), I = 0; I < d.length; I++) {\n          for (var P = d[I], m = 0; m < P.length; m++) {\n            var L = P[m];\n            g = Math.min(g, L.x), p = Math.min(p, L.y), v = Math.max(v, L.x), x = Math.max(x, L.y);\n          }\n        }\n\n        var M = this.grid.query(g - o, p - o, v + o, x + o);\n        M.sort(topDownFeatureComparator), this.filterMatching(i, M, this.featureIndexArray, d, s, a.layers, t, e.bearing, n);\n        var b = this.collisionTile.queryRenderedSymbols(d, e.scale);\n        return b.sort(), this.filterMatching(i, b, this.collisionTile.collisionBoxArray, d, s, a.layers, t, e.bearing, n), i;\n      }, FeatureIndex.prototype.filterMatching = function (e, t, r, i, a, n, s, o, l) {\n        for (var u, c = this, y = 0; y < t.length; y++) {\n          var f = t[y];\n\n          if (f !== u) {\n            u = f;\n            var h = r.get(f),\n                d = c.bucketLayerIDs[h.bucketIndex];\n\n            if (!n || arraysIntersect(n, d)) {\n              var g = c.sourceLayerCoder.decode(h.sourceLayerIndex),\n                  p = c.vtLayers[g],\n                  v = p.feature(h.featureIndex);\n              if (a(v)) for (var x = null, I = 0; I < d.length; I++) {\n                var P = d[I];\n\n                if (!(n && n.indexOf(P) < 0)) {\n                  var m = s[P];\n\n                  if (m) {\n                    var L = void 0;\n                    if (\"symbol\" !== m.type) if (x || (x = loadGeometry(v)), \"line\" === m.type) {\n                      L = translate(i, c.getPaintValue(\"line-translate\", m, v), c.getPaintValue(\"line-translate-anchor\", m, v), o, l);\n                      var M = l / 2 * getLineWidth(c.getPaintValue(\"line-width\", m, v), c.getPaintValue(\"line-gap-width\", m, v)),\n                          b = c.getPaintValue(\"line-offset\", m, v);\n                      if (b && (x = offsetLine(x, b * l)), !multiPolygonIntersectsBufferedMultiLine(L, x, M)) continue;\n                    } else if (\"fill\" === m.type || \"fill-extrusion\" === m.type) {\n                      var V = m.type;\n                      if (L = translate(i, c.getPaintValue(V + \"-translate\", m, v), c.getPaintValue(V + \"-translate-anchor\", m, v), o, l), !multiPolygonIntersectsMultiPolygon(L, x)) continue;\n                    } else if (\"circle\" === m.type) {\n                      L = translate(i, c.getPaintValue(\"circle-translate\", m, v), c.getPaintValue(\"circle-translate-anchor\", m, v), o, l);\n                      var w = c.getPaintValue(\"circle-radius\", m, v) * l;\n                      if (!multiPolygonIntersectsBufferedMultiPoint(L, x, w)) continue;\n                    }\n                    var F = new GeoJSONFeature(v, c.z, c.x, c.y);\n                    F.layer = m.serialize();\n                    var _ = e[P];\n                    void 0 === _ && (_ = e[P] = []), _.push({\n                      featureIndex: f,\n                      feature: F\n                    });\n                  }\n                }\n              }\n            }\n          }\n        }\n      }, FeatureIndex.prototype.hasLayer = function (e) {\n        var t = this;\n\n        for (var r in t.bucketLayerIDs) {\n          for (var i = 0, a = t.bucketLayerIDs[r]; i < a.length; i += 1) {\n            var n = a[i];\n            if (e === n) return !0;\n          }\n        }\n\n        return !1;\n      }, FeatureIndex.prototype.getPaintValue = function (e, t, r) {\n        var i = t.isPaintValueFeatureConstant(e);\n\n        if (i || r) {\n          var a = r ? r.properties : {};\n          return t.getPaintValue(e, {\n            zoom: this.z\n          }, a);\n        }\n\n        return this.paintPropertyStatistics[t.id][e].max;\n      }, module.exports = FeatureIndex;\n    }, {\n      \"../style-spec/feature_filter\": 104,\n      \"../util/dictionary_coder\": 199,\n      \"../util/intersection_tests\": 206,\n      \"../util/struct_array\": 212,\n      \"../util/util\": 215,\n      \"../util/vectortile_to_geojson\": 216,\n      \"./extent\": 53,\n      \"./load_geometry\": 55,\n      \"grid-index\": 16,\n      \"pbf\": 24,\n      \"point-geometry\": 25,\n      \"vector-tile\": 33\n    }],\n    55: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createBounds(e) {\n        return {\n          min: -1 * Math.pow(2, e - 1),\n          max: Math.pow(2, e - 1) - 1\n        };\n      }\n\n      var util = _dereq_(\"../util/util\"),\n          EXTENT = _dereq_(\"./extent\"),\n          boundsLookup = {\n        15: createBounds(15),\n        16: createBounds(16)\n      };\n\n      module.exports = function (e, t) {\n        for (var r = boundsLookup[t || 16], o = EXTENT / e.extent, u = e.loadGeometry(), n = 0; n < u.length; n++) {\n          for (var a = u[n], i = 0; i < a.length; i++) {\n            var d = a[i];\n            d.x = Math.round(d.x * o), d.y = Math.round(d.y * o), (d.x < r.min || d.x > r.max || d.y < r.min || d.y > r.max) && util.warnOnce(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\");\n          }\n        }\n\n        return u;\n      };\n    }, {\n      \"../util/util\": 215,\n      \"./extent\": 53\n    }],\n    56: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var createStructArrayType = _dereq_(\"../util/struct_array\"),\n          PosArray = createStructArrayType({\n        members: [{\n          name: \"a_pos\",\n          type: \"Int16\",\n          components: 2\n        }]\n      });\n\n      module.exports = PosArray;\n    }, {\n      \"../util/struct_array\": 212\n    }],\n    57: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function getPaintAttributeValue(t, r, e, i) {\n        if (!t.zoomStops) return r.getPaintValue(t.property, e, i);\n        var a = t.zoomStops.map(function (a) {\n          return r.getPaintValue(t.property, util.extend({}, e, {\n            zoom: a\n          }), i);\n        });\n        return 1 === a.length ? a[0] : a;\n      }\n\n      function normalizePaintAttribute(t, r) {\n        var e = t.name;\n        e || (e = t.property.replace(r.type + \"-\", \"\").replace(/-/g, \"_\"));\n        var i = \"color\" === r._paintSpecifications[t.property].type;\n        return util.extend({\n          name: \"a_\" + e,\n          components: i ? 4 : 1,\n          multiplier: i ? 255 : 1,\n          dimensions: i ? 4 : 1\n        }, t);\n      }\n\n      var createVertexArrayType = _dereq_(\"./vertex_array_type\"),\n          util = _dereq_(\"../util/util\"),\n          ProgramConfiguration = function ProgramConfiguration() {\n        this.attributes = [], this.uniforms = [], this.interpolationUniforms = [], this.pragmas = {\n          vertex: {},\n          fragment: {}\n        }, this.cacheKey = \"\", this.interface = {};\n      };\n\n      ProgramConfiguration.createDynamic = function (t, r, e) {\n        for (var i = new ProgramConfiguration(), a = 0, n = t.paintAttributes || []; a < n.length; a += 1) {\n          var o = n[a],\n              p = normalizePaintAttribute(o, r),\n              u = p.name.slice(2);\n          r.isPaintValueFeatureConstant(p.property) ? i.addZoomAttribute(u, p) : r.isPaintValueZoomConstant(p.property) ? i.addPropertyAttribute(u, p) : i.addZoomAndPropertyAttribute(u, p, r, e);\n        }\n\n        return i.PaintVertexArray = createVertexArrayType(i.attributes), i.interface = t, i;\n      }, ProgramConfiguration.createStatic = function (t) {\n        for (var r = new ProgramConfiguration(), e = 0, i = t; e < i.length; e += 1) {\n          var a = i[e];\n          r.addUniform(a, \"u_\" + a);\n        }\n\n        return r;\n      }, ProgramConfiguration.prototype.addUniform = function (t, r) {\n        var e = this.getPragmas(t);\n        e.define.push(\"uniform {precision} {type} \" + r + \";\"), e.initialize.push(\"{precision} {type} \" + t + \" = \" + r + \";\"), this.cacheKey += \"/u_\" + t;\n      }, ProgramConfiguration.prototype.addZoomAttribute = function (t, r) {\n        this.uniforms.push(r), this.addUniform(t, r.name);\n      }, ProgramConfiguration.prototype.addPropertyAttribute = function (t, r) {\n        var e = this.getPragmas(t);\n        this.attributes.push(r), e.define.push(\"varying {precision} {type} \" + t + \";\"), e.vertex.define.push(\"attribute {precision} {type} \" + r.name + \";\"), e.vertex.initialize.push(t + \" = \" + r.name + \" / \" + r.multiplier + \".0;\"), this.cacheKey += \"/a_\" + t;\n      }, ProgramConfiguration.prototype.addZoomAndPropertyAttribute = function (t, r, e, i) {\n        var a = this,\n            n = this.getPragmas(t);\n        n.define.push(\"varying {precision} {type} \" + t + \";\");\n        var o = e.getPaintValueStopZoomLevels(r.property),\n            p = 0;\n        if (o.length > 4) for (; p < o.length - 2 && o[p] < i;) {\n          p++;\n        }\n        var u = \"u_\" + t + \"_t\";\n        n.vertex.define.push(\"uniform lowp float \" + u + \";\"), this.interpolationUniforms.push({\n          name: u,\n          property: r.property,\n          stopOffset: p\n        });\n\n        for (var s = [], m = 0; m < 4; m++) {\n          s.push(o[Math.min(p + m, o.length - 1)]);\n        }\n\n        var f = [];\n        if (1 === r.components) this.attributes.push(util.extend({}, r, {\n          components: 4,\n          zoomStops: s\n        })), n.vertex.define.push(\"attribute {precision} vec4 \" + r.name + \";\"), f.push(r.name);else for (var g = 0; g < 4; g++) {\n          var h = r.name + g;\n          f.push(h), a.attributes.push(util.extend({}, r, {\n            name: h,\n            zoomStops: [s[g]]\n          })), n.vertex.define.push(\"attribute {precision} {type} \" + h + \";\");\n        }\n        n.vertex.initialize.push(t + \" = evaluate_zoom_function_\" + r.components + \"(            \" + f.join(\", \") + \", \" + u + \") / \" + r.multiplier + \".0;\"), this.cacheKey += \"/z_\" + t;\n      }, ProgramConfiguration.prototype.getPragmas = function (t) {\n        return this.pragmas[t] || (this.pragmas[t] = {\n          define: [],\n          initialize: []\n        }, this.pragmas[t].fragment = {\n          define: [],\n          initialize: []\n        }, this.pragmas[t].vertex = {\n          define: [],\n          initialize: []\n        }), this.pragmas[t];\n      }, ProgramConfiguration.prototype.applyPragmas = function (t, r) {\n        var e = this;\n        return t.replace(/#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g, function (t, i, a, n, o) {\n          return e.pragmas[o][i].concat(e.pragmas[o][r][i]).join(\"\\n\").replace(/{type}/g, n).replace(/{precision}/g, a);\n        });\n      }, ProgramConfiguration.prototype.createPaintPropertyStatistics = function () {\n        for (var t = this, r = {}, e = 0, i = t.attributes; e < i.length; e += 1) {\n          var a = i[e];\n          1 === a.dimensions && (r[a.property] = {\n            max: -(1 / 0)\n          });\n        }\n\n        return r;\n      }, ProgramConfiguration.prototype.populatePaintArray = function (t, r, e, i, a, n) {\n        var o = this,\n            p = r.length;\n        r.resize(i);\n\n        for (var u = 0, s = o.attributes; u < s.length; u += 1) {\n          for (var m = s[u], f = getPaintAttributeValue(m, t, a, n), g = p; g < i; g++) {\n            var h = r.get(g);\n            if (4 === m.components) for (var l = 0; l < 4; l++) {\n              h[m.name + l] = f[l] * m.multiplier;\n            } else h[m.name] = f * m.multiplier;\n\n            if (1 === m.dimensions) {\n              var c = e[m.property];\n              c.max = Math.max(c.max, 1 === m.components ? f : Math.max.apply(Math, f));\n            }\n          }\n        }\n      }, ProgramConfiguration.prototype.setUniforms = function (t, r, e, i) {\n        for (var a = this, n = 0, o = a.uniforms; n < o.length; n += 1) {\n          var p = o[n],\n              u = e.getPaintValue(p.property, i);\n          4 === p.components ? t.uniform4fv(r[p.name], u) : t.uniform1f(r[p.name], u);\n        }\n\n        for (var s = 0, m = a.interpolationUniforms; s < m.length; s += 1) {\n          var f = m[s],\n              g = e.getPaintInterpolationT(f.property, i);\n          t.uniform1f(r[f.name], Math.max(0, Math.min(3, g - f.stopOffset)));\n        }\n      }, module.exports = ProgramConfiguration;\n    }, {\n      \"../util/util\": 215,\n      \"./vertex_array_type\": 59\n    }],\n    58: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var createStructArrayType = _dereq_(\"../util/struct_array\"),\n          RasterBoundsArray = createStructArrayType({\n        members: [{\n          name: \"a_pos\",\n          type: \"Int16\",\n          components: 2\n        }, {\n          name: \"a_texture_pos\",\n          type: \"Int16\",\n          components: 2\n        }]\n      });\n\n      module.exports = RasterBoundsArray;\n    }, {\n      \"../util/struct_array\": 212\n    }],\n    59: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createVertexArrayType(r) {\n        return createStructArrayType({\n          members: r,\n          alignment: 4\n        });\n      }\n\n      var createStructArrayType = _dereq_(\"../util/struct_array\");\n\n      module.exports = createVertexArrayType;\n    }, {\n      \"../util/struct_array\": 212\n    }],\n    60: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Coordinate = function Coordinate(o, t, n) {\n        this.column = o, this.row = t, this.zoom = n;\n      };\n\n      Coordinate.prototype.clone = function () {\n        return new Coordinate(this.column, this.row, this.zoom);\n      }, Coordinate.prototype.zoomTo = function (o) {\n        return this.clone()._zoomTo(o);\n      }, Coordinate.prototype.sub = function (o) {\n        return this.clone()._sub(o);\n      }, Coordinate.prototype._zoomTo = function (o) {\n        var t = Math.pow(2, o - this.zoom);\n        return this.column *= t, this.row *= t, this.zoom = o, this;\n      }, Coordinate.prototype._sub = function (o) {\n        return o = o.zoomTo(this.zoom), this.column -= o.column, this.row -= o.row, this;\n      }, module.exports = Coordinate;\n    }, {}],\n    61: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var wrap = _dereq_(\"../util/util\").wrap,\n          LngLat = function LngLat(t, n) {\n        if (isNaN(t) || isNaN(n)) throw new Error(\"Invalid LngLat object: (\" + t + \", \" + n + \")\");\n        if (this.lng = +t, this.lat = +n, this.lat > 90 || this.lat < -90) throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\");\n      };\n\n      LngLat.prototype.wrap = function () {\n        return new LngLat(wrap(this.lng, -180, 180), this.lat);\n      }, LngLat.prototype.toArray = function () {\n        return [this.lng, this.lat];\n      }, LngLat.prototype.toString = function () {\n        return \"LngLat(\" + this.lng + \", \" + this.lat + \")\";\n      }, LngLat.convert = function (t) {\n        if (t instanceof LngLat) return t;\n        if (Array.isArray(t) && 2 === t.length) return new LngLat(Number(t[0]), Number(t[1]));\n        if (!Array.isArray(t) && \"object\" == typeof t && null !== t) return new LngLat(Number(t.lng), Number(t.lat));\n        throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n      }, module.exports = LngLat;\n    }, {\n      \"../util/util\": 215\n    }],\n    62: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var LngLat = _dereq_(\"./lng_lat\"),\n          LngLatBounds = function LngLatBounds(t, n) {\n        t && (n ? this.setSouthWest(t).setNorthEast(n) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]));\n      };\n\n      LngLatBounds.prototype.setNorthEast = function (t) {\n        return this._ne = t instanceof LngLat ? new LngLat(t.lng, t.lat) : LngLat.convert(t), this;\n      }, LngLatBounds.prototype.setSouthWest = function (t) {\n        return this._sw = t instanceof LngLat ? new LngLat(t.lng, t.lat) : LngLat.convert(t), this;\n      }, LngLatBounds.prototype.extend = function (t) {\n        var n,\n            e,\n            s = this._sw,\n            o = this._ne;\n        if (t instanceof LngLat) n = t, e = t;else {\n          if (!(t instanceof LngLatBounds)) return Array.isArray(t) ? t.every(Array.isArray) ? this.extend(LngLatBounds.convert(t)) : this.extend(LngLat.convert(t)) : this;\n          if (n = t._sw, e = t._ne, !n || !e) return this;\n        }\n        return s || o ? (s.lng = Math.min(n.lng, s.lng), s.lat = Math.min(n.lat, s.lat), o.lng = Math.max(e.lng, o.lng), o.lat = Math.max(e.lat, o.lat)) : (this._sw = new LngLat(n.lng, n.lat), this._ne = new LngLat(e.lng, e.lat)), this;\n      }, LngLatBounds.prototype.getCenter = function () {\n        return new LngLat((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n      }, LngLatBounds.prototype.getSouthWest = function () {\n        return this._sw;\n      }, LngLatBounds.prototype.getNorthEast = function () {\n        return this._ne;\n      }, LngLatBounds.prototype.getNorthWest = function () {\n        return new LngLat(this.getWest(), this.getNorth());\n      }, LngLatBounds.prototype.getSouthEast = function () {\n        return new LngLat(this.getEast(), this.getSouth());\n      }, LngLatBounds.prototype.getWest = function () {\n        return this._sw.lng;\n      }, LngLatBounds.prototype.getSouth = function () {\n        return this._sw.lat;\n      }, LngLatBounds.prototype.getEast = function () {\n        return this._ne.lng;\n      }, LngLatBounds.prototype.getNorth = function () {\n        return this._ne.lat;\n      }, LngLatBounds.prototype.toArray = function () {\n        return [this._sw.toArray(), this._ne.toArray()];\n      }, LngLatBounds.prototype.toString = function () {\n        return \"LngLatBounds(\" + this._sw.toString() + \", \" + this._ne.toString() + \")\";\n      }, LngLatBounds.convert = function (t) {\n        return !t || t instanceof LngLatBounds ? t : new LngLatBounds(t);\n      }, module.exports = LngLatBounds;\n    }, {\n      \"./lng_lat\": 61\n    }],\n    63: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var LngLat = _dereq_(\"./lng_lat\"),\n          Point = _dereq_(\"point-geometry\"),\n          Coordinate = _dereq_(\"./coordinate\"),\n          util = _dereq_(\"../util/util\"),\n          interp = _dereq_(\"../style-spec/util/interpolate\"),\n          TileCoord = _dereq_(\"../source/tile_coord\"),\n          EXTENT = _dereq_(\"../data/extent\"),\n          glmatrix = _dereq_(\"@mapbox/gl-matrix\"),\n          vec4 = glmatrix.vec4,\n          mat4 = glmatrix.mat4,\n          mat2 = glmatrix.mat2,\n          Transform = function Transform(t, o, i) {\n        this.tileSize = 512, this._renderWorldCopies = void 0 === i || i, this._minZoom = t || 0, this._maxZoom = o || 22, this.latRange = [-85.05113, 85.05113], this.width = 0, this.height = 0, this._center = new LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = .6435011087932844, this._pitch = 0, this._unmodified = !0;\n      },\n          prototypeAccessors = {\n        minZoom: {},\n        maxZoom: {},\n        renderWorldCopies: {},\n        worldSize: {},\n        centerPoint: {},\n        size: {},\n        bearing: {},\n        pitch: {},\n        fov: {},\n        zoom: {},\n        center: {},\n        unmodified: {},\n        x: {},\n        y: {},\n        point: {}\n      };\n\n      prototypeAccessors.minZoom.get = function () {\n        return this._minZoom;\n      }, prototypeAccessors.minZoom.set = function (t) {\n        this._minZoom !== t && (this._minZoom = t, this.zoom = Math.max(this.zoom, t));\n      }, prototypeAccessors.maxZoom.get = function () {\n        return this._maxZoom;\n      }, prototypeAccessors.maxZoom.set = function (t) {\n        this._maxZoom !== t && (this._maxZoom = t, this.zoom = Math.min(this.zoom, t));\n      }, prototypeAccessors.renderWorldCopies.get = function () {\n        return this._renderWorldCopies;\n      }, prototypeAccessors.worldSize.get = function () {\n        return this.tileSize * this.scale;\n      }, prototypeAccessors.centerPoint.get = function () {\n        return this.size._div(2);\n      }, prototypeAccessors.size.get = function () {\n        return new Point(this.width, this.height);\n      }, prototypeAccessors.bearing.get = function () {\n        return -this.angle / Math.PI * 180;\n      }, prototypeAccessors.bearing.set = function (t) {\n        var o = -util.wrap(t, -180, 180) * Math.PI / 180;\n        this.angle !== o && (this._unmodified = !1, this.angle = o, this._calcMatrices(), this.rotationMatrix = mat2.create(), mat2.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));\n      }, prototypeAccessors.pitch.get = function () {\n        return this._pitch / Math.PI * 180;\n      }, prototypeAccessors.pitch.set = function (t) {\n        var o = util.clamp(t, 0, 60) / 180 * Math.PI;\n        this._pitch !== o && (this._unmodified = !1, this._pitch = o, this._calcMatrices());\n      }, prototypeAccessors.fov.get = function () {\n        return this._fov / Math.PI * 180;\n      }, prototypeAccessors.fov.set = function (t) {\n        t = Math.max(.01, Math.min(60, t)), this._fov !== t && (this._unmodified = !1, this._fov = t / 180 * Math.PI, this._calcMatrices());\n      }, prototypeAccessors.zoom.get = function () {\n        return this._zoom;\n      }, prototypeAccessors.zoom.set = function (t) {\n        var o = Math.min(Math.max(t, this.minZoom), this.maxZoom);\n        this._zoom !== o && (this._unmodified = !1, this._zoom = o, this.scale = this.zoomScale(o), this.tileZoom = Math.floor(o), this.zoomFraction = o - this.tileZoom, this._constrain(), this._calcMatrices());\n      }, prototypeAccessors.center.get = function () {\n        return this._center;\n      }, prototypeAccessors.center.set = function (t) {\n        t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1, this._center = t, this._constrain(), this._calcMatrices());\n      }, Transform.prototype.coveringZoomLevel = function (t) {\n        return (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize));\n      }, Transform.prototype.getVisibleWrappedCoordinates = function (t) {\n        for (var o = this.pointCoordinate(new Point(0, 0), 0), i = this.pointCoordinate(new Point(this.width, 0), 0), e = Math.floor(o.column), r = Math.floor(i.column), n = [t], s = e; s <= r; s++) {\n          0 !== s && n.push(new TileCoord(t.z, t.x, t.y, s));\n        }\n\n        return n;\n      }, Transform.prototype.coveringTiles = function (t) {\n        var o = this.coveringZoomLevel(t),\n            i = o;\n        if (o < t.minzoom) return [];\n        o > t.maxzoom && (o = t.maxzoom);\n        var e = this.pointCoordinate(this.centerPoint, o),\n            r = new Point(e.column - .5, e.row - .5),\n            n = [this.pointCoordinate(new Point(0, 0), o), this.pointCoordinate(new Point(this.width, 0), o), this.pointCoordinate(new Point(this.width, this.height), o), this.pointCoordinate(new Point(0, this.height), o)];\n        return TileCoord.cover(o, n, t.reparseOverscaled ? i : o, this._renderWorldCopies).sort(function (t, o) {\n          return r.dist(t) - r.dist(o);\n        });\n      }, Transform.prototype.resize = function (t, o) {\n        this.width = t, this.height = o, this.pixelsToGLUnits = [2 / t, -2 / o], this._constrain(), this._calcMatrices();\n      }, prototypeAccessors.unmodified.get = function () {\n        return this._unmodified;\n      }, Transform.prototype.zoomScale = function (t) {\n        return Math.pow(2, t);\n      }, Transform.prototype.scaleZoom = function (t) {\n        return Math.log(t) / Math.LN2;\n      }, Transform.prototype.project = function (t) {\n        return new Point(this.lngX(t.lng), this.latY(t.lat));\n      }, Transform.prototype.unproject = function (t) {\n        return new LngLat(this.xLng(t.x), this.yLat(t.y));\n      }, prototypeAccessors.x.get = function () {\n        return this.lngX(this.center.lng);\n      }, prototypeAccessors.y.get = function () {\n        return this.latY(this.center.lat);\n      }, prototypeAccessors.point.get = function () {\n        return new Point(this.x, this.y);\n      }, Transform.prototype.lngX = function (t) {\n        return (180 + t) * this.worldSize / 360;\n      }, Transform.prototype.latY = function (t) {\n        var o = 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360));\n        return (180 - o) * this.worldSize / 360;\n      }, Transform.prototype.xLng = function (t) {\n        return 360 * t / this.worldSize - 180;\n      }, Transform.prototype.yLat = function (t) {\n        var o = 180 - 360 * t / this.worldSize;\n        return 360 / Math.PI * Math.atan(Math.exp(o * Math.PI / 180)) - 90;\n      }, Transform.prototype.setLocationAtPoint = function (t, o) {\n        var i = this.pointCoordinate(o)._sub(this.pointCoordinate(this.centerPoint));\n\n        this.center = this.coordinateLocation(this.locationCoordinate(t)._sub(i)), this._renderWorldCopies && (this.center = this.center.wrap());\n      }, Transform.prototype.locationPoint = function (t) {\n        return this.coordinatePoint(this.locationCoordinate(t));\n      }, Transform.prototype.pointLocation = function (t) {\n        return this.coordinateLocation(this.pointCoordinate(t));\n      }, Transform.prototype.locationCoordinate = function (t) {\n        return new Coordinate(this.lngX(t.lng) / this.tileSize, this.latY(t.lat) / this.tileSize, this.zoom).zoomTo(this.tileZoom);\n      }, Transform.prototype.coordinateLocation = function (t) {\n        var o = t.zoomTo(this.zoom);\n        return new LngLat(this.xLng(o.column * this.tileSize), this.yLat(o.row * this.tileSize));\n      }, Transform.prototype.pointCoordinate = function (t, o) {\n        void 0 === o && (o = this.tileZoom);\n        var i = 0,\n            e = [t.x, t.y, 0, 1],\n            r = [t.x, t.y, 1, 1];\n        vec4.transformMat4(e, e, this.pixelMatrixInverse), vec4.transformMat4(r, r, this.pixelMatrixInverse);\n        var n = e[3],\n            s = r[3],\n            a = e[0] / n,\n            h = r[0] / s,\n            c = e[1] / n,\n            m = r[1] / s,\n            p = e[2] / n,\n            l = r[2] / s,\n            u = p === l ? 0 : (i - p) / (l - p);\n        return new Coordinate(interp(a, h, u) / this.tileSize, interp(c, m, u) / this.tileSize, this.zoom)._zoomTo(o);\n      }, Transform.prototype.coordinatePoint = function (t) {\n        var o = t.zoomTo(this.zoom),\n            i = [o.column * this.tileSize, o.row * this.tileSize, 0, 1];\n        return vec4.transformMat4(i, i, this.pixelMatrix), new Point(i[0] / i[3], i[1] / i[3]);\n      }, Transform.prototype.calculatePosMatrix = function (t, o) {\n        var i = t.toCoordinate(o),\n            e = this.worldSize / this.zoomScale(i.zoom),\n            r = mat4.identity(new Float64Array(16));\n        return mat4.translate(r, r, [i.column * e, i.row * e, 0]), mat4.scale(r, r, [e / EXTENT, e / EXTENT, 1]), mat4.multiply(r, this.projMatrix, r), new Float32Array(r);\n      }, Transform.prototype.cameraToTileDistance = function (t) {\n        var o = this.calculatePosMatrix(t.coord, t.sourceMaxZoom),\n            i = [t.tileSize / 2, t.tileSize / 2, 0, 1];\n        return vec4.transformMat4(i, i, o), i[3];\n      }, Transform.prototype._constrain = function () {\n        if (this.center && this.width && this.height && !this._constraining) {\n          this._constraining = !0;\n          var t,\n              o,\n              i,\n              e,\n              r = -90,\n              n = 90,\n              s = -180,\n              a = 180,\n              h = this.size,\n              c = this._unmodified;\n\n          if (this.latRange) {\n            var m = this.latRange;\n            r = this.latY(m[1]), n = this.latY(m[0]), t = n - r < h.y ? h.y / (n - r) : 0;\n          }\n\n          if (this.lngRange) {\n            var p = this.lngRange;\n            s = this.lngX(p[0]), a = this.lngX(p[1]), o = a - s < h.x ? h.x / (a - s) : 0;\n          }\n\n          var l = Math.max(o || 0, t || 0);\n          if (l) return this.center = this.unproject(new Point(o ? (a + s) / 2 : this.x, t ? (n + r) / 2 : this.y)), this.zoom += this.scaleZoom(l), this._unmodified = c, void (this._constraining = !1);\n\n          if (this.latRange) {\n            var u = this.y,\n                f = h.y / 2;\n            u - f < r && (e = r + f), u + f > n && (e = n - f);\n          }\n\n          if (this.lngRange) {\n            var d = this.x,\n                g = h.x / 2;\n            d - g < s && (i = s + g), d + g > a && (i = a - g);\n          }\n\n          void 0 === i && void 0 === e || (this.center = this.unproject(new Point(void 0 !== i ? i : this.x, void 0 !== e ? e : this.y))), this._unmodified = c, this._constraining = !1;\n        }\n      }, Transform.prototype._calcMatrices = function () {\n        if (this.height) {\n          this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height;\n          var t = this._fov / 2,\n              o = Math.PI / 2 + this._pitch,\n              i = Math.sin(t) * this.cameraToCenterDistance / Math.sin(Math.PI - o - t),\n              e = Math.cos(Math.PI / 2 - this._pitch) * i + this.cameraToCenterDistance,\n              r = 1.01 * e,\n              n = new Float64Array(16);\n          mat4.perspective(n, this._fov, this.width / this.height, 1, r), mat4.scale(n, n, [1, -1, 1]), mat4.translate(n, n, [0, 0, -this.cameraToCenterDistance]), mat4.rotateX(n, n, this._pitch), mat4.rotateZ(n, n, this.angle), mat4.translate(n, n, [-this.x, -this.y, 0]);\n          var s = this.worldSize / (2 * Math.PI * 6378137 * Math.abs(Math.cos(this.center.lat * (Math.PI / 180))));\n          if (mat4.scale(n, n, [1, 1, s, 1]), this.projMatrix = n, n = mat4.create(), mat4.scale(n, n, [this.width / 2, -this.height / 2, 1]), mat4.translate(n, n, [1, -1, 0]), this.pixelMatrix = mat4.multiply(new Float64Array(16), n, this.projMatrix), n = mat4.invert(new Float64Array(16), this.pixelMatrix), !n) throw new Error(\"failed to invert matrix\");\n          this.pixelMatrixInverse = n;\n        }\n      }, Object.defineProperties(Transform.prototype, prototypeAccessors), module.exports = Transform;\n    }, {\n      \"../data/extent\": 53,\n      \"../source/tile_coord\": 95,\n      \"../style-spec/util/interpolate\": 122,\n      \"../util/util\": 215,\n      \"./coordinate\": 60,\n      \"./lng_lat\": 61,\n      \"@mapbox/gl-matrix\": 1,\n      \"point-geometry\": 25\n    }],\n    64: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var browser = _dereq_(\"./util/browser\"),\n          mapboxgl = module.exports = {};\n\n      mapboxgl.version = _dereq_(\"../package.json\").version, mapboxgl.workerCount = Math.max(Math.floor(browser.hardwareConcurrency / 2), 1), mapboxgl.Map = _dereq_(\"./ui/map\"), mapboxgl.NavigationControl = _dereq_(\"./ui/control/navigation_control\"), mapboxgl.GeolocateControl = _dereq_(\"./ui/control/geolocate_control\"), mapboxgl.AttributionControl = _dereq_(\"./ui/control/attribution_control\"), mapboxgl.ScaleControl = _dereq_(\"./ui/control/scale_control\"), mapboxgl.FullscreenControl = _dereq_(\"./ui/control/fullscreen_control\"), mapboxgl.Popup = _dereq_(\"./ui/popup\"), mapboxgl.Marker = _dereq_(\"./ui/marker\"), mapboxgl.Style = _dereq_(\"./style/style\"), mapboxgl.LngLat = _dereq_(\"./geo/lng_lat\"), mapboxgl.LngLatBounds = _dereq_(\"./geo/lng_lat_bounds\"), mapboxgl.Point = _dereq_(\"point-geometry\"), mapboxgl.Evented = _dereq_(\"./util/evented\"), mapboxgl.supported = _dereq_(\"./util/browser\").supported;\n\n      var config = _dereq_(\"./util/config\");\n\n      mapboxgl.config = config;\n\n      var rtlTextPlugin = _dereq_(\"./source/rtl_text_plugin\");\n\n      mapboxgl.setRTLTextPlugin = rtlTextPlugin.setRTLTextPlugin, Object.defineProperty(mapboxgl, \"accessToken\", {\n        get: function get() {\n          return config.ACCESS_TOKEN;\n        },\n        set: function set(o) {\n          config.ACCESS_TOKEN = o;\n        }\n      });\n    }, {\n      \"../package.json\": 42,\n      \"./geo/lng_lat\": 61,\n      \"./geo/lng_lat_bounds\": 62,\n      \"./source/rtl_text_plugin\": 90,\n      \"./style/style\": 148,\n      \"./ui/control/attribution_control\": 175,\n      \"./ui/control/fullscreen_control\": 176,\n      \"./ui/control/geolocate_control\": 177,\n      \"./ui/control/navigation_control\": 179,\n      \"./ui/control/scale_control\": 180,\n      \"./ui/map\": 189,\n      \"./ui/marker\": 190,\n      \"./ui/popup\": 191,\n      \"./util/browser\": 194,\n      \"./util/config\": 198,\n      \"./util/evented\": 202,\n      \"point-geometry\": 25\n    }],\n    65: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawBackground(r, t, e) {\n        var a = r.gl,\n            i = r.transform,\n            n = i.tileSize,\n            o = e.paint[\"background-color\"],\n            l = e.paint[\"background-pattern\"],\n            u = e.paint[\"background-opacity\"],\n            f = !l && 1 === o[3] && 1 === u;\n\n        if (r.isOpaquePass === f) {\n          a.disable(a.STENCIL_TEST), r.setDepthSublayer(0);\n          var s;\n\n          if (l) {\n            if (pattern.isPatternMissing(l, r)) return;\n            s = r.useProgram(\"fillPattern\", r.basicFillProgramConfiguration), pattern.prepare(l, r, s), r.tileExtentPatternVAO.bind(a, s, r.tileExtentBuffer);\n          } else s = r.useProgram(\"fill\", r.basicFillProgramConfiguration), a.uniform4fv(s.u_color, o), r.tileExtentVAO.bind(a, s, r.tileExtentBuffer);\n\n          a.uniform1f(s.u_opacity, u);\n\n          for (var c = i.coveringTiles({\n            tileSize: n\n          }), g = 0, p = c; g < p.length; g += 1) {\n            var d = p[g];\n            l && pattern.setTile({\n              coord: d,\n              tileSize: n\n            }, r, s), a.uniformMatrix4fv(s.u_matrix, !1, r.transform.calculatePosMatrix(d)), a.drawArrays(a.TRIANGLE_STRIP, 0, r.tileExtentBuffer.length);\n          }\n        }\n      }\n\n      var pattern = _dereq_(\"./pattern\");\n\n      module.exports = drawBackground;\n    }, {\n      \"./pattern\": 77\n    }],\n    66: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawCircles(e, r, t, a) {\n        if (!e.isOpaquePass) {\n          var i = e.gl;\n          e.setDepthSublayer(0), e.depthMask(!1), i.disable(i.STENCIL_TEST);\n\n          for (var s = 0; s < a.length; s++) {\n            var o = a[s],\n                n = r.getTile(o),\n                f = n.getBucket(t);\n\n            if (f) {\n              var l = f.buffers,\n                  m = l.layerData[t.id],\n                  u = m.programConfiguration,\n                  c = e.useProgram(\"circle\", u);\n              u.setUniforms(i, c, t, {\n                zoom: e.transform.zoom\n              }), \"map\" === t.paint[\"circle-pitch-scale\"] ? (i.uniform1i(c.u_scale_with_map, !0), i.uniform2f(c.u_extrude_scale, e.transform.pixelsToGLUnits[0] * e.transform.cameraToCenterDistance, e.transform.pixelsToGLUnits[1] * e.transform.cameraToCenterDistance)) : (i.uniform1i(c.u_scale_with_map, !1), i.uniform2fv(c.u_extrude_scale, e.transform.pixelsToGLUnits)), i.uniform1f(c.u_devicepixelratio, browser.devicePixelRatio), i.uniformMatrix4fv(c.u_matrix, !1, e.translatePosMatrix(o.posMatrix, n, t.paint[\"circle-translate\"], t.paint[\"circle-translate-anchor\"]));\n\n              for (var p = 0, v = l.segments; p < v.length; p += 1) {\n                var x = v[p];\n                x.vaos[t.id].bind(i, c, l.layoutVertexBuffer, l.elementBuffer, m.paintVertexBuffer, x.vertexOffset), i.drawElements(i.TRIANGLES, 3 * x.primitiveLength, i.UNSIGNED_SHORT, 3 * x.primitiveOffset * 2);\n              }\n            }\n          }\n        }\n      }\n\n      var browser = _dereq_(\"../util/browser\");\n\n      module.exports = drawCircles;\n    }, {\n      \"../util/browser\": 194\n    }],\n    67: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawCollisionDebug(e, r, i, o) {\n        var t = e.gl;\n        t.enable(t.STENCIL_TEST);\n        var a = e.useProgram(\"collisionBox\");\n        t.activeTexture(t.TEXTURE1), e.frameHistory.bind(t), t.uniform1i(a.u_fadetexture, 1);\n\n        for (var n = 0; n < o.length; n++) {\n          var f = o[n],\n              l = r.getTile(f),\n              m = l.getBucket(i);\n\n          if (m) {\n            var u = m.buffers.collisionBox;\n\n            if (u) {\n              t.uniformMatrix4fv(a.u_matrix, !1, f.posMatrix), e.enableTileClippingMask(f), e.lineWidth(1), t.uniform1f(a.u_scale, Math.pow(2, e.transform.zoom - l.coord.z)), t.uniform1f(a.u_zoom, 10 * e.transform.zoom);\n              var s = Math.max(0, Math.min(25, l.coord.z + Math.log(l.collisionTile.maxScale) / Math.LN2));\n              t.uniform1f(a.u_maxzoom, 10 * s), t.uniform1f(a.u_collision_y_stretch, l.collisionTile.yStretch), t.uniform1f(a.u_pitch, e.transform.pitch / 360 * 2 * Math.PI), t.uniform1f(a.u_camera_to_center_distance, e.transform.cameraToCenterDistance);\n\n              for (var c = 0, _ = u.segments; c < _.length; c += 1) {\n                var h = _[c];\n                h.vaos[i.id].bind(t, a, u.layoutVertexBuffer, u.elementBuffer, null, h.vertexOffset), t.drawElements(t.LINES, 2 * h.primitiveLength, t.UNSIGNED_SHORT, 2 * h.primitiveOffset * 2);\n              }\n            }\n          }\n        }\n      }\n\n      module.exports = drawCollisionDebug;\n    }, {}],\n    68: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawDebug(r, e, a) {\n        for (var t = 0; t < a.length; t++) {\n          drawDebugTile(r, e, a[t]);\n        }\n      }\n\n      function drawDebugTile(r, e, a) {\n        var t = r.gl;\n        t.disable(t.STENCIL_TEST), r.lineWidth(1 * browser.devicePixelRatio);\n        var i = a.posMatrix,\n            u = r.useProgram(\"debug\");\n        t.uniformMatrix4fv(u.u_matrix, !1, i), t.uniform4f(u.u_color, 1, 0, 0, 1), r.debugVAO.bind(t, u, r.debugBuffer), t.drawArrays(t.LINE_STRIP, 0, r.debugBuffer.length);\n\n        for (var o = createTextVerticies(a.toString(), 50, 200, 5), f = new PosArray(), n = 0; n < o.length; n += 2) {\n          f.emplaceBack(o[n], o[n + 1]);\n        }\n\n        var l = Buffer.fromStructArray(f, Buffer.BufferType.VERTEX),\n            m = new VertexArrayObject();\n        m.bind(t, u, l), t.uniform4f(u.u_color, 1, 1, 1, 1);\n\n        for (var s = e.getTile(a).tileSize, g = EXTENT / (Math.pow(2, r.transform.zoom - a.z) * s), x = [[-1, -1], [-1, 1], [1, -1], [1, 1]], d = 0; d < x.length; d++) {\n          var b = x[d];\n          t.uniformMatrix4fv(u.u_matrix, !1, mat4.translate([], i, [g * b[0], g * b[1], 0])), t.drawArrays(t.LINES, 0, l.length);\n        }\n\n        t.uniform4f(u.u_color, 0, 0, 0, 1), t.uniformMatrix4fv(u.u_matrix, !1, i), t.drawArrays(t.LINES, 0, l.length);\n      }\n\n      function createTextVerticies(r, e, a, t) {\n        t = t || 1;\n        var i,\n            u,\n            o,\n            f,\n            n,\n            l,\n            m,\n            s,\n            g = [];\n\n        for (i = 0, u = r.length; i < u; i++) {\n          if (n = simplexFont[r[i]]) {\n            for (s = null, o = 0, f = n[1].length; o < f; o += 2) {\n              n[1][o] === -1 && n[1][o + 1] === -1 ? s = null : (l = e + n[1][o] * t, m = a - n[1][o + 1] * t, s && g.push(s.x, s.y, l, m), s = {\n                x: l,\n                y: m\n              });\n            }\n\n            e += n[0] * t;\n          }\n        }\n\n        return g;\n      }\n\n      var browser = _dereq_(\"../util/browser\"),\n          mat4 = _dereq_(\"@mapbox/gl-matrix\").mat4,\n          EXTENT = _dereq_(\"../data/extent\"),\n          Buffer = _dereq_(\"../data/buffer\"),\n          VertexArrayObject = _dereq_(\"./vertex_array_object\"),\n          PosArray = _dereq_(\"../data/pos_array\");\n\n      module.exports = drawDebug;\n      var simplexFont = {\n        \" \": [16, []],\n        \"!\": [10, [5, 21, 5, 7, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],\n        '\"': [16, [4, 21, 4, 14, -1, -1, 12, 21, 12, 14]],\n        \"#\": [21, [11, 25, 4, -7, -1, -1, 17, 25, 10, -7, -1, -1, 4, 12, 18, 12, -1, -1, 3, 6, 17, 6]],\n        $: [20, [8, 25, 8, -4, -1, -1, 12, 25, 12, -4, -1, -1, 17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]],\n        \"%\": [24, [21, 21, 3, 0, -1, -1, 8, 21, 10, 19, 10, 17, 9, 15, 7, 14, 5, 14, 3, 16, 3, 18, 4, 20, 6, 21, 8, 21, 10, 20, 13, 19, 16, 19, 19, 20, 21, 21, -1, -1, 17, 7, 15, 6, 14, 4, 14, 2, 16, 0, 18, 0, 20, 1, 21, 3, 21, 5, 19, 7, 17, 7]],\n        \"&\": [26, [23, 12, 23, 13, 22, 14, 21, 14, 20, 13, 19, 11, 17, 6, 15, 3, 13, 1, 11, 0, 7, 0, 5, 1, 4, 2, 3, 4, 3, 6, 4, 8, 5, 9, 12, 13, 13, 14, 14, 16, 14, 18, 13, 20, 11, 21, 9, 20, 8, 18, 8, 16, 9, 13, 11, 10, 16, 3, 18, 1, 20, 0, 22, 0, 23, 1, 23, 2]],\n        \"'\": [10, [5, 19, 4, 20, 5, 21, 6, 20, 6, 18, 5, 16, 4, 15]],\n        \"(\": [14, [11, 25, 9, 23, 7, 20, 5, 16, 4, 11, 4, 7, 5, 2, 7, -2, 9, -5, 11, -7]],\n        \")\": [14, [3, 25, 5, 23, 7, 20, 9, 16, 10, 11, 10, 7, 9, 2, 7, -2, 5, -5, 3, -7]],\n        \"*\": [16, [8, 21, 8, 9, -1, -1, 3, 18, 13, 12, -1, -1, 13, 18, 3, 12]],\n        \"+\": [26, [13, 18, 13, 0, -1, -1, 4, 9, 22, 9]],\n        \",\": [10, [6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]],\n        \"-\": [26, [4, 9, 22, 9]],\n        \".\": [10, [5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],\n        \"/\": [22, [20, 25, 2, -7]],\n        0: [20, [9, 21, 6, 20, 4, 17, 3, 12, 3, 9, 4, 4, 6, 1, 9, 0, 11, 0, 14, 1, 16, 4, 17, 9, 17, 12, 16, 17, 14, 20, 11, 21, 9, 21]],\n        1: [20, [6, 17, 8, 18, 11, 21, 11, 0]],\n        2: [20, [4, 16, 4, 17, 5, 19, 6, 20, 8, 21, 12, 21, 14, 20, 15, 19, 16, 17, 16, 15, 15, 13, 13, 10, 3, 0, 17, 0]],\n        3: [20, [5, 21, 16, 21, 10, 13, 13, 13, 15, 12, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]],\n        4: [20, [13, 21, 3, 7, 18, 7, -1, -1, 13, 21, 13, 0]],\n        5: [20, [15, 21, 5, 21, 4, 12, 5, 13, 8, 14, 11, 14, 14, 13, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]],\n        6: [20, [16, 18, 15, 20, 12, 21, 10, 21, 7, 20, 5, 17, 4, 12, 4, 7, 5, 3, 7, 1, 10, 0, 11, 0, 14, 1, 16, 3, 17, 6, 17, 7, 16, 10, 14, 12, 11, 13, 10, 13, 7, 12, 5, 10, 4, 7]],\n        7: [20, [17, 21, 7, 0, -1, -1, 3, 21, 17, 21]],\n        8: [20, [8, 21, 5, 20, 4, 18, 4, 16, 5, 14, 7, 13, 11, 12, 14, 11, 16, 9, 17, 7, 17, 4, 16, 2, 15, 1, 12, 0, 8, 0, 5, 1, 4, 2, 3, 4, 3, 7, 4, 9, 6, 11, 9, 12, 13, 13, 15, 14, 16, 16, 16, 18, 15, 20, 12, 21, 8, 21]],\n        9: [20, [16, 14, 15, 11, 13, 9, 10, 8, 9, 8, 6, 9, 4, 11, 3, 14, 3, 15, 4, 18, 6, 20, 9, 21, 10, 21, 13, 20, 15, 18, 16, 14, 16, 9, 15, 4, 13, 1, 10, 0, 8, 0, 5, 1, 4, 3]],\n        \":\": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],\n        \";\": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]],\n        \"<\": [24, [20, 18, 4, 9, 20, 0]],\n        \"=\": [26, [4, 12, 22, 12, -1, -1, 4, 6, 22, 6]],\n        \">\": [24, [4, 18, 20, 9, 4, 0]],\n        \"?\": [18, [3, 16, 3, 17, 4, 19, 5, 20, 7, 21, 11, 21, 13, 20, 14, 19, 15, 17, 15, 15, 14, 13, 13, 12, 9, 10, 9, 7, -1, -1, 9, 2, 8, 1, 9, 0, 10, 1, 9, 2]],\n        \"@\": [27, [18, 13, 17, 15, 15, 16, 12, 16, 10, 15, 9, 14, 8, 11, 8, 8, 9, 6, 11, 5, 14, 5, 16, 6, 17, 8, -1, -1, 12, 16, 10, 14, 9, 11, 9, 8, 10, 6, 11, 5, -1, -1, 18, 16, 17, 8, 17, 6, 19, 5, 21, 5, 23, 7, 24, 10, 24, 12, 23, 15, 22, 17, 20, 19, 18, 20, 15, 21, 12, 21, 9, 20, 7, 19, 5, 17, 4, 15, 3, 12, 3, 9, 4, 6, 5, 4, 7, 2, 9, 1, 12, 0, 15, 0, 18, 1, 20, 2, 21, 3, -1, -1, 19, 16, 18, 8, 18, 6, 19, 5]],\n        A: [18, [9, 21, 1, 0, -1, -1, 9, 21, 17, 0, -1, -1, 4, 7, 14, 7]],\n        B: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, -1, -1, 4, 11, 13, 11, 16, 10, 17, 9, 18, 7, 18, 4, 17, 2, 16, 1, 13, 0, 4, 0]],\n        C: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5]],\n        D: [21, [4, 21, 4, 0, -1, -1, 4, 21, 11, 21, 14, 20, 16, 18, 17, 16, 18, 13, 18, 8, 17, 5, 16, 3, 14, 1, 11, 0, 4, 0]],\n        E: [19, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11, -1, -1, 4, 0, 17, 0]],\n        F: [18, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11]],\n        G: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 18, 8, -1, -1, 13, 8, 18, 8]],\n        H: [22, [4, 21, 4, 0, -1, -1, 18, 21, 18, 0, -1, -1, 4, 11, 18, 11]],\n        I: [8, [4, 21, 4, 0]],\n        J: [16, [12, 21, 12, 5, 11, 2, 10, 1, 8, 0, 6, 0, 4, 1, 3, 2, 2, 5, 2, 7]],\n        K: [21, [4, 21, 4, 0, -1, -1, 18, 21, 4, 7, -1, -1, 9, 12, 18, 0]],\n        L: [17, [4, 21, 4, 0, -1, -1, 4, 0, 16, 0]],\n        M: [24, [4, 21, 4, 0, -1, -1, 4, 21, 12, 0, -1, -1, 20, 21, 12, 0, -1, -1, 20, 21, 20, 0]],\n        N: [22, [4, 21, 4, 0, -1, -1, 4, 21, 18, 0, -1, -1, 18, 21, 18, 0]],\n        O: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21]],\n        P: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 14, 17, 12, 16, 11, 13, 10, 4, 10]],\n        Q: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21, -1, -1, 12, 4, 18, -2]],\n        R: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, 4, 11, -1, -1, 11, 11, 18, 0]],\n        S: [20, [17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]],\n        T: [16, [8, 21, 8, 0, -1, -1, 1, 21, 15, 21]],\n        U: [22, [4, 21, 4, 6, 5, 3, 7, 1, 10, 0, 12, 0, 15, 1, 17, 3, 18, 6, 18, 21]],\n        V: [18, [1, 21, 9, 0, -1, -1, 17, 21, 9, 0]],\n        W: [24, [2, 21, 7, 0, -1, -1, 12, 21, 7, 0, -1, -1, 12, 21, 17, 0, -1, -1, 22, 21, 17, 0]],\n        X: [20, [3, 21, 17, 0, -1, -1, 17, 21, 3, 0]],\n        Y: [18, [1, 21, 9, 11, 9, 0, -1, -1, 17, 21, 9, 11]],\n        Z: [20, [17, 21, 3, 0, -1, -1, 3, 21, 17, 21, -1, -1, 3, 0, 17, 0]],\n        \"[\": [14, [4, 25, 4, -7, -1, -1, 5, 25, 5, -7, -1, -1, 4, 25, 11, 25, -1, -1, 4, -7, 11, -7]],\n        \"\\\\\": [14, [0, 21, 14, -3]],\n        \"]\": [14, [9, 25, 9, -7, -1, -1, 10, 25, 10, -7, -1, -1, 3, 25, 10, 25, -1, -1, 3, -7, 10, -7]],\n        \"^\": [16, [6, 15, 8, 18, 10, 15, -1, -1, 3, 12, 8, 17, 13, 12, -1, -1, 8, 17, 8, 0]],\n        _: [16, [0, -2, 16, -2]],\n        \"`\": [10, [6, 21, 5, 20, 4, 18, 4, 16, 5, 15, 6, 16, 5, 17]],\n        a: [19, [15, 14, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],\n        b: [19, [4, 21, 4, 0, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]],\n        c: [18, [15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],\n        d: [19, [15, 21, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],\n        e: [18, [3, 8, 15, 8, 15, 10, 14, 12, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],\n        f: [12, [10, 21, 8, 21, 6, 20, 5, 17, 5, 0, -1, -1, 2, 14, 9, 14]],\n        g: [19, [15, 14, 15, -2, 14, -5, 13, -6, 11, -7, 8, -7, 6, -6, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],\n        h: [19, [4, 21, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]],\n        i: [8, [3, 21, 4, 20, 5, 21, 4, 22, 3, 21, -1, -1, 4, 14, 4, 0]],\n        j: [10, [5, 21, 6, 20, 7, 21, 6, 22, 5, 21, -1, -1, 6, 14, 6, -3, 5, -6, 3, -7, 1, -7]],\n        k: [17, [4, 21, 4, 0, -1, -1, 14, 14, 4, 4, -1, -1, 8, 8, 15, 0]],\n        l: [8, [4, 21, 4, 0]],\n        m: [30, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0, -1, -1, 15, 10, 18, 13, 20, 14, 23, 14, 25, 13, 26, 10, 26, 0]],\n        n: [19, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]],\n        o: [19, [8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3, 16, 6, 16, 8, 15, 11, 13, 13, 11, 14, 8, 14]],\n        p: [19, [4, 14, 4, -7, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]],\n        q: [19, [15, 14, 15, -7, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],\n        r: [13, [4, 14, 4, 0, -1, -1, 4, 8, 5, 11, 7, 13, 9, 14, 12, 14]],\n        s: [17, [14, 11, 13, 13, 10, 14, 7, 14, 4, 13, 3, 11, 4, 9, 6, 8, 11, 7, 13, 6, 14, 4, 14, 3, 13, 1, 10, 0, 7, 0, 4, 1, 3, 3]],\n        t: [12, [5, 21, 5, 4, 6, 1, 8, 0, 10, 0, -1, -1, 2, 14, 9, 14]],\n        u: [19, [4, 14, 4, 4, 5, 1, 7, 0, 10, 0, 12, 1, 15, 4, -1, -1, 15, 14, 15, 0]],\n        v: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0]],\n        w: [22, [3, 14, 7, 0, -1, -1, 11, 14, 7, 0, -1, -1, 11, 14, 15, 0, -1, -1, 19, 14, 15, 0]],\n        x: [17, [3, 14, 14, 0, -1, -1, 14, 14, 3, 0]],\n        y: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0, 6, -4, 4, -6, 2, -7, 1, -7]],\n        z: [17, [14, 14, 3, 0, -1, -1, 3, 14, 14, 14, -1, -1, 3, 0, 14, 0]],\n        \"{\": [14, [9, 25, 7, 24, 6, 23, 5, 21, 5, 19, 6, 17, 7, 16, 8, 14, 8, 12, 6, 10, -1, -1, 7, 24, 6, 22, 6, 20, 7, 18, 8, 17, 9, 15, 9, 13, 8, 11, 4, 9, 8, 7, 9, 5, 9, 3, 8, 1, 7, 0, 6, -2, 6, -4, 7, -6, -1, -1, 6, 8, 8, 6, 8, 4, 7, 2, 6, 1, 5, -1, 5, -3, 6, -5, 7, -6, 9, -7]],\n        \"|\": [8, [4, 25, 4, -7]],\n        \"}\": [14, [5, 25, 7, 24, 8, 23, 9, 21, 9, 19, 8, 17, 7, 16, 6, 14, 6, 12, 8, 10, -1, -1, 7, 24, 8, 22, 8, 20, 7, 18, 6, 17, 5, 15, 5, 13, 6, 11, 10, 9, 6, 7, 5, 5, 5, 3, 6, 1, 7, 0, 8, -2, 8, -4, 7, -6, -1, -1, 8, 8, 6, 6, 6, 4, 7, 2, 8, 1, 9, -1, 9, -3, 8, -5, 7, -6, 5, -7]],\n        \"~\": [24, [3, 6, 3, 8, 4, 11, 6, 12, 8, 12, 10, 11, 14, 8, 16, 7, 18, 7, 20, 8, 21, 10, -1, -1, 3, 8, 4, 10, 6, 11, 8, 11, 10, 10, 14, 7, 16, 6, 18, 6, 20, 7, 21, 10, 21, 12]]\n      };\n    }, {\n      \"../data/buffer\": 50,\n      \"../data/extent\": 53,\n      \"../data/pos_array\": 56,\n      \"../util/browser\": 194,\n      \"./vertex_array_object\": 79,\n      \"@mapbox/gl-matrix\": 1\n    }],\n    69: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawFill(t, e, r, i) {\n        var a = t.gl;\n        a.enable(a.STENCIL_TEST);\n        var l = !r.paint[\"fill-pattern\"] && r.isPaintValueFeatureConstant(\"fill-color\") && r.isPaintValueFeatureConstant(\"fill-opacity\") && 1 === r.paint[\"fill-color\"][3] && 1 === r.paint[\"fill-opacity\"];\n        t.isOpaquePass === l && (t.setDepthSublayer(1), drawFillTiles(t, e, r, i, drawFillTile)), !t.isOpaquePass && r.paint[\"fill-antialias\"] && (t.lineWidth(2), t.depthMask(!1), t.setDepthSublayer(r.getPaintProperty(\"fill-outline-color\") ? 2 : 0), drawFillTiles(t, e, r, i, drawStrokeTile));\n      }\n\n      function drawFillTiles(t, e, r, i, a) {\n        if (!pattern.isPatternMissing(r.paint[\"fill-pattern\"], t)) for (var l = !0, n = 0, o = i; n < o.length; n += 1) {\n          var f = o[n],\n              s = e.getTile(f),\n              p = s.getBucket(r);\n          p && (t.enableTileClippingMask(f), a(t, e, r, s, f, p.buffers, l), l = !1);\n        }\n      }\n\n      function drawFillTile(t, e, r, i, a, l, n) {\n        for (var o = t.gl, f = l.layerData[r.id], s = setFillProgram(\"fill\", r.paint[\"fill-pattern\"], t, f, r, i, a, n), p = 0, u = l.segments; p < u.length; p += 1) {\n          var g = u[p];\n          g.vaos[r.id].bind(o, s, l.layoutVertexBuffer, l.elementBuffer, f.paintVertexBuffer, g.vertexOffset), o.drawElements(o.TRIANGLES, 3 * g.primitiveLength, o.UNSIGNED_SHORT, 3 * g.primitiveOffset * 2);\n        }\n      }\n\n      function drawStrokeTile(t, e, r, i, a, l, n) {\n        var o = t.gl,\n            f = l.layerData[r.id],\n            s = r.paint[\"fill-pattern\"] && !r.getPaintProperty(\"fill-outline-color\"),\n            p = setFillProgram(\"fillOutline\", s, t, f, r, i, a, n);\n        o.uniform2f(p.u_world, o.drawingBufferWidth, o.drawingBufferHeight);\n\n        for (var u = 0, g = l.segments2; u < g.length; u += 1) {\n          var m = g[u];\n          m.vaos[r.id].bind(o, p, l.layoutVertexBuffer, l.elementBuffer2, f.paintVertexBuffer, m.vertexOffset), o.drawElements(o.LINES, 2 * m.primitiveLength, o.UNSIGNED_SHORT, 2 * m.primitiveOffset * 2);\n        }\n      }\n\n      function setFillProgram(t, e, r, i, a, l, n, o) {\n        var f,\n            s = r.currentProgram;\n        return e ? (f = r.useProgram(t + \"Pattern\", i.programConfiguration), (o || f !== s) && (i.programConfiguration.setUniforms(r.gl, f, a, {\n          zoom: r.transform.zoom\n        }), pattern.prepare(a.paint[\"fill-pattern\"], r, f)), pattern.setTile(l, r, f)) : (f = r.useProgram(t, i.programConfiguration), (o || f !== s) && i.programConfiguration.setUniforms(r.gl, f, a, {\n          zoom: r.transform.zoom\n        })), r.gl.uniformMatrix4fv(f.u_matrix, !1, r.translatePosMatrix(n.posMatrix, l, a.paint[\"fill-translate\"], a.paint[\"fill-translate-anchor\"])), f;\n      }\n\n      var pattern = _dereq_(\"./pattern\");\n\n      module.exports = drawFill;\n    }, {\n      \"./pattern\": 77\n    }],\n    70: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function draw(e, r, t, a) {\n        if (0 !== t.paint[\"fill-extrusion-opacity\"]) {\n          var i = e.gl;\n          i.disable(i.STENCIL_TEST), i.enable(i.DEPTH_TEST), e.depthMask(!0);\n          var n = renderToTexture(i, e);\n          i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT | i.DEPTH_BUFFER_BIT);\n\n          for (var f = 0; f < a.length; f++) {\n            drawExtrusion(e, r, t, a[f]);\n          }\n\n          i.bindFramebuffer(i.FRAMEBUFFER, null), renderTextureToMap(i, e, t, n);\n        }\n      }\n\n      function renderToTexture(e, r) {\n        e.activeTexture(e.TEXTURE1);\n        var t = r.viewportTexture;\n        t ? e.bindTexture(e.TEXTURE_2D, t) : (t = e.createTexture(), e.bindTexture(e.TEXTURE_2D, t), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, r.width, r.height, 0, e.RGBA, e.UNSIGNED_BYTE, null), r.viewportTexture = t);\n        var a = r.viewportFbo;\n        if (a) e.bindFramebuffer(e.FRAMEBUFFER, a);else {\n          a = e.createFramebuffer(), e.bindFramebuffer(e.FRAMEBUFFER, a);\n          var i = e.createRenderbuffer();\n          e.bindRenderbuffer(e.RENDERBUFFER, i), e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_COMPONENT16, r.width, r.height), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, i), r.viewportFbo = a;\n        }\n        return e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0), t;\n      }\n\n      function renderTextureToMap(e, r, t, a) {\n        var i = r.useProgram(\"extrusionTexture\");\n        e.activeTexture(e.TEXTURE0), e.bindTexture(e.TEXTURE_2D, a), e.uniform1f(i.u_opacity, t.paint[\"fill-extrusion-opacity\"]), e.uniform1i(i.u_image, 1);\n        var n = mat4.create();\n        mat4.ortho(n, 0, r.width, r.height, 0, 0, 1), e.uniformMatrix4fv(i.u_matrix, !1, n), e.disable(e.DEPTH_TEST), e.uniform2f(i.u_world, e.drawingBufferWidth, e.drawingBufferHeight);\n        var f = new PosArray();\n        f.emplaceBack(0, 0), f.emplaceBack(1, 0), f.emplaceBack(0, 1), f.emplaceBack(1, 1);\n        var u = Buffer.fromStructArray(f, Buffer.BufferType.VERTEX),\n            T = new VertexArrayObject();\n        T.bind(e, i, u), e.drawArrays(e.TRIANGLE_STRIP, 0, 4), e.enable(e.DEPTH_TEST);\n      }\n\n      function drawExtrusion(e, r, t, a) {\n        if (!e.isOpaquePass) {\n          var i = r.getTile(a),\n              n = i.getBucket(t);\n\n          if (n) {\n            var f = n.buffers,\n                u = e.gl,\n                T = t.paint[\"fill-extrusion-pattern\"],\n                o = f.layerData[t.id],\n                E = o.programConfiguration,\n                l = e.useProgram(T ? \"fillExtrusionPattern\" : \"fillExtrusion\", E);\n\n            if (E.setUniforms(u, l, t, {\n              zoom: e.transform.zoom\n            }), T) {\n              if (pattern.isPatternMissing(T, e)) return;\n              pattern.prepare(T, e, l), pattern.setTile(i, e, l), u.uniform1f(l.u_height_factor, -Math.pow(2, a.z) / i.tileSize / 8);\n            }\n\n            e.gl.uniformMatrix4fv(l.u_matrix, !1, e.translatePosMatrix(a.posMatrix, i, t.paint[\"fill-extrusion-translate\"], t.paint[\"fill-extrusion-translate-anchor\"])), setLight(l, e);\n\n            for (var s = 0, R = f.segments; s < R.length; s += 1) {\n              var m = R[s];\n              m.vaos[t.id].bind(u, l, f.layoutVertexBuffer, f.elementBuffer, o.paintVertexBuffer, m.vertexOffset), u.drawElements(u.TRIANGLES, 3 * m.primitiveLength, u.UNSIGNED_SHORT, 3 * m.primitiveOffset * 2);\n            }\n          }\n        }\n      }\n\n      function setLight(e, r) {\n        var t = r.gl,\n            a = r.style.light,\n            i = a.calculated.position,\n            n = [i.x, i.y, i.z],\n            f = mat3.create();\n        \"viewport\" === a.calculated.anchor && mat3.fromRotation(f, -r.transform.angle), vec3.transformMat3(n, n, f), t.uniform3fv(e.u_lightpos, n), t.uniform1f(e.u_lightintensity, a.calculated.intensity), t.uniform3fv(e.u_lightcolor, a.calculated.color.slice(0, 3));\n      }\n\n      var glMatrix = _dereq_(\"@mapbox/gl-matrix\"),\n          Buffer = _dereq_(\"../data/buffer\"),\n          VertexArrayObject = _dereq_(\"./vertex_array_object\"),\n          PosArray = _dereq_(\"../data/pos_array\"),\n          pattern = _dereq_(\"./pattern\"),\n          mat3 = glMatrix.mat3,\n          mat4 = glMatrix.mat4,\n          vec3 = glMatrix.vec3;\n\n      module.exports = draw;\n    }, {\n      \"../data/buffer\": 50,\n      \"../data/pos_array\": 56,\n      \"./pattern\": 77,\n      \"./vertex_array_object\": 79,\n      \"@mapbox/gl-matrix\": 1\n    }],\n    71: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawLineTile(e, i, t, r, a, n, o, l, f) {\n        var s,\n            u,\n            m,\n            p,\n            _ = i.gl,\n            d = a.paint[\"line-dasharray\"],\n            g = a.paint[\"line-pattern\"];\n\n        if (l || f) {\n          var v = 1 / pixelsToTileUnits(t, 1, i.transform.tileZoom);\n\n          if (d) {\n            s = i.lineAtlas.getDash(d.from, \"round\" === a.layout[\"line-cap\"]), u = i.lineAtlas.getDash(d.to, \"round\" === a.layout[\"line-cap\"]);\n            var x = s.width * d.fromScale,\n                T = u.width * d.toScale;\n            _.uniform2f(e.u_patternscale_a, v / x, -s.height / 2), _.uniform2f(e.u_patternscale_b, v / T, -u.height / 2), _.uniform1f(e.u_sdfgamma, i.lineAtlas.width / (256 * Math.min(x, T) * browser.devicePixelRatio) / 2);\n          } else if (g) {\n            if (m = i.spriteAtlas.getPattern(g.from), p = i.spriteAtlas.getPattern(g.to), !m || !p) return;\n            _.uniform2f(e.u_pattern_size_a, m.displaySize[0] * g.fromScale / v, p.displaySize[1]), _.uniform2f(e.u_pattern_size_b, p.displaySize[0] * g.toScale / v, p.displaySize[1]), _.uniform2fv(e.u_texsize, i.spriteAtlas.getPixelSize());\n          }\n\n          _.uniform2f(e.u_gl_units_to_pixels, 1 / i.transform.pixelsToGLUnits[0], 1 / i.transform.pixelsToGLUnits[1]);\n        }\n\n        l && (d ? (_.uniform1i(e.u_image, 0), _.activeTexture(_.TEXTURE0), i.lineAtlas.bind(_), _.uniform1f(e.u_tex_y_a, s.y), _.uniform1f(e.u_tex_y_b, u.y), _.uniform1f(e.u_mix, d.t)) : g && (_.uniform1i(e.u_image, 0), _.activeTexture(_.TEXTURE0), i.spriteAtlas.bind(_, !0), _.uniform2fv(e.u_pattern_tl_a, m.tl), _.uniform2fv(e.u_pattern_br_a, m.br), _.uniform2fv(e.u_pattern_tl_b, p.tl), _.uniform2fv(e.u_pattern_br_b, p.br), _.uniform1f(e.u_fade, g.t)), _.uniform1f(e.u_width, a.paint[\"line-width\"])), i.enableTileClippingMask(n);\n        var h = i.translatePosMatrix(n.posMatrix, t, a.paint[\"line-translate\"], a.paint[\"line-translate-anchor\"]);\n        _.uniformMatrix4fv(e.u_matrix, !1, h), _.uniform1f(e.u_ratio, 1 / pixelsToTileUnits(t, 1, i.transform.zoom));\n\n        for (var b = 0, c = r.segments; b < c.length; b += 1) {\n          var S = c[b];\n          S.vaos[a.id].bind(_, e, r.layoutVertexBuffer, r.elementBuffer, o.paintVertexBuffer, S.vertexOffset), _.drawElements(_.TRIANGLES, 3 * S.primitiveLength, _.UNSIGNED_SHORT, 3 * S.primitiveOffset * 2);\n        }\n      }\n\n      var browser = _dereq_(\"../util/browser\"),\n          pixelsToTileUnits = _dereq_(\"../source/pixels_to_tile_units\");\n\n      module.exports = function (e, i, t, r) {\n        if (!e.isOpaquePass) {\n          e.setDepthSublayer(0), e.depthMask(!1);\n          var a = e.gl;\n          if (a.enable(a.STENCIL_TEST), !(t.paint[\"line-width\"] <= 0)) for (var n, o = t.paint[\"line-dasharray\"] ? \"lineSDF\" : t.paint[\"line-pattern\"] ? \"linePattern\" : \"line\", l = !0, f = 0, s = r; f < s.length; f += 1) {\n            var u = s[f],\n                m = i.getTile(u),\n                p = m.getBucket(t);\n\n            if (p) {\n              var _ = p.buffers.layerData[t.id],\n                  d = e.currentProgram,\n                  g = e.useProgram(o, _.programConfiguration),\n                  v = l || g !== d,\n                  x = n !== m.coord.z;\n              v && _.programConfiguration.setUniforms(e.gl, g, t, {\n                zoom: e.transform.zoom\n              }), drawLineTile(g, e, m, p.buffers, t, u, _, v, x), n = m.coord.z, l = !1;\n            }\n          }\n        }\n      };\n    }, {\n      \"../source/pixels_to_tile_units\": 87,\n      \"../util/browser\": 194\n    }],\n    72: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawRaster(r, t, e, a) {\n        if (!r.isOpaquePass) {\n          var i = r.gl;\n          i.enable(i.DEPTH_TEST), r.depthMask(!0), i.depthFunc(i.LESS);\n\n          for (var o = a.length && a[0].z, n = 0; n < a.length; n++) {\n            var u = a[n];\n            r.setDepthSublayer(u.z - o), drawRasterTile(r, t, e, u);\n          }\n\n          i.depthFunc(i.LEQUAL);\n        }\n      }\n\n      function drawRasterTile(r, t, e, a) {\n        var i = r.gl;\n        i.disable(i.STENCIL_TEST);\n        var o = t.getTile(a),\n            n = r.transform.calculatePosMatrix(a, t.getSource().maxzoom);\n        o.registerFadeDuration(r.style.animationLoop, e.paint[\"raster-fade-duration\"]);\n        var u = r.useProgram(\"raster\");\n        i.uniformMatrix4fv(u.u_matrix, !1, n), i.uniform1f(u.u_brightness_low, e.paint[\"raster-brightness-min\"]), i.uniform1f(u.u_brightness_high, e.paint[\"raster-brightness-max\"]), i.uniform1f(u.u_saturation_factor, saturationFactor(e.paint[\"raster-saturation\"])), i.uniform1f(u.u_contrast_factor, contrastFactor(e.paint[\"raster-contrast\"])), i.uniform3fv(u.u_spin_weights, spinWeights(e.paint[\"raster-hue-rotate\"]));\n        var s,\n            c,\n            f = o.sourceCache && o.sourceCache.findLoadedParent(a, 0, {}),\n            d = getFadeValues(o, f, e, r.transform);\n        i.activeTexture(i.TEXTURE0), i.bindTexture(i.TEXTURE_2D, o.texture), i.activeTexture(i.TEXTURE1), f ? (i.bindTexture(i.TEXTURE_2D, f.texture), s = Math.pow(2, f.coord.z - o.coord.z), c = [o.coord.x * s % 1, o.coord.y * s % 1]) : i.bindTexture(i.TEXTURE_2D, o.texture), i.uniform2fv(u.u_tl_parent, c || [0, 0]), i.uniform1f(u.u_scale_parent, s || 1), i.uniform1f(u.u_buffer_scale, 1), i.uniform1f(u.u_fade_t, d.mix), i.uniform1f(u.u_opacity, d.opacity * e.paint[\"raster-opacity\"]), i.uniform1i(u.u_image0, 0), i.uniform1i(u.u_image1, 1);\n        var m = o.boundsBuffer || r.rasterBoundsBuffer,\n            p = o.boundsVAO || r.rasterBoundsVAO;\n        p.bind(i, u, m), i.drawArrays(i.TRIANGLE_STRIP, 0, m.length);\n      }\n\n      function spinWeights(r) {\n        r *= Math.PI / 180;\n        var t = Math.sin(r),\n            e = Math.cos(r);\n        return [(2 * e + 1) / 3, (-Math.sqrt(3) * t - e + 1) / 3, (Math.sqrt(3) * t - e + 1) / 3];\n      }\n\n      function contrastFactor(r) {\n        return r > 0 ? 1 / (1 - r) : 1 + r;\n      }\n\n      function saturationFactor(r) {\n        return r > 0 ? 1 - 1 / (1.001 - r) : -r;\n      }\n\n      function getFadeValues(r, t, e, a) {\n        var i = e.paint[\"raster-fade-duration\"];\n\n        if (r.sourceCache && i > 0) {\n          var o = Date.now(),\n              n = (o - r.timeAdded) / i,\n              u = t ? (o - t.timeAdded) / i : -1,\n              s = r.sourceCache.getSource(),\n              c = a.coveringZoomLevel({\n            tileSize: s.tileSize,\n            roundZoom: s.roundZoom\n          }),\n              f = !t || Math.abs(t.coord.z - c) > Math.abs(r.coord.z - c),\n              d = f && r.refreshedUponExpiration ? 1 : util.clamp(f ? n : 1 - u, 0, 1);\n          return r.refreshedUponExpiration && n >= 1 && (r.refreshedUponExpiration = !1), t ? {\n            opacity: 1,\n            mix: 1 - d\n          } : {\n            opacity: d,\n            mix: 0\n          };\n        }\n\n        return {\n          opacity: 1,\n          mix: 0\n        };\n      }\n\n      var util = _dereq_(\"../util/util\");\n\n      module.exports = drawRaster;\n    }, {\n      \"../util/util\": 215\n    }],\n    73: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function drawSymbols(t, e, i, o) {\n        if (!t.isOpaquePass) {\n          var a = !(i.layout[\"text-allow-overlap\"] || i.layout[\"icon-allow-overlap\"] || i.layout[\"text-ignore-placement\"] || i.layout[\"icon-ignore-placement\"]),\n              n = t.gl;\n          a ? n.disable(n.STENCIL_TEST) : n.enable(n.STENCIL_TEST), t.setDepthSublayer(0), t.depthMask(!1), drawLayerSymbols(t, e, i, o, !1, i.paint[\"icon-translate\"], i.paint[\"icon-translate-anchor\"], i.layout[\"icon-rotation-alignment\"], i.layout[\"icon-rotation-alignment\"]), drawLayerSymbols(t, e, i, o, !0, i.paint[\"text-translate\"], i.paint[\"text-translate-anchor\"], i.layout[\"text-rotation-alignment\"], i.layout[\"text-pitch-alignment\"]), e.map.showCollisionBoxes && drawCollisionDebug(t, e, i, o);\n        }\n      }\n\n      function drawLayerSymbols(t, e, i, o, a, n, r, s, l) {\n        if (a || !t.style.sprite || t.style.sprite.loaded()) {\n          var u = t.gl,\n              m = \"map\" === s,\n              f = \"map\" === l,\n              c = f;\n          c ? u.enable(u.DEPTH_TEST) : u.disable(u.DEPTH_TEST);\n\n          for (var _, p, y = 0, g = o; y < g.length; y += 1) {\n            var d = g[y],\n                T = e.getTile(d),\n                x = T.getBucket(i);\n\n            if (x) {\n              var v = a ? x.buffers.glyph : x.buffers.icon;\n\n              if (v && v.segments.length) {\n                var h = v.layerData[i.id],\n                    S = h.programConfiguration,\n                    b = a || x.sdfIcons,\n                    z = a ? x.textSizeData : x.iconSizeData;\n                _ && x.fontstack === p || (_ = t.useProgram(b ? \"symbolSDF\" : \"symbolIcon\", S), S.setUniforms(u, _, i, {\n                  zoom: t.transform.zoom\n                }), setSymbolDrawState(_, t, i, d.z, a, b, m, f, x.fontstack, x.iconsNeedLinear, z)), t.enableTileClippingMask(d), u.uniformMatrix4fv(_.u_matrix, !1, t.translatePosMatrix(d.posMatrix, T, n, r)), u.uniform1f(_.u_collision_y_stretch, T.collisionTile.yStretch), drawTileSymbols(_, S, t, i, T, v, a, b, f), p = x.fontstack;\n              }\n            }\n          }\n\n          c || u.enable(u.DEPTH_TEST);\n        }\n      }\n\n      function setSymbolDrawState(t, e, i, o, a, n, r, s, l, u, m) {\n        var f = e.gl,\n            c = e.transform;\n\n        if (f.uniform1i(t.u_rotate_with_map, r), f.uniform1i(t.u_pitch_with_map, s), f.activeTexture(f.TEXTURE0), f.uniform1i(t.u_texture, 0), f.uniform1f(t.u_is_text, a ? 1 : 0), a) {\n          var _ = l && e.glyphSource.getGlyphAtlas(l);\n\n          if (!_) return;\n          _.updateTexture(f), f.uniform2f(t.u_texsize, _.width, _.height);\n        } else {\n          var p = e.options.rotating || e.options.zooming,\n              y = !i.isLayoutValueFeatureConstant(\"icon-size\") || !i.isLayoutValueZoomConstant(\"icon-size\") || 1 !== i.getLayoutValue(\"icon-size\", {\n            zoom: c.zoom\n          }),\n              g = y || u,\n              d = s || c.pitch;\n          e.spriteAtlas.bind(f, n || p || g || d), f.uniform2fv(t.u_texsize, e.spriteAtlas.getPixelSize());\n        }\n\n        if (f.activeTexture(f.TEXTURE1), e.frameHistory.bind(f), f.uniform1i(t.u_fadetexture, 1), f.uniform1f(t.u_zoom, c.zoom), f.uniform1f(t.u_pitch, c.pitch / 360 * 2 * Math.PI), f.uniform1f(t.u_bearing, c.bearing / 360 * 2 * Math.PI), f.uniform1f(t.u_aspect_ratio, c.width / c.height), f.uniform1i(t.u_is_size_zoom_constant, m.isZoomConstant ? 1 : 0), f.uniform1i(t.u_is_size_feature_constant, m.isFeatureConstant ? 1 : 0), m.isZoomConstant || m.isFeatureConstant) {\n          if (m.isFeatureConstant && !m.isZoomConstant) {\n            var T;\n            if (\"interval\" === m.functionType) T = i.getLayoutValue(a ? \"text-size\" : \"icon-size\", {\n              zoom: c.zoom\n            });else {\n              var x = \"interval\" === m.functionType ? 0 : interpolationFactor(c.zoom, m.functionBase, m.coveringZoomRange[0], m.coveringZoomRange[1]),\n                  v = m.coveringStopValues[0],\n                  h = m.coveringStopValues[1];\n              T = v + (h - v) * util.clamp(x, 0, 1);\n            }\n            f.uniform1f(t.u_size, T), f.uniform1f(t.u_layout_size, m.layoutSize);\n          } else m.isFeatureConstant && m.isZoomConstant && f.uniform1f(t.u_size, m.layoutSize);\n        } else {\n          var S = interpolationFactor(c.zoom, m.functionBase, m.coveringZoomRange[0], m.coveringZoomRange[1]);\n          f.uniform1f(t.u_size_t, util.clamp(S, 0, 1));\n        }\n        f.uniform1f(t.u_camera_to_center_distance, c.cameraToCenterDistance), \"line\" === i.layout[\"symbol-placement\"] && \"map\" === i.layout[\"text-rotation-alignment\"] && \"viewport\" === i.layout[\"text-pitch-alignment\"] && i.layout[\"text-field\"] ? f.uniform1f(t.u_max_camera_distance, 1.5) : f.uniform1f(t.u_max_camera_distance, 10);\n      }\n\n      function drawTileSymbols(t, e, i, o, a, n, r, s, l) {\n        var u = i.gl,\n            m = i.transform;\n\n        if (l) {\n          var f = pixelsToTileUnits(a, 1, m.zoom);\n          u.uniform2f(t.u_extrude_scale, f, f);\n        } else {\n          var c = m.cameraToCenterDistance;\n          u.uniform2f(t.u_extrude_scale, m.pixelsToGLUnits[0] * c, m.pixelsToGLUnits[1] * c);\n        }\n\n        if (s) {\n          var _ = (r ? \"text\" : \"icon\") + \"-halo-width\",\n              p = !o.isPaintValueFeatureConstant(_) || o.paint[_],\n              y = (l ? Math.cos(m._pitch) : 1) * m.cameraToCenterDistance;\n\n          u.uniform1f(t.u_gamma_scale, y), p && (u.uniform1f(t.u_is_halo, 1), drawSymbolElements(n, o, u, t)), u.uniform1f(t.u_is_halo, 0);\n        }\n\n        drawSymbolElements(n, o, u, t);\n      }\n\n      function drawSymbolElements(t, e, i, o) {\n        for (var a = t.layerData[e.id], n = a && a.paintVertexBuffer, r = 0, s = t.segments; r < s.length; r += 1) {\n          var l = s[r];\n          l.vaos[e.id].bind(i, o, t.layoutVertexBuffer, t.elementBuffer, n, l.vertexOffset), i.drawElements(i.TRIANGLES, 3 * l.primitiveLength, i.UNSIGNED_SHORT, 3 * l.primitiveOffset * 2);\n        }\n      }\n\n      var util = _dereq_(\"../util/util\"),\n          drawCollisionDebug = _dereq_(\"./draw_collision_debug\"),\n          pixelsToTileUnits = _dereq_(\"../source/pixels_to_tile_units\"),\n          interpolationFactor = _dereq_(\"../style-spec/function\").interpolationFactor;\n\n      module.exports = drawSymbols;\n    }, {\n      \"../source/pixels_to_tile_units\": 87,\n      \"../style-spec/function\": 106,\n      \"../util/util\": 215,\n      \"./draw_collision_debug\": 67\n    }],\n    74: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var FrameHistory = function FrameHistory() {\n        this.changeTimes = new Float64Array(256), this.changeOpacities = new Uint8Array(256), this.opacities = new Uint8ClampedArray(256), this.array = new Uint8Array(this.opacities.buffer), this.previousZoom = 0, this.firstFrame = !0;\n      };\n\n      FrameHistory.prototype.record = function (e, t, i) {\n        var r = this;\n        this.firstFrame && (e = 0, this.firstFrame = !1), t = Math.floor(10 * t);\n        var a;\n        if (t < this.previousZoom) for (a = t + 1; a <= this.previousZoom; a++) {\n          r.changeTimes[a] = e, r.changeOpacities[a] = r.opacities[a];\n        } else for (a = t; a > this.previousZoom; a--) {\n          r.changeTimes[a] = e, r.changeOpacities[a] = r.opacities[a];\n        }\n\n        for (a = 0; a < 256; a++) {\n          var s = e - r.changeTimes[a],\n              o = 255 * (i ? s / i : 1);\n          a <= t ? r.opacities[a] = r.changeOpacities[a] + o : r.opacities[a] = r.changeOpacities[a] - o;\n        }\n\n        this.changed = !0, this.previousZoom = t;\n      }, FrameHistory.prototype.bind = function (e) {\n        this.texture ? (e.bindTexture(e.TEXTURE_2D, this.texture), this.changed && (e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, 256, 1, e.ALPHA, e.UNSIGNED_BYTE, this.array), this.changed = !1)) : (this.texture = e.createTexture(), e.bindTexture(e.TEXTURE_2D, this.texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST), e.texImage2D(e.TEXTURE_2D, 0, e.ALPHA, 256, 1, 0, e.ALPHA, e.UNSIGNED_BYTE, this.array));\n      }, module.exports = FrameHistory;\n    }, {}],\n    75: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          LineAtlas = function LineAtlas(t, i) {\n        this.width = t, this.height = i, this.nextRow = 0, this.bytes = 4, this.data = new Uint8Array(this.width * this.height * this.bytes), this.positions = {};\n      };\n\n      LineAtlas.prototype.setSprite = function (t) {\n        this.sprite = t;\n      }, LineAtlas.prototype.getDash = function (t, i) {\n        var e = t.join(\",\") + i;\n        return this.positions[e] || (this.positions[e] = this.addDash(t, i)), this.positions[e];\n      }, LineAtlas.prototype.addDash = function (t, i) {\n        var e = this,\n            h = i ? 7 : 0,\n            s = 2 * h + 1,\n            a = 128;\n        if (this.nextRow + s > this.height) return util.warnOnce(\"LineAtlas out of space\"), null;\n\n        for (var r = 0, n = 0; n < t.length; n++) {\n          r += t[n];\n        }\n\n        for (var o = this.width / r, E = o / 2, T = t.length % 2 === 1, R = -h; R <= h; R++) {\n          for (var u = e.nextRow + h + R, d = e.width * u, l = T ? -t[t.length - 1] : 0, x = t[0], A = 1, _ = 0; _ < this.width; _++) {\n            for (; x < _ / o;) {\n              l = x, x += t[A], T && A === t.length - 1 && (x += t[0]), A++;\n            }\n\n            var p = Math.abs(_ - l * o),\n                g = Math.abs(_ - x * o),\n                w = Math.min(p, g),\n                D = A % 2 === 1,\n                U = void 0;\n\n            if (i) {\n              var f = h ? R / h * (E + 1) : 0;\n\n              if (D) {\n                var X = E - Math.abs(f);\n                U = Math.sqrt(w * w + X * X);\n              } else U = E - Math.sqrt(w * w + f * f);\n            } else U = (D ? 1 : -1) * w;\n\n            e.data[3 + 4 * (d + _)] = Math.max(0, Math.min(255, U + a));\n          }\n        }\n\n        var v = {\n          y: (this.nextRow + h + .5) / this.height,\n          height: 2 * h / this.height,\n          width: r\n        };\n        return this.nextRow += s, this.dirty = !0, v;\n      }, LineAtlas.prototype.bind = function (t) {\n        this.texture ? (t.bindTexture(t.TEXTURE_2D, this.texture), this.dirty && (this.dirty = !1, t.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, this.width, this.height, t.RGBA, t.UNSIGNED_BYTE, this.data))) : (this.texture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, this.width, this.height, 0, t.RGBA, t.UNSIGNED_BYTE, this.data));\n      }, module.exports = LineAtlas;\n    }, {\n      \"../util/util\": 215\n    }],\n    76: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var browser = _dereq_(\"../util/browser\"),\n          mat4 = _dereq_(\"@mapbox/gl-matrix\").mat4,\n          FrameHistory = _dereq_(\"./frame_history\"),\n          SourceCache = _dereq_(\"../source/source_cache\"),\n          EXTENT = _dereq_(\"../data/extent\"),\n          pixelsToTileUnits = _dereq_(\"../source/pixels_to_tile_units\"),\n          util = _dereq_(\"../util/util\"),\n          Buffer = _dereq_(\"../data/buffer\"),\n          VertexArrayObject = _dereq_(\"./vertex_array_object\"),\n          RasterBoundsArray = _dereq_(\"../data/raster_bounds_array\"),\n          PosArray = _dereq_(\"../data/pos_array\"),\n          ProgramConfiguration = _dereq_(\"../data/program_configuration\"),\n          shaders = _dereq_(\"./shaders\"),\n          draw = {\n        symbol: _dereq_(\"./draw_symbol\"),\n        circle: _dereq_(\"./draw_circle\"),\n        line: _dereq_(\"./draw_line\"),\n        fill: _dereq_(\"./draw_fill\"),\n        \"fill-extrusion\": _dereq_(\"./draw_fill_extrusion\"),\n        raster: _dereq_(\"./draw_raster\"),\n        background: _dereq_(\"./draw_background\"),\n        debug: _dereq_(\"./draw_debug\")\n      },\n          Painter = function Painter(e, r) {\n        this.gl = e, this.transform = r, this._tileTextures = {}, this.frameHistory = new FrameHistory(), this.setup(), this.numSublayers = SourceCache.maxUnderzooming + SourceCache.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.lineWidthRange = e.getParameter(e.ALIASED_LINE_WIDTH_RANGE), this.basicFillProgramConfiguration = ProgramConfiguration.createStatic([\"color\", \"opacity\"]), this.emptyProgramConfiguration = new ProgramConfiguration();\n      };\n\n      Painter.prototype.resize = function (e, r) {\n        var t = this.gl;\n        this.width = e * browser.devicePixelRatio, this.height = r * browser.devicePixelRatio, t.viewport(0, 0, this.width, this.height), this.viewportTexture && (this.gl.deleteTexture(this.viewportTexture), this.viewportTexture = null), this.viewportFbo && (this.gl.deleteFramebuffer(this.viewportFbo), this.viewportFbo = null);\n      }, Painter.prototype.setup = function () {\n        var e = this.gl;\n        e.verbose = !0, e.enable(e.BLEND), e.blendFunc(e.ONE, e.ONE_MINUS_SRC_ALPHA), e.enable(e.STENCIL_TEST), e.enable(e.DEPTH_TEST), e.depthFunc(e.LEQUAL), this._depthMask = !1, e.depthMask(!1);\n        var r = new PosArray();\n        r.emplaceBack(0, 0), r.emplaceBack(EXTENT, 0), r.emplaceBack(0, EXTENT), r.emplaceBack(EXTENT, EXTENT), this.tileExtentBuffer = Buffer.fromStructArray(r, Buffer.BufferType.VERTEX), this.tileExtentVAO = new VertexArrayObject(), this.tileExtentPatternVAO = new VertexArrayObject();\n        var t = new PosArray();\n        t.emplaceBack(0, 0), t.emplaceBack(EXTENT, 0), t.emplaceBack(EXTENT, EXTENT), t.emplaceBack(0, EXTENT), t.emplaceBack(0, 0), this.debugBuffer = Buffer.fromStructArray(t, Buffer.BufferType.VERTEX), this.debugVAO = new VertexArrayObject();\n        var i = new RasterBoundsArray();\n        i.emplaceBack(0, 0, 0, 0), i.emplaceBack(EXTENT, 0, 32767, 0), i.emplaceBack(0, EXTENT, 0, 32767), i.emplaceBack(EXTENT, EXTENT, 32767, 32767), this.rasterBoundsBuffer = Buffer.fromStructArray(i, Buffer.BufferType.VERTEX), this.rasterBoundsVAO = new VertexArrayObject(), this.extTextureFilterAnisotropic = e.getExtension(\"EXT_texture_filter_anisotropic\") || e.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || e.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n      }, Painter.prototype.clearColor = function () {\n        var e = this.gl;\n        e.clearColor(0, 0, 0, 0), e.clear(e.COLOR_BUFFER_BIT);\n      }, Painter.prototype.clearStencil = function () {\n        var e = this.gl;\n        e.clearStencil(0), e.stencilMask(255), e.clear(e.STENCIL_BUFFER_BIT);\n      }, Painter.prototype.clearDepth = function () {\n        var e = this.gl;\n        e.clearDepth(1), this.depthMask(!0), e.clear(e.DEPTH_BUFFER_BIT);\n      }, Painter.prototype._renderTileClippingMasks = function (e) {\n        var r = this,\n            t = this.gl;\n        t.colorMask(!1, !1, !1, !1), this.depthMask(!1), t.disable(t.DEPTH_TEST), t.enable(t.STENCIL_TEST), t.stencilMask(255), t.stencilOp(t.KEEP, t.KEEP, t.REPLACE);\n        var i = 1;\n        this._tileClippingMaskIDs = {};\n\n        for (var a = 0, s = e; a < s.length; a += 1) {\n          var o = s[a],\n              n = r._tileClippingMaskIDs[o.id] = i++;\n          t.stencilFunc(t.ALWAYS, n, 255);\n          var l = r.useProgram(\"fill\", r.basicFillProgramConfiguration);\n          t.uniformMatrix4fv(l.u_matrix, !1, o.posMatrix), r.tileExtentVAO.bind(t, l, r.tileExtentBuffer), t.drawArrays(t.TRIANGLE_STRIP, 0, r.tileExtentBuffer.length);\n        }\n\n        t.stencilMask(0), t.colorMask(!0, !0, !0, !0), this.depthMask(!0), t.enable(t.DEPTH_TEST);\n      }, Painter.prototype.enableTileClippingMask = function (e) {\n        var r = this.gl;\n        r.stencilFunc(r.EQUAL, this._tileClippingMaskIDs[e.id], 255);\n      }, Painter.prototype.prepareBuffers = function () {}, Painter.prototype.render = function (e, r) {\n        if (this.style = e, this.options = r, this.lineAtlas = e.lineAtlas, this.spriteAtlas = e.spriteAtlas, this.spriteAtlas.setSprite(e.sprite), this.glyphSource = e.glyphSource, this.frameHistory.record(Date.now(), this.transform.zoom, e.getTransition().duration), this.prepareBuffers(), this.clearColor(), this.clearDepth(), this.showOverdrawInspector(r.showOverdrawInspector), this.depthRange = (e._order.length + 2) * this.numSublayers * this.depthEpsilon, this.isOpaquePass = !0, this.renderPass(), this.isOpaquePass = !1, this.renderPass(), this.options.showTileBoundaries) {\n          var t = this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];\n          t && draw.debug(this, t, t.getVisibleCoordinates());\n        }\n      }, Painter.prototype.renderPass = function () {\n        var e,\n            r,\n            t = this,\n            i = this.style._order;\n        this.currentLayer = this.isOpaquePass ? i.length - 1 : 0, this.isOpaquePass ? this._showOverdrawInspector || this.gl.disable(this.gl.BLEND) : this.gl.enable(this.gl.BLEND);\n\n        for (var a = 0; a < i.length; a++) {\n          var s = t.style._layers[i[t.currentLayer]];\n          s.source !== (e && e.id) && (e = t.style.sourceCaches[s.source], r = [], e && (e.prepare && e.prepare(), t.clearStencil(), r = e.getVisibleCoordinates(), e.getSource().isTileClipped && t._renderTileClippingMasks(r)), t.isOpaquePass || r.reverse()), t.renderLayer(t, e, s, r), t.currentLayer += t.isOpaquePass ? -1 : 1;\n        }\n      }, Painter.prototype.depthMask = function (e) {\n        e !== this._depthMask && (this._depthMask = e, this.gl.depthMask(e));\n      }, Painter.prototype.renderLayer = function (e, r, t, i) {\n        t.isHidden(this.transform.zoom) || (\"background\" === t.type || i.length) && (this.id = t.id, draw[t.type](e, r, t, i));\n      }, Painter.prototype.setDepthSublayer = function (e) {\n        var r = 1 - ((1 + this.currentLayer) * this.numSublayers + e) * this.depthEpsilon,\n            t = r - 1 + this.depthRange;\n        this.gl.depthRange(t, r);\n      }, Painter.prototype.translatePosMatrix = function (e, r, t, i) {\n        if (!t[0] && !t[1]) return e;\n\n        if (\"viewport\" === i) {\n          var a = Math.sin(-this.transform.angle),\n              s = Math.cos(-this.transform.angle);\n          t = [t[0] * s - t[1] * a, t[0] * a + t[1] * s];\n        }\n\n        var o = [pixelsToTileUnits(r, t[0], this.transform.zoom), pixelsToTileUnits(r, t[1], this.transform.zoom), 0],\n            n = new Float32Array(16);\n        return mat4.translate(n, e, o), n;\n      }, Painter.prototype.saveTileTexture = function (e) {\n        var r = this._tileTextures[e.size];\n        r ? r.push(e) : this._tileTextures[e.size] = [e];\n      }, Painter.prototype.getTileTexture = function (e) {\n        var r = this._tileTextures[e];\n        return r && r.length > 0 ? r.pop() : null;\n      }, Painter.prototype.lineWidth = function (e) {\n        this.gl.lineWidth(util.clamp(e, this.lineWidthRange[0], this.lineWidthRange[1]));\n      }, Painter.prototype.showOverdrawInspector = function (e) {\n        if (e || this._showOverdrawInspector) {\n          this._showOverdrawInspector = e;\n          var r = this.gl;\n\n          if (e) {\n            r.blendFunc(r.CONSTANT_COLOR, r.ONE);\n            var t = 8,\n                i = 1 / t;\n            r.blendColor(i, i, i, 0), r.clearColor(0, 0, 0, 1), r.clear(r.COLOR_BUFFER_BIT);\n          } else r.blendFunc(r.ONE, r.ONE_MINUS_SRC_ALPHA);\n        }\n      }, Painter.prototype.createProgram = function (e, r) {\n        var t = this.gl,\n            i = t.createProgram(),\n            a = shaders[e],\n            s = \"#define MAPBOX_GL_JS\\n#define DEVICE_PIXEL_RATIO \" + browser.devicePixelRatio.toFixed(1) + \"\\n\";\n        this._showOverdrawInspector && (s += \"#define OVERDRAW_INSPECTOR;\\n\");\n        var o = r.applyPragmas(s + shaders.prelude.fragmentSource + a.fragmentSource, \"fragment\"),\n            n = r.applyPragmas(s + shaders.prelude.vertexSource + a.vertexSource, \"vertex\"),\n            l = t.createShader(t.FRAGMENT_SHADER);\n        t.shaderSource(l, o), t.compileShader(l), t.attachShader(i, l);\n        var h = t.createShader(t.VERTEX_SHADER);\n        t.shaderSource(h, n), t.compileShader(h), t.attachShader(i, h);\n\n        for (var c = r.interface.layoutAttributes || [], u = 0; u < c.length; u++) {\n          t.bindAttribLocation(i, u, c[u].name);\n        }\n\n        t.linkProgram(i);\n\n        for (var p = t.getProgramParameter(i, t.ACTIVE_ATTRIBUTES), d = {\n          program: i,\n          numAttributes: p\n        }, f = 0; f < p; f++) {\n          var g = t.getActiveAttrib(i, f);\n          d[g.name] = t.getAttribLocation(i, g.name);\n        }\n\n        for (var T = t.getProgramParameter(i, t.ACTIVE_UNIFORMS), E = 0; E < T; E++) {\n          var m = t.getActiveUniform(i, E);\n          d[m.name] = t.getUniformLocation(i, m.name);\n        }\n\n        return d;\n      }, Painter.prototype._createProgramCached = function (e, r) {\n        this.cache = this.cache || {};\n        var t = \"\" + e + (r.cacheKey || \"\") + (this._showOverdrawInspector ? \"/overdraw\" : \"\");\n        return this.cache[t] || (this.cache[t] = this.createProgram(e, r)), this.cache[t];\n      }, Painter.prototype.useProgram = function (e, r) {\n        var t = this.gl,\n            i = this._createProgramCached(e, r || this.emptyProgramConfiguration);\n\n        return this.currentProgram !== i && (t.useProgram(i.program), this.currentProgram = i), i;\n      }, module.exports = Painter;\n    }, {\n      \"../data/buffer\": 50,\n      \"../data/extent\": 53,\n      \"../data/pos_array\": 56,\n      \"../data/program_configuration\": 57,\n      \"../data/raster_bounds_array\": 58,\n      \"../source/pixels_to_tile_units\": 87,\n      \"../source/source_cache\": 92,\n      \"../util/browser\": 194,\n      \"../util/util\": 215,\n      \"./draw_background\": 65,\n      \"./draw_circle\": 66,\n      \"./draw_debug\": 68,\n      \"./draw_fill\": 69,\n      \"./draw_fill_extrusion\": 70,\n      \"./draw_line\": 71,\n      \"./draw_raster\": 72,\n      \"./draw_symbol\": 73,\n      \"./frame_history\": 74,\n      \"./shaders\": 78,\n      \"./vertex_array_object\": 79,\n      \"@mapbox/gl-matrix\": 1\n    }],\n    77: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var pixelsToTileUnits = _dereq_(\"../source/pixels_to_tile_units\");\n\n      exports.isPatternMissing = function (t, r) {\n        if (!t) return !1;\n        var e = r.spriteAtlas.getPattern(t.from),\n            i = r.spriteAtlas.getPattern(t.to);\n        return !e || !i;\n      }, exports.prepare = function (t, r, e) {\n        var i = r.gl,\n            o = r.spriteAtlas.getPattern(t.from),\n            n = r.spriteAtlas.getPattern(t.to);\n        i.uniform1i(e.u_image, 0), i.uniform2fv(e.u_pattern_tl_a, o.tl), i.uniform2fv(e.u_pattern_br_a, o.br), i.uniform2fv(e.u_pattern_tl_b, n.tl), i.uniform2fv(e.u_pattern_br_b, n.br), i.uniform2fv(e.u_texsize, r.spriteAtlas.getPixelSize()), i.uniform1f(e.u_mix, t.t), i.uniform2fv(e.u_pattern_size_a, o.displaySize), i.uniform2fv(e.u_pattern_size_b, n.displaySize), i.uniform1f(e.u_scale_a, t.fromScale), i.uniform1f(e.u_scale_b, t.toScale), i.activeTexture(i.TEXTURE0), r.spriteAtlas.bind(i, !0);\n      }, exports.setTile = function (t, r, e) {\n        var i = r.gl;\n        i.uniform1f(e.u_tile_units_to_pixels, 1 / pixelsToTileUnits(t, 1, r.transform.tileZoom));\n        var o = Math.pow(2, t.coord.z),\n            n = t.tileSize * Math.pow(2, r.transform.tileZoom) / o,\n            u = n * (t.coord.x + t.coord.w * o),\n            a = n * t.coord.y;\n        i.uniform2f(e.u_pixel_coord_upper, u >> 16, a >> 16), i.uniform2f(e.u_pixel_coord_lower, 65535 & u, 65535 & a);\n      };\n    }, {\n      \"../source/pixels_to_tile_units\": 87\n    }],\n    78: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = {\n        prelude: {\n          fragmentSource: \"#ifdef GL_ES\\nprecision mediump float;\\n#else\\n\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n\\n#if !defined(highp)\\n#define highp\\n#endif\\n\\n#endif\\n\",\n          vertexSource: \"#ifdef GL_ES\\nprecision highp float;\\n#else\\n\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n\\n#if !defined(highp)\\n#define highp\\n#endif\\n\\n#endif\\n\\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\\n    if (t < 1.0) {\\n        return mix(values[0], values[1], t);\\n    } else if (t < 2.0) {\\n        return mix(values[1], values[2], t - 1.0);\\n    } else {\\n        return mix(values[2], values[3], t - 2.0);\\n    }\\n}\\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\\n    if (t < 1.0) {\\n        return mix(value0, value1, t);\\n    } else if (t < 2.0) {\\n        return mix(value1, value2, t - 1.0);\\n    } else {\\n        return mix(value2, value3, t - 2.0);\\n    }\\n}\\n\\n// Unpack a pair of values that have been packed into a single float.\\n// The packed values are assumed to be 8-bit unsigned integers, and are\\n// packed like so:\\n// packedValue = floor(input[0]) * 256 + input[1],\\nvec2 unpack_float(const float packedValue) {\\n    int packedIntValue = int(packedValue);\\n    int v0 = packedIntValue / 256;\\n    return vec2(v0, packedIntValue - v0 * 256);\\n}\\n\\n\\n// To minimize the number of attributes needed in the mapbox-gl-native shaders,\\n// we encode a 4-component color into a pair of floats (i.e. a vec2) as follows:\\n// [ floor(color.r * 255) * 256 + color.g * 255,\\n//   floor(color.b * 255) * 256 + color.g * 255 ]\\nvec4 decode_color(const vec2 encodedColor) {\\n    return vec4(\\n        unpack_float(encodedColor[0]) / 255.0,\\n        unpack_float(encodedColor[1]) / 255.0\\n    );\\n}\\n\\n// Unpack a pair of paint values and interpolate between them.\\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\\n    return mix(packedValue[0], packedValue[1], t);\\n}\\n\\n// Unpack a pair of paint values and interpolate between them.\\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\\n    return mix(minColor, maxColor, t);\\n}\\n\\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\\n// vec2 offset = mod(pixel_coord, size)\\n//\\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\\n//\\n// The pixel_coord is passed in as two 16 bit values:\\n// pixel_coord_upper = floor(pixel_coord / 2^16)\\n// pixel_coord_lower = mod(pixel_coord, 2^16)\\n//\\n// The offset is calculated in a series of steps that should preserve this precision:\\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\\n\\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\\n}\\n\"\n        },\n        circle: {\n          fragmentSource: \"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\n\\nvarying vec2 v_extrude;\\nvarying lowp float v_antialiasblur;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize mediump float radius\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize highp vec4 stroke_color\\n    #pragma mapbox: initialize mediump float stroke_width\\n    #pragma mapbox: initialize lowp float stroke_opacity\\n\\n    float extrude_length = length(v_extrude);\\n    float antialiased_blur = -max(blur, v_antialiasblur);\\n\\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\\n\\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\\n        antialiased_blur,\\n        0.0,\\n        extrude_length - radius / (radius + stroke_width)\\n    );\\n\\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform bool u_scale_with_map;\\nuniform vec2 u_extrude_scale;\\n\\nattribute vec2 a_pos;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\n\\nvarying vec2 v_extrude;\\nvarying lowp float v_antialiasblur;\\n\\nvoid main(void) {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize mediump float radius\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize highp vec4 stroke_color\\n    #pragma mapbox: initialize mediump float stroke_width\\n    #pragma mapbox: initialize lowp float stroke_opacity\\n\\n    // unencode the extrusion vector that we snuck into the a_pos vector\\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\\n\\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\\n    // in extrusion data\\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\\n\\n    if (u_scale_with_map) {\\n        gl_Position.xy += extrude;\\n    } else {\\n        gl_Position.xy += extrude * gl_Position.w;\\n    }\\n\\n    // This is a minimum blur distance that serves as a faux-antialiasing for\\n    // the circle. since blur is a ratio of the circle's size and the intent is\\n    // to keep the blur at roughly 1px, the two are inversely related.\\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\\n}\\n\"\n        },\n        collisionBox: {\n          fragmentSource: \"uniform float u_zoom;\\n// u_maxzoom is derived from the maximum scale considered by the CollisionTile\\n// Labels with placement zoom greater than this value will not be placed,\\n// regardless of perspective effects.\\nuniform float u_maxzoom;\\nuniform sampler2D u_fadetexture;\\n\\n// v_max_zoom is a collision-box-specific value that controls when line-following\\n// collision boxes are used.\\nvarying float v_max_zoom;\\nvarying float v_placement_zoom;\\nvarying float v_perspective_zoom_adjust;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n\\n    float alpha = 0.5;\\n\\n    // Green = no collisions, label is showing\\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\\n\\n    // Red = collision, label hidden\\n    if (texture2D(u_fadetexture, v_fade_tex).a < 1.0) {\\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\\n    }\\n\\n    // Faded black = this collision box is not used at this zoom (for curved labels)\\n    if (u_zoom >= v_max_zoom + v_perspective_zoom_adjust) {\\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\\n    }\\n\\n    // Faded blue = the placement scale for this label is beyond the CollisionTile\\n    // max scale, so it's impossible for this label to show without collision detection\\n    // being run again (the label's glyphs haven't even been added to the symbol bucket)\\n    if (v_placement_zoom >= u_maxzoom) {\\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\\n    }\\n}\\n\",\n          vertexSource: \"attribute vec2 a_pos;\\nattribute vec2 a_anchor_pos;\\nattribute vec2 a_extrude;\\nattribute vec2 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform float u_scale;\\nuniform float u_pitch;\\nuniform float u_collision_y_stretch;\\nuniform float u_camera_to_center_distance;\\n\\nvarying float v_max_zoom;\\nvarying float v_placement_zoom;\\nvarying float v_perspective_zoom_adjust;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\\n    highp float camera_to_anchor_distance = projectedPoint.w;\\n    highp float collision_perspective_ratio = 1.0 + 0.5 * ((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\\n\\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\\n\\n    gl_Position = u_matrix * vec4(a_pos + a_extrude * collision_perspective_ratio * collision_adjustment / u_scale, 0.0, 1.0);\\n\\n    v_max_zoom = a_data.x;\\n    v_placement_zoom = a_data.y;\\n\\n    v_perspective_zoom_adjust = floor(log2(collision_perspective_ratio * collision_adjustment) * 10.0);\\n    v_fade_tex = vec2((v_placement_zoom + v_perspective_zoom_adjust) / 255.0, 0.0);\\n}\\n\"\n        },\n        debug: {\n          fragmentSource: \"uniform highp vec4 u_color;\\n\\nvoid main() {\\n    gl_FragColor = u_color;\\n}\\n\",\n          vertexSource: \"attribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\n\\nvoid main() {\\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\\n}\\n\"\n        },\n        fill: {\n          fragmentSource: \"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_FragColor = color * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"attribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n}\\n\"\n        },\n        fillOutline: {\n          fragmentSource: \"#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\n\\nvarying vec2 v_pos;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 outline_color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    float dist = length(v_pos - gl_FragCoord.xy);\\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\\n    gl_FragColor = outline_color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"attribute vec2 a_pos;\\n\\nuniform mat4 u_matrix;\\nuniform vec2 u_world;\\n\\nvarying vec2 v_pos;\\n\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 outline_color\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\\n}\\n\"\n        },\n        fillOutlinePattern: {\n          fragmentSource: \"uniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_mix;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec2 v_pos;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    vec2 imagecoord = mod(v_pos_a, 1.0);\\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\\n    vec4 color1 = texture2D(u_image, pos);\\n\\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\\n    vec4 color2 = texture2D(u_image, pos2);\\n\\n    // find distance to outline for alpha interpolation\\n\\n    float dist = length(v_pos - gl_FragCoord.xy);\\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\\n\\n\\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform vec2 u_world;\\nuniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pixel_coord_upper;\\nuniform vec2 u_pixel_coord_lower;\\nuniform float u_scale_a;\\nuniform float u_scale_b;\\nuniform float u_tile_units_to_pixels;\\n\\nattribute vec2 a_pos;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec2 v_pos;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n\\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\\n\\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\\n}\\n\"\n        },\n        fillPattern: {\n          fragmentSource: \"uniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_mix;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    vec2 imagecoord = mod(v_pos_a, 1.0);\\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\\n    vec4 color1 = texture2D(u_image, pos);\\n\\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\\n    vec4 color2 = texture2D(u_image, pos2);\\n\\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pixel_coord_upper;\\nuniform vec2 u_pixel_coord_lower;\\nuniform float u_scale_a;\\nuniform float u_scale_b;\\nuniform float u_tile_units_to_pixels;\\n\\nattribute vec2 a_pos;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n\\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\\n}\\n\"\n        },\n        fillExtrusion: {\n          fragmentSource: \"varying vec4 v_color;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define highp vec4 color\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n    #pragma mapbox: initialize highp vec4 color\\n\\n    gl_FragColor = v_color;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform vec3 u_lightcolor;\\nuniform lowp vec3 u_lightpos;\\nuniform lowp float u_lightintensity;\\n\\nattribute vec2 a_pos;\\nattribute vec3 a_normal;\\nattribute float a_edgedistance;\\n\\nvarying vec4 v_color;\\n\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n\\n#pragma mapbox: define highp vec4 color\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n    #pragma mapbox: initialize highp vec4 color\\n\\n    base = max(0.0, base);\\n    height = max(0.0, height);\\n\\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\\n    float t = mod(a_normal.x, 2.0);\\n\\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\\n\\n    // Relative luminance (how dark/bright is the surface color?)\\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\\n\\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\\n\\n    // Add slight ambient lighting so no extrusions are totally black\\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\\n    color += ambientlight;\\n\\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\\n\\n    // Adjust directional so that\\n    // the range of values for highlight/shading is narrower\\n    // with lower light intensity\\n    // and with lighter/brighter surface colors\\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\\n\\n    // Add gradient along z axis of side surfaces\\n    if (a_normal.y != 0.0) {\\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\\n    }\\n\\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\\n    // with lower bounds adjusted to hue of light\\n    // so that shading is tinted with the complementary (opposite) color to the light color\\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\\n}\\n\"\n        },\n        fillExtrusionPattern: {\n          fragmentSource: \"uniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_mix;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec4 v_lighting;\\n\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n\\n    vec2 imagecoord = mod(v_pos_a, 1.0);\\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\\n    vec4 color1 = texture2D(u_image, pos);\\n\\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\\n    vec4 color2 = texture2D(u_image, pos2);\\n\\n    vec4 mixedColor = mix(color1, color2, u_mix);\\n\\n    gl_FragColor = mixedColor * v_lighting;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pixel_coord_upper;\\nuniform vec2 u_pixel_coord_lower;\\nuniform float u_scale_a;\\nuniform float u_scale_b;\\nuniform float u_tile_units_to_pixels;\\nuniform float u_height_factor;\\n\\nuniform vec3 u_lightcolor;\\nuniform lowp vec3 u_lightpos;\\nuniform lowp float u_lightintensity;\\n\\nattribute vec2 a_pos;\\nattribute vec3 a_normal;\\nattribute float a_edgedistance;\\n\\nvarying vec2 v_pos_a;\\nvarying vec2 v_pos_b;\\nvarying vec4 v_lighting;\\nvarying float v_directional;\\n\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float base\\n    #pragma mapbox: initialize lowp float height\\n\\n    base = max(0.0, base);\\n    height = max(0.0, height);\\n\\n    float t = mod(a_normal.x, 2.0);\\n    float z = t > 0.0 ? height : base;\\n\\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\\n\\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\\n        ? a_pos // extrusion top\\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\\n\\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\\n\\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\\n\\n    if (a_normal.y != 0.0) {\\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\\n    }\\n\\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\\n}\\n\"\n        },\n        extrusionTexture: {\n          fragmentSource: \"uniform sampler2D u_image;\\nuniform float u_opacity;\\nvarying vec2 v_pos;\\n\\nvoid main() {\\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(0.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform vec2 u_world;\\nattribute vec2 a_pos;\\nvarying vec2 v_pos;\\n\\nvoid main() {\\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\\n\\n    v_pos.x = a_pos.x;\\n    v_pos.y = 1.0 - a_pos.y;\\n}\\n\"\n        },\n        line: {\n          fragmentSource: \"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n\\nvarying vec2 v_width2;\\nvarying vec2 v_normal;\\nvarying float v_gamma_scale;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    // Calculate the distance of the pixel from the line in pixels.\\n    float dist = length(v_normal) * v_width2.s;\\n\\n    // Calculate the antialiasing fade factor. This is either when fading in\\n    // the line in case of an offset line (v_width2.t) or when fading out\\n    // (v_width2.s)\\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\\n\\n    gl_FragColor = color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"\\n\\n// the distance over which the line edge fades out.\\n// Retina devices need a smaller distance to avoid aliasing.\\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\\n\\n// floor(127 / 2) == 63.0\\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\\n// there are also \\\"special\\\" normals that have a bigger length (of up to 126 in\\n// this case).\\n// #define scale 63.0\\n#define scale 0.015873016\\n\\nattribute vec2 a_pos;\\nattribute vec4 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform mediump float u_ratio;\\nuniform mediump float u_width;\\nuniform vec2 u_gl_units_to_pixels;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize mediump float gapwidth\\n    #pragma mapbox: initialize lowp float offset\\n\\n    vec2 a_extrude = a_data.xy - 128.0;\\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\\n\\n    // We store the texture normals in the most insignificant bit\\n    // transform y so that 0 => -1 and 1 => 1\\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\\n    // y is 1 if the normal points up, and -1 if it points down\\n    mediump vec2 normal = mod(a_pos, 2.0);\\n    normal.y = sign(normal.y - 0.5);\\n    v_normal = normal;\\n\\n\\n    // these transformations used to be applied in the JS and native code bases. \\n    // moved them into the shader for clarity and simplicity. \\n    gapwidth = gapwidth / 2.0;\\n    float width = u_width / 2.0;\\n    offset = -1.0 * offset; \\n\\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\\n\\n    // Scale the extrusion vector down to a normal and then up by the line width\\n    // of this vertex.\\n    mediump vec2 dist = outset * a_extrude * scale;\\n\\n    // Calculate the offset when drawing a line that is to the side of the actual line.\\n    // We do this by creating a vector that points towards the extrude, but rotate\\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\\n    // extrude vector points in another direction.\\n    mediump float u = 0.5 * a_direction;\\n    mediump float t = 1.0 - abs(u);\\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\\n\\n    // Remove the texture normal bit to get the position\\n    vec2 pos = floor(a_pos * 0.5);\\n\\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\\n\\n    // calculate how much the perspective view squishes or stretches the extrude\\n    float extrude_length_without_perspective = length(dist);\\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\\n\\n    v_width2 = vec2(outset, inset);\\n}\\n\"\n        },\n        linePattern: {\n          fragmentSource: \"uniform vec2 u_pattern_size_a;\\nuniform vec2 u_pattern_size_b;\\nuniform vec2 u_pattern_tl_a;\\nuniform vec2 u_pattern_br_a;\\nuniform vec2 u_pattern_tl_b;\\nuniform vec2 u_pattern_br_b;\\nuniform vec2 u_texsize;\\nuniform float u_fade;\\n\\nuniform sampler2D u_image;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying float v_linesofar;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    // Calculate the distance of the pixel from the line in pixels.\\n    float dist = length(v_normal) * v_width2.s;\\n\\n    // Calculate the antialiasing fade factor. This is either when fading in\\n    // the line in case of an offset line (v_width2.t) or when fading out\\n    // (v_width2.s)\\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\\n\\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\\n\\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\\n\\n    gl_FragColor = color * alpha * opacity;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"// floor(127 / 2) == 63.0\\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\\n// there are also \\\"special\\\" normals that have a bigger length (of up to 126 in\\n// this case).\\n// #define scale 63.0\\n#define scale 0.015873016\\n\\n// We scale the distance before adding it to the buffers so that we can store\\n// long distances for long segments. Use this value to unscale the distance.\\n#define LINE_DISTANCE_SCALE 2.0\\n\\n// the distance over which the line edge fades out.\\n// Retina devices need a smaller distance to avoid aliasing.\\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\\n\\nattribute vec2 a_pos;\\nattribute vec4 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform mediump float u_ratio;\\nuniform mediump float u_width;\\nuniform vec2 u_gl_units_to_pixels;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying float v_linesofar;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float gapwidth\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize lowp float offset\\n    #pragma mapbox: initialize mediump float gapwidth\\n\\n    vec2 a_extrude = a_data.xy - 128.0;\\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\\n\\n    // We store the texture normals in the most insignificant bit\\n    // transform y so that 0 => -1 and 1 => 1\\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\\n    // y is 1 if the normal points up, and -1 if it points down\\n    mediump vec2 normal = mod(a_pos, 2.0);\\n    normal.y = sign(normal.y - 0.5);\\n    v_normal = normal;\\n\\n    // these transformations used to be applied in the JS and native code bases. \\n    // moved them into the shader for clarity and simplicity. \\n    gapwidth = gapwidth / 2.0;\\n    float width = u_width / 2.0;\\n    offset = -1.0 * offset; \\n\\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\\n\\n    // Scale the extrusion vector down to a normal and then up by the line width\\n    // of this vertex.\\n    mediump vec2 dist = outset * a_extrude * scale;\\n\\n    // Calculate the offset when drawing a line that is to the side of the actual line.\\n    // We do this by creating a vector that points towards the extrude, but rotate\\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\\n    // extrude vector points in another direction.\\n    mediump float u = 0.5 * a_direction;\\n    mediump float t = 1.0 - abs(u);\\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\\n\\n    // Remove the texture normal bit to get the position\\n    vec2 pos = floor(a_pos * 0.5);\\n\\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\\n\\n    // calculate how much the perspective view squishes or stretches the extrude\\n    float extrude_length_without_perspective = length(dist);\\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\\n\\n    v_linesofar = a_linesofar;\\n    v_width2 = vec2(outset, inset);\\n}\\n\"\n        },\n        lineSDF: {\n          fragmentSource: \"\\nuniform sampler2D u_image;\\nuniform float u_sdfgamma;\\nuniform float u_mix;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying vec2 v_tex_a;\\nvarying vec2 v_tex_b;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    // Calculate the distance of the pixel from the line in pixels.\\n    float dist = length(v_normal) * v_width2.s;\\n\\n    // Calculate the antialiasing fade factor. This is either when fading in\\n    // the line in case of an offset line (v_width2.t) or when fading out\\n    // (v_width2.s)\\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\\n\\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\\n\\n    gl_FragColor = color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"// floor(127 / 2) == 63.0\\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\\n// there are also \\\"special\\\" normals that have a bigger length (of up to 126 in\\n// this case).\\n// #define scale 63.0\\n#define scale 0.015873016\\n\\n// We scale the distance before adding it to the buffers so that we can store\\n// long distances for long segments. Use this value to unscale the distance.\\n#define LINE_DISTANCE_SCALE 2.0\\n\\n// the distance over which the line edge fades out.\\n// Retina devices need a smaller distance to avoid aliasing.\\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\\n\\nattribute vec2 a_pos;\\nattribute vec4 a_data;\\n\\nuniform mat4 u_matrix;\\nuniform mediump float u_ratio;\\nuniform vec2 u_patternscale_a;\\nuniform float u_tex_y_a;\\nuniform vec2 u_patternscale_b;\\nuniform float u_tex_y_b;\\nuniform vec2 u_gl_units_to_pixels;\\nuniform mediump float u_width;\\n\\nvarying vec2 v_normal;\\nvarying vec2 v_width2;\\nvarying vec2 v_tex_a;\\nvarying vec2 v_tex_b;\\nvarying float v_gamma_scale;\\n\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 color\\n    #pragma mapbox: initialize lowp float blur\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize mediump float gapwidth\\n    #pragma mapbox: initialize lowp float offset\\n\\n    vec2 a_extrude = a_data.xy - 128.0;\\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\\n\\n    // We store the texture normals in the most insignificant bit\\n    // transform y so that 0 => -1 and 1 => 1\\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\\n    // y is 1 if the normal points up, and -1 if it points down\\n    mediump vec2 normal = mod(a_pos, 2.0);\\n    normal.y = sign(normal.y - 0.5);\\n    v_normal = normal;\\n\\n    // these transformations used to be applied in the JS and native code bases. \\n    // moved them into the shader for clarity and simplicity. \\n    gapwidth = gapwidth / 2.0;\\n    float width = u_width / 2.0;\\n    offset = -1.0 * offset;\\n \\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\\n\\n    // Scale the extrusion vector down to a normal and then up by the line width\\n    // of this vertex.\\n    mediump vec2 dist =outset * a_extrude * scale;\\n\\n    // Calculate the offset when drawing a line that is to the side of the actual line.\\n    // We do this by creating a vector that points towards the extrude, but rotate\\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\\n    // extrude vector points in another direction.\\n    mediump float u = 0.5 * a_direction;\\n    mediump float t = 1.0 - abs(u);\\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\\n\\n    // Remove the texture normal bit to get the position\\n    vec2 pos = floor(a_pos * 0.5);\\n\\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\\n\\n    // calculate how much the perspective view squishes or stretches the extrude\\n    float extrude_length_without_perspective = length(dist);\\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\\n\\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\\n\\n    v_width2 = vec2(outset, inset);\\n}\\n\"\n        },\n        raster: {\n          fragmentSource: \"uniform float u_fade_t;\\nuniform float u_opacity;\\nuniform sampler2D u_image0;\\nuniform sampler2D u_image1;\\nvarying vec2 v_pos0;\\nvarying vec2 v_pos1;\\n\\nuniform float u_brightness_low;\\nuniform float u_brightness_high;\\n\\nuniform float u_saturation_factor;\\nuniform float u_contrast_factor;\\nuniform vec3 u_spin_weights;\\n\\nvoid main() {\\n\\n    // read and cross-fade colors from the main and parent tiles\\n    vec4 color0 = texture2D(u_image0, v_pos0);\\n    vec4 color1 = texture2D(u_image1, v_pos1);\\n    vec4 color = mix(color0, color1, u_fade_t);\\n    color.a *= u_opacity;\\n    vec3 rgb = color.rgb;\\n\\n    // spin\\n    rgb = vec3(\\n        dot(rgb, u_spin_weights.xyz),\\n        dot(rgb, u_spin_weights.zxy),\\n        dot(rgb, u_spin_weights.yzx));\\n\\n    // saturation\\n    float average = (color.r + color.g + color.b) / 3.0;\\n    rgb += (average - rgb) * u_saturation_factor;\\n\\n    // contrast\\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\\n\\n    // brightness\\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\\n\\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"uniform mat4 u_matrix;\\nuniform vec2 u_tl_parent;\\nuniform float u_scale_parent;\\nuniform float u_buffer_scale;\\n\\nattribute vec2 a_pos;\\nattribute vec2 a_texture_pos;\\n\\nvarying vec2 v_pos0;\\nvarying vec2 v_pos1;\\n\\nvoid main() {\\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\\n}\\n\"\n        },\n        symbolIcon: {\n          fragmentSource: \"uniform sampler2D u_texture;\\nuniform sampler2D u_fadetexture;\\n\\n#pragma mapbox: define lowp float opacity\\n\\nvarying vec2 v_tex;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: 'attribute vec4 a_pos_offset;\\nattribute vec2 a_label_pos;\\nattribute vec4 a_data;\\n\\n// icon-size data (see symbol_sdf.vertex.glsl for more)\\nattribute vec3 a_size;\\nuniform bool u_is_size_zoom_constant;\\nuniform bool u_is_size_feature_constant;\\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\\nuniform highp float u_size; // used when size is both zoom and feature constant\\nuniform highp float u_layout_size; // used when size is feature constant\\nuniform highp float u_camera_to_center_distance;\\nuniform highp float u_pitch;\\nuniform highp float u_collision_y_stretch;\\n\\n#pragma mapbox: define lowp float opacity\\n\\n// matrix is for the vertex position.\\nuniform mat4 u_matrix;\\n\\nuniform bool u_is_text;\\nuniform highp float u_zoom;\\nuniform bool u_rotate_with_map;\\nuniform vec2 u_extrude_scale;\\n\\nuniform vec2 u_texsize;\\n\\nvarying vec2 v_tex;\\nvarying vec2 v_fade_tex;\\n\\nvoid main() {\\n    #pragma mapbox: initialize lowp float opacity\\n\\n    vec2 a_pos = a_pos_offset.xy;\\n    vec2 a_offset = a_pos_offset.zw;\\n\\n    vec2 a_tex = a_data.xy;\\n    highp vec2 label_data = unpack_float(a_data[2]);\\n    highp float a_labelminzoom = label_data[0];\\n    highp vec2 a_zoom = unpack_float(a_data[3]);\\n    highp float a_minzoom = a_zoom[0];\\n    highp float a_maxzoom = a_zoom[1];\\n\\n    float size;\\n    // In order to accommodate placing labels around corners in\\n    // symbol-placement: line, each glyph in a label could have multiple\\n    // \"quad\"s only one of which should be shown at a given zoom level.\\n    // The min/max zoom assigned to each quad is based on the font size at\\n    // the vector tile\\'s zoom level, which might be different than at the\\n    // currently rendered zoom level if text-size is zoom-dependent.\\n    // Thus, we compensate for this difference by calculating an adjustment\\n    // based on the scale of rendered text size relative to layout text size.\\n    highp float layoutSize;\\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\\n        layoutSize = a_size[2] / 10.0;\\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        size = a_size[0] / 10.0;\\n        layoutSize = size;\\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\\n        size = u_size;\\n        layoutSize = u_layout_size;\\n    } else {\\n        size = u_size;\\n        layoutSize = u_size;\\n    }\\n\\n    float fontScale = u_is_text ? size / 24.0 : size;\\n\\n    highp float zoomAdjust = log2(size / layoutSize);\\n    highp float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\\n    highp float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\\n\\n    vec4 projectedPoint = u_matrix * vec4(a_label_pos, 0, 1);\\n    highp float camera_to_anchor_distance = projectedPoint.w;\\n    highp float perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\\n\\n    vec2 extrude = fontScale * u_extrude_scale * perspective_ratio * (a_offset / 64.0);\\n    if (u_rotate_with_map) {\\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\\n        gl_Position.z += z * gl_Position.w;\\n    } else {\\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\\n    }\\n\\n    v_tex = a_tex / u_texsize;\\n    // See comments in symbol_sdf.vertex\\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\\n\\n    highp float perspective_zoom_adjust = floor(log2(perspective_ratio * collision_adjustment) * 10.0);\\n    v_fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\\n}\\n'\n        },\n        symbolSDF: {\n          fragmentSource: \"#define SDF_PX 8.0\\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\\n\\nuniform bool u_is_halo;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\n\\nuniform sampler2D u_texture;\\nuniform sampler2D u_fadetexture;\\nuniform highp float u_gamma_scale;\\nuniform bool u_is_text;\\n\\nvarying vec2 v_tex;\\nvarying vec2 v_fade_tex;\\nvarying float v_gamma_scale;\\nvarying float v_size;\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 fill_color\\n    #pragma mapbox: initialize highp vec4 halo_color\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize lowp float halo_width\\n    #pragma mapbox: initialize lowp float halo_blur\\n\\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\\n\\n    lowp vec4 color = fill_color;\\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\\n    lowp float buff = (256.0 - 64.0) / 256.0;\\n    if (u_is_halo) {\\n        color = halo_color;\\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\\n    }\\n\\n    lowp float dist = texture2D(u_texture, v_tex).a;\\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\\n    highp float gamma_scaled = gamma * v_gamma_scale;\\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\\n\\n    gl_FragColor = color * (alpha * opacity);\\n\\n#ifdef OVERDRAW_INSPECTOR\\n    gl_FragColor = vec4(1.0);\\n#endif\\n}\\n\",\n          vertexSource: \"const float PI = 3.141592653589793;\\n\\nattribute vec4 a_pos_offset;\\nattribute vec2 a_label_pos;\\nattribute vec4 a_data;\\n\\n// contents of a_size vary based on the type of property value\\n// used for {text,icon}-size.\\n// For constants, a_size is disabled.\\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\\n// For composite functions:\\n// [ text-size(lowerZoomStop, feature),\\n//   text-size(upperZoomStop, feature),\\n//   layoutSize == text-size(layoutZoomLevel, feature) ]\\nattribute vec3 a_size;\\nuniform bool u_is_size_zoom_constant;\\nuniform bool u_is_size_feature_constant;\\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\\nuniform highp float u_size; // used when size is both zoom and feature constant\\nuniform highp float u_layout_size; // used when size is feature constant\\n\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\n\\n// matrix is for the vertex position.\\nuniform mat4 u_matrix;\\n\\nuniform bool u_is_text;\\nuniform highp float u_zoom;\\nuniform bool u_rotate_with_map;\\nuniform bool u_pitch_with_map;\\nuniform highp float u_pitch;\\nuniform highp float u_bearing;\\nuniform highp float u_aspect_ratio;\\nuniform highp float u_camera_to_center_distance;\\nuniform highp float u_max_camera_distance;\\nuniform highp float u_collision_y_stretch;\\nuniform vec2 u_extrude_scale;\\n\\nuniform vec2 u_texsize;\\n\\nvarying vec2 v_tex;\\nvarying vec2 v_fade_tex;\\nvarying float v_gamma_scale;\\nvarying float v_size;\\n\\n// Used below to move the vertex out of the clip space for when the current\\n// zoom is out of the glyph's zoom range.\\nhighp float clipUnusedGlyphAngles(const highp float render_size,\\n                                  const highp float layout_size,\\n                                  const highp float min_zoom,\\n                                  const highp float max_zoom) {\\n    highp float zoom_adjust = log2(render_size / layout_size);\\n    highp float adjusted_zoom = (u_zoom - zoom_adjust) * 10.0;\\n    // result: 0 if min_zoom <= adjusted_zoom < max_zoom, and 1 otherwise\\n    return 2.0 - step(min_zoom, adjusted_zoom) - (1.0 - step(max_zoom, adjusted_zoom));\\n}\\n\\nvoid main() {\\n    #pragma mapbox: initialize highp vec4 fill_color\\n    #pragma mapbox: initialize highp vec4 halo_color\\n    #pragma mapbox: initialize lowp float opacity\\n    #pragma mapbox: initialize lowp float halo_width\\n    #pragma mapbox: initialize lowp float halo_blur\\n\\n    vec2 a_pos = a_pos_offset.xy;\\n    vec2 a_offset = a_pos_offset.zw;\\n\\n    vec2 a_tex = a_data.xy;\\n\\n    highp vec2 label_data = unpack_float(a_data[2]);\\n    highp float a_labelminzoom = label_data[0];\\n    highp float a_lineangle = (label_data[1] / 256.0 * 2.0 * PI);\\n    highp vec2 a_zoom = unpack_float(a_data[3]);\\n    highp float a_minzoom = a_zoom[0];\\n    highp float a_maxzoom = a_zoom[1];\\n\\n    // In order to accommodate placing labels around corners in\\n    // symbol-placement: line, each glyph in a label could have multiple\\n    // \\\"quad\\\"s only one of which should be shown at a given zoom level.\\n    // The min/max zoom assigned to each quad is based on the font size at\\n    // the vector tile's zoom level, which might be different than at the\\n    // currently rendered zoom level if text-size is zoom-dependent.\\n    // Thus, we compensate for this difference by calculating an adjustment\\n    // based on the scale of rendered text size relative to layout text size.\\n    highp float layoutSize;\\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        v_size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\\n        layoutSize = a_size[2] / 10.0;\\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\\n        v_size = a_size[0] / 10.0;\\n        layoutSize = v_size;\\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\\n        v_size = u_size;\\n        layoutSize = u_layout_size;\\n    } else {\\n        v_size = u_size;\\n        layoutSize = u_size;\\n    }\\n\\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\\n\\n    vec4 projectedPoint = u_matrix * vec4(a_label_pos, 0, 1);\\n    highp float camera_to_anchor_distance = projectedPoint.w;\\n    highp float perspective_ratio = 1.0 + 0.5*((camera_to_anchor_distance / u_camera_to_center_distance) - 1.0);\\n\\n    // pitch-alignment: map\\n    // rotation-alignment: map | viewport\\n    if (u_pitch_with_map) {\\n        highp float angle = u_rotate_with_map ? a_lineangle : u_bearing;\\n        highp float asin = sin(angle);\\n        highp float acos = cos(angle);\\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\\n        vec2 offset = RotationMatrix * a_offset;\\n        vec2 extrude = fontScale * u_extrude_scale * perspective_ratio * (offset / 64.0);\\n\\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\\n        gl_Position.z += clipUnusedGlyphAngles(v_size*perspective_ratio, layoutSize, a_minzoom, a_maxzoom) * gl_Position.w;\\n    // pitch-alignment: viewport\\n    // rotation-alignment: map\\n    } else if (u_rotate_with_map) {\\n        // foreshortening factor to apply on pitched maps\\n        // as a label goes from horizontal <=> vertical in angle\\n        // it goes from 0% foreshortening to up to around 70% foreshortening\\n        highp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\\n\\n        // use the lineangle to position points a,b along the line\\n        // project the points and calculate the label angle in projected space\\n        // this calculation allows labels to be rendered unskewed on pitched maps\\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(a_lineangle), sin(a_lineangle)), 0, 1);\\n        highp float angle = atan((b[1] / b[3] - a[1] / a[3]) / u_aspect_ratio, b[0] / b[3] - a[0] / a[3]);\\n        highp float asin = sin(angle);\\n        highp float acos = cos(angle);\\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\\n        highp float foreshortening = (1.0 - pitchfactor) + (pitchfactor * cos(angle * 2.0));\\n\\n        vec2 offset = RotationMatrix * (vec2(foreshortening, 1.0) * a_offset);\\n        vec2 extrude = fontScale * u_extrude_scale * perspective_ratio * (offset / 64.0);\\n\\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\\n        gl_Position.z += clipUnusedGlyphAngles(v_size * perspective_ratio, layoutSize, a_minzoom, a_maxzoom) * gl_Position.w;\\n    // pitch-alignment: viewport\\n    // rotation-alignment: viewport\\n    } else {\\n        vec2 extrude = fontScale * u_extrude_scale * perspective_ratio * (a_offset / 64.0);\\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\\n    }\\n\\n    gl_Position.z +=\\n        step(u_max_camera_distance * u_camera_to_center_distance, camera_to_anchor_distance) * gl_Position.w;\\n\\n    v_gamma_scale = gl_Position.w / perspective_ratio;\\n\\n    v_tex = a_tex / u_texsize;\\n    // incidence_stretch is the ratio of how much y space a label takes up on a tile while drawn perpendicular to the viewport vs\\n    //  how much space it would take up if it were drawn flat on the tile\\n    // Using law of sines, camera_to_anchor/sin(ground_angle) = camera_to_center/sin(incidence_angle)\\n    // sin(incidence_angle) = 1/incidence_stretch\\n    // Incidence angle 90 -> head on, sin(incidence_angle) = 1, no incidence stretch\\n    // Incidence angle 1 -> very oblique, sin(incidence_angle) =~ 0, lots of incidence stretch\\n    // ground_angle = u_pitch + PI/2 -> sin(ground_angle) = cos(u_pitch)\\n    // This 2D calculation is only exactly correct when gl_Position.x is in the center of the viewport,\\n    //  but it's a close enough approximation for our purposes\\n    highp float incidence_stretch  = camera_to_anchor_distance / (u_camera_to_center_distance * cos(u_pitch));\\n    // incidence_stretch only applies to the y-axis, but without re-calculating the collision tile, we can't\\n    // adjust the size of only one axis. So, we do a crude approximation at placement time to get the aspect ratio\\n    // about right, and then do the rest of the adjustment here: there will be some extra padding on the x-axis,\\n    // but hopefully not too much.\\n    // Never make the adjustment less than 1.0: instead of allowing collisions on the x-axis, be conservative on\\n    // the y-axis.\\n    highp float collision_adjustment = max(1.0, incidence_stretch / u_collision_y_stretch);\\n\\n    // Floor to 1/10th zoom to dodge precision issues that can cause partially hidden labels\\n    highp float perspective_zoom_adjust = floor(log2(perspective_ratio * collision_adjustment) * 10.0);\\n    v_fade_tex = vec2((a_labelminzoom + perspective_zoom_adjust) / 255.0, 0.0);\\n}\\n\"\n        }\n      };\n    }, {}],\n    79: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var VertexArrayObject = function VertexArrayObject() {\n        this.boundProgram = null, this.boundVertexBuffer = null, this.boundVertexBuffer2 = null, this.boundElementBuffer = null, this.boundVertexOffset = null, this.vao = null;\n      };\n\n      VertexArrayObject.prototype.bind = function (e, t, r, i, n, s) {\n        void 0 === e.extVertexArrayObject && (e.extVertexArrayObject = e.getExtension(\"OES_vertex_array_object\"));\n        var o = !this.vao || this.boundProgram !== t || this.boundVertexBuffer !== r || this.boundVertexBuffer2 !== n || this.boundElementBuffer !== i || this.boundVertexOffset !== s;\n        !e.extVertexArrayObject || o ? (this.freshBind(e, t, r, i, n, s), this.gl = e) : e.extVertexArrayObject.bindVertexArrayOES(this.vao);\n      }, VertexArrayObject.prototype.freshBind = function (e, t, r, i, n, s) {\n        var o,\n            u = t.numAttributes;\n        if (e.extVertexArrayObject) this.vao && this.destroy(), this.vao = e.extVertexArrayObject.createVertexArrayOES(), e.extVertexArrayObject.bindVertexArrayOES(this.vao), o = 0, this.boundProgram = t, this.boundVertexBuffer = r, this.boundVertexBuffer2 = n, this.boundElementBuffer = i, this.boundVertexOffset = s;else {\n          o = e.currentNumAttributes || 0;\n\n          for (var b = u; b < o; b++) {\n            e.disableVertexAttribArray(b);\n          }\n        }\n        r.enableAttributes(e, t), n && n.enableAttributes(e, t), r.bind(e), r.setVertexAttribPointers(e, t, s), n && (n.bind(e), n.setVertexAttribPointers(e, t, s)), i && i.bind(e), e.currentNumAttributes = u;\n      }, VertexArrayObject.prototype.destroy = function () {\n        this.vao && (this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);\n      }, module.exports = VertexArrayObject;\n    }, {}],\n    80: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\");\n\n      exports.packUint8ToFloat = function (t, l) {\n        return t = util.clamp(Math.floor(t), 0, 255), l = util.clamp(Math.floor(l), 0, 255), 256 * t + l;\n      };\n    }, {\n      \"../util/util\": 215\n    }],\n    81: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ImageSource = _dereq_(\"./image_source\"),\n          window = _dereq_(\"../util/window\"),\n          CanvasSource = function (t) {\n        function i(i, a, s, n) {\n          t.call(this, i, a, s, n), this.options = a, this.animate = !a.hasOwnProperty(\"animate\") || a.animate;\n        }\n\n        return t && (i.__proto__ = t), i.prototype = Object.create(t && t.prototype), i.prototype.constructor = i, i.prototype.load = function () {\n          if (this.canvas = this.canvas || window.document.getElementById(this.options.canvas), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions()) return this.fire(\"error\", new Error(\"Canvas dimensions cannot be less than or equal to zero.\"));\n          var t;\n          this.play = function () {\n            t = this.map.style.animationLoop.set(1 / 0), this.map._rerender();\n          }, this.pause = function () {\n            this.map.style.animationLoop.cancel(t);\n          }, this._finishLoading();\n        }, i.prototype.getCanvas = function () {\n          return this.canvas;\n        }, i.prototype.onAdd = function (t) {\n          this.map || (this.map = t, this.load(), this.canvas && this.animate && this.play());\n        }, i.prototype.prepare = function () {\n          var t = !1;\n          this.canvas.width !== this.width && (this.width = this.canvas.width, t = !0), this.canvas.height !== this.height && (this.height = this.canvas.height, t = !0), this._hasInvalidDimensions() || 0 !== Object.keys(this.tiles).length && this._prepareImage(this.map.painter.gl, this.canvas, t);\n        }, i.prototype.serialize = function () {\n          return {\n            type: \"canvas\",\n            canvas: this.canvas,\n            coordinates: this.coordinates\n          };\n        }, i.prototype._hasInvalidDimensions = function () {\n          for (var t = this, i = 0, a = [t.canvas.width, t.canvas.height]; i < a.length; i += 1) {\n            var s = a[i];\n            if (isNaN(s) || s <= 0) return !0;\n          }\n\n          return !1;\n        }, i;\n      }(ImageSource);\n\n      module.exports = CanvasSource;\n    }, {\n      \"../util/window\": 196,\n      \"./image_source\": 85\n    }],\n    82: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function resolveURL(t) {\n        var e = window.document.createElement(\"a\");\n        return e.href = t, e.href;\n      }\n\n      var Evented = _dereq_(\"../util/evented\"),\n          util = _dereq_(\"../util/util\"),\n          window = _dereq_(\"../util/window\"),\n          EXTENT = _dereq_(\"../data/extent\"),\n          GeoJSONSource = function (t) {\n        function e(e, o, i, r) {\n          t.call(this), o = o || {}, this.id = e, this.type = \"geojson\", this.minzoom = 0, this.maxzoom = 18, this.tileSize = 512, this.isTileClipped = !0, this.reparseOverscaled = !0, this.dispatcher = i, this.setEventedParent(r), this._data = o.data, void 0 !== o.maxzoom && (this.maxzoom = o.maxzoom), o.type && (this.type = o.type);\n          var a = EXTENT / this.tileSize;\n          this.workerOptions = util.extend({\n            source: this.id,\n            cluster: o.cluster || !1,\n            geojsonVtOptions: {\n              buffer: (void 0 !== o.buffer ? o.buffer : 128) * a,\n              tolerance: (void 0 !== o.tolerance ? o.tolerance : .375) * a,\n              extent: EXTENT,\n              maxZoom: this.maxzoom\n            },\n            superclusterOptions: {\n              maxZoom: Math.min(o.clusterMaxZoom, this.maxzoom - 1) || this.maxzoom - 1,\n              extent: EXTENT,\n              radius: (o.clusterRadius || 50) * a,\n              log: !1\n            }\n          }, o.workerOptions);\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.load = function () {\n          var t = this;\n          this.fire(\"dataloading\", {\n            dataType: \"source\"\n          }), this._updateWorkerData(function (e) {\n            return e ? void t.fire(\"error\", {\n              error: e\n            }) : void t.fire(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            });\n          });\n        }, e.prototype.onAdd = function (t) {\n          this.load(), this.map = t;\n        }, e.prototype.setData = function (t) {\n          var e = this;\n          return this._data = t, this.fire(\"dataloading\", {\n            dataType: \"source\"\n          }), this._updateWorkerData(function (t) {\n            return t ? e.fire(\"error\", {\n              error: t\n            }) : void e.fire(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            });\n          }), this;\n        }, e.prototype._updateWorkerData = function (t) {\n          var e = this,\n              o = util.extend({}, this.workerOptions),\n              i = this._data;\n          \"string\" == typeof i ? o.url = resolveURL(i) : o.data = JSON.stringify(i), this.workerID = this.dispatcher.send(this.type + \".loadData\", o, function (o) {\n            e._loaded = !0, t(o);\n          });\n        }, e.prototype.loadTile = function (t, e) {\n          var o = this,\n              i = t.coord.z > this.maxzoom ? Math.pow(2, t.coord.z - this.maxzoom) : 1,\n              r = {\n            type: this.type,\n            uid: t.uid,\n            coord: t.coord,\n            zoom: t.coord.z,\n            maxZoom: this.maxzoom,\n            tileSize: this.tileSize,\n            source: this.id,\n            overscaling: i,\n            angle: this.map.transform.angle,\n            pitch: this.map.transform.pitch,\n            cameraToCenterDistance: this.map.transform.cameraToCenterDistance,\n            cameraToTileDistance: this.map.transform.cameraToTileDistance(t),\n            showCollisionBoxes: this.map.showCollisionBoxes\n          };\n          t.workerID = this.dispatcher.send(\"loadTile\", r, function (i, r) {\n            if (t.unloadVectorData(), !t.aborted) return i ? e(i) : (t.loadVectorData(r, o.map.painter), t.redoWhenDone && (t.redoWhenDone = !1, t.redoPlacement(o)), e(null));\n          }, this.workerID);\n        }, e.prototype.abortTile = function (t) {\n          t.aborted = !0;\n        }, e.prototype.unloadTile = function (t) {\n          t.unloadVectorData(), this.dispatcher.send(\"removeTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          }, function () {}, t.workerID);\n        }, e.prototype.onRemove = function () {\n          this.dispatcher.broadcast(\"removeSource\", {\n            type: this.type,\n            source: this.id\n          }, function () {});\n        }, e.prototype.serialize = function () {\n          return {\n            type: this.type,\n            data: this._data\n          };\n        }, e;\n      }(Evented);\n\n      module.exports = GeoJSONSource;\n    }, {\n      \"../data/extent\": 53,\n      \"../util/evented\": 202,\n      \"../util/util\": 215,\n      \"../util/window\": 196\n    }],\n    83: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ajax = _dereq_(\"../util/ajax\"),\n          rewind = _dereq_(\"geojson-rewind\"),\n          GeoJSONWrapper = _dereq_(\"./geojson_wrapper\"),\n          vtpbf = _dereq_(\"vt-pbf\"),\n          supercluster = _dereq_(\"supercluster\"),\n          geojsonvt = _dereq_(\"geojson-vt\"),\n          VectorTileWorkerSource = _dereq_(\"./vector_tile_worker_source\"),\n          GeoJSONWorkerSource = function (e) {\n        function r(r, t, o) {\n          e.call(this, r, t), o && (this.loadGeoJSON = o), this._geoJSONIndexes = {};\n        }\n\n        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.loadVectorData = function (e, r) {\n          var t = e.source,\n              o = e.coord;\n          if (!this._geoJSONIndexes[t]) return r(null, null);\n\n          var n = this._geoJSONIndexes[t].getTile(Math.min(o.z, e.maxZoom), o.x, o.y);\n\n          if (!n) return r(null, null);\n          var u = new GeoJSONWrapper(n.features);\n          u.name = \"_geojsonTileLayer\";\n          var a = vtpbf({\n            layers: {\n              _geojsonTileLayer: u\n            }\n          });\n          0 === a.byteOffset && a.byteLength === a.buffer.byteLength || (a = new Uint8Array(a)), u.rawData = a.buffer, r(null, u);\n        }, r.prototype.loadData = function (e, r) {\n          var t = function (t, o) {\n            var n = this;\n            return t ? r(t) : \"object\" != typeof o ? r(new Error(\"Input data is not a valid GeoJSON object.\")) : (rewind(o, !0), void this._indexData(o, e, function (t, o) {\n              return t ? r(t) : (n._geoJSONIndexes[e.source] = o, void r(null));\n            }));\n          }.bind(this);\n\n          this.loadGeoJSON(e, t);\n        }, r.prototype.loadGeoJSON = function (e, r) {\n          if (e.url) ajax.getJSON(e.url, r);else {\n            if (\"string\" != typeof e.data) return r(new Error(\"Input data is not a valid GeoJSON object.\"));\n\n            try {\n              return r(null, JSON.parse(e.data));\n            } catch (e) {\n              return r(new Error(\"Input data is not a valid GeoJSON object.\"));\n            }\n          }\n        }, r.prototype.removeSource = function (e) {\n          this._geoJSONIndexes[e.source] && delete this._geoJSONIndexes[e.source];\n        }, r.prototype._indexData = function (e, r, t) {\n          try {\n            r.cluster ? t(null, supercluster(r.superclusterOptions).load(e.features)) : t(null, geojsonvt(e, r.geojsonVtOptions));\n          } catch (e) {\n            return t(e);\n          }\n        }, r;\n      }(VectorTileWorkerSource);\n\n      module.exports = GeoJSONWorkerSource;\n    }, {\n      \"../util/ajax\": 193,\n      \"./geojson_wrapper\": 84,\n      \"./vector_tile_worker_source\": 97,\n      \"geojson-rewind\": 7,\n      \"geojson-vt\": 11,\n      \"supercluster\": 28,\n      \"vt-pbf\": 37\n    }],\n    84: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Point = _dereq_(\"point-geometry\"),\n          VectorTileFeature = _dereq_(\"vector-tile\").VectorTileFeature,\n          EXTENT = _dereq_(\"../data/extent\"),\n          FeatureWrapper = function FeatureWrapper(e) {\n        var t = this;\n\n        if (this.type = e.type, 1 === e.type) {\n          this.rawGeometry = [];\n\n          for (var r = 0; r < e.geometry.length; r++) {\n            t.rawGeometry.push([e.geometry[r]]);\n          }\n        } else this.rawGeometry = e.geometry;\n\n        this.properties = e.tags, \"id\" in e && !isNaN(e.id) && (this.id = parseInt(e.id, 10)), this.extent = EXTENT;\n      };\n\n      FeatureWrapper.prototype.loadGeometry = function () {\n        var e = this,\n            t = this.rawGeometry;\n        this.geometry = [];\n\n        for (var r = 0; r < t.length; r++) {\n          for (var o = t[r], a = [], i = 0; i < o.length; i++) {\n            a.push(new Point(o[i][0], o[i][1]));\n          }\n\n          e.geometry.push(a);\n        }\n\n        return this.geometry;\n      }, FeatureWrapper.prototype.bbox = function () {\n        this.geometry || this.loadGeometry();\n\n        for (var e = this.geometry, t = 1 / 0, r = -(1 / 0), o = 1 / 0, a = -(1 / 0), i = 0; i < e.length; i++) {\n          for (var p = e[i], n = 0; n < p.length; n++) {\n            var h = p[n];\n            t = Math.min(t, h.x), r = Math.max(r, h.x), o = Math.min(o, h.y), a = Math.max(a, h.y);\n          }\n        }\n\n        return [t, o, r, a];\n      }, FeatureWrapper.prototype.toGeoJSON = function () {\n        VectorTileFeature.prototype.toGeoJSON.call(this);\n      };\n\n      var GeoJSONWrapper = function GeoJSONWrapper(e) {\n        this.features = e, this.length = e.length, this.extent = EXTENT;\n      };\n\n      GeoJSONWrapper.prototype.feature = function (e) {\n        return new FeatureWrapper(this.features[e]);\n      }, module.exports = GeoJSONWrapper;\n    }, {\n      \"../data/extent\": 53,\n      \"point-geometry\": 25,\n      \"vector-tile\": 33\n    }],\n    85: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          window = _dereq_(\"../util/window\"),\n          TileCoord = _dereq_(\"./tile_coord\"),\n          LngLat = _dereq_(\"../geo/lng_lat\"),\n          Point = _dereq_(\"point-geometry\"),\n          Evented = _dereq_(\"../util/evented\"),\n          ajax = _dereq_(\"../util/ajax\"),\n          EXTENT = _dereq_(\"../data/extent\"),\n          RasterBoundsArray = _dereq_(\"../data/raster_bounds_array\"),\n          Buffer = _dereq_(\"../data/buffer\"),\n          VertexArrayObject = _dereq_(\"../render/vertex_array_object\"),\n          ImageSource = function (t) {\n        function e(e, o, r, i) {\n          t.call(this), this.id = e, this.dispatcher = r, this.coordinates = o.coordinates, this.type = \"image\", this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.tiles = {}, this.setEventedParent(i), this.options = o, this.textureLoaded = !1;\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.load = function () {\n          var t = this;\n          this.fire(\"dataloading\", {\n            dataType: \"source\"\n          }), this.url = this.options.url, ajax.getImage(this.options.url, function (e, o) {\n            return e ? t.fire(\"error\", {\n              error: e\n            }) : (t.image = o, void t._finishLoading());\n          });\n        }, e.prototype._finishLoading = function () {\n          this.map && (this.setCoordinates(this.coordinates), this.fire(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"metadata\"\n          }));\n        }, e.prototype.onAdd = function (t) {\n          this.load(), this.map = t, this.image && this.setCoordinates(this.coordinates);\n        }, e.prototype.setCoordinates = function (t) {\n          this.coordinates = t;\n          var e = this.map,\n              o = t.map(function (t) {\n            return e.transform.locationCoordinate(LngLat.convert(t)).zoomTo(0);\n          }),\n              r = this.centerCoord = util.getCoordinatesCenter(o);\n          return r.column = Math.floor(r.column), r.row = Math.floor(r.row), this.coord = new TileCoord(r.zoom, r.column, r.row), this.minzoom = this.maxzoom = r.zoom, this._tileCoords = o.map(function (t) {\n            var e = t.zoomTo(r.zoom);\n            return new Point(Math.round((e.column - r.column) * EXTENT), Math.round((e.row - r.row) * EXTENT));\n          }), this.fire(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"content\"\n          }), this;\n        }, e.prototype._setTile = function (t) {\n          this.tiles[t.coord.w] = t;\n          var e = 32767,\n              o = new RasterBoundsArray();\n          o.emplaceBack(this._tileCoords[0].x, this._tileCoords[0].y, 0, 0), o.emplaceBack(this._tileCoords[1].x, this._tileCoords[1].y, e, 0), o.emplaceBack(this._tileCoords[3].x, this._tileCoords[3].y, 0, e), o.emplaceBack(this._tileCoords[2].x, this._tileCoords[2].y, e, e), t.buckets = {}, t.boundsBuffer = Buffer.fromStructArray(o, Buffer.BufferType.VERTEX), t.boundsVAO = new VertexArrayObject();\n        }, e.prototype.prepare = function () {\n          0 === Object.keys(this.tiles).length !== 0 && this.image && this._prepareImage(this.map.painter.gl, this.image);\n        }, e.prototype._prepareImage = function (t, e, o) {\n          var r = this;\n          this.textureLoaded ? o ? t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, e) : (e instanceof window.HTMLVideoElement || e instanceof window.ImageData || e instanceof window.HTMLCanvasElement) && (t.bindTexture(t.TEXTURE_2D, this.texture), t.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, t.RGBA, t.UNSIGNED_BYTE, e)) : (this.textureLoaded = !0, this.texture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, e));\n\n          for (var i in r.tiles) {\n            var a = r.tiles[i];\n            \"loaded\" !== a.state && (a.state = \"loaded\", a.texture = r.texture);\n          }\n        }, e.prototype.loadTile = function (t, e) {\n          this.coord && this.coord.toString() === t.coord.toString() ? (this._setTile(t), e(null)) : (t.state = \"errored\", e(null));\n        }, e.prototype.serialize = function () {\n          return {\n            type: \"image\",\n            urls: this.url,\n            coordinates: this.coordinates\n          };\n        }, e;\n      }(Evented);\n\n      module.exports = ImageSource;\n    }, {\n      \"../data/buffer\": 50,\n      \"../data/extent\": 53,\n      \"../data/raster_bounds_array\": 58,\n      \"../geo/lng_lat\": 61,\n      \"../render/vertex_array_object\": 79,\n      \"../util/ajax\": 193,\n      \"../util/evented\": 202,\n      \"../util/util\": 215,\n      \"../util/window\": 196,\n      \"./tile_coord\": 95,\n      \"point-geometry\": 25\n    }],\n    86: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          ajax = _dereq_(\"../util/ajax\"),\n          browser = _dereq_(\"../util/browser\"),\n          normalizeURL = _dereq_(\"../util/mapbox\").normalizeSourceURL;\n\n      module.exports = function (r, e) {\n        var o = function o(r, _o) {\n          if (r) return e(r);\n          var i = util.pick(_o, [\"tiles\", \"minzoom\", \"maxzoom\", \"attribution\", \"mapbox_logo\", \"bounds\"]);\n          _o.vector_layers && (i.vectorLayers = _o.vector_layers, i.vectorLayerIds = i.vectorLayers.map(function (r) {\n            return r.id;\n          })), e(null, i);\n        };\n\n        r.url ? ajax.getJSON(normalizeURL(r.url), o) : browser.frame(o.bind(null, null, r));\n      };\n    }, {\n      \"../util/ajax\": 193,\n      \"../util/browser\": 194,\n      \"../util/mapbox\": 209,\n      \"../util/util\": 215\n    }],\n    87: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var EXTENT = _dereq_(\"../data/extent\");\n\n      module.exports = function (e, t, r) {\n        return t * (EXTENT / (e.tileSize * Math.pow(2, r - e.coord.z)));\n      };\n    }, {\n      \"../data/extent\": 53\n    }],\n    88: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function sortTilesIn(e, r) {\n        var t = e.coord,\n            o = r.coord;\n        return t.z - o.z || t.y - o.y || t.w - o.w || t.x - o.x;\n      }\n\n      function mergeRenderedFeatureLayers(e) {\n        for (var r = {}, t = {}, o = 0, a = e; o < a.length; o += 1) {\n          var n = a[o],\n              u = n.queryResults,\n              i = n.wrappedTileID,\n              d = t[i] = t[i] || {};\n\n          for (var s in u) {\n            for (var l = u[s], c = d[s] = d[s] || {}, f = r[s] = r[s] || [], y = 0, p = l; y < p.length; y += 1) {\n              var v = p[y];\n              c[v.featureIndex] || (c[v.featureIndex] = !0, f.push(v.feature));\n            }\n          }\n        }\n\n        return r;\n      }\n\n      var TileCoord = _dereq_(\"./tile_coord\");\n\n      exports.rendered = function (e, r, t, o, a, n) {\n        var u = e.tilesIn(t);\n        u.sort(sortTilesIn);\n\n        for (var i = [], d = 0; d < u.length; d++) {\n          var s = u[d];\n          s.tile.featureIndex && i.push({\n            wrappedTileID: s.coord.wrapped().id,\n            queryResults: s.tile.featureIndex.query({\n              queryGeometry: s.queryGeometry,\n              scale: s.scale,\n              tileSize: s.tile.tileSize,\n              bearing: n,\n              params: o\n            }, r)\n          });\n        }\n\n        return mergeRenderedFeatureLayers(i);\n      }, exports.source = function (e, r) {\n        for (var t = e.getRenderableIds().map(function (r) {\n          return e.getTileByID(r);\n        }), o = [], a = {}, n = 0; n < t.length; n++) {\n          var u = t[n],\n              i = new TileCoord(Math.min(u.sourceMaxZoom, u.coord.z), u.coord.x, u.coord.y, 0).id;\n          a[i] || (a[i] = !0, u.querySourceFeatures(o, r));\n        }\n\n        return o;\n      };\n    }, {\n      \"./tile_coord\": 95\n    }],\n    89: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          ajax = _dereq_(\"../util/ajax\"),\n          Evented = _dereq_(\"../util/evented\"),\n          loadTileJSON = _dereq_(\"./load_tilejson\"),\n          normalizeURL = _dereq_(\"../util/mapbox\").normalizeTileURL,\n          TileBounds = _dereq_(\"./tile_bounds\"),\n          RasterTileSource = function (e) {\n        function t(t, i, r, o) {\n          e.call(this), this.id = t, this.dispatcher = r, this.setEventedParent(o), this.type = \"raster\", this.minzoom = 0, this.maxzoom = 22, this.roundZoom = !0, this.scheme = \"xyz\", this.tileSize = 512, this._loaded = !1, this.options = i, util.extend(this, util.pick(i, [\"url\", \"scheme\", \"tileSize\"]));\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.load = function () {\n          var e = this;\n          this.fire(\"dataloading\", {\n            dataType: \"source\"\n          }), loadTileJSON(this.options, function (t, i) {\n            return t ? e.fire(\"error\", t) : (util.extend(e, i), e.setBounds(i.bounds), e.fire(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            }), void e.fire(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            }));\n          });\n        }, t.prototype.onAdd = function (e) {\n          this.load(), this.map = e;\n        }, t.prototype.setBounds = function (e) {\n          this.bounds = e, e && (this.tileBounds = new TileBounds(e, this.minzoom, this.maxzoom));\n        }, t.prototype.serialize = function () {\n          return {\n            type: \"raster\",\n            url: this.url,\n            tileSize: this.tileSize,\n            tiles: this.tiles,\n            bounds: this.bounds\n          };\n        }, t.prototype.hasTile = function (e) {\n          return !this.tileBounds || this.tileBounds.contains(e, this.maxzoom);\n        }, t.prototype.loadTile = function (e, t) {\n          function i(i, r) {\n            if (delete e.request, e.aborted) return this.state = \"unloaded\", t(null);\n            if (i) return this.state = \"errored\", t(i);\n            this.map._refreshExpiredTiles && e.setExpiryData(r), delete r.cacheControl, delete r.expires;\n            var o = this.map.painter.gl;\n            e.texture = this.map.painter.getTileTexture(r.width), e.texture ? (o.bindTexture(o.TEXTURE_2D, e.texture), o.texSubImage2D(o.TEXTURE_2D, 0, 0, 0, o.RGBA, o.UNSIGNED_BYTE, r)) : (e.texture = o.createTexture(), o.bindTexture(o.TEXTURE_2D, e.texture), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR_MIPMAP_NEAREST), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.CLAMP_TO_EDGE), this.map.painter.extTextureFilterAnisotropic && o.texParameterf(o.TEXTURE_2D, this.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, this.map.painter.extTextureFilterAnisotropicMax), o.texImage2D(o.TEXTURE_2D, 0, o.RGBA, o.RGBA, o.UNSIGNED_BYTE, r), e.texture.size = r.width), o.generateMipmap(o.TEXTURE_2D), e.state = \"loaded\", t(null);\n          }\n\n          var r = normalizeURL(e.coord.url(this.tiles, null, this.scheme), this.url, this.tileSize);\n          e.request = ajax.getImage(r, i.bind(this));\n        }, t.prototype.abortTile = function (e) {\n          e.request && (e.request.abort(), delete e.request);\n        }, t.prototype.unloadTile = function (e) {\n          e.texture && this.map.painter.saveTileTexture(e.texture);\n        }, t;\n      }(Evented);\n\n      module.exports = RasterTileSource;\n    }, {\n      \"../util/ajax\": 193,\n      \"../util/evented\": 202,\n      \"../util/mapbox\": 209,\n      \"../util/util\": 215,\n      \"./load_tilejson\": 86,\n      \"./tile_bounds\": 94\n    }],\n    90: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ajax = _dereq_(\"../util/ajax\"),\n          Evented = _dereq_(\"../util/evented\"),\n          window = _dereq_(\"../util/window\"),\n          pluginRequested = !1,\n          pluginBlobURL = null;\n\n      module.exports.evented = new Evented(), module.exports.registerForPluginAvailability = function (e) {\n        return pluginBlobURL ? e(pluginBlobURL, module.exports.errorCallback) : module.exports.evented.once(\"pluginAvailable\", e), e;\n      }, module.exports.setRTLTextPlugin = function (e, l) {\n        if (pluginRequested) throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");\n        pluginRequested = !0, module.exports.errorCallback = l, ajax.getArrayBuffer(e, function (e, t) {\n          e ? l(e) : (pluginBlobURL = window.URL.createObjectURL(new window.Blob([t.data]), {\n            type: \"text/javascript\"\n          }), module.exports.evented.fire(\"pluginAvailable\", {\n            pluginBlobURL: pluginBlobURL,\n            errorCallback: l\n          }));\n        });\n      };\n    }, {\n      \"../util/ajax\": 193,\n      \"../util/evented\": 202,\n      \"../util/window\": 196\n    }],\n    91: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          sourceTypes = {\n        vector: _dereq_(\"../source/vector_tile_source\"),\n        raster: _dereq_(\"../source/raster_tile_source\"),\n        geojson: _dereq_(\"../source/geojson_source\"),\n        video: _dereq_(\"../source/video_source\"),\n        image: _dereq_(\"../source/image_source\"),\n        canvas: _dereq_(\"../source/canvas_source\")\n      };\n\n      exports.create = function (e, r, o, u) {\n        if (r = new sourceTypes[r.type](e, r, o, u), r.id !== e) throw new Error(\"Expected Source id to be \" + e + \" instead of \" + r.id);\n        return util.bindAll([\"load\", \"abort\", \"unload\", \"serialize\", \"prepare\"], r), r;\n      }, exports.getType = function (e) {\n        return sourceTypes[e];\n      }, exports.setType = function (e, r) {\n        sourceTypes[e] = r;\n      };\n    }, {\n      \"../source/canvas_source\": 81,\n      \"../source/geojson_source\": 82,\n      \"../source/image_source\": 85,\n      \"../source/raster_tile_source\": 89,\n      \"../source/vector_tile_source\": 96,\n      \"../source/video_source\": 98,\n      \"../util/util\": 215\n    }],\n    92: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function coordinateToTilePoint(e, t, o) {\n        var i = o.zoomTo(Math.min(e.z, t));\n        return {\n          x: (i.column - (e.x + e.w * Math.pow(2, e.z))) * EXTENT,\n          y: (i.row - e.y) * EXTENT\n        };\n      }\n\n      function compareKeyZoom(e, t) {\n        return e % 32 - t % 32;\n      }\n\n      function isRasterType(e) {\n        return \"raster\" === e || \"image\" === e || \"video\" === e;\n      }\n\n      var Source = _dereq_(\"./source\"),\n          Tile = _dereq_(\"./tile\"),\n          Evented = _dereq_(\"../util/evented\"),\n          TileCoord = _dereq_(\"./tile_coord\"),\n          Cache = _dereq_(\"../util/lru_cache\"),\n          Coordinate = _dereq_(\"../geo/coordinate\"),\n          util = _dereq_(\"../util/util\"),\n          EXTENT = _dereq_(\"../data/extent\"),\n          SourceCache = function (e) {\n        function t(t, o, i) {\n          e.call(this), this.id = t, this.dispatcher = i, this.on(\"data\", function (e) {\n            \"source\" === e.dataType && \"metadata\" === e.sourceDataType && (this._sourceLoaded = !0), this._sourceLoaded && \"source\" === e.dataType && \"content\" === e.sourceDataType && (this.reload(), this.transform && this.update(this.transform));\n          }), this.on(\"error\", function () {\n            this._sourceErrored = !0;\n          }), this._source = Source.create(t, o, i, this), this._tiles = {}, this._cache = new Cache(0, this.unloadTile.bind(this)), this._timers = {}, this._cacheTimers = {}, this._isIdRenderable = this._isIdRenderable.bind(this);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.onAdd = function (e) {\n          this.map = e, this._source && this._source.onAdd && this._source.onAdd(e);\n        }, t.prototype.onRemove = function (e) {\n          this._source && this._source.onRemove && this._source.onRemove(e);\n        }, t.prototype.loaded = function () {\n          var e = this;\n          if (this._sourceErrored) return !0;\n          if (!this._sourceLoaded) return !1;\n\n          for (var t in e._tiles) {\n            var o = e._tiles[t];\n            if (\"loaded\" !== o.state && \"errored\" !== o.state) return !1;\n          }\n\n          return !0;\n        }, t.prototype.getSource = function () {\n          return this._source;\n        }, t.prototype.loadTile = function (e, t) {\n          return this._source.loadTile(e, t);\n        }, t.prototype.unloadTile = function (e) {\n          if (this._source.unloadTile) return this._source.unloadTile(e);\n        }, t.prototype.abortTile = function (e) {\n          if (this._source.abortTile) return this._source.abortTile(e);\n        }, t.prototype.serialize = function () {\n          return this._source.serialize();\n        }, t.prototype.prepare = function () {\n          if (this._sourceLoaded && this._source.prepare) return this._source.prepare();\n        }, t.prototype.getIds = function () {\n          return Object.keys(this._tiles).map(Number).sort(compareKeyZoom);\n        }, t.prototype.getRenderableIds = function () {\n          return this.getIds().filter(this._isIdRenderable);\n        }, t.prototype._isIdRenderable = function (e) {\n          return this._tiles[e].hasData() && !this._coveredTiles[e];\n        }, t.prototype.reload = function () {\n          var e = this;\n\n          this._cache.reset();\n\n          for (var t in e._tiles) {\n            e.reloadTile(t, \"reloading\");\n          }\n        }, t.prototype.reloadTile = function (e, t) {\n          var o = this._tiles[e];\n          o && (\"loading\" !== o.state && (o.state = t), this.loadTile(o, this._tileLoaded.bind(this, o, e, t)));\n        }, t.prototype._tileLoaded = function (e, t, o, i) {\n          return i ? (e.state = \"errored\", void (404 !== i.status && this._source.fire(\"error\", {\n            tile: e,\n            error: i\n          }))) : (e.sourceCache = this, e.timeAdded = new Date().getTime(), \"expired\" === o && (e.refreshedUponExpiration = !0), this._setTileReloadTimer(t, e), this._source.fire(\"data\", {\n            dataType: \"source\",\n            tile: e,\n            coord: e.coord\n          }), void (this.map && (this.map.painter.tileExtentVAO.vao = null)));\n        }, t.prototype.getTile = function (e) {\n          return this.getTileByID(e.id);\n        }, t.prototype.getTileByID = function (e) {\n          return this._tiles[e];\n        }, t.prototype.getZoom = function (e) {\n          return e.zoom + e.scaleZoom(e.tileSize / this._source.tileSize);\n        }, t.prototype.findLoadedChildren = function (e, t, o) {\n          var i = this,\n              r = !1;\n\n          for (var s in i._tiles) {\n            var a = i._tiles[s];\n\n            if (!(o[s] || !a.hasData() || a.coord.z <= e.z || a.coord.z > t)) {\n              var n = Math.pow(2, Math.min(a.coord.z, i._source.maxzoom) - Math.min(e.z, i._source.maxzoom));\n              if (Math.floor(a.coord.x / n) === e.x && Math.floor(a.coord.y / n) === e.y) for (o[s] = !0, r = !0; a && a.coord.z - 1 > e.z;) {\n                var c = a.coord.parent(i._source.maxzoom).id;\n                a = i._tiles[c], a && a.hasData() && (delete o[s], o[c] = !0);\n              }\n            }\n          }\n\n          return r;\n        }, t.prototype.findLoadedParent = function (e, t, o) {\n          for (var i = this, r = e.z - 1; r >= t; r--) {\n            e = e.parent(i._source.maxzoom);\n            var s = i._tiles[e.id];\n            if (s && s.hasData()) return o[e.id] = !0, s;\n            if (i._cache.has(e.id)) return o[e.id] = !0, i._cache.getWithoutRemoving(e.id);\n          }\n        }, t.prototype.updateCacheSize = function (e) {\n          var t = Math.ceil(e.width / e.tileSize) + 1,\n              o = Math.ceil(e.height / e.tileSize) + 1,\n              i = t * o,\n              r = 5;\n\n          this._cache.setMaxSize(Math.floor(i * r));\n        }, t.prototype.update = function (e) {\n          var o = this;\n\n          if (this.transform = e, this._sourceLoaded) {\n            var i, r, s, a;\n            this.updateCacheSize(e);\n            var n = (this._source.roundZoom ? Math.round : Math.floor)(this.getZoom(e)),\n                c = Math.max(n - t.maxOverzooming, this._source.minzoom),\n                d = Math.max(n + t.maxUnderzooming, this._source.minzoom),\n                h = {};\n            this._coveredTiles = {};\n            var u;\n\n            for (this.used ? this._source.coord ? u = e.getVisibleWrappedCoordinates(this._source.coord) : (u = e.coveringTiles({\n              tileSize: this._source.tileSize,\n              minzoom: this._source.minzoom,\n              maxzoom: this._source.maxzoom,\n              roundZoom: this._source.roundZoom,\n              reparseOverscaled: this._source.reparseOverscaled\n            }), this._source.hasTile && (u = u.filter(function (e) {\n              return o._source.hasTile(e);\n            }))) : u = [], i = 0; i < u.length; i++) {\n              r = u[i], s = o.addTile(r), h[r.id] = !0, s.hasData() || o.findLoadedChildren(r, d, h) || (a = o.findLoadedParent(r, c, h), a && o.addTile(a.coord));\n            }\n\n            var l = {};\n            if (isRasterType(this._source.type)) for (var m = Object.keys(h), p = 0; p < m.length; p++) {\n              var _ = m[p];\n              r = TileCoord.fromID(_), s = o._tiles[_], s && (\"undefined\" == typeof s.fadeEndTime || s.fadeEndTime >= Date.now()) && (o.findLoadedChildren(r, d, h) && (h[_] = !0), a = o.findLoadedParent(r, c, l), a && o.addTile(a.coord));\n            }\n            var f;\n\n            for (f in l) {\n              h[f] || (o._coveredTiles[f] = !0);\n            }\n\n            for (f in l) {\n              h[f] = !0;\n            }\n\n            var T = util.keysDifference(this._tiles, h);\n\n            for (i = 0; i < T.length; i++) {\n              o.removeTile(+T[i]);\n            }\n          }\n        }, t.prototype.addTile = function (e) {\n          var t = this._tiles[e.id];\n          if (t) return t;\n          t = this._cache.get(e.id), t && (t.redoPlacement(this._source), this._cacheTimers[e.id] && (clearTimeout(this._cacheTimers[e.id]), this._cacheTimers[e.id] = void 0, this._setTileReloadTimer(e.id, t)));\n          var o = Boolean(t);\n\n          if (!o) {\n            var i = e.z,\n                r = i > this._source.maxzoom ? Math.pow(2, i - this._source.maxzoom) : 1;\n            t = new Tile(e, this._source.tileSize * r, this._source.maxzoom), this.loadTile(t, this._tileLoaded.bind(this, t, e.id, t.state));\n          }\n\n          return t.uses++, this._tiles[e.id] = t, o || this._source.fire(\"dataloading\", {\n            tile: t,\n            coord: t.coord,\n            dataType: \"source\"\n          }), t;\n        }, t.prototype._setTileReloadTimer = function (e, t) {\n          var o = this,\n              i = t.getExpiryTimeout();\n          i && (this._timers[e] = setTimeout(function () {\n            o.reloadTile(e, \"expired\"), o._timers[e] = void 0;\n          }, i));\n        }, t.prototype._setCacheInvalidationTimer = function (e, t) {\n          var o = this,\n              i = t.getExpiryTimeout();\n          i && (this._cacheTimers[e] = setTimeout(function () {\n            o._cache.remove(e), o._cacheTimers[e] = void 0;\n          }, i));\n        }, t.prototype.removeTile = function (e) {\n          var t = this._tiles[e];\n          if (t && (t.uses--, delete this._tiles[e], this._timers[e] && (clearTimeout(this._timers[e]), this._timers[e] = void 0), !(t.uses > 0))) if (t.stopPlacementThrottler(), t.hasData()) {\n            var o = t.coord.wrapped().id;\n            this._cache.add(o, t), this._setCacheInvalidationTimer(o, t);\n          } else t.aborted = !0, this.abortTile(t), this.unloadTile(t);\n        }, t.prototype.clearTiles = function () {\n          var e = this;\n\n          for (var t in e._tiles) {\n            e.removeTile(t);\n          }\n\n          this._cache.reset();\n        }, t.prototype.tilesIn = function (e) {\n          for (var t = this, o = [], i = this.getIds(), r = 1 / 0, s = 1 / 0, a = -(1 / 0), n = -(1 / 0), c = e[0].zoom, d = 0; d < e.length; d++) {\n            var h = e[d];\n            r = Math.min(r, h.column), s = Math.min(s, h.row), a = Math.max(a, h.column), n = Math.max(n, h.row);\n          }\n\n          for (var u = 0; u < i.length; u++) {\n            var l = t._tiles[i[u]],\n                m = TileCoord.fromID(i[u]),\n                p = [coordinateToTilePoint(m, l.sourceMaxZoom, new Coordinate(r, s, c)), coordinateToTilePoint(m, l.sourceMaxZoom, new Coordinate(a, n, c))];\n\n            if (p[0].x < EXTENT && p[0].y < EXTENT && p[1].x >= 0 && p[1].y >= 0) {\n              for (var _ = [], f = 0; f < e.length; f++) {\n                _.push(coordinateToTilePoint(m, l.sourceMaxZoom, e[f]));\n              }\n\n              o.push({\n                tile: l,\n                coord: m,\n                queryGeometry: [_],\n                scale: Math.pow(2, t.transform.zoom - l.coord.z)\n              });\n            }\n          }\n\n          return o;\n        }, t.prototype.redoPlacement = function () {\n          for (var e = this, t = this.getIds(), o = 0; o < t.length; o++) {\n            var i = e.getTileByID(t[o]);\n            i.redoPlacement(e._source);\n          }\n        }, t.prototype.getVisibleCoordinates = function () {\n          for (var e = this, t = this.getRenderableIds().map(TileCoord.fromID), o = 0, i = t; o < i.length; o += 1) {\n            var r = i[o];\n            r.posMatrix = e.transform.calculatePosMatrix(r, e._source.maxzoom);\n          }\n\n          return t;\n        }, t;\n      }(Evented);\n\n      SourceCache.maxOverzooming = 10, SourceCache.maxUnderzooming = 3, module.exports = SourceCache;\n    }, {\n      \"../data/extent\": 53,\n      \"../geo/coordinate\": 60,\n      \"../util/evented\": 202,\n      \"../util/lru_cache\": 208,\n      \"../util/util\": 215,\n      \"./source\": 91,\n      \"./tile\": 93,\n      \"./tile_coord\": 95\n    }],\n    93: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          Bucket = _dereq_(\"../data/bucket\"),\n          FeatureIndex = _dereq_(\"../data/feature_index\"),\n          vt = _dereq_(\"vector-tile\"),\n          Protobuf = _dereq_(\"pbf\"),\n          GeoJSONFeature = _dereq_(\"../util/vectortile_to_geojson\"),\n          featureFilter = _dereq_(\"../style-spec/feature_filter\"),\n          CollisionTile = _dereq_(\"../symbol/collision_tile\"),\n          CollisionBoxArray = _dereq_(\"../symbol/collision_box\"),\n          Throttler = _dereq_(\"../util/throttler\"),\n          CLOCK_SKEW_RETRY_TIMEOUT = 3e4,\n          Tile = function Tile(e, t, i) {\n        this.coord = e, this.uid = util.uniqueId(), this.uses = 0, this.tileSize = t, this.sourceMaxZoom = i, this.buckets = {}, this.expirationTime = null, this.expiredRequestCount = 0, this.state = \"loading\", this.placementThrottler = new Throttler(300, this._immediateRedoPlacement.bind(this));\n      };\n\n      Tile.prototype.registerFadeDuration = function (e, t) {\n        var i = t + this.timeAdded;\n        i < Date.now() || this.fadeEndTime && i < this.fadeEndTime || (this.fadeEndTime = i, e.set(this.fadeEndTime - Date.now()));\n      }, Tile.prototype.loadVectorData = function (e, t) {\n        this.hasData() && this.unloadVectorData(), this.state = \"loaded\", e && (e.rawTileData && (this.rawTileData = e.rawTileData), this.collisionBoxArray = new CollisionBoxArray(e.collisionBoxArray), this.collisionTile = new CollisionTile(e.collisionTile, this.collisionBoxArray), this.featureIndex = new FeatureIndex(e.featureIndex, this.rawTileData, this.collisionTile), this.buckets = Bucket.deserialize(e.buckets, t.style));\n      }, Tile.prototype.reloadSymbolData = function (e, t) {\n        var i = this;\n\n        if (\"unloaded\" !== this.state) {\n          this.collisionTile = new CollisionTile(e.collisionTile, this.collisionBoxArray), this.featureIndex.setCollisionTile(this.collisionTile);\n\n          for (var o in i.buckets) {\n            var a = i.buckets[o];\n            \"symbol\" === a.layers[0].type && (a.destroy(), delete i.buckets[o]);\n          }\n\n          util.extend(this.buckets, Bucket.deserialize(e.buckets, t));\n        }\n      }, Tile.prototype.unloadVectorData = function () {\n        var e = this;\n\n        for (var t in e.buckets) {\n          e.buckets[t].destroy();\n        }\n\n        this.buckets = {}, this.collisionBoxArray = null, this.collisionTile = null, this.featureIndex = null, this.state = \"unloaded\";\n      }, Tile.prototype.redoPlacement = function (e) {\n        if (\"vector\" === e.type || \"geojson\" === e.type) {\n          if (\"loaded\" !== this.state) return void (this.redoWhenDone = !0);\n\n          if (this.collisionTile) {\n            var t = e.map.transform.cameraToTileDistance(this);\n\n            if (this.angle === e.map.transform.angle && this.pitch === e.map.transform.pitch && this.cameraToCenterDistance === e.map.transform.cameraToCenterDistance && this.showCollisionBoxes === e.map.showCollisionBoxes) {\n              if (this.cameraToTileDistance === t) return;\n              if (this.pitch < 25) return void (this.cameraToTileDistance = t);\n            }\n\n            this.angle = e.map.transform.angle, this.pitch = e.map.transform.pitch, this.cameraToCenterDistance = e.map.transform.cameraToCenterDistance, this.cameraToTileDistance = t, this.showCollisionBoxes = e.map.showCollisionBoxes, this.placementSource = e, this.state = \"reloading\", this.placementThrottler.invoke();\n          }\n        }\n      }, Tile.prototype._immediateRedoPlacement = function () {\n        var e = this;\n        this.placementSource.dispatcher.send(\"redoPlacement\", {\n          type: this.placementSource.type,\n          uid: this.uid,\n          source: this.placementSource.id,\n          angle: this.angle,\n          pitch: this.pitch,\n          cameraToCenterDistance: this.cameraToCenterDistance,\n          cameraToTileDistance: this.cameraToTileDistance,\n          showCollisionBoxes: this.showCollisionBoxes\n        }, function (t, i) {\n          e.reloadSymbolData(i, e.placementSource.map.style), e.placementSource.map.showCollisionBoxes && e.placementSource.fire(\"data\", {\n            tile: e,\n            coord: e.coord,\n            dataType: \"source\"\n          }), e.placementSource.map && (e.placementSource.map.painter.tileExtentVAO.vao = null), e.state = \"loaded\", e.redoWhenDone && (e.redoWhenDone = !1, e._immediateRedoPlacement());\n        }, this.workerID);\n      }, Tile.prototype.getBucket = function (e) {\n        return this.buckets[e.id];\n      }, Tile.prototype.querySourceFeatures = function (e, t) {\n        var i = this;\n\n        if (this.rawTileData) {\n          this.vtLayers || (this.vtLayers = new vt.VectorTile(new Protobuf(this.rawTileData)).layers);\n          var o = t ? t.sourceLayer : void 0,\n              a = this.vtLayers._geojsonTileLayer || this.vtLayers[o];\n          if (a) for (var s = featureFilter(t && t.filter), r = {\n            z: this.coord.z,\n            x: this.coord.x,\n            y: this.coord.y\n          }, l = 0; l < a.length; l++) {\n            var n = a.feature(l);\n\n            if (s(n)) {\n              var h = new GeoJSONFeature(n, i.coord.z, i.coord.x, i.coord.y);\n              h.tile = r, e.push(h);\n            }\n          }\n        }\n      }, Tile.prototype.hasData = function () {\n        return \"loaded\" === this.state || \"reloading\" === this.state || \"expired\" === this.state;\n      }, Tile.prototype.setExpiryData = function (e) {\n        var t = this.expirationTime;\n\n        if (e.cacheControl) {\n          var i = util.parseCacheControl(e.cacheControl);\n          i[\"max-age\"] && (this.expirationTime = Date.now() + 1e3 * i[\"max-age\"]);\n        } else e.expires && (this.expirationTime = new Date(e.expires).getTime());\n\n        if (this.expirationTime) {\n          var o = Date.now(),\n              a = !1;\n          if (this.expirationTime > o) a = !1;else if (t) {\n            if (this.expirationTime < t) a = !0;else {\n              var s = this.expirationTime - t;\n              s ? this.expirationTime = o + Math.max(s, CLOCK_SKEW_RETRY_TIMEOUT) : a = !0;\n            }\n          } else a = !0;\n          a ? (this.expiredRequestCount++, this.state = \"expired\") : this.expiredRequestCount = 0;\n        }\n      }, Tile.prototype.getExpiryTimeout = function () {\n        if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);\n      }, Tile.prototype.stopPlacementThrottler = function () {\n        this.placementThrottler.stop(), \"reloading\" === this.state && (this.state = \"loaded\");\n      }, module.exports = Tile;\n    }, {\n      \"../data/bucket\": 44,\n      \"../data/feature_index\": 54,\n      \"../style-spec/feature_filter\": 104,\n      \"../symbol/collision_box\": 162,\n      \"../symbol/collision_tile\": 164,\n      \"../util/throttler\": 213,\n      \"../util/util\": 215,\n      \"../util/vectortile_to_geojson\": 216,\n      \"pbf\": 24,\n      \"vector-tile\": 33\n    }],\n    94: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var LngLatBounds = _dereq_(\"../geo/lng_lat_bounds\"),\n          clamp = _dereq_(\"../util/util\").clamp,\n          TileBounds = function TileBounds(t, n, o) {\n        this.bounds = LngLatBounds.convert(this.validateBounds(t)), this.minzoom = n || 0, this.maxzoom = o || 24;\n      };\n\n      TileBounds.prototype.validateBounds = function (t) {\n        return Array.isArray(t) && 4 === t.length ? [Math.max(-180, t[0]), Math.max(-90, t[1]), Math.min(180, t[2]), Math.min(90, t[3])] : [-180, -90, 180, 90];\n      }, TileBounds.prototype.contains = function (t, n) {\n        var o = n ? Math.min(t.z, n) : t.z,\n            a = {\n          minX: Math.floor(this.lngX(this.bounds.getWest(), o)),\n          minY: Math.floor(this.latY(this.bounds.getNorth(), o)),\n          maxX: Math.ceil(this.lngX(this.bounds.getEast(), o)),\n          maxY: Math.ceil(this.latY(this.bounds.getSouth(), o))\n        },\n            i = t.x >= a.minX && t.x < a.maxX && t.y >= a.minY && t.y < a.maxY;\n        return i;\n      }, TileBounds.prototype.lngX = function (t, n) {\n        return (t + 180) * (Math.pow(2, n) / 360);\n      }, TileBounds.prototype.latY = function (t, n) {\n        var o = clamp(Math.sin(Math.PI / 180 * t), -.9999, .9999),\n            a = Math.pow(2, n) / (2 * Math.PI);\n        return Math.pow(2, n - 1) + .5 * Math.log((1 + o) / (1 - o)) * -a;\n      }, module.exports = TileBounds;\n    }, {\n      \"../geo/lng_lat_bounds\": 62,\n      \"../util/util\": 215\n    }],\n    95: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function edge(t, i) {\n        if (t.row > i.row) {\n          var o = t;\n          t = i, i = o;\n        }\n\n        return {\n          x0: t.column,\n          y0: t.row,\n          x1: i.column,\n          y1: i.row,\n          dx: i.column - t.column,\n          dy: i.row - t.row\n        };\n      }\n\n      function scanSpans(t, i, o, r, e) {\n        var n = Math.max(o, Math.floor(i.y0)),\n            h = Math.min(r, Math.ceil(i.y1));\n\n        if (t.x0 === i.x0 && t.y0 === i.y0 ? t.x0 + i.dy / t.dy * t.dx < i.x1 : t.x1 - i.dy / t.dy * t.dx < i.x0) {\n          var s = t;\n          t = i, i = s;\n        }\n\n        for (var a = t.dx / t.dy, d = i.dx / i.dy, y = t.dx > 0, l = i.dx < 0, u = n; u < h; u++) {\n          var x = a * Math.max(0, Math.min(t.dy, u + y - t.y0)) + t.x0,\n              c = d * Math.max(0, Math.min(i.dy, u + l - i.y0)) + i.x0;\n          e(Math.floor(c), Math.ceil(x), u);\n        }\n      }\n\n      function scanTriangle(t, i, o, r, e, n) {\n        var h,\n            s = edge(t, i),\n            a = edge(i, o),\n            d = edge(o, t);\n        s.dy > a.dy && (h = s, s = a, a = h), s.dy > d.dy && (h = s, s = d, d = h), a.dy > d.dy && (h = a, a = d, d = h), s.dy && scanSpans(d, s, r, e, n), a.dy && scanSpans(d, a, r, e, n);\n      }\n\n      function getQuadkey(t, i, o) {\n        for (var r, e = \"\", n = t; n > 0; n--) {\n          r = 1 << n - 1, e += (i & r ? 1 : 0) + (o & r ? 2 : 0);\n        }\n\n        return e;\n      }\n\n      var WhooTS = _dereq_(\"@mapbox/whoots-js\"),\n          Coordinate = _dereq_(\"../geo/coordinate\"),\n          TileCoord = function TileCoord(t, i, o, r) {\n        isNaN(r) && (r = 0), this.z = +t, this.x = +i, this.y = +o, this.w = +r, r *= 2, r < 0 && (r = r * -1 - 1);\n        var e = 1 << this.z;\n        this.id = 32 * (e * e * r + e * this.y + this.x) + this.z, this.posMatrix = null;\n      };\n\n      TileCoord.prototype.toString = function () {\n        return this.z + \"/\" + this.x + \"/\" + this.y;\n      }, TileCoord.prototype.toCoordinate = function (t) {\n        var i = Math.min(this.z, void 0 === t ? this.z : t),\n            o = Math.pow(2, i),\n            r = this.y,\n            e = this.x + o * this.w;\n        return new Coordinate(e, r, i);\n      }, TileCoord.prototype.url = function (t, i, o) {\n        var r = WhooTS.getTileBBox(this.x, this.y, this.z),\n            e = getQuadkey(this.z, this.x, this.y);\n        return t[(this.x + this.y) % t.length].replace(\"{prefix}\", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace(\"{z}\", Math.min(this.z, i || this.z)).replace(\"{x}\", this.x).replace(\"{y}\", \"tms\" === o ? Math.pow(2, this.z) - this.y - 1 : this.y).replace(\"{quadkey}\", e).replace(\"{bbox-epsg-3857}\", r);\n      }, TileCoord.prototype.parent = function (t) {\n        return 0 === this.z ? null : this.z > t ? new TileCoord(this.z - 1, this.x, this.y, this.w) : new TileCoord(this.z - 1, Math.floor(this.x / 2), Math.floor(this.y / 2), this.w);\n      }, TileCoord.prototype.wrapped = function () {\n        return new TileCoord(this.z, this.x, this.y, 0);\n      }, TileCoord.prototype.children = function (t) {\n        if (this.z >= t) return [new TileCoord(this.z + 1, this.x, this.y, this.w)];\n        var i = this.z + 1,\n            o = 2 * this.x,\n            r = 2 * this.y;\n        return [new TileCoord(i, o, r, this.w), new TileCoord(i, o + 1, r, this.w), new TileCoord(i, o, r + 1, this.w), new TileCoord(i, o + 1, r + 1, this.w)];\n      }, TileCoord.cover = function (t, i, o, r) {\n        function e(t, i, e) {\n          var s, a, d, y;\n          if (e >= 0 && e <= n) for (s = t; s < i; s++) {\n            a = Math.floor(s / n), d = (s % n + n) % n, 0 !== a && r !== !0 || (y = new TileCoord(o, d, e, a), h[y.id] = y);\n          }\n        }\n\n        void 0 === r && (r = !0);\n        var n = 1 << t,\n            h = {};\n        return scanTriangle(i[0], i[1], i[2], 0, n, e), scanTriangle(i[2], i[3], i[0], 0, n, e), Object.keys(h).map(function (t) {\n          return h[t];\n        });\n      }, TileCoord.fromID = function (t) {\n        var i = t % 32,\n            o = 1 << i,\n            r = (t - i) / 32,\n            e = r % o,\n            n = (r - e) / o % o,\n            h = Math.floor(r / (o * o));\n        return h % 2 !== 0 && (h = h * -1 - 1), h /= 2, new TileCoord(i, e, n, h);\n      }, module.exports = TileCoord;\n    }, {\n      \"../geo/coordinate\": 60,\n      \"@mapbox/whoots-js\": 4\n    }],\n    96: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Evented = _dereq_(\"../util/evented\"),\n          util = _dereq_(\"../util/util\"),\n          loadTileJSON = _dereq_(\"./load_tilejson\"),\n          normalizeURL = _dereq_(\"../util/mapbox\").normalizeTileURL,\n          TileBounds = _dereq_(\"./tile_bounds\"),\n          VectorTileSource = function (e) {\n        function t(t, i, o, r) {\n          if (e.call(this), this.id = t, this.dispatcher = o, this.type = \"vector\", this.minzoom = 0, this.maxzoom = 22, this.scheme = \"xyz\", this.tileSize = 512, this.reparseOverscaled = !0, this.isTileClipped = !0, util.extend(this, util.pick(i, [\"url\", \"scheme\", \"tileSize\"])), this._options = util.extend({\n            type: \"vector\"\n          }, i), 512 !== this.tileSize) throw new Error(\"vector tile sources must have a tileSize of 512\");\n          this.setEventedParent(r);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.load = function () {\n          var e = this;\n          this.fire(\"dataloading\", {\n            dataType: \"source\"\n          }), loadTileJSON(this._options, function (t, i) {\n            return t ? void e.fire(\"error\", t) : (util.extend(e, i), e.setBounds(i.bounds), e.fire(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            }), void e.fire(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            }));\n          });\n        }, t.prototype.setBounds = function (e) {\n          this.bounds = e, e && (this.tileBounds = new TileBounds(e, this.minzoom, this.maxzoom));\n        }, t.prototype.hasTile = function (e) {\n          return !this.tileBounds || this.tileBounds.contains(e, this.maxzoom);\n        }, t.prototype.onAdd = function (e) {\n          this.load(), this.map = e;\n        }, t.prototype.serialize = function () {\n          return util.extend({}, this._options);\n        }, t.prototype.loadTile = function (e, t) {\n          function i(i, o) {\n            if (!e.aborted) {\n              if (i) return t(i);\n              this.map._refreshExpiredTiles && e.setExpiryData(o), e.loadVectorData(o, this.map.painter), e.redoWhenDone && (e.redoWhenDone = !1, e.redoPlacement(this)), t(null), e.reloadCallback && (this.loadTile(e, e.reloadCallback), e.reloadCallback = null);\n            }\n          }\n\n          var o = e.coord.z > this.maxzoom ? Math.pow(2, e.coord.z - this.maxzoom) : 1,\n              r = {\n            url: normalizeURL(e.coord.url(this.tiles, this.maxzoom, this.scheme), this.url),\n            uid: e.uid,\n            coord: e.coord,\n            zoom: e.coord.z,\n            tileSize: this.tileSize * o,\n            type: this.type,\n            source: this.id,\n            overscaling: o,\n            angle: this.map.transform.angle,\n            pitch: this.map.transform.pitch,\n            cameraToCenterDistance: this.map.transform.cameraToCenterDistance,\n            cameraToTileDistance: this.map.transform.cameraToTileDistance(e),\n            showCollisionBoxes: this.map.showCollisionBoxes\n          };\n          e.workerID && \"expired\" !== e.state ? \"loading\" === e.state ? e.reloadCallback = t : this.dispatcher.send(\"reloadTile\", r, i.bind(this), e.workerID) : e.workerID = this.dispatcher.send(\"loadTile\", r, i.bind(this));\n        }, t.prototype.abortTile = function (e) {\n          this.dispatcher.send(\"abortTile\", {\n            uid: e.uid,\n            type: this.type,\n            source: this.id\n          }, null, e.workerID);\n        }, t.prototype.unloadTile = function (e) {\n          e.unloadVectorData(), this.dispatcher.send(\"removeTile\", {\n            uid: e.uid,\n            type: this.type,\n            source: this.id\n          }, null, e.workerID);\n        }, t;\n      }(Evented);\n\n      module.exports = VectorTileSource;\n    }, {\n      \"../util/evented\": 202,\n      \"../util/mapbox\": 209,\n      \"../util/util\": 215,\n      \"./load_tilejson\": 86,\n      \"./tile_bounds\": 94\n    }],\n    97: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ajax = _dereq_(\"../util/ajax\"),\n          vt = _dereq_(\"vector-tile\"),\n          Protobuf = _dereq_(\"pbf\"),\n          WorkerTile = _dereq_(\"./worker_tile\"),\n          util = _dereq_(\"../util/util\"),\n          VectorTileWorkerSource = function VectorTileWorkerSource(e, r, t) {\n        this.actor = e, this.layerIndex = r, t && (this.loadVectorData = t), this.loading = {}, this.loaded = {};\n      };\n\n      VectorTileWorkerSource.prototype.loadTile = function (e, r) {\n        function t(e, t) {\n          return delete this.loading[o][a], e ? r(e) : t ? (i.vectorTile = t, i.parse(t, this.layerIndex, this.actor, function (e, o, a) {\n            if (e) return r(e);\n            var i = {};\n            t.expires && (i.expires = t.expires), t.cacheControl && (i.cacheControl = t.cacheControl), r(null, util.extend({\n              rawTileData: t.rawData\n            }, o, i), a);\n          }), this.loaded[o] = this.loaded[o] || {}, void (this.loaded[o][a] = i)) : r(null, null);\n        }\n\n        var o = e.source,\n            a = e.uid;\n        this.loading[o] || (this.loading[o] = {});\n        var i = this.loading[o][a] = new WorkerTile(e);\n        i.abort = this.loadVectorData(e, t.bind(this));\n      }, VectorTileWorkerSource.prototype.reloadTile = function (e, r) {\n        function t(e, t) {\n          if (this.reloadCallback) {\n            var o = this.reloadCallback;\n            delete this.reloadCallback, this.parse(this.vectorTile, i.layerIndex, i.actor, o);\n          }\n\n          r(e, t);\n        }\n\n        var o = this.loaded[e.source],\n            a = e.uid,\n            i = this;\n\n        if (o && o[a]) {\n          var l = o[a];\n          \"parsing\" === l.status ? l.reloadCallback = r : \"done\" === l.status && l.parse(l.vectorTile, this.layerIndex, this.actor, t.bind(l));\n        }\n      }, VectorTileWorkerSource.prototype.abortTile = function (e) {\n        var r = this.loading[e.source],\n            t = e.uid;\n        r && r[t] && r[t].abort && (r[t].abort(), delete r[t]);\n      }, VectorTileWorkerSource.prototype.removeTile = function (e) {\n        var r = this.loaded[e.source],\n            t = e.uid;\n        r && r[t] && delete r[t];\n      }, VectorTileWorkerSource.prototype.loadVectorData = function (e, r) {\n        function t(e, t) {\n          if (e) return r(e);\n          var o = new vt.VectorTile(new Protobuf(t.data));\n          o.rawData = t.data, o.cacheControl = t.cacheControl, o.expires = t.expires, r(e, o);\n        }\n\n        var o = ajax.getArrayBuffer(e.url, t.bind(this));\n        return function () {\n          o.abort();\n        };\n      }, VectorTileWorkerSource.prototype.redoPlacement = function (e, r) {\n        var t = this.loaded[e.source],\n            o = this.loading[e.source],\n            a = e.uid;\n\n        if (t && t[a]) {\n          var i = t[a],\n              l = i.redoPlacement(e.angle, e.pitch, e.cameraToCenterDistance, e.cameraToTileDistance, e.showCollisionBoxes);\n          l.result && r(null, l.result, l.transferables);\n        } else o && o[a] && (o[a].angle = e.angle);\n      }, module.exports = VectorTileWorkerSource;\n    }, {\n      \"../util/ajax\": 193,\n      \"../util/util\": 215,\n      \"./worker_tile\": 100,\n      \"pbf\": 24,\n      \"vector-tile\": 33\n    }],\n    98: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ajax = _dereq_(\"../util/ajax\"),\n          ImageSource = _dereq_(\"./image_source\"),\n          VideoSource = function (t) {\n        function e(e, o, i, r) {\n          t.call(this, e, o, i, r), this.roundZoom = !0, this.type = \"video\", this.options = o;\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.load = function () {\n          var t = this,\n              e = this.options;\n          this.urls = e.urls, ajax.getVideo(e.urls, function (e, o) {\n            if (e) return t.fire(\"error\", {\n              error: e\n            });\n            t.video = o, t.video.loop = !0;\n            var i;\n            t.video.addEventListener(\"playing\", function () {\n              i = t.map.style.animationLoop.set(1 / 0), t.map._rerender();\n            }), t.video.addEventListener(\"pause\", function () {\n              t.map.style.animationLoop.cancel(i);\n            }), t.map && t.video.play(), t._finishLoading();\n          });\n        }, e.prototype.getVideo = function () {\n          return this.video;\n        }, e.prototype.onAdd = function (t) {\n          this.map || (this.load(), this.map = t, this.video && (this.video.play(), this.setCoordinates(this.coordinates)));\n        }, e.prototype.prepare = function () {\n          0 === Object.keys(this.tiles).length || this.video.readyState < 2 || this._prepareImage(this.map.painter.gl, this.video);\n        }, e.prototype.serialize = function () {\n          return {\n            type: \"video\",\n            urls: this.urls,\n            coordinates: this.coordinates\n          };\n        }, e;\n      }(ImageSource);\n\n      module.exports = VideoSource;\n    }, {\n      \"../util/ajax\": 193,\n      \"./image_source\": 85\n    }],\n    99: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Actor = _dereq_(\"../util/actor\"),\n          StyleLayerIndex = _dereq_(\"../style/style_layer_index\"),\n          VectorTileWorkerSource = _dereq_(\"./vector_tile_worker_source\"),\n          GeoJSONWorkerSource = _dereq_(\"./geojson_worker_source\"),\n          globalRTLTextPlugin = _dereq_(\"./rtl_text_plugin\"),\n          Worker = function Worker(e) {\n        var r = this;\n        this.self = e, this.actor = new Actor(e, this), this.layerIndexes = {}, this.workerSourceTypes = {\n          vector: VectorTileWorkerSource,\n          geojson: GeoJSONWorkerSource\n        }, this.workerSources = {}, this.self.registerWorkerSource = function (e, o) {\n          if (r.workerSourceTypes[e]) throw new Error('Worker source with name \"' + e + '\" already registered.');\n          r.workerSourceTypes[e] = o;\n        }, this.self.registerRTLTextPlugin = function (e) {\n          if (globalRTLTextPlugin.applyArabicShaping || globalRTLTextPlugin.processBidirectionalText) throw new Error(\"RTL text plugin already registered.\");\n          globalRTLTextPlugin.applyArabicShaping = e.applyArabicShaping, globalRTLTextPlugin.processBidirectionalText = e.processBidirectionalText;\n        };\n      };\n\n      Worker.prototype.setLayers = function (e, r) {\n        this.getLayerIndex(e).replace(r);\n      }, Worker.prototype.updateLayers = function (e, r) {\n        this.getLayerIndex(e).update(r.layers, r.removedIds, r.symbolOrder);\n      }, Worker.prototype.loadTile = function (e, r, o) {\n        this.getWorkerSource(e, r.type).loadTile(r, o);\n      }, Worker.prototype.reloadTile = function (e, r, o) {\n        this.getWorkerSource(e, r.type).reloadTile(r, o);\n      }, Worker.prototype.abortTile = function (e, r) {\n        this.getWorkerSource(e, r.type).abortTile(r);\n      }, Worker.prototype.removeTile = function (e, r) {\n        this.getWorkerSource(e, r.type).removeTile(r);\n      }, Worker.prototype.removeSource = function (e, r) {\n        var o = this.getWorkerSource(e, r.type);\n        void 0 !== o.removeSource && o.removeSource(r);\n      }, Worker.prototype.redoPlacement = function (e, r, o) {\n        this.getWorkerSource(e, r.type).redoPlacement(r, o);\n      }, Worker.prototype.loadWorkerSource = function (e, r, o) {\n        try {\n          this.self.importScripts(r.url), o();\n        } catch (e) {\n          o(e);\n        }\n      }, Worker.prototype.loadRTLTextPlugin = function (e, r, o) {\n        try {\n          globalRTLTextPlugin.applyArabicShaping || globalRTLTextPlugin.processBidirectionalText || this.self.importScripts(r);\n        } catch (e) {\n          o(e);\n        }\n      }, Worker.prototype.getLayerIndex = function (e) {\n        var r = this.layerIndexes[e];\n        return r || (r = this.layerIndexes[e] = new StyleLayerIndex()), r;\n      }, Worker.prototype.getWorkerSource = function (e, r) {\n        var o = this;\n\n        if (this.workerSources[e] || (this.workerSources[e] = {}), !this.workerSources[e][r]) {\n          var t = {\n            send: function send(r, t, i, n) {\n              o.actor.send(r, t, i, n, e);\n            }\n          };\n          this.workerSources[e][r] = new this.workerSourceTypes[r](t, this.getLayerIndex(e));\n        }\n\n        return this.workerSources[e][r];\n      }, module.exports = function (e) {\n        return new Worker(e);\n      };\n    }, {\n      \"../style/style_layer_index\": 156,\n      \"../util/actor\": 192,\n      \"./geojson_worker_source\": 83,\n      \"./rtl_text_plugin\": 90,\n      \"./vector_tile_worker_source\": 97\n    }],\n    100: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function recalculateLayers(e, i) {\n        for (var r = 0, t = e.layers; r < t.length; r += 1) {\n          var o = t[r];\n          o.recalculate(i);\n        }\n      }\n\n      function serializeBuckets(e, i) {\n        return e.filter(function (e) {\n          return !e.isEmpty();\n        }).map(function (e) {\n          return e.serialize(i);\n        });\n      }\n\n      var FeatureIndex = _dereq_(\"../data/feature_index\"),\n          CollisionTile = _dereq_(\"../symbol/collision_tile\"),\n          CollisionBoxArray = _dereq_(\"../symbol/collision_box\"),\n          DictionaryCoder = _dereq_(\"../util/dictionary_coder\"),\n          util = _dereq_(\"../util/util\"),\n          WorkerTile = function WorkerTile(e) {\n        this.coord = e.coord, this.uid = e.uid, this.zoom = e.zoom, this.tileSize = e.tileSize, this.source = e.source, this.overscaling = e.overscaling, this.angle = e.angle, this.pitch = e.pitch, this.cameraToCenterDistance = e.cameraToCenterDistance, this.cameraToTileDistance = e.cameraToTileDistance, this.showCollisionBoxes = e.showCollisionBoxes;\n      };\n\n      WorkerTile.prototype.parse = function (e, i, r, t) {\n        var o = this;\n        e.layers || (e = {\n          layers: {\n            _geojsonTileLayer: e\n          }\n        }), this.status = \"parsing\", this.data = e, this.collisionBoxArray = new CollisionBoxArray();\n        var s = new DictionaryCoder(Object.keys(e.layers).sort()),\n            a = new FeatureIndex(this.coord, this.overscaling);\n        a.bucketLayerIDs = {};\n        var n = {},\n            l = 0,\n            c = {\n          featureIndex: a,\n          iconDependencies: {},\n          glyphDependencies: {}\n        },\n            u = i.familiesBySource[this.source];\n\n        for (var h in u) {\n          var y = e.layers[h];\n\n          if (y) {\n            1 === y.version && util.warnOnce('Vector tile source \"' + o.source + '\" layer \"' + h + '\" does not use vector tile spec v2 and therefore may have some rendering errors.');\n\n            for (var m = s.encode(h), d = [], p = 0; p < y.length; p++) {\n              var v = y.feature(p);\n              v.index = p, v.sourceLayerIndex = m, d.push(v);\n            }\n\n            for (var f = 0, g = u[h]; f < g.length; f += 1) {\n              var T = g[f],\n                  x = T[0];\n\n              if (!(x.minzoom && o.zoom < x.minzoom || x.maxzoom && o.zoom >= x.maxzoom || x.layout && \"none\" === x.layout.visibility)) {\n                for (var B = 0, b = T; B < b.length; B += 1) {\n                  var k = b[B];\n                  k.recalculate(o.zoom);\n                }\n\n                var z = n[x.id] = x.createBucket({\n                  index: l,\n                  layers: T,\n                  zoom: o.zoom,\n                  overscaling: o.overscaling,\n                  collisionBoxArray: o.collisionBoxArray\n                });\n                z.populate(d, c), a.bucketLayerIDs[l] = T.map(function (e) {\n                  return e.id;\n                }), l++;\n              }\n            }\n          }\n        }\n\n        var D = function D(e) {\n          o.status = \"done\", a.paintPropertyStatistics = {};\n\n          for (var i in n) {\n            util.extend(a.paintPropertyStatistics, n[i].getPaintPropertyStatistics());\n          }\n\n          var r = [];\n          t(null, {\n            buckets: serializeBuckets(util.values(n), r),\n            featureIndex: a.serialize(r),\n            collisionTile: e.serialize(r),\n            collisionBoxArray: o.collisionBoxArray.serialize()\n          }, r);\n        };\n\n        this.symbolBuckets = [];\n\n        for (var C = i.symbolOrder.length - 1; C >= 0; C--) {\n          var w = n[i.symbolOrder[C]];\n          w && o.symbolBuckets.push(w);\n        }\n\n        if (0 === this.symbolBuckets.length) return D(new CollisionTile(this.angle, this.pitch, this.cameraToCenterDistance, this.cameraToTileDistance, this.collisionBoxArray));\n\n        var A = 0,\n            I = Object.keys(c.iconDependencies),\n            O = util.mapObject(c.glyphDependencies, function (e) {\n          return Object.keys(e).map(Number);\n        }),\n            L = function L(e) {\n          if (e) return t(e);\n\n          if (A++, 2 === A) {\n            for (var i = new CollisionTile(o.angle, o.pitch, o.cameraToCenterDistance, o.cameraToTileDistance, o.collisionBoxArray), r = 0, s = o.symbolBuckets; r < s.length; r += 1) {\n              var a = s[r];\n              recalculateLayers(a, o.zoom), a.prepare(O, I), a.place(i, o.showCollisionBoxes);\n            }\n\n            D(i);\n          }\n        };\n\n        Object.keys(O).length ? r.send(\"getGlyphs\", {\n          uid: this.uid,\n          stacks: O\n        }, function (e, i) {\n          O = i, L(e);\n        }) : L(), I.length ? r.send(\"getIcons\", {\n          icons: I\n        }, function (e, i) {\n          I = i, L(e);\n        }) : L();\n      }, WorkerTile.prototype.redoPlacement = function (e, i, r, t, o) {\n        var s = this;\n        if (this.angle = e, this.pitch = i, this.cameraToCenterDistance = r, this.cameraToTileDistance = t, \"done\" !== this.status) return {};\n\n        for (var a = new CollisionTile(this.angle, this.pitch, this.cameraToCenterDistance, this.cameraToTileDistance, this.collisionBoxArray), n = 0, l = s.symbolBuckets; n < l.length; n += 1) {\n          var c = l[n];\n          recalculateLayers(c, s.zoom), c.place(a, o);\n        }\n\n        var u = [];\n        return {\n          result: {\n            buckets: serializeBuckets(this.symbolBuckets, u),\n            collisionTile: a.serialize(u)\n          },\n          transferables: u\n        };\n      }, module.exports = WorkerTile;\n    }, {\n      \"../data/feature_index\": 54,\n      \"../symbol/collision_box\": 162,\n      \"../symbol/collision_tile\": 164,\n      \"../util/dictionary_coder\": 199,\n      \"../util/util\": 215\n    }],\n    101: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function deref(r, e) {\n        var f = {};\n\n        for (var t in r) {\n          \"ref\" !== t && (f[t] = r[t]);\n        }\n\n        return refProperties.forEach(function (r) {\n          r in e && (f[r] = e[r]);\n        }), f;\n      }\n\n      function derefLayers(r) {\n        r = r.slice();\n\n        for (var e = Object.create(null), f = 0; f < r.length; f++) {\n          e[r[f].id] = r[f];\n        }\n\n        for (var t = 0; t < r.length; t++) {\n          \"ref\" in r[t] && (r[t] = deref(r[t], e[r[t].ref]));\n        }\n\n        return r;\n      }\n\n      var refProperties = _dereq_(\"./util/ref_properties\");\n\n      module.exports = derefLayers;\n    }, {\n      \"./util/ref_properties\": 124\n    }],\n    102: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function diffSources(e, r, o, a) {\n        e = e || {}, r = r || {};\n        var s;\n\n        for (s in e) {\n          e.hasOwnProperty(s) && (r.hasOwnProperty(s) || (o.push({\n            command: operations.removeSource,\n            args: [s]\n          }), a[s] = !0));\n        }\n\n        for (s in r) {\n          r.hasOwnProperty(s) && (e.hasOwnProperty(s) ? isEqual(e[s], r[s]) || (o.push({\n            command: operations.removeSource,\n            args: [s]\n          }), o.push({\n            command: operations.addSource,\n            args: [s, r[s]]\n          }), a[s] = !0) : o.push({\n            command: operations.addSource,\n            args: [s, r[s]]\n          }));\n        }\n      }\n\n      function diffLayerPropertyChanges(e, r, o, a, s, t) {\n        e = e || {}, r = r || {};\n        var n;\n\n        for (n in e) {\n          e.hasOwnProperty(n) && (isEqual(e[n], r[n]) || o.push({\n            command: t,\n            args: [a, n, r[n], s]\n          }));\n        }\n\n        for (n in r) {\n          r.hasOwnProperty(n) && !e.hasOwnProperty(n) && (isEqual(e[n], r[n]) || o.push({\n            command: t,\n            args: [a, n, r[n], s]\n          }));\n        }\n      }\n\n      function pluckId(e) {\n        return e.id;\n      }\n\n      function indexById(e, r) {\n        return e[r.id] = r, e;\n      }\n\n      function diffLayers(e, r, o) {\n        e = e || [], r = r || [];\n        var a,\n            s,\n            t,\n            n,\n            i,\n            p,\n            m,\n            u = e.map(pluckId),\n            l = r.map(pluckId),\n            y = e.reduce(indexById, {}),\n            c = r.reduce(indexById, {}),\n            d = u.slice(),\n            h = Object.create(null);\n\n        for (a = 0, s = 0; a < u.length; a++) {\n          t = u[a], c.hasOwnProperty(t) ? s++ : (o.push({\n            command: operations.removeLayer,\n            args: [t]\n          }), d.splice(d.indexOf(t, s), 1));\n        }\n\n        for (a = 0, s = 0; a < l.length; a++) {\n          t = l[l.length - 1 - a], d[d.length - 1 - a] !== t && (y.hasOwnProperty(t) ? (o.push({\n            command: operations.removeLayer,\n            args: [t]\n          }), d.splice(d.lastIndexOf(t, d.length - s), 1)) : s++, p = d[d.length - a], o.push({\n            command: operations.addLayer,\n            args: [c[t], p]\n          }), d.splice(d.length - a, 0, t), h[t] = !0);\n        }\n\n        for (a = 0; a < l.length; a++) {\n          if (t = l[a], n = y[t], i = c[t], !h[t] && !isEqual(n, i)) if (isEqual(n.source, i.source) && isEqual(n[\"source-layer\"], i[\"source-layer\"]) && isEqual(n.type, i.type)) {\n            diffLayerPropertyChanges(n.layout, i.layout, o, t, null, operations.setLayoutProperty), diffLayerPropertyChanges(n.paint, i.paint, o, t, null, operations.setPaintProperty), isEqual(n.filter, i.filter) || o.push({\n              command: operations.setFilter,\n              args: [t, i.filter]\n            }), isEqual(n.minzoom, i.minzoom) && isEqual(n.maxzoom, i.maxzoom) || o.push({\n              command: operations.setLayerZoomRange,\n              args: [t, i.minzoom, i.maxzoom]\n            });\n\n            for (m in n) {\n              n.hasOwnProperty(m) && \"layout\" !== m && \"paint\" !== m && \"filter\" !== m && \"metadata\" !== m && \"minzoom\" !== m && \"maxzoom\" !== m && (0 === m.indexOf(\"paint.\") ? diffLayerPropertyChanges(n[m], i[m], o, t, m.slice(6), operations.setPaintProperty) : isEqual(n[m], i[m]) || o.push({\n                command: operations.setLayerProperty,\n                args: [t, m, i[m]]\n              }));\n            }\n\n            for (m in i) {\n              i.hasOwnProperty(m) && !n.hasOwnProperty(m) && \"layout\" !== m && \"paint\" !== m && \"filter\" !== m && \"metadata\" !== m && \"minzoom\" !== m && \"maxzoom\" !== m && (0 === m.indexOf(\"paint.\") ? diffLayerPropertyChanges(n[m], i[m], o, t, m.slice(6), operations.setPaintProperty) : isEqual(n[m], i[m]) || o.push({\n                command: operations.setLayerProperty,\n                args: [t, m, i[m]]\n              }));\n            }\n          } else o.push({\n            command: operations.removeLayer,\n            args: [t]\n          }), p = d[d.lastIndexOf(t) + 1], o.push({\n            command: operations.addLayer,\n            args: [i, p]\n          });\n        }\n      }\n\n      function diffStyles(e, r) {\n        if (!e) return [{\n          command: operations.setStyle,\n          args: [r]\n        }];\n        var o = [];\n\n        try {\n          if (!isEqual(e.version, r.version)) return [{\n            command: operations.setStyle,\n            args: [r]\n          }];\n          isEqual(e.center, r.center) || o.push({\n            command: operations.setCenter,\n            args: [r.center]\n          }), isEqual(e.zoom, r.zoom) || o.push({\n            command: operations.setZoom,\n            args: [r.zoom]\n          }), isEqual(e.bearing, r.bearing) || o.push({\n            command: operations.setBearing,\n            args: [r.bearing]\n          }), isEqual(e.pitch, r.pitch) || o.push({\n            command: operations.setPitch,\n            args: [r.pitch]\n          }), isEqual(e.sprite, r.sprite) || o.push({\n            command: operations.setSprite,\n            args: [r.sprite]\n          }), isEqual(e.glyphs, r.glyphs) || o.push({\n            command: operations.setGlyphs,\n            args: [r.glyphs]\n          }), isEqual(e.transition, r.transition) || o.push({\n            command: operations.setTransition,\n            args: [r.transition]\n          }), isEqual(e.light, r.light) || o.push({\n            command: operations.setLight,\n            args: [r.light]\n          });\n          var a = {},\n              s = [];\n          diffSources(e.sources, r.sources, s, a);\n          var t = [];\n          e.layers && e.layers.forEach(function (e) {\n            a[e.source] ? o.push({\n              command: operations.removeLayer,\n              args: [e.id]\n            }) : t.push(e);\n          }), o = o.concat(s), diffLayers(t, r.layers, o);\n        } catch (e) {\n          console.warn(\"Unable to compute style diff:\", e), o = [{\n            command: operations.setStyle,\n            args: [r]\n          }];\n        }\n\n        return o;\n      }\n\n      var isEqual = _dereq_(\"lodash.isequal\"),\n          operations = {\n        setStyle: \"setStyle\",\n        addLayer: \"addLayer\",\n        removeLayer: \"removeLayer\",\n        setPaintProperty: \"setPaintProperty\",\n        setLayoutProperty: \"setLayoutProperty\",\n        setFilter: \"setFilter\",\n        addSource: \"addSource\",\n        removeSource: \"removeSource\",\n        setLayerZoomRange: \"setLayerZoomRange\",\n        setLayerProperty: \"setLayerProperty\",\n        setCenter: \"setCenter\",\n        setZoom: \"setZoom\",\n        setBearing: \"setBearing\",\n        setPitch: \"setPitch\",\n        setSprite: \"setSprite\",\n        setGlyphs: \"setGlyphs\",\n        setTransition: \"setTransition\",\n        setLight: \"setLight\"\n      };\n\n      module.exports = diffStyles, module.exports.operations = operations;\n    }, {\n      \"lodash.isequal\": 115\n    }],\n    103: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function ValidationError(r, i) {\n        for (var t = [], o = arguments.length - 2; o-- > 0;) {\n          t[o] = arguments[o + 2];\n        }\n\n        this.message = (r ? r + \": \" : \"\") + format.apply(format, t), null !== i && void 0 !== i && i.__line__ && (this.line = i.__line__);\n      }\n\n      var format = _dereq_(\"util\").format;\n\n      module.exports = ValidationError;\n    }, {\n      \"util\": 32\n    }],\n    104: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createFilter(e) {\n        return new Function(\"f\", \"var p = (f && f.properties || {}); return \" + compile(e));\n      }\n\n      function compile(e) {\n        if (!e) return \"true\";\n        var i = e[0];\n        if (e.length <= 1) return \"any\" === i ? \"false\" : \"true\";\n        var n = \"==\" === i ? compileComparisonOp(e[1], e[2], \"===\", !1) : \"!=\" === i ? compileComparisonOp(e[1], e[2], \"!==\", !1) : \"<\" === i || \">\" === i || \"<=\" === i || \">=\" === i ? compileComparisonOp(e[1], e[2], i, !0) : \"any\" === i ? compileLogicalOp(e.slice(1), \"||\") : \"all\" === i ? compileLogicalOp(e.slice(1), \"&&\") : \"none\" === i ? compileNegation(compileLogicalOp(e.slice(1), \"||\")) : \"in\" === i ? compileInOp(e[1], e.slice(2)) : \"!in\" === i ? compileNegation(compileInOp(e[1], e.slice(2))) : \"has\" === i ? compileHasOp(e[1]) : \"!has\" === i ? compileNegation(compileHasOp(e[1])) : \"true\";\n        return \"(\" + n + \")\";\n      }\n\n      function compilePropertyReference(e) {\n        return \"$type\" === e ? \"f.type\" : \"$id\" === e ? \"f.id\" : \"p[\" + JSON.stringify(e) + \"]\";\n      }\n\n      function compileComparisonOp(e, i, n, r) {\n        var o = compilePropertyReference(e),\n            t = \"$type\" === e ? types.indexOf(i) : JSON.stringify(i);\n        return (r ? \"typeof \" + o + \"=== typeof \" + t + \"&&\" : \"\") + o + n + t;\n      }\n\n      function compileLogicalOp(e, i) {\n        return e.map(compile).join(i);\n      }\n\n      function compileInOp(e, i) {\n        \"$type\" === e && (i = i.map(function (e) {\n          return types.indexOf(e);\n        }));\n        var n = JSON.stringify(i.sort(compare)),\n            r = compilePropertyReference(e);\n        return i.length <= 200 ? n + \".indexOf(\" + r + \") !== -1\" : \"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }(\" + r + \", \" + n + \",0,\" + (i.length - 1) + \")\";\n      }\n\n      function compileHasOp(e) {\n        return \"$id\" === e ? '\"id\" in f' : JSON.stringify(e) + \" in p\";\n      }\n\n      function compileNegation(e) {\n        return \"!(\" + e + \")\";\n      }\n\n      function compare(e, i) {\n        return e < i ? -1 : e > i ? 1 : 0;\n      }\n\n      module.exports = createFilter;\n      var types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"];\n    }, {}],\n    105: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function xyz2lab(r) {\n        return r > t3 ? Math.pow(r, 1 / 3) : r / t2 + t0;\n      }\n\n      function lab2xyz(r) {\n        return r > t1 ? r * r * r : t2 * (r - t0);\n      }\n\n      function xyz2rgb(r) {\n        return 255 * (r <= .0031308 ? 12.92 * r : 1.055 * Math.pow(r, 1 / 2.4) - .055);\n      }\n\n      function rgb2xyz(r) {\n        return r /= 255, r <= .04045 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4);\n      }\n\n      function rgbToLab(r) {\n        var t = rgb2xyz(r[0]),\n            a = rgb2xyz(r[1]),\n            n = rgb2xyz(r[2]),\n            b = xyz2lab((.4124564 * t + .3575761 * a + .1804375 * n) / Xn),\n            o = xyz2lab((.2126729 * t + .7151522 * a + .072175 * n) / Yn),\n            g = xyz2lab((.0193339 * t + .119192 * a + .9503041 * n) / Zn);\n        return [116 * o - 16, 500 * (b - o), 200 * (o - g), r[3]];\n      }\n\n      function labToRgb(r) {\n        var t = (r[0] + 16) / 116,\n            a = isNaN(r[1]) ? t : t + r[1] / 500,\n            n = isNaN(r[2]) ? t : t - r[2] / 200;\n        return t = Yn * lab2xyz(t), a = Xn * lab2xyz(a), n = Zn * lab2xyz(n), [xyz2rgb(3.2404542 * a - 1.5371385 * t - .4985314 * n), xyz2rgb(-.969266 * a + 1.8760108 * t + .041556 * n), xyz2rgb(.0556434 * a - .2040259 * t + 1.0572252 * n), r[3]];\n      }\n\n      function rgbToHcl(r) {\n        var t = rgbToLab(r),\n            a = t[0],\n            n = t[1],\n            b = t[2],\n            o = Math.atan2(b, n) * rad2deg;\n        return [o < 0 ? o + 360 : o, Math.sqrt(n * n + b * b), a, r[3]];\n      }\n\n      function hclToRgb(r) {\n        var t = r[0] * deg2rad,\n            a = r[1],\n            n = r[2];\n        return labToRgb([n, Math.cos(t) * a, Math.sin(t) * a, r[3]]);\n      }\n\n      var Xn = .95047,\n          Yn = 1,\n          Zn = 1.08883,\n          t0 = 4 / 29,\n          t1 = 6 / 29,\n          t2 = 3 * t1 * t1,\n          t3 = t1 * t1 * t1,\n          deg2rad = Math.PI / 180,\n          rad2deg = 180 / Math.PI;\n      module.exports = {\n        lab: {\n          forward: rgbToLab,\n          reverse: labToRgb\n        },\n        hcl: {\n          forward: rgbToHcl,\n          reverse: hclToRgb\n        }\n      };\n    }, {}],\n    106: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function identityFunction(t) {\n        return t;\n      }\n\n      function createFunction(t, e) {\n        var o,\n            n = \"color\" === e.type;\n\n        if (isFunctionDefinition(t)) {\n          var r = t.stops && \"object\" == typeof t.stops[0][0],\n              a = r || void 0 !== t.property,\n              i = r || !a,\n              s = t.type || (\"interpolated\" === e.function ? \"exponential\" : \"interval\");\n          n && (t = extend({}, t), t.stops && (t.stops = t.stops.map(function (t) {\n            return [t[0], parseColor(t[1])];\n          })), t.default ? t.default = parseColor(t.default) : t.default = parseColor(e.default));\n          var u, p, l;\n          if (\"exponential\" === s) u = evaluateExponentialFunction;else if (\"interval\" === s) u = evaluateIntervalFunction;else if (\"categorical\" === s) {\n            u = evaluateCategoricalFunction, p = Object.create(null);\n\n            for (var c = 0, f = t.stops; c < f.length; c += 1) {\n              var v = f[c];\n              p[v[0]] = v[1];\n            }\n\n            l = typeof t.stops[0][0];\n          } else {\n            if (\"identity\" !== s) throw new Error('Unknown function type \"' + s + '\"');\n            u = evaluateIdentityFunction;\n          }\n          var d;\n\n          if (t.colorSpace && \"rgb\" !== t.colorSpace) {\n            if (!colorSpaces[t.colorSpace]) throw new Error(\"Unknown color space: \" + t.colorSpace);\n            var y = colorSpaces[t.colorSpace];\n            t = JSON.parse(JSON.stringify(t));\n\n            for (var F = 0; F < t.stops.length; F++) {\n              t.stops[F] = [t.stops[F][0], y.forward(t.stops[F][1])];\n            }\n\n            d = y.reverse;\n          } else d = identityFunction;\n\n          if (r) {\n            for (var h = {}, g = [], C = 0; C < t.stops.length; C++) {\n              var m = t.stops[C],\n                  S = m[0].zoom;\n              void 0 === h[S] && (h[S] = {\n                zoom: S,\n                type: t.type,\n                property: t.property,\n                default: t.default,\n                stops: []\n              }, g.push(S)), h[S].stops.push([m[0].value, m[1]]);\n            }\n\n            for (var T = [], x = 0, b = g; x < b.length; x += 1) {\n              var q = b[x];\n              T.push([h[q].zoom, createFunction(h[q], e)]);\n            }\n\n            o = function o(_o2, n) {\n              return d(evaluateExponentialFunction({\n                stops: T,\n                base: t.base\n              }, e, _o2)(_o2, n));\n            }, o.isFeatureConstant = !1, o.isZoomConstant = !1;\n          } else i ? (o = function o(_o3) {\n            return d(u(t, e, _o3, p, l));\n          }, o.isFeatureConstant = !0, o.isZoomConstant = !1) : (o = function o(_o4, n) {\n            var r = n[t.property];\n            return void 0 === r ? coalesce(t.default, e.default) : d(u(t, e, r, p, l));\n          }, o.isFeatureConstant = !1, o.isZoomConstant = !0);\n        } else n && t && (t = parseColor(t)), o = function o() {\n          return t;\n        }, o.isFeatureConstant = !0, o.isZoomConstant = !0;\n\n        return o;\n      }\n\n      function coalesce(t, e, o) {\n        return void 0 !== t ? t : void 0 !== e ? e : void 0 !== o ? o : void 0;\n      }\n\n      function evaluateCategoricalFunction(t, e, o, n, r) {\n        var a = typeof o === r ? n[o] : void 0;\n        return coalesce(a, t.default, e.default);\n      }\n\n      function evaluateIntervalFunction(t, e, o) {\n        if (\"number\" !== getType(o)) return coalesce(t.default, e.default);\n        var n = t.stops.length;\n        if (1 === n) return t.stops[0][1];\n        if (o <= t.stops[0][0]) return t.stops[0][1];\n        if (o >= t.stops[n - 1][0]) return t.stops[n - 1][1];\n        var r = findStopLessThanOrEqualTo(t.stops, o);\n        return t.stops[r][1];\n      }\n\n      function evaluateExponentialFunction(t, e, o) {\n        var n = void 0 !== t.base ? t.base : 1;\n        if (\"number\" !== getType(o)) return coalesce(t.default, e.default);\n        var r = t.stops.length;\n        if (1 === r) return t.stops[0][1];\n        if (o <= t.stops[0][0]) return t.stops[0][1];\n        if (o >= t.stops[r - 1][0]) return t.stops[r - 1][1];\n        var a = findStopLessThanOrEqualTo(t.stops, o),\n            i = interpolationFactor(o, n, t.stops[a][0], t.stops[a + 1][0]),\n            s = t.stops[a][1],\n            u = t.stops[a + 1][1],\n            p = interpolate[e.type] || identityFunction;\n        return \"function\" == typeof s ? function () {\n          for (var t = [], e = arguments.length; e--;) {\n            t[e] = arguments[e];\n          }\n\n          var o = s.apply(void 0, t),\n              n = u.apply(void 0, t);\n          if (void 0 !== o && void 0 !== n) return p(o, n, i);\n        } : p(s, u, i);\n      }\n\n      function evaluateIdentityFunction(t, e, o) {\n        return \"color\" === e.type ? o = parseColor(o) : getType(o) !== e.type && (o = void 0), coalesce(o, t.default, e.default);\n      }\n\n      function findStopLessThanOrEqualTo(t, e) {\n        for (var o, n, r = t.length, a = 0, i = r - 1, s = 0; a <= i;) {\n          if (s = Math.floor((a + i) / 2), o = t[s][0], n = t[s + 1][0], e === o || e > o && e < n) return s;\n          o < e ? a = s + 1 : o > e && (i = s - 1);\n        }\n\n        return Math.max(s - 1, 0);\n      }\n\n      function isFunctionDefinition(t) {\n        return \"object\" == typeof t && (t.stops || \"identity\" === t.type);\n      }\n\n      function interpolationFactor(t, e, o, n) {\n        var r = n - o,\n            a = t - o;\n        return 1 === e ? a / r : (Math.pow(e, a) - 1) / (Math.pow(e, r) - 1);\n      }\n\n      var colorSpaces = _dereq_(\"./color_spaces\"),\n          parseColor = _dereq_(\"../util/parse_color\"),\n          extend = _dereq_(\"../util/extend\"),\n          getType = _dereq_(\"../util/get_type\"),\n          interpolate = _dereq_(\"../util/interpolate\");\n\n      module.exports = createFunction, module.exports.isFunctionDefinition = isFunctionDefinition, module.exports.interpolationFactor = interpolationFactor, module.exports.findStopLessThanOrEqualTo = findStopLessThanOrEqualTo;\n    }, {\n      \"../util/extend\": 120,\n      \"../util/get_type\": 121,\n      \"../util/interpolate\": 122,\n      \"../util/parse_color\": 123,\n      \"./color_spaces\": 105\n    }],\n    107: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function key(r) {\n        return stringify(refProperties.map(function (e) {\n          return r[e];\n        }));\n      }\n\n      function groupByLayout(r) {\n        for (var e = {}, t = 0; t < r.length; t++) {\n          var i = key(r[t]),\n              u = e[i];\n          u || (u = e[i] = []), u.push(r[t]);\n        }\n\n        var n = [];\n\n        for (var o in e) {\n          n.push(e[o]);\n        }\n\n        return n;\n      }\n\n      var refProperties = _dereq_(\"./util/ref_properties\"),\n          stringify = _dereq_(\"fast-stable-stringify\");\n\n      module.exports = groupByLayout;\n    }, {\n      \"./util/ref_properties\": 124,\n      \"fast-stable-stringify\": 109\n    }],\n    108: [function (_dereq_, module, exports) {\n      function clamp_css_byte(e) {\n        return e = Math.round(e), e < 0 ? 0 : e > 255 ? 255 : e;\n      }\n\n      function clamp_css_float(e) {\n        return e < 0 ? 0 : e > 1 ? 1 : e;\n      }\n\n      function parse_css_int(e) {\n        return clamp_css_byte(\"%\" === e[e.length - 1] ? parseFloat(e) / 100 * 255 : parseInt(e));\n      }\n\n      function parse_css_float(e) {\n        return clamp_css_float(\"%\" === e[e.length - 1] ? parseFloat(e) / 100 : parseFloat(e));\n      }\n\n      function css_hue_to_rgb(e, r, l) {\n        return l < 0 ? l += 1 : l > 1 && (l -= 1), 6 * l < 1 ? e + (r - e) * l * 6 : 2 * l < 1 ? r : 3 * l < 2 ? e + (r - e) * (2 / 3 - l) * 6 : e;\n      }\n\n      function parseCSSColor(e) {\n        var r = e.replace(/ /g, \"\").toLowerCase();\n        if (r in kCSSColorTable) return kCSSColorTable[r].slice();\n\n        if (\"#\" === r[0]) {\n          if (4 === r.length) {\n            var l = parseInt(r.substr(1), 16);\n            return l >= 0 && l <= 4095 ? [(3840 & l) >> 4 | (3840 & l) >> 8, 240 & l | (240 & l) >> 4, 15 & l | (15 & l) << 4, 1] : null;\n          }\n\n          if (7 === r.length) {\n            var l = parseInt(r.substr(1), 16);\n            return l >= 0 && l <= 16777215 ? [(16711680 & l) >> 16, (65280 & l) >> 8, 255 & l, 1] : null;\n          }\n\n          return null;\n        }\n\n        var a = r.indexOf(\"(\"),\n            t = r.indexOf(\")\");\n\n        if (a !== -1 && t + 1 === r.length) {\n          var n = r.substr(0, a),\n              s = r.substr(a + 1, t - (a + 1)).split(\",\"),\n              o = 1;\n\n          switch (n) {\n            case \"rgba\":\n              if (4 !== s.length) return null;\n              o = parse_css_float(s.pop());\n\n            case \"rgb\":\n              return 3 !== s.length ? null : [parse_css_int(s[0]), parse_css_int(s[1]), parse_css_int(s[2]), o];\n\n            case \"hsla\":\n              if (4 !== s.length) return null;\n              o = parse_css_float(s.pop());\n\n            case \"hsl\":\n              if (3 !== s.length) return null;\n              var i = (parseFloat(s[0]) % 360 + 360) % 360 / 360,\n                  u = parse_css_float(s[1]),\n                  g = parse_css_float(s[2]),\n                  d = g <= .5 ? g * (u + 1) : g + u - g * u,\n                  c = 2 * g - d;\n              return [clamp_css_byte(255 * css_hue_to_rgb(c, d, i + 1 / 3)), clamp_css_byte(255 * css_hue_to_rgb(c, d, i)), clamp_css_byte(255 * css_hue_to_rgb(c, d, i - 1 / 3)), o];\n\n            default:\n              return null;\n          }\n        }\n\n        return null;\n      }\n\n      var kCSSColorTable = {\n        transparent: [0, 0, 0, 0],\n        aliceblue: [240, 248, 255, 1],\n        antiquewhite: [250, 235, 215, 1],\n        aqua: [0, 255, 255, 1],\n        aquamarine: [127, 255, 212, 1],\n        azure: [240, 255, 255, 1],\n        beige: [245, 245, 220, 1],\n        bisque: [255, 228, 196, 1],\n        black: [0, 0, 0, 1],\n        blanchedalmond: [255, 235, 205, 1],\n        blue: [0, 0, 255, 1],\n        blueviolet: [138, 43, 226, 1],\n        brown: [165, 42, 42, 1],\n        burlywood: [222, 184, 135, 1],\n        cadetblue: [95, 158, 160, 1],\n        chartreuse: [127, 255, 0, 1],\n        chocolate: [210, 105, 30, 1],\n        coral: [255, 127, 80, 1],\n        cornflowerblue: [100, 149, 237, 1],\n        cornsilk: [255, 248, 220, 1],\n        crimson: [220, 20, 60, 1],\n        cyan: [0, 255, 255, 1],\n        darkblue: [0, 0, 139, 1],\n        darkcyan: [0, 139, 139, 1],\n        darkgoldenrod: [184, 134, 11, 1],\n        darkgray: [169, 169, 169, 1],\n        darkgreen: [0, 100, 0, 1],\n        darkgrey: [169, 169, 169, 1],\n        darkkhaki: [189, 183, 107, 1],\n        darkmagenta: [139, 0, 139, 1],\n        darkolivegreen: [85, 107, 47, 1],\n        darkorange: [255, 140, 0, 1],\n        darkorchid: [153, 50, 204, 1],\n        darkred: [139, 0, 0, 1],\n        darksalmon: [233, 150, 122, 1],\n        darkseagreen: [143, 188, 143, 1],\n        darkslateblue: [72, 61, 139, 1],\n        darkslategray: [47, 79, 79, 1],\n        darkslategrey: [47, 79, 79, 1],\n        darkturquoise: [0, 206, 209, 1],\n        darkviolet: [148, 0, 211, 1],\n        deeppink: [255, 20, 147, 1],\n        deepskyblue: [0, 191, 255, 1],\n        dimgray: [105, 105, 105, 1],\n        dimgrey: [105, 105, 105, 1],\n        dodgerblue: [30, 144, 255, 1],\n        firebrick: [178, 34, 34, 1],\n        floralwhite: [255, 250, 240, 1],\n        forestgreen: [34, 139, 34, 1],\n        fuchsia: [255, 0, 255, 1],\n        gainsboro: [220, 220, 220, 1],\n        ghostwhite: [248, 248, 255, 1],\n        gold: [255, 215, 0, 1],\n        goldenrod: [218, 165, 32, 1],\n        gray: [128, 128, 128, 1],\n        green: [0, 128, 0, 1],\n        greenyellow: [173, 255, 47, 1],\n        grey: [128, 128, 128, 1],\n        honeydew: [240, 255, 240, 1],\n        hotpink: [255, 105, 180, 1],\n        indianred: [205, 92, 92, 1],\n        indigo: [75, 0, 130, 1],\n        ivory: [255, 255, 240, 1],\n        khaki: [240, 230, 140, 1],\n        lavender: [230, 230, 250, 1],\n        lavenderblush: [255, 240, 245, 1],\n        lawngreen: [124, 252, 0, 1],\n        lemonchiffon: [255, 250, 205, 1],\n        lightblue: [173, 216, 230, 1],\n        lightcoral: [240, 128, 128, 1],\n        lightcyan: [224, 255, 255, 1],\n        lightgoldenrodyellow: [250, 250, 210, 1],\n        lightgray: [211, 211, 211, 1],\n        lightgreen: [144, 238, 144, 1],\n        lightgrey: [211, 211, 211, 1],\n        lightpink: [255, 182, 193, 1],\n        lightsalmon: [255, 160, 122, 1],\n        lightseagreen: [32, 178, 170, 1],\n        lightskyblue: [135, 206, 250, 1],\n        lightslategray: [119, 136, 153, 1],\n        lightslategrey: [119, 136, 153, 1],\n        lightsteelblue: [176, 196, 222, 1],\n        lightyellow: [255, 255, 224, 1],\n        lime: [0, 255, 0, 1],\n        limegreen: [50, 205, 50, 1],\n        linen: [250, 240, 230, 1],\n        magenta: [255, 0, 255, 1],\n        maroon: [128, 0, 0, 1],\n        mediumaquamarine: [102, 205, 170, 1],\n        mediumblue: [0, 0, 205, 1],\n        mediumorchid: [186, 85, 211, 1],\n        mediumpurple: [147, 112, 219, 1],\n        mediumseagreen: [60, 179, 113, 1],\n        mediumslateblue: [123, 104, 238, 1],\n        mediumspringgreen: [0, 250, 154, 1],\n        mediumturquoise: [72, 209, 204, 1],\n        mediumvioletred: [199, 21, 133, 1],\n        midnightblue: [25, 25, 112, 1],\n        mintcream: [245, 255, 250, 1],\n        mistyrose: [255, 228, 225, 1],\n        moccasin: [255, 228, 181, 1],\n        navajowhite: [255, 222, 173, 1],\n        navy: [0, 0, 128, 1],\n        oldlace: [253, 245, 230, 1],\n        olive: [128, 128, 0, 1],\n        olivedrab: [107, 142, 35, 1],\n        orange: [255, 165, 0, 1],\n        orangered: [255, 69, 0, 1],\n        orchid: [218, 112, 214, 1],\n        palegoldenrod: [238, 232, 170, 1],\n        palegreen: [152, 251, 152, 1],\n        paleturquoise: [175, 238, 238, 1],\n        palevioletred: [219, 112, 147, 1],\n        papayawhip: [255, 239, 213, 1],\n        peachpuff: [255, 218, 185, 1],\n        peru: [205, 133, 63, 1],\n        pink: [255, 192, 203, 1],\n        plum: [221, 160, 221, 1],\n        powderblue: [176, 224, 230, 1],\n        purple: [128, 0, 128, 1],\n        rebeccapurple: [102, 51, 153, 1],\n        red: [255, 0, 0, 1],\n        rosybrown: [188, 143, 143, 1],\n        royalblue: [65, 105, 225, 1],\n        saddlebrown: [139, 69, 19, 1],\n        salmon: [250, 128, 114, 1],\n        sandybrown: [244, 164, 96, 1],\n        seagreen: [46, 139, 87, 1],\n        seashell: [255, 245, 238, 1],\n        sienna: [160, 82, 45, 1],\n        silver: [192, 192, 192, 1],\n        skyblue: [135, 206, 235, 1],\n        slateblue: [106, 90, 205, 1],\n        slategray: [112, 128, 144, 1],\n        slategrey: [112, 128, 144, 1],\n        snow: [255, 250, 250, 1],\n        springgreen: [0, 255, 127, 1],\n        steelblue: [70, 130, 180, 1],\n        tan: [210, 180, 140, 1],\n        teal: [0, 128, 128, 1],\n        thistle: [216, 191, 216, 1],\n        tomato: [255, 99, 71, 1],\n        turquoise: [64, 224, 208, 1],\n        violet: [238, 130, 238, 1],\n        wheat: [245, 222, 179, 1],\n        white: [255, 255, 255, 1],\n        whitesmoke: [245, 245, 245, 1],\n        yellow: [255, 255, 0, 1],\n        yellowgreen: [154, 205, 50, 1]\n      };\n\n      try {\n        exports.parseCSSColor = parseCSSColor;\n      } catch (e) {}\n    }, {}],\n    109: [function (_dereq_, module, exports) {\n      function sss(r) {\n        var e, t, s, n, u, a;\n\n        switch (typeof r) {\n          case \"object\":\n            if (null === r) return null;\n\n            if (isArray(r)) {\n              for (s = \"[\", t = r.length - 1, e = 0; e < t; e++) {\n                s += sss(r[e]) + \",\";\n              }\n\n              return t > -1 && (s += sss(r[e])), s + \"]\";\n            }\n\n            for (n = objKeys(r).sort(), t = n.length, s = \"{\", u = n[e = 0], a = t > 0 && void 0 !== r[u]; e < t;) {\n              a ? (s += '\"' + u.replace(strReg, strReplace) + '\":' + sss(r[u]), u = n[++e], a = e < t && void 0 !== r[u], a && (s += \",\")) : (u = n[++e], a = e < t && void 0 !== r[u]);\n            }\n\n            return s + \"}\";\n\n          case \"undefined\":\n            return null;\n\n          case \"string\":\n            return '\"' + r.replace(strReg, strReplace) + '\"';\n\n          default:\n            return r;\n        }\n      }\n\n      var toString = {}.toString,\n          isArray = Array.isArray || function (r) {\n        return \"[object Array]\" === toString.call(r);\n      },\n          objKeys = Object.keys || function (r) {\n        var e = [];\n\n        for (var t in r) {\n          r.hasOwnProperty(t) && e.push(t);\n        }\n\n        return e;\n      },\n          strReg = /[\\u0000-\\u001f\"\\\\]/g,\n          strReplace = function strReplace(r) {\n        var e = r.charCodeAt(0);\n\n        switch (e) {\n          case 34:\n            return '\\\\\"';\n\n          case 92:\n            return \"\\\\\\\\\";\n\n          case 12:\n            return \"\\\\f\";\n\n          case 10:\n            return \"\\\\n\";\n\n          case 13:\n            return \"\\\\r\";\n\n          case 9:\n            return \"\\\\t\";\n\n          case 8:\n            return \"\\\\b\";\n\n          default:\n            return e > 15 ? \"\\\\u00\" + e.toString(16) : \"\\\\u000\" + e.toString(16);\n        }\n      };\n\n      module.exports = function (r) {\n        if (void 0 !== r) return \"\" + sss(r);\n      }, module.exports.stringSearch = strReg, module.exports.stringReplace = strReplace;\n    }, {}],\n    110: [function (_dereq_, module, exports) {\n      function isObjectLike(r) {\n        return !!r && \"object\" == typeof r;\n      }\n\n      function arraySome(r, e) {\n        for (var a = -1, t = r.length; ++a < t;) {\n          if (e(r[a], a, r)) return !0;\n        }\n\n        return !1;\n      }\n\n      function baseIsEqual(r, e, a, t, o, n) {\n        return r === e || (null == r || null == e || !isObject(r) && !isObjectLike(e) ? r !== r && e !== e : baseIsEqualDeep(r, e, baseIsEqual, a, t, o, n));\n      }\n\n      function baseIsEqualDeep(r, e, a, t, o, n, u) {\n        var c = isArray(r),\n            s = isArray(e),\n            i = arrayTag,\n            g = arrayTag;\n        c || (i = objToString.call(r), i == argsTag ? i = objectTag : i != objectTag && (c = isTypedArray(r))), s || (g = objToString.call(e), g == argsTag ? g = objectTag : g != objectTag && (s = isTypedArray(e)));\n        var b = i == objectTag,\n            l = g == objectTag,\n            f = i == g;\n        if (f && !c && !b) return equalByTag(r, e, i);\n\n        if (!o) {\n          var y = b && hasOwnProperty.call(r, \"__wrapped__\"),\n              T = l && hasOwnProperty.call(e, \"__wrapped__\");\n          if (y || T) return a(y ? r.value() : r, T ? e.value() : e, t, o, n, u);\n        }\n\n        if (!f) return !1;\n        n || (n = []), u || (u = []);\n\n        for (var j = n.length; j--;) {\n          if (n[j] == r) return u[j] == e;\n        }\n\n        n.push(r), u.push(e);\n        var p = (c ? equalArrays : equalObjects)(r, e, a, t, o, n, u);\n        return n.pop(), u.pop(), p;\n      }\n\n      function equalArrays(r, e, a, t, o, n, u) {\n        var c = -1,\n            s = r.length,\n            i = e.length;\n        if (s != i && !(o && i > s)) return !1;\n\n        for (; ++c < s;) {\n          var g = r[c],\n              b = e[c],\n              l = t ? t(o ? b : g, o ? g : b, c) : void 0;\n\n          if (void 0 !== l) {\n            if (l) continue;\n            return !1;\n          }\n\n          if (o) {\n            if (!arraySome(e, function (r) {\n              return g === r || a(g, r, t, o, n, u);\n            })) return !1;\n          } else if (g !== b && !a(g, b, t, o, n, u)) return !1;\n        }\n\n        return !0;\n      }\n\n      function equalByTag(r, e, a) {\n        switch (a) {\n          case boolTag:\n          case dateTag:\n            return +r == +e;\n\n          case errorTag:\n            return r.name == e.name && r.message == e.message;\n\n          case numberTag:\n            return r != +r ? e != +e : r == +e;\n\n          case regexpTag:\n          case stringTag:\n            return r == e + \"\";\n        }\n\n        return !1;\n      }\n\n      function equalObjects(r, e, a, t, o, n, u) {\n        var c = keys(r),\n            s = c.length,\n            i = keys(e),\n            g = i.length;\n        if (s != g && !o) return !1;\n\n        for (var b = s; b--;) {\n          var l = c[b];\n          if (!(o ? l in e : hasOwnProperty.call(e, l))) return !1;\n        }\n\n        for (var f = o; ++b < s;) {\n          l = c[b];\n          var y = r[l],\n              T = e[l],\n              j = t ? t(o ? T : y, o ? y : T, l) : void 0;\n          if (!(void 0 === j ? a(y, T, t, o, n, u) : j)) return !1;\n          f || (f = \"constructor\" == l);\n        }\n\n        if (!f) {\n          var p = r.constructor,\n              v = e.constructor;\n          if (p != v && \"constructor\" in r && \"constructor\" in e && !(\"function\" == typeof p && p instanceof p && \"function\" == typeof v && v instanceof v)) return !1;\n        }\n\n        return !0;\n      }\n\n      function isObject(r) {\n        var e = typeof r;\n        return !!r && (\"object\" == e || \"function\" == e);\n      }\n\n      var isArray = _dereq_(\"lodash.isarray\"),\n          isTypedArray = _dereq_(\"lodash.istypedarray\"),\n          keys = _dereq_(\"lodash.keys\"),\n          argsTag = \"[object Arguments]\",\n          arrayTag = \"[object Array]\",\n          boolTag = \"[object Boolean]\",\n          dateTag = \"[object Date]\",\n          errorTag = \"[object Error]\",\n          numberTag = \"[object Number]\",\n          objectTag = \"[object Object]\",\n          regexpTag = \"[object RegExp]\",\n          stringTag = \"[object String]\",\n          objectProto = Object.prototype,\n          hasOwnProperty = objectProto.hasOwnProperty,\n          objToString = objectProto.toString;\n\n      module.exports = baseIsEqual;\n    }, {\n      \"lodash.isarray\": 114,\n      \"lodash.istypedarray\": 116,\n      \"lodash.keys\": 117\n    }],\n    111: [function (_dereq_, module, exports) {\n      function bindCallback(n, t, r) {\n        if (\"function\" != typeof n) return identity;\n        if (void 0 === t) return n;\n\n        switch (r) {\n          case 1:\n            return function (r) {\n              return n.call(t, r);\n            };\n\n          case 3:\n            return function (r, e, u) {\n              return n.call(t, r, e, u);\n            };\n\n          case 4:\n            return function (r, e, u, c) {\n              return n.call(t, r, e, u, c);\n            };\n\n          case 5:\n            return function (r, e, u, c, i) {\n              return n.call(t, r, e, u, c, i);\n            };\n        }\n\n        return function () {\n          return n.apply(t, arguments);\n        };\n      }\n\n      function identity(n) {\n        return n;\n      }\n\n      module.exports = bindCallback;\n    }, {}],\n    112: [function (_dereq_, module, exports) {\n      function isObjectLike(t) {\n        return !!t && \"object\" == typeof t;\n      }\n\n      function getNative(t, o) {\n        var e = null == t ? void 0 : t[o];\n        return isNative(e) ? e : void 0;\n      }\n\n      function isFunction(t) {\n        return isObject(t) && objToString.call(t) == funcTag;\n      }\n\n      function isObject(t) {\n        var o = typeof t;\n        return !!t && (\"object\" == o || \"function\" == o);\n      }\n\n      function isNative(t) {\n        return null != t && (isFunction(t) ? reIsNative.test(fnToString.call(t)) : isObjectLike(t) && reIsHostCtor.test(t));\n      }\n\n      var funcTag = \"[object Function]\",\n          reIsHostCtor = /^\\[object .+?Constructor\\]$/,\n          objectProto = Object.prototype,\n          fnToString = Function.prototype.toString,\n          hasOwnProperty = objectProto.hasOwnProperty,\n          objToString = objectProto.toString,\n          reIsNative = RegExp(\"^\" + fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\");\n      module.exports = getNative;\n    }, {}],\n    113: [function (_dereq_, module, exports) {\n      function isArguments(t) {\n        return isArrayLikeObject(t) && hasOwnProperty.call(t, \"callee\") && (!propertyIsEnumerable.call(t, \"callee\") || objectToString.call(t) == argsTag);\n      }\n\n      function isArrayLike(t) {\n        return null != t && isLength(t.length) && !isFunction(t);\n      }\n\n      function isArrayLikeObject(t) {\n        return isObjectLike(t) && isArrayLike(t);\n      }\n\n      function isFunction(t) {\n        var e = isObject(t) ? objectToString.call(t) : \"\";\n        return e == funcTag || e == genTag;\n      }\n\n      function isLength(t) {\n        return \"number\" == typeof t && t > -1 && t % 1 == 0 && t <= MAX_SAFE_INTEGER;\n      }\n\n      function isObject(t) {\n        var e = typeof t;\n        return !!t && (\"object\" == e || \"function\" == e);\n      }\n\n      function isObjectLike(t) {\n        return !!t && \"object\" == typeof t;\n      }\n\n      var MAX_SAFE_INTEGER = 9007199254740991,\n          argsTag = \"[object Arguments]\",\n          funcTag = \"[object Function]\",\n          genTag = \"[object GeneratorFunction]\",\n          objectProto = Object.prototype,\n          hasOwnProperty = objectProto.hasOwnProperty,\n          objectToString = objectProto.toString,\n          propertyIsEnumerable = objectProto.propertyIsEnumerable;\n      module.exports = isArguments;\n    }, {}],\n    114: [function (_dereq_, module, exports) {\n      function isObjectLike(t) {\n        return !!t && \"object\" == typeof t;\n      }\n\n      function getNative(t, r) {\n        var e = null == t ? void 0 : t[r];\n        return isNative(e) ? e : void 0;\n      }\n\n      function isLength(t) {\n        return \"number\" == typeof t && t > -1 && t % 1 == 0 && t <= MAX_SAFE_INTEGER;\n      }\n\n      function isFunction(t) {\n        return isObject(t) && objToString.call(t) == funcTag;\n      }\n\n      function isObject(t) {\n        var r = typeof t;\n        return !!t && (\"object\" == r || \"function\" == r);\n      }\n\n      function isNative(t) {\n        return null != t && (isFunction(t) ? reIsNative.test(fnToString.call(t)) : isObjectLike(t) && reIsHostCtor.test(t));\n      }\n\n      var arrayTag = \"[object Array]\",\n          funcTag = \"[object Function]\",\n          reIsHostCtor = /^\\[object .+?Constructor\\]$/,\n          objectProto = Object.prototype,\n          fnToString = Function.prototype.toString,\n          hasOwnProperty = objectProto.hasOwnProperty,\n          objToString = objectProto.toString,\n          reIsNative = RegExp(\"^\" + fnToString.call(hasOwnProperty).replace(/[\\\\^$.*+?()[\\]{}|]/g, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\"),\n          nativeIsArray = getNative(Array, \"isArray\"),\n          MAX_SAFE_INTEGER = 9007199254740991,\n          isArray = nativeIsArray || function (t) {\n        return isObjectLike(t) && isLength(t.length) && objToString.call(t) == arrayTag;\n      };\n\n      module.exports = isArray;\n    }, {}],\n    115: [function (_dereq_, module, exports) {\n      function isEqual(a, l, i, e) {\n        i = \"function\" == typeof i ? bindCallback(i, e, 3) : void 0;\n        var s = i ? i(a, l) : void 0;\n        return void 0 === s ? baseIsEqual(a, l, i) : !!s;\n      }\n\n      var baseIsEqual = _dereq_(\"lodash._baseisequal\"),\n          bindCallback = _dereq_(\"lodash._bindcallback\");\n\n      module.exports = isEqual;\n    }, {\n      \"lodash._baseisequal\": 110,\n      \"lodash._bindcallback\": 111\n    }],\n    116: [function (_dereq_, module, exports) {\n      function isLength(a) {\n        return \"number\" == typeof a && a > -1 && a % 1 == 0 && a <= MAX_SAFE_INTEGER;\n      }\n\n      function isObjectLike(a) {\n        return !!a && \"object\" == typeof a;\n      }\n\n      function isTypedArray(a) {\n        return isObjectLike(a) && isLength(a.length) && !!typedArrayTags[objectToString.call(a)];\n      }\n\n      var MAX_SAFE_INTEGER = 9007199254740991,\n          argsTag = \"[object Arguments]\",\n          arrayTag = \"[object Array]\",\n          boolTag = \"[object Boolean]\",\n          dateTag = \"[object Date]\",\n          errorTag = \"[object Error]\",\n          funcTag = \"[object Function]\",\n          mapTag = \"[object Map]\",\n          numberTag = \"[object Number]\",\n          objectTag = \"[object Object]\",\n          regexpTag = \"[object RegExp]\",\n          setTag = \"[object Set]\",\n          stringTag = \"[object String]\",\n          weakMapTag = \"[object WeakMap]\",\n          arrayBufferTag = \"[object ArrayBuffer]\",\n          dataViewTag = \"[object DataView]\",\n          float32Tag = \"[object Float32Array]\",\n          float64Tag = \"[object Float64Array]\",\n          int8Tag = \"[object Int8Array]\",\n          int16Tag = \"[object Int16Array]\",\n          int32Tag = \"[object Int32Array]\",\n          uint8Tag = \"[object Uint8Array]\",\n          uint8ClampedTag = \"[object Uint8ClampedArray]\",\n          uint16Tag = \"[object Uint16Array]\",\n          uint32Tag = \"[object Uint32Array]\",\n          typedArrayTags = {};\n      typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = !0, typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = !1;\n      var objectProto = Object.prototype,\n          objectToString = objectProto.toString;\n      module.exports = isTypedArray;\n    }, {}],\n    117: [function (_dereq_, module, exports) {\n      function baseProperty(e) {\n        return function (t) {\n          return null == t ? void 0 : t[e];\n        };\n      }\n\n      function isArrayLike(e) {\n        return null != e && isLength(getLength(e));\n      }\n\n      function isIndex(e, t) {\n        return e = \"number\" == typeof e || reIsUint.test(e) ? +e : -1, t = null == t ? MAX_SAFE_INTEGER : t, e > -1 && e % 1 == 0 && e < t;\n      }\n\n      function isLength(e) {\n        return \"number\" == typeof e && e > -1 && e % 1 == 0 && e <= MAX_SAFE_INTEGER;\n      }\n\n      function shimKeys(e) {\n        for (var t = keysIn(e), r = t.length, n = r && e.length, s = !!n && isLength(n) && (isArray(e) || isArguments(e)), o = -1, i = []; ++o < r;) {\n          var u = t[o];\n          (s && isIndex(u, n) || hasOwnProperty.call(e, u)) && i.push(u);\n        }\n\n        return i;\n      }\n\n      function isObject(e) {\n        var t = typeof e;\n        return !!e && (\"object\" == t || \"function\" == t);\n      }\n\n      function keysIn(e) {\n        if (null == e) return [];\n        isObject(e) || (e = Object(e));\n        var t = e.length;\n        t = t && isLength(t) && (isArray(e) || isArguments(e)) && t || 0;\n\n        for (var r = e.constructor, n = -1, s = \"function\" == typeof r && r.prototype === e, o = Array(t), i = t > 0; ++n < t;) {\n          o[n] = n + \"\";\n        }\n\n        for (var u in e) {\n          i && isIndex(u, t) || \"constructor\" == u && (s || !hasOwnProperty.call(e, u)) || o.push(u);\n        }\n\n        return o;\n      }\n\n      var getNative = _dereq_(\"lodash._getnative\"),\n          isArguments = _dereq_(\"lodash.isarguments\"),\n          isArray = _dereq_(\"lodash.isarray\"),\n          reIsUint = /^\\d+$/,\n          objectProto = Object.prototype,\n          hasOwnProperty = objectProto.hasOwnProperty,\n          nativeKeys = getNative(Object, \"keys\"),\n          MAX_SAFE_INTEGER = 9007199254740991,\n          getLength = baseProperty(\"length\"),\n          keys = nativeKeys ? function (e) {\n        var t = null == e ? void 0 : e.constructor;\n        return \"function\" == typeof t && t.prototype === e || \"function\" != typeof e && isArrayLike(e) ? shimKeys(e) : isObject(e) ? nativeKeys(e) : [];\n      } : shimKeys;\n\n      module.exports = keys;\n    }, {\n      \"lodash._getnative\": 112,\n      \"lodash.isarguments\": 113,\n      \"lodash.isarray\": 114\n    }],\n    118: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = _dereq_(\"./v8.json\");\n    }, {\n      \"./v8.json\": 119\n    }],\n    119: [function (_dereq_, module, exports) {\n      module.exports = {\n        \"$version\": 8,\n        \"$root\": {\n          \"version\": {\n            \"required\": true,\n            \"type\": \"enum\",\n            \"values\": [8]\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"metadata\": {\n            \"type\": \"*\"\n          },\n          \"center\": {\n            \"type\": \"array\",\n            \"value\": \"number\"\n          },\n          \"zoom\": {\n            \"type\": \"number\"\n          },\n          \"bearing\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"period\": 360,\n            \"units\": \"degrees\"\n          },\n          \"pitch\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"units\": \"degrees\"\n          },\n          \"light\": {\n            \"type\": \"light\"\n          },\n          \"sources\": {\n            \"required\": true,\n            \"type\": \"sources\"\n          },\n          \"sprite\": {\n            \"type\": \"string\"\n          },\n          \"glyphs\": {\n            \"type\": \"string\"\n          },\n          \"transition\": {\n            \"type\": \"transition\"\n          },\n          \"layers\": {\n            \"required\": true,\n            \"type\": \"array\",\n            \"value\": \"layer\"\n          }\n        },\n        \"sources\": {\n          \"*\": {\n            \"type\": \"source\"\n          }\n        },\n        \"source\": [\"source_tile\", \"source_geojson\", \"source_video\", \"source_image\", \"source_canvas\"],\n        \"source_tile\": {\n          \"type\": {\n            \"required\": true,\n            \"type\": \"enum\",\n            \"values\": {\n              \"vector\": {},\n              \"raster\": {}\n            }\n          },\n          \"url\": {\n            \"type\": \"string\"\n          },\n          \"tiles\": {\n            \"type\": \"array\",\n            \"value\": \"string\"\n          },\n          \"minzoom\": {\n            \"type\": \"number\",\n            \"default\": 0\n          },\n          \"maxzoom\": {\n            \"type\": \"number\",\n            \"default\": 22\n          },\n          \"tileSize\": {\n            \"type\": \"number\",\n            \"default\": 512,\n            \"units\": \"pixels\"\n          },\n          \"*\": {\n            \"type\": \"*\"\n          }\n        },\n        \"source_geojson\": {\n          \"type\": {\n            \"required\": true,\n            \"type\": \"enum\",\n            \"values\": {\n              \"geojson\": {}\n            }\n          },\n          \"data\": {\n            \"type\": \"*\"\n          },\n          \"maxzoom\": {\n            \"type\": \"number\",\n            \"default\": 18\n          },\n          \"buffer\": {\n            \"type\": \"number\",\n            \"default\": 128,\n            \"maximum\": 512,\n            \"minimum\": 0\n          },\n          \"tolerance\": {\n            \"type\": \"number\",\n            \"default\": 0.375\n          },\n          \"cluster\": {\n            \"type\": \"boolean\",\n            \"default\": false\n          },\n          \"clusterRadius\": {\n            \"type\": \"number\",\n            \"default\": 50,\n            \"minimum\": 0\n          },\n          \"clusterMaxZoom\": {\n            \"type\": \"number\"\n          }\n        },\n        \"source_video\": {\n          \"type\": {\n            \"required\": true,\n            \"type\": \"enum\",\n            \"values\": {\n              \"video\": {}\n            }\n          },\n          \"urls\": {\n            \"required\": true,\n            \"type\": \"array\",\n            \"value\": \"string\"\n          },\n          \"coordinates\": {\n            \"required\": true,\n            \"type\": \"array\",\n            \"length\": 4,\n            \"value\": {\n              \"type\": \"array\",\n              \"length\": 2,\n              \"value\": \"number\"\n            }\n          }\n        },\n        \"source_image\": {\n          \"type\": {\n            \"required\": true,\n            \"type\": \"enum\",\n            \"values\": {\n              \"image\": {}\n            }\n          },\n          \"url\": {\n            \"required\": true,\n            \"type\": \"string\"\n          },\n          \"coordinates\": {\n            \"required\": true,\n            \"type\": \"array\",\n            \"length\": 4,\n            \"value\": {\n              \"type\": \"array\",\n              \"length\": 2,\n              \"value\": \"number\"\n            }\n          }\n        },\n        \"source_canvas\": {\n          \"type\": {\n            \"required\": true,\n            \"type\": \"enum\",\n            \"values\": {\n              \"canvas\": {}\n            }\n          },\n          \"coordinates\": {\n            \"required\": true,\n            \"type\": \"array\",\n            \"length\": 4,\n            \"value\": {\n              \"type\": \"array\",\n              \"length\": 2,\n              \"value\": \"number\"\n            }\n          },\n          \"animate\": {\n            \"type\": \"boolean\",\n            \"default\": \"true\"\n          },\n          \"canvas\": {\n            \"type\": \"string\",\n            \"required\": true\n          }\n        },\n        \"layer\": {\n          \"id\": {\n            \"type\": \"string\",\n            \"required\": true\n          },\n          \"type\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"fill\": {},\n              \"line\": {},\n              \"symbol\": {},\n              \"circle\": {},\n              \"fill-extrusion\": {},\n              \"raster\": {},\n              \"background\": {}\n            }\n          },\n          \"metadata\": {\n            \"type\": \"*\"\n          },\n          \"ref\": {\n            \"type\": \"string\"\n          },\n          \"source\": {\n            \"type\": \"string\"\n          },\n          \"source-layer\": {\n            \"type\": \"string\"\n          },\n          \"minzoom\": {\n            \"type\": \"number\",\n            \"minimum\": 0,\n            \"maximum\": 24\n          },\n          \"maxzoom\": {\n            \"type\": \"number\",\n            \"minimum\": 0,\n            \"maximum\": 24\n          },\n          \"filter\": {\n            \"type\": \"filter\"\n          },\n          \"layout\": {\n            \"type\": \"layout\"\n          },\n          \"paint\": {\n            \"type\": \"paint\"\n          },\n          \"paint.*\": {\n            \"type\": \"paint\"\n          }\n        },\n        \"layout\": [\"layout_fill\", \"layout_line\", \"layout_circle\", \"layout_fill-extrusion\", \"layout_symbol\", \"layout_raster\", \"layout_background\"],\n        \"layout_background\": {\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"layout_fill\": {\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"layout_circle\": {\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"layout_fill-extrusion\": {\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"layout_line\": {\n          \"line-cap\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"butt\": {},\n              \"round\": {},\n              \"square\": {}\n            },\n            \"default\": \"butt\"\n          },\n          \"line-join\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"bevel\": {},\n              \"round\": {},\n              \"miter\": {}\n            },\n            \"default\": \"miter\"\n          },\n          \"line-miter-limit\": {\n            \"type\": \"number\",\n            \"default\": 2,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [{\n              \"line-join\": \"miter\"\n            }]\n          },\n          \"line-round-limit\": {\n            \"type\": \"number\",\n            \"default\": 1.05,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [{\n              \"line-join\": \"round\"\n            }]\n          },\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"layout_symbol\": {\n          \"symbol-placement\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"point\": {},\n              \"line\": {}\n            },\n            \"default\": \"point\"\n          },\n          \"symbol-spacing\": {\n            \"type\": \"number\",\n            \"default\": 250,\n            \"minimum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"units\": \"pixels\",\n            \"requires\": [{\n              \"symbol-placement\": \"line\"\n            }]\n          },\n          \"symbol-avoid-edges\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false\n          },\n          \"icon-allow-overlap\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-ignore-placement\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-optional\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"icon-image\", \"text-field\"]\n          },\n          \"icon-rotation-alignment\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {},\n              \"auto\": {}\n            },\n            \"default\": \"auto\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-size\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"units\": \"factor of the original icon size\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-text-fit\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"none\": {},\n              \"width\": {},\n              \"height\": {},\n              \"both\": {}\n            },\n            \"default\": \"none\",\n            \"requires\": [\"icon-image\", \"text-field\"]\n          },\n          \"icon-text-fit-padding\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 4,\n            \"default\": [0, 0, 0, 0],\n            \"units\": \"pixels\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [\"icon-image\", \"text-field\", {\n              \"icon-text-fit\": [\"both\", \"width\", \"height\"]\n            }]\n          },\n          \"icon-image\": {\n            \"type\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"tokens\": true\n          },\n          \"icon-rotate\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"period\": 360,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"units\": \"degrees\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-padding\": {\n            \"type\": \"number\",\n            \"default\": 2,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-keep-upright\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"icon-image\", {\n              \"icon-rotation-alignment\": \"map\"\n            }, {\n              \"symbol-placement\": \"line\"\n            }]\n          },\n          \"icon-offset\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"requires\": [\"icon-image\"]\n          },\n          \"text-pitch-alignment\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {},\n              \"auto\": {}\n            },\n            \"default\": \"auto\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-rotation-alignment\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {},\n              \"auto\": {}\n            },\n            \"default\": \"auto\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-field\": {\n            \"type\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"default\": \"\",\n            \"tokens\": true\n          },\n          \"text-font\": {\n            \"type\": \"array\",\n            \"value\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": [\"Open Sans Regular\", \"Arial Unicode MS Regular\"],\n            \"requires\": [\"text-field\"]\n          },\n          \"text-size\": {\n            \"type\": \"number\",\n            \"default\": 16,\n            \"minimum\": 0,\n            \"units\": \"pixels\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-max-width\": {\n            \"type\": \"number\",\n            \"default\": 10,\n            \"minimum\": 0,\n            \"units\": \"ems\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-line-height\": {\n            \"type\": \"number\",\n            \"default\": 1.2,\n            \"units\": \"ems\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-letter-spacing\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"units\": \"ems\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-justify\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"left\": {},\n              \"center\": {},\n              \"right\": {}\n            },\n            \"default\": \"center\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"center\": {},\n              \"left\": {},\n              \"right\": {},\n              \"top\": {},\n              \"bottom\": {},\n              \"top-left\": {},\n              \"top-right\": {},\n              \"bottom-left\": {},\n              \"bottom-right\": {}\n            },\n            \"default\": \"center\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-max-angle\": {\n            \"type\": \"number\",\n            \"default\": 45,\n            \"units\": \"degrees\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [\"text-field\", {\n              \"symbol-placement\": \"line\"\n            }]\n          },\n          \"text-rotate\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"period\": 360,\n            \"units\": \"degrees\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-padding\": {\n            \"type\": \"number\",\n            \"default\": 2,\n            \"minimum\": 0,\n            \"units\": \"pixels\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-keep-upright\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": true,\n            \"requires\": [\"text-field\", {\n              \"text-rotation-alignment\": \"map\"\n            }, {\n              \"symbol-placement\": \"line\"\n            }]\n          },\n          \"text-transform\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"values\": {\n              \"none\": {},\n              \"uppercase\": {},\n              \"lowercase\": {}\n            },\n            \"default\": \"none\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-offset\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"units\": \"ems\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"requires\": [\"text-field\"]\n          },\n          \"text-allow-overlap\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-ignore-placement\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-optional\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": false,\n            \"requires\": [\"text-field\", \"icon-image\"]\n          },\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"layout_raster\": {\n          \"visibility\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"visible\": {},\n              \"none\": {}\n            },\n            \"default\": \"visible\"\n          }\n        },\n        \"filter\": {\n          \"type\": \"array\",\n          \"value\": \"*\"\n        },\n        \"filter_operator\": {\n          \"type\": \"enum\",\n          \"values\": {\n            \"==\": {},\n            \"!=\": {},\n            \">\": {},\n            \">=\": {},\n            \"<\": {},\n            \"<=\": {},\n            \"in\": {},\n            \"!in\": {},\n            \"all\": {},\n            \"any\": {},\n            \"none\": {},\n            \"has\": {},\n            \"!has\": {}\n          }\n        },\n        \"geometry_type\": {\n          \"type\": \"enum\",\n          \"values\": {\n            \"Point\": {},\n            \"LineString\": {},\n            \"Polygon\": {}\n          }\n        },\n        \"function\": {\n          \"stops\": {\n            \"type\": \"array\",\n            \"value\": \"function_stop\"\n          },\n          \"base\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0\n          },\n          \"property\": {\n            \"type\": \"string\",\n            \"default\": \"$zoom\"\n          },\n          \"type\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"identity\": {},\n              \"exponential\": {},\n              \"interval\": {},\n              \"categorical\": {}\n            },\n            \"default\": \"exponential\"\n          },\n          \"colorSpace\": {\n            \"type\": \"enum\",\n            \"values\": {\n              \"rgb\": {},\n              \"lab\": {},\n              \"hcl\": {}\n            },\n            \"default\": \"rgb\"\n          },\n          \"default\": {\n            \"type\": \"*\",\n            \"required\": false\n          }\n        },\n        \"function_stop\": {\n          \"type\": \"array\",\n          \"minimum\": 0,\n          \"maximum\": 22,\n          \"value\": [\"number\", \"color\"],\n          \"length\": 2\n        },\n        \"light\": {\n          \"anchor\": {\n            \"type\": \"enum\",\n            \"default\": \"viewport\",\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"transition\": false,\n            \"zoom-function\": true,\n            \"property-function\": false,\n            \"function\": \"piecewise-constant\"\n          },\n          \"position\": {\n            \"type\": \"array\",\n            \"default\": [1.15, 210, 30],\n            \"length\": 3,\n            \"value\": \"number\",\n            \"transition\": true,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": false\n          },\n          \"color\": {\n            \"type\": \"color\",\n            \"default\": \"#ffffff\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": false,\n            \"transition\": true\n          },\n          \"intensity\": {\n            \"type\": \"number\",\n            \"default\": 0.5,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": false,\n            \"transition\": true\n          }\n        },\n        \"paint\": [\"paint_fill\", \"paint_line\", \"paint_circle\", \"paint_fill-extrusion\", \"paint_symbol\", \"paint_raster\", \"paint_background\"],\n        \"paint_fill\": {\n          \"fill-antialias\": {\n            \"type\": \"boolean\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"default\": true\n          },\n          \"fill-opacity\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"transition\": true\n          },\n          \"fill-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [{\n              \"!\": \"fill-pattern\"\n            }]\n          },\n          \"fill-outline-color\": {\n            \"type\": \"color\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [{\n              \"!\": \"fill-pattern\"\n            }, {\n              \"fill-antialias\": true\n            }]\n          },\n          \"fill-translate\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"fill-translate-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\",\n            \"requires\": [\"fill-translate\"]\n          },\n          \"fill-pattern\": {\n            \"type\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"transition\": true\n          }\n        },\n        \"paint_fill-extrusion\": {\n          \"fill-extrusion-opacity\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": false,\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"transition\": true\n          },\n          \"fill-extrusion-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [{\n              \"!\": \"fill-extrusion-pattern\"\n            }]\n          },\n          \"fill-extrusion-translate\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"fill-extrusion-translate-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\",\n            \"requires\": [\"fill-extrusion-translate\"]\n          },\n          \"fill-extrusion-pattern\": {\n            \"type\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"transition\": true\n          },\n          \"fill-extrusion-height\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"default\": 0,\n            \"minimum\": 0,\n            \"maximum\": 65535,\n            \"units\": \"meters\",\n            \"transition\": true\n          },\n          \"fill-extrusion-base\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"default\": 0,\n            \"minimum\": 0,\n            \"maximum\": 65535,\n            \"units\": \"meters\",\n            \"transition\": true,\n            \"requires\": [\"fill-extrusion-height\"]\n          }\n        },\n        \"paint_line\": {\n          \"line-opacity\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"transition\": true\n          },\n          \"line-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [{\n              \"!\": \"line-pattern\"\n            }]\n          },\n          \"line-translate\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"line-translate-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\",\n            \"requires\": [\"line-translate\"]\n          },\n          \"line-width\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"line-gap-width\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"line-offset\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"line-blur\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"line-dasharray\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"minimum\": 0,\n            \"transition\": true,\n            \"units\": \"line widths\",\n            \"requires\": [{\n              \"!\": \"line-pattern\"\n            }]\n          },\n          \"line-pattern\": {\n            \"type\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"transition\": true\n          }\n        },\n        \"paint_circle\": {\n          \"circle-radius\": {\n            \"type\": \"number\",\n            \"default\": 5,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"circle-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true\n          },\n          \"circle-blur\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true\n          },\n          \"circle-opacity\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true\n          },\n          \"circle-translate\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"circle-translate-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\",\n            \"requires\": [\"circle-translate\"]\n          },\n          \"circle-pitch-scale\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\"\n          },\n          \"circle-stroke-width\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\"\n          },\n          \"circle-stroke-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true\n          },\n          \"circle-stroke-opacity\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true\n          }\n        },\n        \"paint_symbol\": {\n          \"icon-opacity\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-halo-color\": {\n            \"type\": \"color\",\n            \"default\": \"rgba(0, 0, 0, 0)\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-halo-width\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-halo-blur\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-translate\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"icon-image\"]\n          },\n          \"icon-translate-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\",\n            \"requires\": [\"icon-image\", \"icon-translate\"]\n          },\n          \"text-opacity\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-halo-color\": {\n            \"type\": \"color\",\n            \"default\": \"rgba(0, 0, 0, 0)\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"requires\": [\"text-field\"]\n          },\n          \"text-halo-width\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-halo-blur\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"property-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-translate\": {\n            \"type\": \"array\",\n            \"value\": \"number\",\n            \"length\": 2,\n            \"default\": [0, 0],\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"pixels\",\n            \"requires\": [\"text-field\"]\n          },\n          \"text-translate-anchor\": {\n            \"type\": \"enum\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"values\": {\n              \"map\": {},\n              \"viewport\": {}\n            },\n            \"default\": \"map\",\n            \"requires\": [\"text-field\", \"text-translate\"]\n          }\n        },\n        \"paint_raster\": {\n          \"raster-opacity\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true\n          },\n          \"raster-hue-rotate\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"period\": 360,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"degrees\"\n          },\n          \"raster-brightness-min\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"default\": 0,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"transition\": true\n          },\n          \"raster-brightness-max\": {\n            \"type\": \"number\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"transition\": true\n          },\n          \"raster-saturation\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": -1,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true\n          },\n          \"raster-contrast\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": -1,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true\n          },\n          \"raster-fade-duration\": {\n            \"type\": \"number\",\n            \"default\": 300,\n            \"minimum\": 0,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"units\": \"milliseconds\"\n          }\n        },\n        \"paint_background\": {\n          \"background-color\": {\n            \"type\": \"color\",\n            \"default\": \"#000000\",\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true,\n            \"requires\": [{\n              \"!\": \"background-pattern\"\n            }]\n          },\n          \"background-pattern\": {\n            \"type\": \"string\",\n            \"function\": \"piecewise-constant\",\n            \"zoom-function\": true,\n            \"transition\": true\n          },\n          \"background-opacity\": {\n            \"type\": \"number\",\n            \"default\": 1,\n            \"minimum\": 0,\n            \"maximum\": 1,\n            \"function\": \"interpolated\",\n            \"zoom-function\": true,\n            \"transition\": true\n          }\n        },\n        \"transition\": {\n          \"duration\": {\n            \"type\": \"number\",\n            \"default\": 300,\n            \"minimum\": 0,\n            \"units\": \"milliseconds\"\n          },\n          \"delay\": {\n            \"type\": \"number\",\n            \"default\": 0,\n            \"minimum\": 0,\n            \"units\": \"milliseconds\"\n          }\n        }\n      };\n    }, {}],\n    120: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (r) {\n        for (var t = [], e = arguments.length - 1; e-- > 0;) {\n          t[e] = arguments[e + 1];\n        }\n\n        for (var n = 0, o = t; n < o.length; n += 1) {\n          var a = o[n];\n\n          for (var f in a) {\n            r[f] = a[f];\n          }\n        }\n\n        return r;\n      };\n    }, {}],\n    121: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (n) {\n        return n instanceof Number ? \"number\" : n instanceof String ? \"string\" : n instanceof Boolean ? \"boolean\" : Array.isArray(n) ? \"array\" : null === n ? \"null\" : typeof n;\n      };\n    }, {}],\n    122: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function interpolate(t, e, n) {\n        return t * (1 - n) + e * n;\n      }\n\n      module.exports = interpolate, interpolate.number = interpolate, interpolate.vec2 = function (t, e, n) {\n        return [interpolate(t[0], e[0], n), interpolate(t[1], e[1], n)];\n      }, interpolate.color = function (t, e, n) {\n        return [interpolate(t[0], e[0], n), interpolate(t[1], e[1], n), interpolate(t[2], e[2], n), interpolate(t[3], e[3], n)];\n      }, interpolate.array = function (t, e, n) {\n        return t.map(function (t, r) {\n          return interpolate(t, e[r], n);\n        });\n      };\n    }, {}],\n    123: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var parseColorString = _dereq_(\"csscolorparser\").parseCSSColor;\n\n      module.exports = function (r) {\n        if (\"string\" == typeof r) {\n          var e = parseColorString(r);\n          if (!e) return;\n          return [e[0] / 255 * e[3], e[1] / 255 * e[3], e[2] / 255 * e[3], e[3]];\n        }\n\n        return Array.isArray(r) ? r : void 0;\n      };\n    }, {\n      \"csscolorparser\": 108\n    }],\n    124: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = [\"type\", \"source\", \"source-layer\", \"minzoom\", \"maxzoom\", \"filter\", \"layout\"];\n    }, {}],\n    125: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (n) {\n        return n instanceof Number || n instanceof String || n instanceof Boolean ? n.valueOf() : n;\n      };\n    }, {}],\n    126: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\"),\n          extend = _dereq_(\"../util/extend\");\n\n      module.exports = function (e) {\n        var r = _dereq_(\"./validate_function\"),\n            t = _dereq_(\"./validate_object\"),\n            i = {\n          \"*\": function _() {\n            return [];\n          },\n          array: _dereq_(\"./validate_array\"),\n          boolean: _dereq_(\"./validate_boolean\"),\n          number: _dereq_(\"./validate_number\"),\n          color: _dereq_(\"./validate_color\"),\n          constants: _dereq_(\"./validate_constants\"),\n          enum: _dereq_(\"./validate_enum\"),\n          filter: _dereq_(\"./validate_filter\"),\n          function: _dereq_(\"./validate_function\"),\n          layer: _dereq_(\"./validate_layer\"),\n          object: _dereq_(\"./validate_object\"),\n          source: _dereq_(\"./validate_source\"),\n          light: _dereq_(\"./validate_light\"),\n          string: _dereq_(\"./validate_string\")\n        },\n            a = e.value,\n            n = e.valueSpec,\n            u = e.key,\n            o = e.styleSpec,\n            l = e.style;\n\n        if (\"string\" === getType(a) && \"@\" === a[0]) {\n          if (o.$version > 7) return [new ValidationError(u, a, \"constants have been deprecated as of v8\")];\n          if (!(a in l.constants)) return [new ValidationError(u, a, 'constant \"%s\" not found', a)];\n          e = extend({}, e, {\n            value: l.constants[a]\n          });\n        }\n\n        return n.function && \"object\" === getType(a) ? r(e) : n.type && i[n.type] ? i[n.type](e) : t(extend({}, e, {\n          valueSpec: n.type ? o[n.type] : n\n        }));\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/extend\": 120,\n      \"../util/get_type\": 121,\n      \"./validate_array\": 127,\n      \"./validate_boolean\": 128,\n      \"./validate_color\": 129,\n      \"./validate_constants\": 130,\n      \"./validate_enum\": 131,\n      \"./validate_filter\": 132,\n      \"./validate_function\": 133,\n      \"./validate_layer\": 135,\n      \"./validate_light\": 137,\n      \"./validate_number\": 138,\n      \"./validate_object\": 139,\n      \"./validate_source\": 142,\n      \"./validate_string\": 143\n    }],\n    127: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var getType = _dereq_(\"../util/get_type\"),\n          validate = _dereq_(\"./validate\"),\n          ValidationError = _dereq_(\"../error/validation_error\");\n\n      module.exports = function (e) {\n        var r = e.value,\n            t = e.valueSpec,\n            a = e.style,\n            n = e.styleSpec,\n            l = e.key,\n            i = e.arrayElementValidator || validate;\n        if (\"array\" !== getType(r)) return [new ValidationError(l, r, \"array expected, %s found\", getType(r))];\n        if (t.length && r.length !== t.length) return [new ValidationError(l, r, \"array length %d expected, length %d found\", t.length, r.length)];\n        if (t[\"min-length\"] && r.length < t[\"min-length\"]) return [new ValidationError(l, r, \"array length at least %d expected, length %d found\", t[\"min-length\"], r.length)];\n        var o = {\n          type: t.value\n        };\n        n.$version < 7 && (o.function = t.function), \"object\" === getType(t.value) && (o = t.value);\n\n        for (var u = [], d = 0; d < r.length; d++) {\n          u = u.concat(i({\n            array: r,\n            arrayIndex: d,\n            value: r[d],\n            valueSpec: o,\n            style: a,\n            styleSpec: n,\n            key: l + \"[\" + d + \"]\"\n          }));\n        }\n\n        return u;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"./validate\": 126\n    }],\n    128: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var getType = _dereq_(\"../util/get_type\"),\n          ValidationError = _dereq_(\"../error/validation_error\");\n\n      module.exports = function (e) {\n        var r = e.value,\n            o = e.key,\n            t = getType(r);\n        return \"boolean\" !== t ? [new ValidationError(o, r, \"boolean expected, %s found\", t)] : [];\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121\n    }],\n    129: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\"),\n          parseCSSColor = _dereq_(\"csscolorparser\").parseCSSColor;\n\n      module.exports = function (r) {\n        var e = r.key,\n            o = r.value,\n            t = getType(o);\n        return \"string\" !== t ? [new ValidationError(e, o, \"color expected, %s found\", t)] : null === parseCSSColor(o) ? [new ValidationError(e, o, 'color expected, \"%s\" found', o)] : [];\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"csscolorparser\": 108\n    }],\n    130: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\");\n\n      module.exports = function (r) {\n        var e = r.key,\n            t = r.value,\n            a = r.styleSpec;\n        if (a.$version > 7) return t ? [new ValidationError(e, t, \"constants have been deprecated as of v8\")] : [];\n        var o = getType(t);\n        if (\"object\" !== o) return [new ValidationError(e, t, \"object expected, %s found\", o)];\n        var n = [];\n\n        for (var i in t) {\n          \"@\" !== i[0] && n.push(new ValidationError(e + \".\" + i, t[i], 'constants must start with \"@\"'));\n        }\n\n        return n;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121\n    }],\n    131: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          unbundle = _dereq_(\"../util/unbundle_jsonlint\");\n\n      module.exports = function (e) {\n        var r = e.key,\n            n = e.value,\n            u = e.valueSpec,\n            o = [];\n        return Array.isArray(u.values) ? u.values.indexOf(unbundle(n)) === -1 && o.push(new ValidationError(r, n, \"expected one of [%s], %s found\", u.values.join(\", \"), n)) : Object.keys(u.values).indexOf(unbundle(n)) === -1 && o.push(new ValidationError(r, n, \"expected one of [%s], %s found\", Object.keys(u.values).join(\", \"), n)), o;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/unbundle_jsonlint\": 125\n    }],\n    132: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          validateEnum = _dereq_(\"./validate_enum\"),\n          getType = _dereq_(\"../util/get_type\"),\n          unbundle = _dereq_(\"../util/unbundle_jsonlint\");\n\n      module.exports = function e(r) {\n        var t,\n            a = r.value,\n            n = r.key,\n            l = r.styleSpec,\n            s = [];\n        if (\"array\" !== getType(a)) return [new ValidationError(n, a, \"array expected, %s found\", getType(a))];\n        if (a.length < 1) return [new ValidationError(n, a, \"filter array must have at least 1 element\")];\n\n        switch (s = s.concat(validateEnum({\n          key: n + \"[0]\",\n          value: a[0],\n          valueSpec: l.filter_operator,\n          style: r.style,\n          styleSpec: r.styleSpec\n        })), unbundle(a[0])) {\n          case \"<\":\n          case \"<=\":\n          case \">\":\n          case \">=\":\n            a.length >= 2 && \"$type\" === unbundle(a[1]) && s.push(new ValidationError(n, a, '\"$type\" cannot be use with operator \"%s\"', a[0]));\n\n          case \"==\":\n          case \"!=\":\n            3 !== a.length && s.push(new ValidationError(n, a, 'filter array for operator \"%s\" must have 3 elements', a[0]));\n\n          case \"in\":\n          case \"!in\":\n            a.length >= 2 && (t = getType(a[1]), \"string\" !== t && s.push(new ValidationError(n + \"[1]\", a[1], \"string expected, %s found\", t)));\n\n            for (var o = 2; o < a.length; o++) {\n              t = getType(a[o]), \"$type\" === unbundle(a[1]) ? s = s.concat(validateEnum({\n                key: n + \"[\" + o + \"]\",\n                value: a[o],\n                valueSpec: l.geometry_type,\n                style: r.style,\n                styleSpec: r.styleSpec\n              })) : \"string\" !== t && \"number\" !== t && \"boolean\" !== t && s.push(new ValidationError(n + \"[\" + o + \"]\", a[o], \"string, number, or boolean expected, %s found\", t));\n            }\n\n            break;\n\n          case \"any\":\n          case \"all\":\n          case \"none\":\n            for (var i = 1; i < a.length; i++) {\n              s = s.concat(e({\n                key: n + \"[\" + i + \"]\",\n                value: a[i],\n                style: r.style,\n                styleSpec: r.styleSpec\n              }));\n            }\n\n            break;\n\n          case \"has\":\n          case \"!has\":\n            t = getType(a[1]), 2 !== a.length ? s.push(new ValidationError(n, a, 'filter array for \"%s\" operator must have 2 elements', a[0])) : \"string\" !== t && s.push(new ValidationError(n + \"[1]\", a[1], \"string expected, %s found\", t));\n        }\n\n        return s;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"../util/unbundle_jsonlint\": 125,\n      \"./validate_enum\": 131\n    }],\n    133: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\"),\n          validate = _dereq_(\"./validate\"),\n          validateObject = _dereq_(\"./validate_object\"),\n          validateArray = _dereq_(\"./validate_array\"),\n          validateNumber = _dereq_(\"./validate_number\"),\n          unbundle = _dereq_(\"../util/unbundle_jsonlint\");\n\n      module.exports = function (e) {\n        function t(e) {\n          if (\"identity\" === p) return [new ValidationError(e.key, e.value, 'identity function may not have a \"stops\" property')];\n          var t = [],\n              a = e.value;\n          return t = t.concat(validateArray({\n            key: e.key,\n            value: a,\n            valueSpec: e.valueSpec,\n            style: e.style,\n            styleSpec: e.styleSpec,\n            arrayElementValidator: r\n          })), \"array\" === getType(a) && 0 === a.length && t.push(new ValidationError(e.key, a, \"array must have at least one stop\")), t;\n        }\n\n        function r(e) {\n          var t = [],\n              r = e.value,\n              o = e.key;\n          if (\"array\" !== getType(r)) return [new ValidationError(o, r, \"array expected, %s found\", getType(r))];\n          if (2 !== r.length) return [new ValidationError(o, r, \"array length %d expected, length %d found\", 2, r.length)];\n\n          if (c) {\n            if (\"object\" !== getType(r[0])) return [new ValidationError(o, r, \"object expected, %s found\", getType(r[0]))];\n            if (void 0 === r[0].zoom) return [new ValidationError(o, r, \"object stop key must have zoom\")];\n            if (void 0 === r[0].value) return [new ValidationError(o, r, \"object stop key must have value\")];\n            if (l && l > unbundle(r[0].zoom)) return [new ValidationError(o, r[0].zoom, \"stop zoom values must appear in ascending order\")];\n            unbundle(r[0].zoom) !== l && (l = unbundle(r[0].zoom), i = void 0, s = {}), t = t.concat(validateObject({\n              key: o + \"[0]\",\n              value: r[0],\n              valueSpec: {\n                zoom: {}\n              },\n              style: e.style,\n              styleSpec: e.styleSpec,\n              objectElementValidators: {\n                zoom: validateNumber,\n                value: a\n              }\n            }));\n          } else t = t.concat(a({\n            key: o + \"[0]\",\n            value: r[0],\n            valueSpec: {},\n            style: e.style,\n            styleSpec: e.styleSpec\n          }));\n\n          return t.concat(validate({\n            key: o + \"[1]\",\n            value: r[1],\n            valueSpec: u,\n            style: e.style,\n            styleSpec: e.styleSpec\n          }));\n        }\n\n        function a(e) {\n          var t = getType(e.value),\n              r = unbundle(e.value);\n\n          if (n) {\n            if (t !== n) return [new ValidationError(e.key, e.value, \"%s stop domain type must match previous stop domain type %s\", t, n)];\n          } else n = t;\n\n          if (\"number\" !== t && \"string\" !== t && \"boolean\" !== t) return [new ValidationError(e.key, e.value, \"stop domain value must be a number, string, or boolean\")];\n\n          if (\"number\" !== t && \"categorical\" !== p) {\n            var a = \"number expected, %s found\";\n            return u[\"property-function\"] && void 0 === p && (a += '\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'), [new ValidationError(e.key, e.value, a, t)];\n          }\n\n          return \"categorical\" !== p || \"number\" !== t || isFinite(r) && Math.floor(r) === r ? \"number\" === t && void 0 !== i && r < i ? [new ValidationError(e.key, e.value, \"stop domain values must appear in ascending order\")] : (i = r, \"categorical\" === p && r in s ? [new ValidationError(e.key, e.value, \"stop domain values must be unique\")] : (s[r] = !0, [])) : [new ValidationError(e.key, e.value, \"integer expected, found %s\", r)];\n        }\n\n        function o(e) {\n          return validate({\n            key: e.key,\n            value: e.value,\n            valueSpec: u,\n            style: e.style,\n            styleSpec: e.styleSpec\n          });\n        }\n\n        var n,\n            i,\n            l,\n            u = e.valueSpec,\n            p = unbundle(e.value.type),\n            s = {},\n            y = \"categorical\" !== p && void 0 === e.value.property,\n            d = !y,\n            c = \"array\" === getType(e.value.stops) && \"array\" === getType(e.value.stops[0]) && \"object\" === getType(e.value.stops[0][0]),\n            v = validateObject({\n          key: e.key,\n          value: e.value,\n          valueSpec: e.styleSpec.function,\n          style: e.style,\n          styleSpec: e.styleSpec,\n          objectElementValidators: {\n            stops: t,\n            default: o\n          }\n        });\n        return \"identity\" === p && y && v.push(new ValidationError(e.key, e.value, 'missing required property \"property\"')), \"identity\" === p || e.value.stops || v.push(new ValidationError(e.key, e.value, 'missing required property \"stops\"')), \"exponential\" === p && \"piecewise-constant\" === e.valueSpec.function && v.push(new ValidationError(e.key, e.value, \"exponential functions not supported\")), e.styleSpec.$version >= 8 && (d && !e.valueSpec[\"property-function\"] ? v.push(new ValidationError(e.key, e.value, \"property functions not supported\")) : y && !e.valueSpec[\"zoom-function\"] && v.push(new ValidationError(e.key, e.value, \"zoom functions not supported\"))), \"categorical\" !== p && !c || void 0 !== e.value.property || v.push(new ValidationError(e.key, e.value, '\"property\" property is required')), v;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"../util/unbundle_jsonlint\": 125,\n      \"./validate\": 126,\n      \"./validate_array\": 127,\n      \"./validate_number\": 138,\n      \"./validate_object\": 139\n    }],\n    134: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          validateString = _dereq_(\"./validate_string\");\n\n      module.exports = function (r) {\n        var e = r.value,\n            t = r.key,\n            a = validateString(r);\n        return a.length ? a : (e.indexOf(\"{fontstack}\") === -1 && a.push(new ValidationError(t, e, '\"glyphs\" url must include a \"{fontstack}\" token')), e.indexOf(\"{range}\") === -1 && a.push(new ValidationError(t, e, '\"glyphs\" url must include a \"{range}\" token')), a);\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"./validate_string\": 143\n    }],\n    135: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          unbundle = _dereq_(\"../util/unbundle_jsonlint\"),\n          validateObject = _dereq_(\"./validate_object\"),\n          validateFilter = _dereq_(\"./validate_filter\"),\n          validatePaintProperty = _dereq_(\"./validate_paint_property\"),\n          validateLayoutProperty = _dereq_(\"./validate_layout_property\"),\n          extend = _dereq_(\"../util/extend\");\n\n      module.exports = function (e) {\n        var r = [],\n            t = e.value,\n            a = e.key,\n            i = e.style,\n            l = e.styleSpec;\n        t.type || t.ref || r.push(new ValidationError(a, t, 'either \"type\" or \"ref\" is required'));\n        var u = unbundle(t.type),\n            n = unbundle(t.ref);\n        if (t.id) for (var o = unbundle(t.id), s = 0; s < e.arrayIndex; s++) {\n          var d = i.layers[s];\n          unbundle(d.id) === o && r.push(new ValidationError(a, t.id, 'duplicate layer id \"%s\", previously used at line %d', t.id, d.id.__line__));\n        }\n\n        if (\"ref\" in t) {\n          [\"type\", \"source\", \"source-layer\", \"filter\", \"layout\"].forEach(function (e) {\n            e in t && r.push(new ValidationError(a, t[e], '\"%s\" is prohibited for ref layers', e));\n          });\n          var y;\n          i.layers.forEach(function (e) {\n            unbundle(e.id) === n && (y = e);\n          }), y ? y.ref ? r.push(new ValidationError(a, t.ref, \"ref cannot reference another ref layer\")) : u = unbundle(y.type) : r.push(new ValidationError(a, t.ref, 'ref layer \"%s\" not found', n));\n        } else if (\"background\" !== u) if (t.source) {\n          var c = i.sources && i.sources[t.source],\n              p = c && unbundle(c.type);\n          c ? \"vector\" === p && \"raster\" === u ? r.push(new ValidationError(a, t.source, 'layer \"%s\" requires a raster source', t.id)) : \"raster\" === p && \"raster\" !== u ? r.push(new ValidationError(a, t.source, 'layer \"%s\" requires a vector source', t.id)) : \"vector\" !== p || t[\"source-layer\"] || r.push(new ValidationError(a, t, 'layer \"%s\" must specify a \"source-layer\"', t.id)) : r.push(new ValidationError(a, t.source, 'source \"%s\" not found', t.source));\n        } else r.push(new ValidationError(a, t, 'missing required property \"source\"'));\n\n        return r = r.concat(validateObject({\n          key: a,\n          value: t,\n          valueSpec: l.layer,\n          style: e.style,\n          styleSpec: e.styleSpec,\n          objectElementValidators: {\n            \"*\": function _() {\n              return [];\n            },\n            filter: validateFilter,\n            layout: function layout(e) {\n              return validateObject({\n                layer: t,\n                key: e.key,\n                value: e.value,\n                style: e.style,\n                styleSpec: e.styleSpec,\n                objectElementValidators: {\n                  \"*\": function _(e) {\n                    return validateLayoutProperty(extend({\n                      layerType: u\n                    }, e));\n                  }\n                }\n              });\n            },\n            paint: function paint(e) {\n              return validateObject({\n                layer: t,\n                key: e.key,\n                value: e.value,\n                style: e.style,\n                styleSpec: e.styleSpec,\n                objectElementValidators: {\n                  \"*\": function _(e) {\n                    return validatePaintProperty(extend({\n                      layerType: u\n                    }, e));\n                  }\n                }\n              });\n            }\n          }\n        }));\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/extend\": 120,\n      \"../util/unbundle_jsonlint\": 125,\n      \"./validate_filter\": 132,\n      \"./validate_layout_property\": 136,\n      \"./validate_object\": 139,\n      \"./validate_paint_property\": 140\n    }],\n    136: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var validateProperty = _dereq_(\"./validate_property\");\n\n      module.exports = function (r) {\n        return validateProperty(r, \"layout\");\n      };\n    }, {\n      \"./validate_property\": 141\n    }],\n    137: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\"),\n          validate = _dereq_(\"./validate\");\n\n      module.exports = function (e) {\n        var t = e.value,\n            r = e.styleSpec,\n            a = r.light,\n            i = e.style,\n            n = [],\n            o = getType(t);\n        if (void 0 === t) return n;\n        if (\"object\" !== o) return n = n.concat([new ValidationError(\"light\", t, \"object expected, %s found\", o)]);\n\n        for (var l in t) {\n          var c = l.match(/^(.*)-transition$/);\n          n = c && a[c[1]] && a[c[1]].transition ? n.concat(validate({\n            key: l,\n            value: t[l],\n            valueSpec: r.transition,\n            style: i,\n            styleSpec: r\n          })) : a[l] ? n.concat(validate({\n            key: l,\n            value: t[l],\n            valueSpec: a[l],\n            style: i,\n            styleSpec: r\n          })) : n.concat([new ValidationError(l, t[l], 'unknown property \"%s\"', l)]);\n        }\n\n        return n;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"./validate\": 126\n    }],\n    138: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var getType = _dereq_(\"../util/get_type\"),\n          ValidationError = _dereq_(\"../error/validation_error\");\n\n      module.exports = function (e) {\n        var r = e.key,\n            i = e.value,\n            m = e.valueSpec,\n            a = getType(i);\n        return \"number\" !== a ? [new ValidationError(r, i, \"number expected, %s found\", a)] : \"minimum\" in m && i < m.minimum ? [new ValidationError(r, i, \"%s is less than the minimum value %s\", i, m.minimum)] : \"maximum\" in m && i > m.maximum ? [new ValidationError(r, i, \"%s is greater than the maximum value %s\", i, m.maximum)] : [];\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121\n    }],\n    139: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\"),\n          validateSpec = _dereq_(\"./validate\");\n\n      module.exports = function (e) {\n        var r = e.key,\n            t = e.value,\n            i = e.valueSpec || {},\n            a = e.objectElementValidators || {},\n            o = e.style,\n            l = e.styleSpec,\n            n = [],\n            u = getType(t);\n        if (\"object\" !== u) return [new ValidationError(r, t, \"object expected, %s found\", u)];\n\n        for (var d in t) {\n          var p = d.split(\".\")[0],\n              s = i[p] || i[\"*\"],\n              c = void 0;\n          if (a[p]) c = a[p];else if (i[p]) c = validateSpec;else if (a[\"*\"]) c = a[\"*\"];else {\n            if (!i[\"*\"]) {\n              n.push(new ValidationError(r, t[d], 'unknown property \"%s\"', d));\n              continue;\n            }\n\n            c = validateSpec;\n          }\n          n = n.concat(c({\n            key: (r ? r + \".\" : r) + d,\n            value: t[d],\n            valueSpec: s,\n            style: o,\n            styleSpec: l,\n            object: t,\n            objectKey: d\n          }));\n        }\n\n        for (var v in i) {\n          i[v].required && void 0 === i[v].default && void 0 === t[v] && n.push(new ValidationError(r, t, 'missing required property \"%s\"', v));\n        }\n\n        return n;\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"./validate\": 126\n    }],\n    140: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var validateProperty = _dereq_(\"./validate_property\");\n\n      module.exports = function (r) {\n        return validateProperty(r, \"paint\");\n      };\n    }, {\n      \"./validate_property\": 141\n    }],\n    141: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var validate = _dereq_(\"./validate\"),\n          ValidationError = _dereq_(\"../error/validation_error\"),\n          getType = _dereq_(\"../util/get_type\");\n\n      module.exports = function (e, t) {\n        var r = e.key,\n            i = e.style,\n            a = e.styleSpec,\n            n = e.value,\n            o = e.objectKey,\n            l = a[t + \"_\" + e.layerType];\n        if (!l) return [];\n        var y = o.match(/^(.*)-transition$/);\n        if (\"paint\" === t && y && l[y[1]] && l[y[1]].transition) return validate({\n          key: r,\n          value: n,\n          valueSpec: a.transition,\n          style: i,\n          styleSpec: a\n        });\n        var p = e.valueSpec || l[o];\n        if (!p) return [new ValidationError(r, n, 'unknown property \"%s\"', o)];\n        var s;\n        if (\"string\" === getType(n) && p[\"property-function\"] && !p.tokens && (s = /^{([^}]+)}$/.exec(n))) return [new ValidationError(r, n, '\"%s\" does not support interpolation syntax\\nUse an identity property function instead: `{ \"type\": \"identity\", \"property\": %s` }`.', o, JSON.stringify(s[1]))];\n        var u = [];\n        return \"symbol\" === e.layerType && \"text-field\" === o && i && !i.glyphs && u.push(new ValidationError(r, n, 'use of \"text-field\" requires a style \"glyphs\" property')), u.concat(validate({\n          key: e.key,\n          value: n,\n          valueSpec: p,\n          style: i,\n          styleSpec: a\n        }));\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121,\n      \"./validate\": 126\n    }],\n    142: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ValidationError = _dereq_(\"../error/validation_error\"),\n          unbundle = _dereq_(\"../util/unbundle_jsonlint\"),\n          validateObject = _dereq_(\"./validate_object\"),\n          validateEnum = _dereq_(\"./validate_enum\");\n\n      module.exports = function (e) {\n        var a = e.value,\n            t = e.key,\n            r = e.styleSpec,\n            l = e.style;\n        if (!a.type) return [new ValidationError(t, a, '\"type\" is required')];\n        var u = unbundle(a.type),\n            i = [];\n\n        switch (u) {\n          case \"vector\":\n          case \"raster\":\n            if (i = i.concat(validateObject({\n              key: t,\n              value: a,\n              valueSpec: r.source_tile,\n              style: e.style,\n              styleSpec: r\n            })), \"url\" in a) for (var s in a) {\n              [\"type\", \"url\", \"tileSize\"].indexOf(s) < 0 && i.push(new ValidationError(t + \".\" + s, a[s], 'a source with a \"url\" property may not include a \"%s\" property', s));\n            }\n            return i;\n\n          case \"geojson\":\n            return validateObject({\n              key: t,\n              value: a,\n              valueSpec: r.source_geojson,\n              style: l,\n              styleSpec: r\n            });\n\n          case \"video\":\n            return validateObject({\n              key: t,\n              value: a,\n              valueSpec: r.source_video,\n              style: l,\n              styleSpec: r\n            });\n\n          case \"image\":\n            return validateObject({\n              key: t,\n              value: a,\n              valueSpec: r.source_image,\n              style: l,\n              styleSpec: r\n            });\n\n          case \"canvas\":\n            return validateObject({\n              key: t,\n              value: a,\n              valueSpec: r.source_canvas,\n              style: l,\n              styleSpec: r\n            });\n\n          default:\n            return validateEnum({\n              key: t + \".type\",\n              value: a.type,\n              valueSpec: {\n                values: [\"vector\", \"raster\", \"geojson\", \"video\", \"image\", \"canvas\"]\n              },\n              style: l,\n              styleSpec: r\n            });\n        }\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/unbundle_jsonlint\": 125,\n      \"./validate_enum\": 131,\n      \"./validate_object\": 139\n    }],\n    143: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var getType = _dereq_(\"../util/get_type\"),\n          ValidationError = _dereq_(\"../error/validation_error\");\n\n      module.exports = function (r) {\n        var e = r.value,\n            t = r.key,\n            i = getType(e);\n        return \"string\" !== i ? [new ValidationError(t, e, \"string expected, %s found\", i)] : [];\n      };\n    }, {\n      \"../error/validation_error\": 103,\n      \"../util/get_type\": 121\n    }],\n    144: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function validateStyleMin(e, a) {\n        a = a || latestStyleSpec;\n        var t = [];\n        return t = t.concat(validate({\n          key: \"\",\n          value: e,\n          valueSpec: a.$root,\n          styleSpec: a,\n          style: e,\n          objectElementValidators: {\n            glyphs: validateGlyphsURL,\n            \"*\": function _() {\n              return [];\n            }\n          }\n        })), a.$version > 7 && e.constants && (t = t.concat(validateConstants({\n          key: \"constants\",\n          value: e.constants,\n          style: e,\n          styleSpec: a\n        }))), sortErrors(t);\n      }\n\n      function sortErrors(e) {\n        return [].concat(e).sort(function (e, a) {\n          return e.line - a.line;\n        });\n      }\n\n      function wrapCleanErrors(e) {\n        return function () {\n          return sortErrors(e.apply(this, arguments));\n        };\n      }\n\n      var validateConstants = _dereq_(\"./validate/validate_constants\"),\n          validate = _dereq_(\"./validate/validate\"),\n          latestStyleSpec = _dereq_(\"./reference/latest\"),\n          validateGlyphsURL = _dereq_(\"./validate/validate_glyphs_url\");\n\n      validateStyleMin.source = wrapCleanErrors(_dereq_(\"./validate/validate_source\")), validateStyleMin.light = wrapCleanErrors(_dereq_(\"./validate/validate_light\")), validateStyleMin.layer = wrapCleanErrors(_dereq_(\"./validate/validate_layer\")), validateStyleMin.filter = wrapCleanErrors(_dereq_(\"./validate/validate_filter\")), validateStyleMin.paintProperty = wrapCleanErrors(_dereq_(\"./validate/validate_paint_property\")), validateStyleMin.layoutProperty = wrapCleanErrors(_dereq_(\"./validate/validate_layout_property\")), module.exports = validateStyleMin;\n    }, {\n      \"./reference/latest\": 118,\n      \"./validate/validate\": 126,\n      \"./validate/validate_constants\": 130,\n      \"./validate/validate_filter\": 132,\n      \"./validate/validate_glyphs_url\": 134,\n      \"./validate/validate_layer\": 135,\n      \"./validate/validate_layout_property\": 136,\n      \"./validate/validate_light\": 137,\n      \"./validate/validate_paint_property\": 140,\n      \"./validate/validate_source\": 142\n    }],\n    145: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var AnimationLoop = function AnimationLoop() {\n        this.n = 0, this.times = [];\n      };\n\n      AnimationLoop.prototype.stopped = function () {\n        return this.times = this.times.filter(function (t) {\n          return t.time >= new Date().getTime();\n        }), !this.times.length;\n      }, AnimationLoop.prototype.set = function (t) {\n        return this.times.push({\n          id: this.n,\n          time: t + new Date().getTime()\n        }), this.n++;\n      }, AnimationLoop.prototype.cancel = function (t) {\n        this.times = this.times.filter(function (i) {\n          return i.id !== t;\n        });\n      }, module.exports = AnimationLoop;\n    }, {}],\n    146: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Evented = _dereq_(\"../util/evented\"),\n          ajax = _dereq_(\"../util/ajax\"),\n          browser = _dereq_(\"../util/browser\"),\n          normalizeURL = _dereq_(\"../util/mapbox\").normalizeSpriteURL,\n          SpritePosition = function SpritePosition() {\n        this.x = 0, this.y = 0, this.width = 0, this.height = 0, this.pixelRatio = 1, this.sdf = !1;\n      },\n          ImageSprite = function (t) {\n        function e(e, i) {\n          var r = this;\n          t.call(this), this.base = e, this.retina = browser.devicePixelRatio > 1, this.setEventedParent(i);\n          var a = this.retina ? \"@2x\" : \"\";\n          ajax.getJSON(normalizeURL(e, a, \".json\"), function (t, e) {\n            return t ? void r.fire(\"error\", {\n              error: t\n            }) : (r.data = e, void (r.imgData && r.fire(\"data\", {\n              dataType: \"style\"\n            })));\n          }), ajax.getImage(normalizeURL(e, a, \".png\"), function (t, e) {\n            return t ? void r.fire(\"error\", {\n              error: t\n            }) : (r.imgData = browser.getImageData(e), r.width = e.width, void (r.data && r.fire(\"data\", {\n              dataType: \"style\"\n            })));\n          });\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.toJSON = function () {\n          return this.base;\n        }, e.prototype.loaded = function () {\n          return !(!this.data || !this.imgData);\n        }, e.prototype.resize = function () {\n          var t = this;\n\n          if (browser.devicePixelRatio > 1 !== this.retina) {\n            var i = new e(this.base);\n            i.on(\"data\", function () {\n              t.data = i.data, t.imgData = i.imgData, t.width = i.width, t.retina = i.retina;\n            });\n          }\n        }, e.prototype.getSpritePosition = function (t) {\n          if (!this.loaded()) return new SpritePosition();\n          var e = this.data && this.data[t];\n          return e && this.imgData ? e : new SpritePosition();\n        }, e;\n      }(Evented);\n\n      module.exports = ImageSprite;\n    }, {\n      \"../util/ajax\": 193,\n      \"../util/browser\": 194,\n      \"../util/evented\": 202,\n      \"../util/mapbox\": 209\n    }],\n    147: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var styleSpec = _dereq_(\"../style-spec/reference/latest\"),\n          util = _dereq_(\"../util/util\"),\n          Evented = _dereq_(\"../util/evented\"),\n          validateStyle = _dereq_(\"./validate_style\"),\n          StyleDeclaration = _dereq_(\"./style_declaration\"),\n          StyleTransition = _dereq_(\"./style_transition\"),\n          TRANSITION_SUFFIX = \"-transition\",\n          Light = function (t) {\n        function i(i) {\n          t.call(this), this.properties = [\"anchor\", \"color\", \"position\", \"intensity\"], this._specifications = styleSpec.light, this.set(i);\n        }\n\n        return t && (i.__proto__ = t), i.prototype = Object.create(t && t.prototype), i.prototype.constructor = i, i.prototype.set = function (t) {\n          var i = this;\n\n          if (!this._validate(validateStyle.light, t)) {\n            this._declarations = {}, this._transitions = {}, this._transitionOptions = {}, this.calculated = {}, t = util.extend({\n              anchor: this._specifications.anchor.default,\n              color: this._specifications.color.default,\n              position: this._specifications.position.default,\n              intensity: this._specifications.intensity.default\n            }, t);\n\n            for (var e = 0, o = i.properties; e < o.length; e += 1) {\n              var n = o[e];\n              i._declarations[n] = new StyleDeclaration(i._specifications[n], t[n]);\n            }\n\n            return this;\n          }\n        }, i.prototype.getLight = function () {\n          return {\n            anchor: this.getLightProperty(\"anchor\"),\n            color: this.getLightProperty(\"color\"),\n            position: this.getLightProperty(\"position\"),\n            intensity: this.getLightProperty(\"intensity\")\n          };\n        }, i.prototype.getLightProperty = function (t) {\n          return util.endsWith(t, TRANSITION_SUFFIX) ? this._transitionOptions[t] : this._declarations[t] && this._declarations[t].value;\n        }, i.prototype.getLightValue = function (t, i) {\n          if (\"position\" === t) {\n            var e = this._transitions[t].calculate(i),\n                o = util.sphericalToCartesian(e);\n\n            return {\n              x: o[0],\n              y: o[1],\n              z: o[2]\n            };\n          }\n\n          return this._transitions[t].calculate(i);\n        }, i.prototype.setLight = function (t) {\n          var i = this;\n          if (!this._validate(validateStyle.light, t)) for (var e in t) {\n            var o = t[e];\n            util.endsWith(e, TRANSITION_SUFFIX) ? i._transitionOptions[e] = o : null === o || void 0 === o ? delete i._declarations[e] : i._declarations[e] = new StyleDeclaration(i._specifications[e], o);\n          }\n        }, i.prototype.recalculate = function (t) {\n          var i = this;\n\n          for (var e in i._declarations) {\n            i.calculated[e] = i.getLightValue(e, {\n              zoom: t\n            });\n          }\n        }, i.prototype._applyLightDeclaration = function (t, i, e, o, n) {\n          var r = e.transition ? this._transitions[t] : void 0,\n              a = this._specifications[t];\n\n          if (null !== i && void 0 !== i || (i = new StyleDeclaration(a, a.default)), !r || r.declaration.json !== i.json) {\n            var s = util.extend({\n              duration: 300,\n              delay: 0\n            }, o, this.getLightProperty(t + TRANSITION_SUFFIX)),\n                l = this._transitions[t] = new StyleTransition(a, i, r, s);\n            l.instant() || (l.loopID = n.set(l.endTime - Date.now())), r && n.cancel(r.loopID);\n          }\n        }, i.prototype.updateLightTransitions = function (t, i, e) {\n          var o,\n              n = this;\n\n          for (o in n._declarations) {\n            n._applyLightDeclaration(o, n._declarations[o], t, i, e);\n          }\n        }, i.prototype._validate = function (t, i) {\n          return validateStyle.emitErrors(this, t.call(validateStyle, util.extend({\n            value: i,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            },\n            styleSpec: styleSpec\n          })));\n        }, i;\n      }(Evented);\n\n      module.exports = Light;\n    }, {\n      \"../style-spec/reference/latest\": 118,\n      \"../util/evented\": 202,\n      \"../util/util\": 215,\n      \"./style_declaration\": 149,\n      \"./style_transition\": 157,\n      \"./validate_style\": 158\n    }],\n    148: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Evented = _dereq_(\"../util/evented\"),\n          StyleLayer = _dereq_(\"./style_layer\"),\n          ImageSprite = _dereq_(\"./image_sprite\"),\n          Light = _dereq_(\"./light\"),\n          GlyphSource = _dereq_(\"../symbol/glyph_source\"),\n          SpriteAtlas = _dereq_(\"../symbol/sprite_atlas\"),\n          LineAtlas = _dereq_(\"../render/line_atlas\"),\n          util = _dereq_(\"../util/util\"),\n          ajax = _dereq_(\"../util/ajax\"),\n          mapbox = _dereq_(\"../util/mapbox\"),\n          browser = _dereq_(\"../util/browser\"),\n          Dispatcher = _dereq_(\"../util/dispatcher\"),\n          AnimationLoop = _dereq_(\"./animation_loop\"),\n          validateStyle = _dereq_(\"./validate_style\"),\n          Source = _dereq_(\"../source/source\"),\n          QueryFeatures = _dereq_(\"../source/query_features\"),\n          SourceCache = _dereq_(\"../source/source_cache\"),\n          styleSpec = _dereq_(\"../style-spec/reference/latest\"),\n          MapboxGLFunction = _dereq_(\"../style-spec/function\"),\n          getWorkerPool = _dereq_(\"../util/global_worker_pool\"),\n          deref = _dereq_(\"../style-spec/deref\"),\n          diff = _dereq_(\"../style-spec/diff\"),\n          rtlTextPlugin = _dereq_(\"../source/rtl_text_plugin\"),\n          supportedDiffOperations = util.pick(diff.operations, [\"addLayer\", \"removeLayer\", \"setPaintProperty\", \"setLayoutProperty\", \"setFilter\", \"addSource\", \"removeSource\", \"setLayerZoomRange\", \"setLight\", \"setTransition\"]),\n          ignoredDiffOperations = util.pick(diff.operations, [\"setCenter\", \"setZoom\", \"setBearing\", \"setPitch\"]),\n          Style = function (e) {\n        function t(t, r, i) {\n          var o = this;\n          e.call(this), this.map = r, this.animationLoop = r && r.animationLoop || new AnimationLoop(), this.dispatcher = new Dispatcher(getWorkerPool(), this), this.spriteAtlas = new SpriteAtlas(1024, 1024), this.spriteAtlas.setEventedParent(this), this.lineAtlas = new LineAtlas(256, 512), this._layers = {}, this._order = [], this.sourceCaches = {}, this.zoomHistory = {}, this._loaded = !1, util.bindAll([\"_redoPlacement\"], this), this._resetUpdates(), i = util.extend({\n            validate: \"string\" != typeof t || !mapbox.isMapboxURL(t)\n          }, i), this.setEventedParent(r), this.fire(\"dataloading\", {\n            dataType: \"style\"\n          });\n          var s = this;\n          this._rtlTextPluginCallback = rtlTextPlugin.registerForPluginAvailability(function (e) {\n            s.dispatcher.broadcast(\"loadRTLTextPlugin\", e.pluginBlobURL, e.errorCallback);\n\n            for (var t in s.sourceCaches) {\n              s.sourceCaches[t].reload();\n            }\n          });\n\n          var a = function a(e, t) {\n            if (e) return void o.fire(\"error\", {\n              error: e\n            });\n\n            if (!i.validate || !validateStyle.emitErrors(o, validateStyle(t))) {\n              o._loaded = !0, o.stylesheet = t, o.updateClasses();\n\n              for (var r in t.sources) {\n                o.addSource(r, t.sources[r], i);\n              }\n\n              t.sprite && (o.sprite = new ImageSprite(t.sprite, o)), o.glyphSource = new GlyphSource(t.glyphs), o._resolve(), o.fire(\"data\", {\n                dataType: \"style\"\n              }), o.fire(\"style.load\");\n            }\n          };\n\n          \"string\" == typeof t ? ajax.getJSON(mapbox.normalizeStyleURL(t), a) : browser.frame(a.bind(this, null, t)), this.on(\"data\", function (e) {\n            if (\"source\" === e.dataType && \"metadata\" === e.sourceDataType) {\n              var t = o.sourceCaches[e.sourceId].getSource();\n              if (t && t.vectorLayerIds) for (var r in o._layers) {\n                var i = o._layers[r];\n                i.source === t.id && o._validateLayer(i);\n              }\n            }\n          });\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype._validateLayer = function (e) {\n          var t = this.sourceCaches[e.source];\n\n          if (e.sourceLayer && t) {\n            var r = t.getSource();\n            (\"geojson\" === r.type || r.vectorLayerIds && r.vectorLayerIds.indexOf(e.sourceLayer) === -1) && this.fire(\"error\", {\n              error: new Error('Source layer \"' + e.sourceLayer + '\" does not exist on source \"' + r.id + '\" as specified by style layer \"' + e.id + '\"')\n            });\n          }\n        }, t.prototype.loaded = function () {\n          var e = this;\n          if (!this._loaded) return !1;\n          if (Object.keys(this._updatedSources).length) return !1;\n\n          for (var t in e.sourceCaches) {\n            if (!e.sourceCaches[t].loaded()) return !1;\n          }\n\n          return !(this.sprite && !this.sprite.loaded());\n        }, t.prototype._resolve = function () {\n          var e = this,\n              t = deref(this.stylesheet.layers);\n          this._order = t.map(function (e) {\n            return e.id;\n          }), this._layers = {};\n\n          for (var r = 0, i = t; r < i.length; r += 1) {\n            var o = i[r];\n            o = StyleLayer.create(o), o.setEventedParent(e, {\n              layer: {\n                id: o.id\n              }\n            }), e._layers[o.id] = o;\n          }\n\n          this.dispatcher.broadcast(\"setLayers\", this._serializeLayers(this._order)), this.light = new Light(this.stylesheet.light);\n        }, t.prototype._serializeLayers = function (e) {\n          var t = this;\n          return e.map(function (e) {\n            return t._layers[e].serialize();\n          });\n        }, t.prototype._applyClasses = function (e, t) {\n          var r = this;\n\n          if (this._loaded) {\n            e = e || [], t = t || {\n              transition: !0\n            };\n            var i = this.stylesheet.transition || {},\n                o = this._updatedAllPaintProps ? this._layers : this._updatedPaintProps;\n\n            for (var s in o) {\n              var a = r._layers[s],\n                  n = r._updatedPaintProps[s];\n              if (r._updatedAllPaintProps || n.all) a.updatePaintTransitions(e, t, i, r.animationLoop, r.zoomHistory);else for (var l in n) {\n                r._layers[s].updatePaintTransition(l, e, t, i, r.animationLoop, r.zoomHistory);\n              }\n            }\n\n            this.light.updateLightTransitions(t, i, this.animationLoop);\n          }\n        }, t.prototype._recalculate = function (e) {\n          var t = this;\n\n          if (this._loaded) {\n            for (var r in t.sourceCaches) {\n              t.sourceCaches[r].used = !1;\n            }\n\n            this._updateZoomHistory(e);\n\n            for (var i = 0, o = t._order; i < o.length; i += 1) {\n              var s = o[i],\n                  a = t._layers[s];\n              a.recalculate(e), !a.isHidden(e) && a.source && (t.sourceCaches[a.source].used = !0);\n            }\n\n            this.light.recalculate(e);\n            var n = 300;\n            Math.floor(this.z) !== Math.floor(e) && this.animationLoop.set(n), this.z = e;\n          }\n        }, t.prototype._updateZoomHistory = function (e) {\n          var t = this.zoomHistory;\n          void 0 === t.lastIntegerZoom && (t.lastIntegerZoom = Math.floor(e), t.lastIntegerZoomTime = 0, t.lastZoom = e), Math.floor(t.lastZoom) < Math.floor(e) ? (t.lastIntegerZoom = Math.floor(e), t.lastIntegerZoomTime = Date.now()) : Math.floor(t.lastZoom) > Math.floor(e) && (t.lastIntegerZoom = Math.floor(e + 1), t.lastIntegerZoomTime = Date.now()), t.lastZoom = e;\n        }, t.prototype._checkLoaded = function () {\n          if (!this._loaded) throw new Error(\"Style is not done loading\");\n        }, t.prototype.update = function (e, t) {\n          var r = this;\n\n          if (this._changed) {\n            var i = Object.keys(this._updatedLayers),\n                o = Object.keys(this._removedLayers);\n            (i.length || o.length || this._updatedSymbolOrder) && this._updateWorkerLayers(i, o);\n\n            for (var s in r._updatedSources) {\n              var a = r._updatedSources[s];\n              \"reload\" === a ? r._reloadSource(s) : \"clear\" === a && r._clearSource(s);\n            }\n\n            this._applyClasses(e, t), this._resetUpdates(), this.fire(\"data\", {\n              dataType: \"style\"\n            });\n          }\n        }, t.prototype._updateWorkerLayers = function (e, t) {\n          var r = this,\n              i = this._updatedSymbolOrder ? this._order.filter(function (e) {\n            return \"symbol\" === r._layers[e].type;\n          }) : null;\n          this.dispatcher.broadcast(\"updateLayers\", {\n            layers: this._serializeLayers(e),\n            removedIds: t,\n            symbolOrder: i\n          });\n        }, t.prototype._resetUpdates = function () {\n          this._changed = !1, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSymbolOrder = !1, this._updatedSources = {}, this._updatedPaintProps = {}, this._updatedAllPaintProps = !1;\n        }, t.prototype.setState = function (e) {\n          var t = this;\n          if (this._checkLoaded(), validateStyle.emitErrors(this, validateStyle(e))) return !1;\n          e = util.extend({}, e), e.layers = deref(e.layers);\n          var r = diff(this.serialize(), e).filter(function (e) {\n            return !(e.command in ignoredDiffOperations);\n          });\n          if (0 === r.length) return !1;\n          var i = r.filter(function (e) {\n            return !(e.command in supportedDiffOperations);\n          });\n          if (i.length > 0) throw new Error(\"Unimplemented: \" + i.map(function (e) {\n            return e.command;\n          }).join(\", \") + \".\");\n          return r.forEach(function (e) {\n            \"setTransition\" !== e.command && t[e.command].apply(t, e.args);\n          }), this.stylesheet = e, !0;\n        }, t.prototype.addSource = function (e, t, r) {\n          var i = this;\n          if (this._checkLoaded(), void 0 !== this.sourceCaches[e]) throw new Error(\"There is already a source with this ID\");\n          if (!t.type) throw new Error(\"The type property must be defined, but the only the following properties were given: \" + Object.keys(t) + \".\");\n          var o = [\"vector\", \"raster\", \"geojson\", \"video\", \"image\", \"canvas\"],\n              s = o.indexOf(t.type) >= 0;\n\n          if (!s || !this._validate(validateStyle.source, \"sources.\" + e, t, null, r)) {\n            var a = this.sourceCaches[e] = new SourceCache(e, t, this.dispatcher);\n            a.style = this, a.setEventedParent(this, function () {\n              return {\n                isSourceLoaded: i.loaded(),\n                source: a.serialize(),\n                sourceId: e\n              };\n            }), a.onAdd(this.map), this._changed = !0;\n          }\n        }, t.prototype.removeSource = function (e) {\n          if (this._checkLoaded(), void 0 === this.sourceCaches[e]) throw new Error(\"There is no source with this ID\");\n          var t = this.sourceCaches[e];\n          delete this.sourceCaches[e], delete this._updatedSources[e], t.setEventedParent(null), t.clearTiles(), t.onRemove && t.onRemove(this.map), this._changed = !0;\n        }, t.prototype.getSource = function (e) {\n          return this.sourceCaches[e] && this.sourceCaches[e].getSource();\n        }, t.prototype.addLayer = function (e, t, r) {\n          this._checkLoaded();\n\n          var i = e.id;\n\n          if (\"object\" == typeof e.source && (this.addSource(i, e.source), e = util.extend(e, {\n            source: i\n          })), !this._validate(validateStyle.layer, \"layers.\" + i, e, {\n            arrayIndex: -1\n          }, r)) {\n            var o = StyleLayer.create(e);\n            this._validateLayer(o), o.setEventedParent(this, {\n              layer: {\n                id: i\n              }\n            });\n            var s = t ? this._order.indexOf(t) : this._order.length;\n\n            if (this._order.splice(s, 0, i), this._layers[i] = o, this._removedLayers[i] && o.source) {\n              var a = this._removedLayers[i];\n              delete this._removedLayers[i], this._updatedSources[o.source] = a.type !== o.type ? \"clear\" : \"reload\";\n            }\n\n            this._updateLayer(o), \"symbol\" === o.type && (this._updatedSymbolOrder = !0), this.updateClasses(i);\n          }\n        }, t.prototype.moveLayer = function (e, t) {\n          this._checkLoaded(), this._changed = !0;\n          var r = this._layers[e];\n          if (!r) return void this.fire(\"error\", {\n            error: new Error(\"The layer '\" + e + \"' does not exist in the map's style and cannot be moved.\")\n          });\n\n          var i = this._order.indexOf(e);\n\n          this._order.splice(i, 1);\n\n          var o = t ? this._order.indexOf(t) : this._order.length;\n          this._order.splice(o, 0, e), \"symbol\" === r.type && (this._updatedSymbolOrder = !0, r.source && !this._updatedSources[r.source] && (this._updatedSources[r.source] = \"reload\"));\n        }, t.prototype.removeLayer = function (e) {\n          this._checkLoaded();\n\n          var t = this._layers[e];\n          if (!t) return void this.fire(\"error\", {\n            error: new Error(\"The layer '\" + e + \"' does not exist in the map's style and cannot be removed.\")\n          });\n          t.setEventedParent(null);\n\n          var r = this._order.indexOf(e);\n\n          this._order.splice(r, 1), \"symbol\" === t.type && (this._updatedSymbolOrder = !0), this._changed = !0, this._removedLayers[e] = t, delete this._layers[e], delete this._updatedLayers[e], delete this._updatedPaintProps[e];\n        }, t.prototype.getLayer = function (e) {\n          return this._layers[e];\n        }, t.prototype.setLayerZoomRange = function (e, t, r) {\n          this._checkLoaded();\n\n          var i = this.getLayer(e);\n          return i ? void (i.minzoom === t && i.maxzoom === r || (null != t && (i.minzoom = t), null != r && (i.maxzoom = r), this._updateLayer(i))) : void this.fire(\"error\", {\n            error: new Error(\"The layer '\" + e + \"' does not exist in the map's style and cannot have zoom extent.\")\n          });\n        }, t.prototype.setFilter = function (e, t) {\n          this._checkLoaded();\n\n          var r = this.getLayer(e);\n          return r ? void (null !== t && void 0 !== t && this._validate(validateStyle.filter, \"layers.\" + r.id + \".filter\", t) || util.deepEqual(r.filter, t) || (r.filter = util.clone(t), this._updateLayer(r))) : void this.fire(\"error\", {\n            error: new Error(\"The layer '\" + e + \"' does not exist in the map's style and cannot be filtered.\")\n          });\n        }, t.prototype.getFilter = function (e) {\n          return util.clone(this.getLayer(e).filter);\n        }, t.prototype.setLayoutProperty = function (e, t, r) {\n          this._checkLoaded();\n\n          var i = this.getLayer(e);\n          return i ? void (util.deepEqual(i.getLayoutProperty(t), r) || (i.setLayoutProperty(t, r), this._updateLayer(i))) : void this.fire(\"error\", {\n            error: new Error(\"The layer '\" + e + \"' does not exist in the map's style and cannot be styled.\")\n          });\n        }, t.prototype.getLayoutProperty = function (e, t) {\n          return this.getLayer(e).getLayoutProperty(t);\n        }, t.prototype.setPaintProperty = function (e, t, r, i) {\n          this._checkLoaded();\n\n          var o = this.getLayer(e);\n          if (!o) return void this.fire(\"error\", {\n            error: new Error(\"The layer '\" + e + \"' does not exist in the map's style and cannot be styled.\")\n          });\n\n          if (!util.deepEqual(o.getPaintProperty(t, i), r)) {\n            var s = o.isPaintValueFeatureConstant(t);\n            o.setPaintProperty(t, r, i);\n            var a = !(r && MapboxGLFunction.isFunctionDefinition(r) && \"$zoom\" !== r.property && void 0 !== r.property);\n            a && s || this._updateLayer(o), this.updateClasses(e, t);\n          }\n        }, t.prototype.getPaintProperty = function (e, t, r) {\n          return this.getLayer(e).getPaintProperty(t, r);\n        }, t.prototype.getTransition = function () {\n          return util.extend({\n            duration: 300,\n            delay: 0\n          }, this.stylesheet && this.stylesheet.transition);\n        }, t.prototype.updateClasses = function (e, t) {\n          if (this._changed = !0, e) {\n            var r = this._updatedPaintProps;\n            r[e] || (r[e] = {}), r[e][t || \"all\"] = !0;\n          } else this._updatedAllPaintProps = !0;\n        }, t.prototype.serialize = function () {\n          var e = this;\n          return util.filterObject({\n            version: this.stylesheet.version,\n            name: this.stylesheet.name,\n            metadata: this.stylesheet.metadata,\n            light: this.stylesheet.light,\n            center: this.stylesheet.center,\n            zoom: this.stylesheet.zoom,\n            bearing: this.stylesheet.bearing,\n            pitch: this.stylesheet.pitch,\n            sprite: this.stylesheet.sprite,\n            glyphs: this.stylesheet.glyphs,\n            transition: this.stylesheet.transition,\n            sources: util.mapObject(this.sourceCaches, function (e) {\n              return e.serialize();\n            }),\n            layers: this._order.map(function (t) {\n              return e._layers[t].serialize();\n            })\n          }, function (e) {\n            return void 0 !== e;\n          });\n        }, t.prototype._updateLayer = function (e) {\n          this._updatedLayers[e.id] = !0, e.source && !this._updatedSources[e.source] && (this._updatedSources[e.source] = \"reload\"), this._changed = !0;\n        }, t.prototype._flattenRenderedFeatures = function (e) {\n          for (var t = this, r = [], i = this._order.length - 1; i >= 0; i--) {\n            for (var o = t._order[i], s = 0, a = e; s < a.length; s += 1) {\n              var n = a[s],\n                  l = n[o];\n              if (l) for (var d = 0, u = l; d < u.length; d += 1) {\n                var h = u[d];\n                r.push(h);\n              }\n            }\n          }\n\n          return r;\n        }, t.prototype.queryRenderedFeatures = function (e, t, r, i) {\n          var o = this;\n          t && t.filter && this._validate(validateStyle.filter, \"queryRenderedFeatures.filter\", t.filter);\n          var s = {};\n\n          if (t && t.layers) {\n            if (!Array.isArray(t.layers)) return void this.fire(\"error\", {\n              error: \"parameters.layers must be an Array.\"\n            });\n\n            for (var a = 0, n = t.layers; a < n.length; a += 1) {\n              var l = n[a],\n                  d = o._layers[l];\n              if (!d) return void o.fire(\"error\", {\n                error: \"The layer '\" + l + \"' does not exist in the map's style and cannot be queried for features.\"\n              });\n              s[d.source] = !0;\n            }\n          }\n\n          var u = [];\n\n          for (var h in o.sourceCaches) {\n            if (!t.layers || s[h]) {\n              var c = QueryFeatures.rendered(o.sourceCaches[h], o._layers, e, t, r, i);\n              u.push(c);\n            }\n          }\n\n          return this._flattenRenderedFeatures(u);\n        }, t.prototype.querySourceFeatures = function (e, t) {\n          t && t.filter && this._validate(validateStyle.filter, \"querySourceFeatures.filter\", t.filter);\n          var r = this.sourceCaches[e];\n          return r ? QueryFeatures.source(r, t) : [];\n        }, t.prototype.addSourceType = function (e, t, r) {\n          return Source.getType(e) ? r(new Error('A source type called \"' + e + '\" already exists.')) : (Source.setType(e, t), t.workerSourceURL ? void this.dispatcher.broadcast(\"loadWorkerSource\", {\n            name: e,\n            url: t.workerSourceURL\n          }, r) : r(null, null));\n        }, t.prototype.getLight = function () {\n          return this.light.getLight();\n        }, t.prototype.setLight = function (e, t) {\n          this._checkLoaded();\n\n          var r = this.light.getLight(),\n              i = !1;\n\n          for (var o in e) {\n            if (!util.deepEqual(e[o], r[o])) {\n              i = !0;\n              break;\n            }\n          }\n\n          if (i) {\n            var s = this.stylesheet.transition || {};\n            this.light.setLight(e), this.light.updateLightTransitions(t || {\n              transition: !0\n            }, s, this.animationLoop);\n          }\n        }, t.prototype._validate = function (e, t, r, i, o) {\n          return (!o || o.validate !== !1) && validateStyle.emitErrors(this, e.call(validateStyle, util.extend({\n            key: t,\n            style: this.serialize(),\n            value: r,\n            styleSpec: styleSpec\n          }, i)));\n        }, t.prototype._remove = function () {\n          var e = this;\n          rtlTextPlugin.evented.off(\"pluginAvailable\", this._rtlTextPluginCallback);\n\n          for (var t in e.sourceCaches) {\n            e.sourceCaches[t].clearTiles();\n          }\n\n          this.dispatcher.remove();\n        }, t.prototype._clearSource = function (e) {\n          this.sourceCaches[e].clearTiles();\n        }, t.prototype._reloadSource = function (e) {\n          this.sourceCaches[e].reload();\n        }, t.prototype._updateSources = function (e) {\n          var t = this;\n\n          for (var r in t.sourceCaches) {\n            t.sourceCaches[r].update(e);\n          }\n        }, t.prototype._redoPlacement = function () {\n          var e = this;\n\n          for (var t in e.sourceCaches) {\n            e.sourceCaches[t].redoPlacement();\n          }\n        }, t.prototype.getIcons = function (e, t, r) {\n          var i = this,\n              o = function o() {\n            i.spriteAtlas.setSprite(i.sprite), i.spriteAtlas.addIcons(t.icons, r);\n          };\n\n          !this.sprite || this.sprite.loaded() ? o() : this.sprite.on(\"data\", o);\n        }, t.prototype.getGlyphs = function (e, t, r) {\n          function i(e, t, i) {\n            e && console.error(e), n[i] = t, a--, 0 === a && r(null, n);\n          }\n\n          var o = this,\n              s = t.stacks,\n              a = Object.keys(s).length,\n              n = {};\n\n          for (var l in s) {\n            o.glyphSource.getSimpleGlyphs(l, s[l], t.uid, i);\n          }\n        }, t;\n      }(Evented);\n\n      module.exports = Style;\n    }, {\n      \"../render/line_atlas\": 75,\n      \"../source/query_features\": 88,\n      \"../source/rtl_text_plugin\": 90,\n      \"../source/source\": 91,\n      \"../source/source_cache\": 92,\n      \"../style-spec/deref\": 101,\n      \"../style-spec/diff\": 102,\n      \"../style-spec/function\": 106,\n      \"../style-spec/reference/latest\": 118,\n      \"../symbol/glyph_source\": 167,\n      \"../symbol/sprite_atlas\": 171,\n      \"../util/ajax\": 193,\n      \"../util/browser\": 194,\n      \"../util/dispatcher\": 200,\n      \"../util/evented\": 202,\n      \"../util/global_worker_pool\": 204,\n      \"../util/mapbox\": 209,\n      \"../util/util\": 215,\n      \"./animation_loop\": 145,\n      \"./image_sprite\": 146,\n      \"./light\": 147,\n      \"./style_layer\": 150,\n      \"./validate_style\": 158\n    }],\n    149: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var createFunction = _dereq_(\"../style-spec/function\"),\n          util = _dereq_(\"../util/util\"),\n          StyleDeclaration = function StyleDeclaration(t, i) {\n        var o = this;\n\n        if (this.value = util.clone(i), this.isFunction = createFunction.isFunctionDefinition(i), this.json = JSON.stringify(this.value), this.minimum = t.minimum, this.function = createFunction(this.value, t), this.isFeatureConstant = this.function.isFeatureConstant, this.isZoomConstant = this.function.isZoomConstant, this.isFeatureConstant || this.isZoomConstant) {\n          if (!this.isZoomConstant) {\n            this.stopZoomLevels = [];\n\n            for (var n = 0, s = o.value.stops; n < s.length; n += 1) {\n              var e = s[n];\n              o.stopZoomLevels.indexOf(e[0]) < 0 && o.stopZoomLevels.push(e[0]);\n            }\n          }\n        } else {\n          this.stopZoomLevels = [];\n\n          for (var a = [], u = 0, l = o.value.stops; u < l.length; u += 1) {\n            var r = l[u],\n                c = r[0].zoom;\n            o.stopZoomLevels.indexOf(c) < 0 && (o.stopZoomLevels.push(c), a.push([c, a.length]));\n          }\n\n          this._functionInterpolationT = createFunction({\n            type: \"exponential\",\n            stops: a,\n            base: i.base\n          }, {\n            type: \"number\"\n          });\n        }\n      };\n\n      StyleDeclaration.prototype.calculate = function (t, i) {\n        var o = this.function(t && t.zoom, i || {});\n        return void 0 !== this.minimum && o < this.minimum ? this.minimum : o;\n      }, StyleDeclaration.prototype.calculateInterpolationT = function (t) {\n        return this.isFeatureConstant || this.isZoomConstant ? 0 : this._functionInterpolationT(t && t.zoom, {});\n      }, module.exports = StyleDeclaration;\n    }, {\n      \"../style-spec/function\": 106,\n      \"../util/util\": 215\n    }],\n    150: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function getDeclarationValue(t) {\n        return t.value;\n      }\n\n      var util = _dereq_(\"../util/util\"),\n          StyleTransition = _dereq_(\"./style_transition\"),\n          StyleDeclaration = _dereq_(\"./style_declaration\"),\n          styleSpec = _dereq_(\"../style-spec/reference/latest\"),\n          validateStyle = _dereq_(\"./validate_style\"),\n          parseColor = _dereq_(\"./../style-spec/util/parse_color\"),\n          Evented = _dereq_(\"../util/evented\"),\n          TRANSITION_SUFFIX = \"-transition\",\n          StyleLayer = function (t) {\n        function i(i) {\n          var a = this;\n          t.call(this), this.id = i.id, this.metadata = i.metadata, this.type = i.type, this.source = i.source, this.sourceLayer = i[\"source-layer\"], this.minzoom = i.minzoom, this.maxzoom = i.maxzoom, this.filter = i.filter, this.paint = {}, this.layout = {}, this._paintSpecifications = styleSpec[\"paint_\" + this.type], this._layoutSpecifications = styleSpec[\"layout_\" + this.type], this._paintTransitions = {}, this._paintTransitionOptions = {}, this._paintDeclarations = {}, this._layoutDeclarations = {}, this._layoutFunctions = {};\n          var e,\n              o,\n              n = {\n            validate: !1\n          };\n\n          for (var r in i) {\n            var s = r.match(/^paint(?:\\.(.*))?$/);\n\n            if (s) {\n              var l = s[1] || \"\";\n\n              for (e in i[r]) {\n                a.setPaintProperty(e, i[r][e], l, n);\n              }\n            }\n          }\n\n          for (o in i.layout) {\n            a.setLayoutProperty(o, i.layout[o], n);\n          }\n\n          for (e in a._paintSpecifications) {\n            a.paint[e] = a.getPaintValue(e);\n          }\n\n          for (o in a._layoutSpecifications) {\n            a._updateLayoutValue(o);\n          }\n        }\n\n        return t && (i.__proto__ = t), i.prototype = Object.create(t && t.prototype), i.prototype.constructor = i, i.prototype.setLayoutProperty = function (t, i, a) {\n          if (null == i) delete this._layoutDeclarations[t];else {\n            var e = \"layers.\" + this.id + \".layout.\" + t;\n            if (this._validate(validateStyle.layoutProperty, e, t, i, a)) return;\n            this._layoutDeclarations[t] = new StyleDeclaration(this._layoutSpecifications[t], i);\n          }\n\n          this._updateLayoutValue(t);\n        }, i.prototype.getLayoutProperty = function (t) {\n          return this._layoutDeclarations[t] && this._layoutDeclarations[t].value;\n        }, i.prototype.getLayoutValue = function (t, i, a) {\n          var e = this._layoutSpecifications[t],\n              o = this._layoutDeclarations[t];\n          return o ? o.calculate(i, a) : e.default;\n        }, i.prototype.setPaintProperty = function (t, i, a, e) {\n          var o = \"layers.\" + this.id + (a ? '[\"paint.' + a + '\"].' : \".paint.\") + t;\n          if (util.endsWith(t, TRANSITION_SUFFIX)) {\n            if (this._paintTransitionOptions[a || \"\"] || (this._paintTransitionOptions[a || \"\"] = {}), null === i || void 0 === i) delete this._paintTransitionOptions[a || \"\"][t];else {\n              if (this._validate(validateStyle.paintProperty, o, t, i, e)) return;\n              this._paintTransitionOptions[a || \"\"][t] = i;\n            }\n          } else if (this._paintDeclarations[a || \"\"] || (this._paintDeclarations[a || \"\"] = {}), null === i || void 0 === i) delete this._paintDeclarations[a || \"\"][t];else {\n            if (this._validate(validateStyle.paintProperty, o, t, i, e)) return;\n            this._paintDeclarations[a || \"\"][t] = new StyleDeclaration(this._paintSpecifications[t], i);\n          }\n        }, i.prototype.getPaintProperty = function (t, i) {\n          return i = i || \"\", util.endsWith(t, TRANSITION_SUFFIX) ? this._paintTransitionOptions[i] && this._paintTransitionOptions[i][t] : this._paintDeclarations[i] && this._paintDeclarations[i][t] && this._paintDeclarations[i][t].value;\n        }, i.prototype.getPaintValue = function (t, i, a) {\n          var e = this._paintSpecifications[t],\n              o = this._paintTransitions[t];\n          return o ? o.calculate(i, a) : \"color\" === e.type && e.default ? parseColor(e.default) : e.default;\n        }, i.prototype.getPaintValueStopZoomLevels = function (t) {\n          var i = this._paintTransitions[t];\n          return i ? i.declaration.stopZoomLevels : [];\n        }, i.prototype.getLayoutValueStopZoomLevels = function (t) {\n          var i = this._layoutDeclarations[t];\n          return i ? i.stopZoomLevels : [];\n        }, i.prototype.getPaintInterpolationT = function (t, i) {\n          var a = this._paintTransitions[t];\n          return a.declaration.calculateInterpolationT(i);\n        }, i.prototype.getLayoutInterpolationT = function (t, i) {\n          var a = this._layoutDeclarations[t];\n          return a.calculateInterpolationT(i);\n        }, i.prototype.isPaintValueFeatureConstant = function (t) {\n          var i = this._paintTransitions[t];\n          return !i || i.declaration.isFeatureConstant;\n        }, i.prototype.isLayoutValueFeatureConstant = function (t) {\n          var i = this._layoutDeclarations[t];\n          return !i || i.isFeatureConstant;\n        }, i.prototype.isPaintValueZoomConstant = function (t) {\n          var i = this._paintTransitions[t];\n          return !i || i.declaration.isZoomConstant;\n        }, i.prototype.isLayoutValueZoomConstant = function (t) {\n          var i = this._layoutDeclarations[t];\n          return !i || i.isZoomConstant;\n        }, i.prototype.isHidden = function (t) {\n          return !!(this.minzoom && t < this.minzoom) || !!(this.maxzoom && t >= this.maxzoom) || \"none\" === this.layout.visibility;\n        }, i.prototype.updatePaintTransitions = function (t, i, a, e, o) {\n          for (var n = this, r = util.extend({}, this._paintDeclarations[\"\"]), s = 0; s < t.length; s++) {\n            util.extend(r, n._paintDeclarations[t[s]]);\n          }\n\n          var l;\n\n          for (l in r) {\n            n._applyPaintDeclaration(l, r[l], i, a, e, o);\n          }\n\n          for (l in n._paintTransitions) {\n            l in r || n._applyPaintDeclaration(l, null, i, a, e, o);\n          }\n        }, i.prototype.updatePaintTransition = function (t, i, a, e, o, n) {\n          for (var r = this, s = this._paintDeclarations[\"\"][t], l = 0; l < i.length; l++) {\n            var u = r._paintDeclarations[i[l]];\n            u && u[t] && (s = u[t]);\n          }\n\n          this._applyPaintDeclaration(t, s, a, e, o, n);\n        }, i.prototype.recalculate = function (t) {\n          var i = this;\n\n          for (var a in i._paintTransitions) {\n            i.paint[a] = i.getPaintValue(a, {\n              zoom: t\n            });\n          }\n\n          for (var e in i._layoutFunctions) {\n            i.layout[e] = i.getLayoutValue(e, {\n              zoom: t\n            });\n          }\n        }, i.prototype.serialize = function () {\n          var t = this,\n              i = {\n            id: this.id,\n            type: this.type,\n            source: this.source,\n            \"source-layer\": this.sourceLayer,\n            metadata: this.metadata,\n            minzoom: this.minzoom,\n            maxzoom: this.maxzoom,\n            filter: this.filter,\n            layout: util.mapObject(this._layoutDeclarations, getDeclarationValue)\n          };\n\n          for (var a in t._paintDeclarations) {\n            var e = \"\" === a ? \"paint\" : \"paint.\" + a;\n            i[e] = util.mapObject(t._paintDeclarations[a], getDeclarationValue);\n          }\n\n          return util.filterObject(i, function (t, i) {\n            return void 0 !== t && !(\"layout\" === i && !Object.keys(t).length);\n          });\n        }, i.prototype._applyPaintDeclaration = function (t, i, a, e, o, n) {\n          var r = a.transition ? this._paintTransitions[t] : void 0,\n              s = this._paintSpecifications[t];\n\n          if (null !== i && void 0 !== i || (i = new StyleDeclaration(s, s.default)), !r || r.declaration.json !== i.json) {\n            var l = util.extend({\n              duration: 300,\n              delay: 0\n            }, e, this.getPaintProperty(t + TRANSITION_SUFFIX)),\n                u = this._paintTransitions[t] = new StyleTransition(s, i, r, l, n);\n            u.instant() || (u.loopID = o.set(u.endTime - Date.now())), r && o.cancel(r.loopID);\n          }\n        }, i.prototype._updateLayoutValue = function (t) {\n          var i = this._layoutDeclarations[t];\n          i && i.isFunction ? this._layoutFunctions[t] = !0 : (delete this._layoutFunctions[t], this.layout[t] = this.getLayoutValue(t));\n        }, i.prototype._validate = function (t, i, a, e, o) {\n          return (!o || o.validate !== !1) && validateStyle.emitErrors(this, t.call(validateStyle, {\n            key: i,\n            layerType: this.type,\n            objectKey: a,\n            value: e,\n            styleSpec: styleSpec,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            }\n          }));\n        }, i;\n      }(Evented);\n\n      module.exports = StyleLayer;\n      var subclasses = {\n        circle: _dereq_(\"./style_layer/circle_style_layer\"),\n        fill: _dereq_(\"./style_layer/fill_style_layer\"),\n        \"fill-extrusion\": _dereq_(\"./style_layer/fill_extrusion_style_layer\"),\n        line: _dereq_(\"./style_layer/line_style_layer\"),\n        symbol: _dereq_(\"./style_layer/symbol_style_layer\")\n      };\n\n      StyleLayer.create = function (t) {\n        var i = subclasses[t.type] || StyleLayer;\n        return new i(t);\n      };\n    }, {\n      \"../style-spec/reference/latest\": 118,\n      \"../util/evented\": 202,\n      \"../util/util\": 215,\n      \"./../style-spec/util/parse_color\": 123,\n      \"./style_declaration\": 149,\n      \"./style_layer/circle_style_layer\": 151,\n      \"./style_layer/fill_extrusion_style_layer\": 152,\n      \"./style_layer/fill_style_layer\": 153,\n      \"./style_layer/line_style_layer\": 154,\n      \"./style_layer/symbol_style_layer\": 155,\n      \"./style_transition\": 157,\n      \"./validate_style\": 158\n    }],\n    151: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var StyleLayer = _dereq_(\"../style_layer\"),\n          CircleBucket = _dereq_(\"../../data/bucket/circle_bucket\"),\n          CircleStyleLayer = function (e) {\n        function t() {\n          e.apply(this, arguments);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.createBucket = function (e) {\n          return new CircleBucket(e);\n        }, t;\n      }(StyleLayer);\n\n      module.exports = CircleStyleLayer;\n    }, {\n      \"../../data/bucket/circle_bucket\": 45,\n      \"../style_layer\": 150\n    }],\n    152: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var StyleLayer = _dereq_(\"../style_layer\"),\n          FillExtrusionBucket = _dereq_(\"../../data/bucket/fill_extrusion_bucket\"),\n          FillExtrusionStyleLayer = function (t) {\n        function e() {\n          t.apply(this, arguments);\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getPaintValue = function (e, r, o) {\n          var l = t.prototype.getPaintValue.call(this, e, r, o);\n          return \"fill-extrusion-color\" === e && l && (l[3] = 1), l;\n        }, e.prototype.createBucket = function (t) {\n          return new FillExtrusionBucket(t);\n        }, e;\n      }(StyleLayer);\n\n      module.exports = FillExtrusionStyleLayer;\n    }, {\n      \"../../data/bucket/fill_extrusion_bucket\": 47,\n      \"../style_layer\": 150\n    }],\n    153: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var StyleLayer = _dereq_(\"../style_layer\"),\n          FillBucket = _dereq_(\"../../data/bucket/fill_bucket\"),\n          FillStyleLayer = function (t) {\n        function o() {\n          t.apply(this, arguments);\n        }\n\n        return t && (o.__proto__ = t), o.prototype = Object.create(t && t.prototype), o.prototype.constructor = o, o.prototype.getPaintValue = function (o, l, e) {\n          var i = this;\n\n          if (\"fill-outline-color\" === o) {\n            if (void 0 === this.getPaintProperty(\"fill-outline-color\")) return t.prototype.getPaintValue.call(this, \"fill-color\", l, e);\n\n            for (var r = this._paintTransitions[\"fill-outline-color\"]; r;) {\n              var n = r && r.declaration && r.declaration.value;\n              if (!n) return t.prototype.getPaintValue.call(i, \"fill-color\", l, e);\n              r = r.oldTransition;\n            }\n          }\n\n          return t.prototype.getPaintValue.call(this, o, l, e);\n        }, o.prototype.getPaintValueStopZoomLevels = function (o) {\n          return \"fill-outline-color\" === o && void 0 === this.getPaintProperty(\"fill-outline-color\") ? t.prototype.getPaintValueStopZoomLevels.call(this, \"fill-color\") : t.prototype.getPaintValueStopZoomLevels.call(this, o);\n        }, o.prototype.getPaintInterpolationT = function (o, l) {\n          return \"fill-outline-color\" === o && void 0 === this.getPaintProperty(\"fill-outline-color\") ? t.prototype.getPaintInterpolationT.call(this, \"fill-color\", l) : t.prototype.getPaintInterpolationT.call(this, o, l);\n        }, o.prototype.isPaintValueFeatureConstant = function (o) {\n          return \"fill-outline-color\" === o && void 0 === this.getPaintProperty(\"fill-outline-color\") ? t.prototype.isPaintValueFeatureConstant.call(this, \"fill-color\") : t.prototype.isPaintValueFeatureConstant.call(this, o);\n        }, o.prototype.isPaintValueZoomConstant = function (o) {\n          return \"fill-outline-color\" === o && void 0 === this.getPaintProperty(\"fill-outline-color\") ? t.prototype.isPaintValueZoomConstant.call(this, \"fill-color\") : t.prototype.isPaintValueZoomConstant.call(this, o);\n        }, o.prototype.createBucket = function (t) {\n          return new FillBucket(t);\n        }, o;\n      }(StyleLayer);\n\n      module.exports = FillStyleLayer;\n    }, {\n      \"../../data/bucket/fill_bucket\": 46,\n      \"../style_layer\": 150\n    }],\n    154: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var StyleLayer = _dereq_(\"../style_layer\"),\n          LineBucket = _dereq_(\"../../data/bucket/line_bucket\"),\n          util = _dereq_(\"../../util/util\"),\n          LineStyleLayer = function (e) {\n        function t() {\n          e.apply(this, arguments);\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.getPaintValue = function (t, r, o) {\n          var i = e.prototype.getPaintValue.call(this, t, r, o);\n\n          if (i && \"line-dasharray\" === t) {\n            var a = this.getPaintValue(\"line-width\", util.extend({}, r, {\n              zoom: Math.floor(r.zoom)\n            }), o);\n            i.fromScale *= a, i.toScale *= a;\n          }\n\n          return i;\n        }, t.prototype.createBucket = function (e) {\n          return new LineBucket(e);\n        }, t;\n      }(StyleLayer);\n\n      module.exports = LineStyleLayer;\n    }, {\n      \"../../data/bucket/line_bucket\": 48,\n      \"../../util/util\": 215,\n      \"../style_layer\": 150\n    }],\n    155: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var StyleLayer = _dereq_(\"../style_layer\"),\n          SymbolBucket = _dereq_(\"../../data/bucket/symbol_bucket\"),\n          SymbolStyleLayer = function (t) {\n        function e() {\n          t.apply(this, arguments);\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getLayoutValue = function (e, o, r) {\n          var a = t.prototype.getLayoutValue.call(this, e, o, r);\n          if (\"auto\" !== a) return a;\n\n          switch (e) {\n            case \"text-rotation-alignment\":\n            case \"icon-rotation-alignment\":\n              return \"line\" === this.getLayoutValue(\"symbol-placement\", o, r) ? \"map\" : \"viewport\";\n\n            case \"text-pitch-alignment\":\n              return this.getLayoutValue(\"text-rotation-alignment\", o, r);\n\n            default:\n              return a;\n          }\n        }, e.prototype.createBucket = function (t) {\n          return new SymbolBucket(t);\n        }, e;\n      }(StyleLayer);\n\n      module.exports = SymbolStyleLayer;\n    }, {\n      \"../../data/bucket/symbol_bucket\": 49,\n      \"../style_layer\": 150\n    }],\n    156: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var StyleLayer = _dereq_(\"./style_layer\"),\n          util = _dereq_(\"../util/util\"),\n          featureFilter = _dereq_(\"../style-spec/feature_filter\"),\n          groupByLayout = _dereq_(\"../style-spec/group_by_layout\"),\n          StyleLayerIndex = function StyleLayerIndex(e) {\n        e && this.replace(e);\n      };\n\n      StyleLayerIndex.prototype.replace = function (e) {\n        var r = this;\n        this.symbolOrder = [];\n\n        for (var t = 0, i = e; t < i.length; t += 1) {\n          var a = i[t];\n          \"symbol\" === a.type && r.symbolOrder.push(a.id);\n        }\n\n        this._layerConfigs = {}, this._layers = {}, this.update(e, []);\n      }, StyleLayerIndex.prototype.update = function (e, r, t) {\n        for (var i = this, a = 0, l = e; a < l.length; a += 1) {\n          var y = l[a];\n          i._layerConfigs[y.id] = y;\n          var s = i._layers[y.id] = StyleLayer.create(y);\n          s.updatePaintTransitions({}, {\n            transition: !1\n          }), s.filter = featureFilter(s.filter);\n        }\n\n        for (var o = 0, u = r; o < u.length; o += 1) {\n          var n = u[o];\n          delete i._layerConfigs[n], delete i._layers[n];\n        }\n\n        t && (this.symbolOrder = t), this.familiesBySource = {};\n\n        for (var f = groupByLayout(util.values(this._layerConfigs)), p = 0, d = f; p < d.length; p += 1) {\n          var h = d[p],\n              c = h.map(function (e) {\n            return i._layers[e.id];\n          }),\n              v = c[0];\n\n          if (!v.layout || \"none\" !== v.layout.visibility) {\n            var _ = v.source || \"\",\n                g = i.familiesBySource[_];\n\n            g || (g = i.familiesBySource[_] = {});\n            var L = v.sourceLayer || \"_geojsonTileLayer\",\n                m = g[L];\n            m || (m = g[L] = []), m.push(c);\n          }\n        }\n      }, module.exports = StyleLayerIndex;\n    }, {\n      \"../style-spec/feature_filter\": 104,\n      \"../style-spec/group_by_layout\": 107,\n      \"../util/util\": 215,\n      \"./style_layer\": 150\n    }],\n    157: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function interpZoomTransitioned(t, i, e) {\n        if (void 0 !== t && void 0 !== i) return {\n          from: t.to,\n          fromScale: t.toScale,\n          to: i.to,\n          toScale: i.toScale,\n          t: e\n        };\n      }\n\n      var util = _dereq_(\"../util/util\"),\n          interpolate = _dereq_(\"../style-spec/util/interpolate\"),\n          fakeZoomHistory = {\n        lastIntegerZoom: 0,\n        lastIntegerZoomTime: 0,\n        lastZoom: 0\n      },\n          StyleTransition = function StyleTransition(t, i, e, o, a) {\n        this.declaration = i, this.startTime = this.endTime = new Date().getTime(), this.oldTransition = e, this.duration = o.duration || 0, this.delay = o.delay || 0, this.zoomTransitioned = \"piecewise-constant\" === t.function && t.transition, this.interp = this.zoomTransitioned ? interpZoomTransitioned : interpolate[t.type], this.zoomHistory = a || fakeZoomHistory, this.instant() || (this.endTime = this.startTime + this.duration + this.delay), e && e.endTime <= this.startTime && delete e.oldTransition;\n      };\n\n      StyleTransition.prototype.instant = function () {\n        return !this.oldTransition || !this.interp || 0 === this.duration && 0 === this.delay;\n      }, StyleTransition.prototype.calculate = function (t, i, e) {\n        var o = this._calculateTargetValue(t, i);\n\n        if (this.instant()) return o;\n        if (e = e || Date.now(), e >= this.endTime) return o;\n        var a = this.oldTransition.calculate(t, i, this.startTime),\n            n = util.easeCubicInOut((e - this.startTime - this.delay) / this.duration);\n        return this.interp(a, o, n);\n      }, StyleTransition.prototype._calculateTargetValue = function (t, i) {\n        if (!this.zoomTransitioned) return this.declaration.calculate(t, i);\n        var e = t.zoom,\n            o = this.zoomHistory.lastIntegerZoom,\n            a = e > o ? 2 : .5,\n            n = this.declaration.calculate({\n          zoom: e > o ? e - 1 : e + 1\n        }, i),\n            r = this.declaration.calculate({\n          zoom: e\n        }, i),\n            s = Math.min((Date.now() - this.zoomHistory.lastIntegerZoomTime) / this.duration, 1),\n            l = Math.abs(e - o),\n            u = interpolate(s, 1, l);\n        return void 0 !== n && void 0 !== r ? {\n          from: n,\n          fromScale: a,\n          to: r,\n          toScale: 1,\n          t: u\n        } : void 0;\n      }, module.exports = StyleTransition;\n    }, {\n      \"../style-spec/util/interpolate\": 122,\n      \"../util/util\": 215\n    }],\n    158: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = _dereq_(\"../style-spec/validate_style.min\"), module.exports.emitErrors = function (r, e) {\n        if (e && e.length) {\n          for (var t = 0; t < e.length; t++) {\n            r.fire(\"error\", {\n              error: new Error(e[t].message)\n            });\n          }\n\n          return !0;\n        }\n\n        return !1;\n      };\n    }, {\n      \"../style-spec/validate_style.min\": 144\n    }],\n    159: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Point = _dereq_(\"point-geometry\"),\n          Anchor = function (t) {\n        function o(o, e, n, r) {\n          t.call(this, o, e), this.angle = n, void 0 !== r && (this.segment = r);\n        }\n\n        return t && (o.__proto__ = t), o.prototype = Object.create(t && t.prototype), o.prototype.constructor = o, o.prototype.clone = function () {\n          return new o(this.x, this.y, this.angle, this.segment);\n        }, o;\n      }(Point);\n\n      module.exports = Anchor;\n    }, {\n      \"point-geometry\": 25\n    }],\n    160: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function checkMaxAngle(e, t, a, r, n) {\n        if (void 0 === t.segment) return !0;\n\n        for (var i = t, s = t.segment + 1, f = 0; f > -a / 2;) {\n          if (s--, s < 0) return !1;\n          f -= e[s].dist(i), i = e[s];\n        }\n\n        f += e[s].dist(e[s + 1]), s++;\n\n        for (var l = [], o = 0; f < a / 2;) {\n          var u = e[s - 1],\n              c = e[s],\n              g = e[s + 1];\n          if (!g) return !1;\n          var h = u.angleTo(c) - c.angleTo(g);\n\n          for (h = Math.abs((h + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l.push({\n            distance: f,\n            angleDelta: h\n          }), o += h; f - l[0].distance > r;) {\n            o -= l.shift().angleDelta;\n          }\n\n          if (o > n) return !1;\n          s++, f += c.dist(g);\n        }\n\n        return !0;\n      }\n\n      module.exports = checkMaxAngle;\n    }, {}],\n    161: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function clipLine(n, x, y, o, e) {\n        for (var r = [], t = 0; t < n.length; t++) {\n          for (var i = n[t], u = void 0, d = 0; d < i.length - 1; d++) {\n            var P = i[d],\n                w = i[d + 1];\n            P.x < x && w.x < x || (P.x < x ? P = new Point(x, P.y + (w.y - P.y) * ((x - P.x) / (w.x - P.x)))._round() : w.x < x && (w = new Point(x, P.y + (w.y - P.y) * ((x - P.x) / (w.x - P.x)))._round()), P.y < y && w.y < y || (P.y < y ? P = new Point(P.x + (w.x - P.x) * ((y - P.y) / (w.y - P.y)), y)._round() : w.y < y && (w = new Point(P.x + (w.x - P.x) * ((y - P.y) / (w.y - P.y)), y)._round()), P.x >= o && w.x >= o || (P.x >= o ? P = new Point(o, P.y + (w.y - P.y) * ((o - P.x) / (w.x - P.x)))._round() : w.x >= o && (w = new Point(o, P.y + (w.y - P.y) * ((o - P.x) / (w.x - P.x)))._round()), P.y >= e && w.y >= e || (P.y >= e ? P = new Point(P.x + (w.x - P.x) * ((e - P.y) / (w.y - P.y)), e)._round() : w.y >= e && (w = new Point(P.x + (w.x - P.x) * ((e - P.y) / (w.y - P.y)), e)._round()), u && P.equals(u[u.length - 1]) || (u = [P], r.push(u)), u.push(w)))));\n          }\n        }\n\n        return r;\n      }\n\n      var Point = _dereq_(\"point-geometry\");\n\n      module.exports = clipLine;\n    }, {\n      \"point-geometry\": 25\n    }],\n    162: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var createStructArrayType = _dereq_(\"../util/struct_array\"),\n          Point = _dereq_(\"point-geometry\"),\n          CollisionBoxArray = createStructArrayType({\n        members: [{\n          type: \"Int16\",\n          name: \"anchorPointX\"\n        }, {\n          type: \"Int16\",\n          name: \"anchorPointY\"\n        }, {\n          type: \"Int16\",\n          name: \"x1\"\n        }, {\n          type: \"Int16\",\n          name: \"y1\"\n        }, {\n          type: \"Int16\",\n          name: \"x2\"\n        }, {\n          type: \"Int16\",\n          name: \"y2\"\n        }, {\n          type: \"Float32\",\n          name: \"maxScale\"\n        }, {\n          type: \"Uint32\",\n          name: \"featureIndex\"\n        }, {\n          type: \"Uint16\",\n          name: \"sourceLayerIndex\"\n        }, {\n          type: \"Uint16\",\n          name: \"bucketIndex\"\n        }, {\n          type: \"Int16\",\n          name: \"bbox0\"\n        }, {\n          type: \"Int16\",\n          name: \"bbox1\"\n        }, {\n          type: \"Int16\",\n          name: \"bbox2\"\n        }, {\n          type: \"Int16\",\n          name: \"bbox3\"\n        }, {\n          type: \"Float32\",\n          name: \"placementScale\"\n        }]\n      });\n\n      Object.defineProperty(CollisionBoxArray.prototype.StructType.prototype, \"anchorPoint\", {\n        get: function get() {\n          return new Point(this.anchorPointX, this.anchorPointY);\n        }\n      }), module.exports = CollisionBoxArray;\n    }, {\n      \"../util/struct_array\": 212,\n      \"point-geometry\": 25\n    }],\n    163: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var CollisionFeature = function CollisionFeature(t, e, i, o, a, n, s, l, r, d, u) {\n        var h = s.top * l - r,\n            f = s.bottom * l + r,\n            m = s.left * l - r,\n            x = s.right * l + r;\n\n        if (this.boxStartIndex = t.length, d) {\n          var _ = f - h,\n              b = x - m;\n\n          if (_ > 0) if (_ = Math.max(10 * l, _), u) {\n            var v = e[i.segment + 1].sub(e[i.segment])._unit()._mult(b),\n                c = [i.sub(v), i.add(v)];\n\n            this._addLineCollisionBoxes(t, c, i, 0, b, _, o, a, n);\n          } else this._addLineCollisionBoxes(t, e, i, i.segment, b, _, o, a, n);\n        } else t.emplaceBack(i.x, i.y, m, h, x, f, 1 / 0, o, a, n, 0, 0, 0, 0, 0);\n\n        this.boxEndIndex = t.length;\n      };\n\n      CollisionFeature.prototype._addLineCollisionBoxes = function (t, e, i, o, a, n, s, l, r) {\n        var d = n / 2,\n            u = Math.floor(a / d),\n            h = Math.floor(u / 4),\n            f = -n / 2,\n            m = i,\n            x = o + 1,\n            _ = f,\n            b = -a / 2,\n            v = b - a / 8;\n\n        do {\n          if (x--, x < 0) {\n            if (_ > b) return;\n            x = 0;\n            break;\n          }\n\n          _ -= e[x].dist(m), m = e[x];\n        } while (_ > v);\n\n        for (var c = e[x].dist(e[x + 1]), g = -h; g < u + h; g++) {\n          var p = b + g * d;\n\n          if (!(p < _)) {\n            for (; _ + c < p;) {\n              if (_ += c, x++, x + 1 >= e.length) return;\n              c = e[x].dist(e[x + 1]);\n            }\n\n            var C = p - _,\n                M = e[x],\n                B = e[x + 1],\n                k = B.sub(M)._unit()._mult(C)._add(M)._round(),\n                y = Math.max(Math.abs(p - f) - d / 2, 0),\n                F = a / 2 / y;\n\n            (g < 0 || g >= u) && (F = Math.min(F, .99)), t.emplaceBack(k.x, k.y, -n / 2, -n / 2, n / 2, n / 2, F, s, l, r, 0, 0, 0, 0, 0);\n          }\n        }\n      }, module.exports = CollisionFeature;\n    }, {}],\n    164: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Point = _dereq_(\"point-geometry\"),\n          EXTENT = _dereq_(\"../data/extent\"),\n          Grid = _dereq_(\"grid-index\"),\n          intersectionTests = _dereq_(\"../util/intersection_tests\"),\n          CollisionTile = function CollisionTile(t, e, i, a, r) {\n        if (\"object\" == typeof t) {\n          var o = t;\n          r = e, t = o.angle, e = o.pitch, i = o.cameraToCenterDistance, a = o.cameraToTileDistance, this.grid = new Grid(o.grid), this.ignoredGrid = new Grid(o.ignoredGrid);\n        } else this.grid = new Grid(EXTENT, 12, 6), this.ignoredGrid = new Grid(EXTENT, 12, 0);\n\n        this.perspectiveRatio = 1 + .5 * (a / i - 1), this.minScale = .5 / this.perspectiveRatio, this.maxScale = 2 / this.perspectiveRatio, this.angle = t, this.pitch = e, this.cameraToCenterDistance = i, this.cameraToTileDistance = a;\n        var n = Math.sin(t),\n            s = Math.cos(t);\n\n        if (this.rotationMatrix = [s, -n, n, s], this.reverseRotationMatrix = [s, n, -n, s], this.yStretch = Math.max(1, a / (i * Math.cos(e / 180 * Math.PI))), this.collisionBoxArray = r, 0 === r.length) {\n          r.emplaceBack();\n          var l = 32767;\n          r.emplaceBack(0, 0, 0, -l, 0, l, l, 0, 0, 0, 0, 0, 0, 0, 0, 0), r.emplaceBack(EXTENT, 0, 0, -l, 0, l, l, 0, 0, 0, 0, 0, 0, 0, 0, 0), r.emplaceBack(0, 0, -l, 0, l, 0, l, 0, 0, 0, 0, 0, 0, 0, 0, 0), r.emplaceBack(0, EXTENT, -l, 0, l, 0, l, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n        }\n\n        this.tempCollisionBox = r.get(0), this.edges = [r.get(1), r.get(2), r.get(3), r.get(4)];\n      };\n\n      CollisionTile.prototype.serialize = function (t) {\n        var e = this.grid.toArrayBuffer(),\n            i = this.ignoredGrid.toArrayBuffer();\n        return t && (t.push(e), t.push(i)), {\n          angle: this.angle,\n          pitch: this.pitch,\n          cameraToCenterDistance: this.cameraToCenterDistance,\n          cameraToTileDistance: this.cameraToTileDistance,\n          grid: e,\n          ignoredGrid: i\n        };\n      }, CollisionTile.prototype.placeCollisionFeature = function (t, e, i) {\n        for (var a = this, r = this.collisionBoxArray, o = this.minScale, n = this.rotationMatrix, s = this.yStretch, l = t.boxStartIndex; l < t.boxEndIndex; l++) {\n          var c = r.get(l),\n              h = c.anchorPoint._matMult(n),\n              x = h.x,\n              m = h.y,\n              p = x + c.x1 * a.perspectiveRatio,\n              g = m + c.y1 * s * a.perspectiveRatio,\n              y = x + c.x2 * a.perspectiveRatio,\n              d = m + c.y2 * s * a.perspectiveRatio;\n\n          if (c.bbox0 = p, c.bbox1 = g, c.bbox2 = y, c.bbox3 = d, !e) for (var u = a.grid.query(p, g, y, d), v = 0; v < u.length; v++) {\n            var M = r.get(u[v]),\n                T = M.anchorPoint._matMult(n);\n\n            if (o = a.getPlacementScale(o, h, c, T, M), o >= a.maxScale) return o;\n          }\n\n          if (i) {\n            var f = void 0;\n\n            if (a.angle) {\n              var S = a.reverseRotationMatrix,\n                  P = new Point(c.x1, c.y1).matMult(S),\n                  b = new Point(c.x2, c.y1).matMult(S),\n                  C = new Point(c.x1, c.y2).matMult(S),\n                  N = new Point(c.x2, c.y2).matMult(S);\n              f = a.tempCollisionBox, f.anchorPointX = c.anchorPoint.x, f.anchorPointY = c.anchorPoint.y, f.x1 = Math.min(P.x, b.x, C.x, N.x), f.y1 = Math.min(P.y, b.x, C.x, N.x), f.x2 = Math.max(P.x, b.x, C.x, N.x), f.y2 = Math.max(P.y, b.x, C.x, N.x), f.maxScale = c.maxScale;\n            } else f = c;\n\n            for (var w = 0; w < this.edges.length; w++) {\n              var B = a.edges[w];\n              if (o = a.getPlacementScale(o, c.anchorPoint, f, B.anchorPoint, B), o >= a.maxScale) return o;\n            }\n          }\n        }\n\n        return o;\n      }, CollisionTile.prototype.queryRenderedSymbols = function (t, e) {\n        var i = {},\n            a = [];\n        if (0 === t.length || 0 === this.grid.keys.length && 0 === this.ignoredGrid.keys.length) return a;\n\n        for (var r = this.collisionBoxArray, o = this.rotationMatrix, n = this.yStretch, s = [], l = 1 / 0, c = 1 / 0, h = -(1 / 0), x = -(1 / 0), m = 0; m < t.length; m++) {\n          for (var p = t[m], g = 0; g < p.length; g++) {\n            var y = p[g].matMult(o);\n            l = Math.min(l, y.x), c = Math.min(c, y.y), h = Math.max(h, y.x), x = Math.max(x, y.y), s.push(y);\n          }\n        }\n\n        for (var d = this.grid.query(l, c, h, x), u = this.ignoredGrid.query(l, c, h, x), v = 0; v < u.length; v++) {\n          d.push(u[v]);\n        }\n\n        for (var M = e / this.perspectiveRatio, T = Math.pow(2, Math.ceil(Math.log(M) / Math.LN2 * 10) / 10), f = 0; f < d.length; f++) {\n          var S = r.get(d[f]),\n              P = S.sourceLayerIndex,\n              b = S.featureIndex;\n\n          if (void 0 === i[P] && (i[P] = {}), !i[P][b] && !(T < S.placementScale || T > S.maxScale)) {\n            var C = S.anchorPoint.matMult(o),\n                N = C.x + S.x1 / M,\n                w = C.y + S.y1 / M * n,\n                B = C.x + S.x2 / M,\n                G = C.y + S.y2 / M * n,\n                E = [new Point(N, w), new Point(B, w), new Point(B, G), new Point(N, G)];\n            intersectionTests.polygonIntersectsPolygon(s, E) && (i[P][b] = !0, a.push(d[f]));\n          }\n        }\n\n        return a;\n      }, CollisionTile.prototype.getPlacementScale = function (t, e, i, a, r) {\n        var o = e.x - a.x,\n            n = e.y - a.y,\n            s = (r.x1 - i.x2) / o,\n            l = (r.x2 - i.x1) / o,\n            c = (r.y1 - i.y2) * this.yStretch / n,\n            h = (r.y2 - i.y1) * this.yStretch / n;\n        (isNaN(s) || isNaN(l)) && (s = l = 1), (isNaN(c) || isNaN(h)) && (c = h = 1);\n        var x = Math.min(Math.max(s, l), Math.max(c, h)),\n            m = r.maxScale,\n            p = i.maxScale;\n        return x > m && (x = m), x > p && (x = p), x > t && x >= r.placementScale && (t = x), t;\n      }, CollisionTile.prototype.insertCollisionFeature = function (t, e, i) {\n        for (var a = this, r = i ? this.ignoredGrid : this.grid, o = this.collisionBoxArray, n = t.boxStartIndex; n < t.boxEndIndex; n++) {\n          var s = o.get(n);\n          s.placementScale = e, e < a.maxScale && (1 === a.perspectiveRatio || s.maxScale >= 1) && r.insert(n, s.bbox0, s.bbox1, s.bbox2, s.bbox3);\n        }\n      }, module.exports = CollisionTile;\n    }, {\n      \"../data/extent\": 53,\n      \"../util/intersection_tests\": 206,\n      \"grid-index\": 16,\n      \"point-geometry\": 25\n    }],\n    165: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function getAnchors(e, r, t, n, a, l, o, i, c) {\n        var h = n ? .6 * l * o : 0,\n            s = Math.max(n ? n.right - n.left : 0, a ? a.right - a.left : 0),\n            u = 0 === e[0].x || e[0].x === c || 0 === e[0].y || e[0].y === c;\n        r - s * o < r / 4 && (r = s * o + r / 4);\n        var g = 2 * l,\n            p = u ? r / 2 * i % r : (s / 2 + g) * o * i % r;\n        return resample(e, p, r, h, t, s * o, u, !1, c);\n      }\n\n      function resample(e, r, t, n, a, l, o, i, c) {\n        for (var h = l / 2, s = 0, u = 0; u < e.length - 1; u++) {\n          s += e[u].dist(e[u + 1]);\n        }\n\n        for (var g = 0, p = r - t, x = [], f = 0; f < e.length - 1; f++) {\n          for (var v = e[f], m = e[f + 1], y = v.dist(m), A = m.angleTo(v); p + t < g + y;) {\n            p += t;\n            var d = (p - g) / y,\n                k = interpolate(v.x, m.x, d),\n                q = interpolate(v.y, m.y, d);\n\n            if (k >= 0 && k < c && q >= 0 && q < c && p - h >= 0 && p + h <= s) {\n              var M = new Anchor(k, q, A, f)._round();\n\n              n && !checkMaxAngle(e, M, l, n, a) || x.push(M);\n            }\n          }\n\n          g += y;\n        }\n\n        return i || x.length || o || (x = resample(e, g / 2, t, n, a, l, o, !0, c)), x;\n      }\n\n      var interpolate = _dereq_(\"../style-spec/util/interpolate\"),\n          Anchor = _dereq_(\"../symbol/anchor\"),\n          checkMaxAngle = _dereq_(\"./check_max_angle\");\n\n      module.exports = getAnchors;\n    }, {\n      \"../style-spec/util/interpolate\": 122,\n      \"../symbol/anchor\": 159,\n      \"./check_max_angle\": 160\n    }],\n    166: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var ShelfPack = _dereq_(\"@mapbox/shelf-pack\"),\n          util = _dereq_(\"../util/util\"),\n          SIZE_GROWTH_RATE = 4,\n          DEFAULT_SIZE = 128,\n          MAX_SIZE = 2048,\n          GlyphAtlas = function GlyphAtlas() {\n        this.width = DEFAULT_SIZE, this.height = DEFAULT_SIZE, this.atlas = new ShelfPack(this.width, this.height), this.index = {}, this.ids = {}, this.data = new Uint8Array(this.width * this.height);\n      };\n\n      GlyphAtlas.prototype.getGlyphs = function () {\n        var t,\n            i,\n            e,\n            h = this,\n            r = {};\n\n        for (var s in h.ids) {\n          t = s.split(\"#\"), i = t[0], e = t[1], r[i] || (r[i] = []), r[i].push(e);\n        }\n\n        return r;\n      }, GlyphAtlas.prototype.getRects = function () {\n        var t,\n            i,\n            e,\n            h = this,\n            r = {};\n\n        for (var s in h.ids) {\n          t = s.split(\"#\"), i = t[0], e = t[1], r[i] || (r[i] = {}), r[i][e] = h.index[s];\n        }\n\n        return r;\n      }, GlyphAtlas.prototype.addGlyph = function (t, i, e, h) {\n        var r = this;\n        if (!e) return null;\n        var s = i + \"#\" + e.id;\n        if (this.index[s]) return this.ids[s].indexOf(t) < 0 && this.ids[s].push(t), this.index[s];\n        if (!e.bitmap) return null;\n        var a = e.width + 2 * h,\n            E = e.height + 2 * h,\n            n = 1,\n            l = a + 2 * n,\n            T = E + 2 * n,\n            u = this.atlas.packOne(l, T);\n        if (u || (this.resize(), u = this.atlas.packOne(l, T)), !u) return util.warnOnce(\"glyph bitmap overflow\"), null;\n        this.index[s] = u, this.ids[s] = [t];\n\n        for (var d = this.data, p = e.bitmap, A = 0; A < E; A++) {\n          for (var _ = r.width * (u.y + A + n) + u.x + n, o = a * A, x = 0; x < a; x++) {\n            d[_ + x] = p[o + x];\n          }\n        }\n\n        return this.dirty = !0, u;\n      }, GlyphAtlas.prototype.resize = function () {\n        var t = this,\n            i = this.width,\n            e = this.height;\n\n        if (!(i >= MAX_SIZE || e >= MAX_SIZE)) {\n          this.texture && (this.gl && this.gl.deleteTexture(this.texture), this.texture = null), this.width *= SIZE_GROWTH_RATE, this.height *= SIZE_GROWTH_RATE, this.atlas.resize(this.width, this.height);\n\n          for (var h = new ArrayBuffer(this.width * this.height), r = 0; r < e; r++) {\n            var s = new Uint8Array(t.data.buffer, e * r, i),\n                a = new Uint8Array(h, e * r * SIZE_GROWTH_RATE, i);\n            a.set(s);\n          }\n\n          this.data = new Uint8Array(h);\n        }\n      }, GlyphAtlas.prototype.bind = function (t) {\n        this.gl = t, this.texture ? t.bindTexture(t.TEXTURE_2D, this.texture) : (this.texture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texImage2D(t.TEXTURE_2D, 0, t.ALPHA, this.width, this.height, 0, t.ALPHA, t.UNSIGNED_BYTE, null));\n      }, GlyphAtlas.prototype.updateTexture = function (t) {\n        this.bind(t), this.dirty && (t.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, this.width, this.height, t.ALPHA, t.UNSIGNED_BYTE, this.data), this.dirty = !1);\n      }, module.exports = GlyphAtlas;\n    }, {\n      \"../util/util\": 215,\n      \"@mapbox/shelf-pack\": 2\n    }],\n    167: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function glyphUrl(t, e, a, l) {\n        return l = l || \"abc\", a.replace(\"{s}\", l[t.length % l.length]).replace(\"{fontstack}\", t).replace(\"{range}\", e);\n      }\n\n      var normalizeURL = _dereq_(\"../util/mapbox\").normalizeGlyphsURL,\n          ajax = _dereq_(\"../util/ajax\"),\n          verticalizePunctuation = _dereq_(\"../util/verticalize_punctuation\"),\n          Glyphs = _dereq_(\"../util/glyphs\"),\n          GlyphAtlas = _dereq_(\"../symbol/glyph_atlas\"),\n          Protobuf = _dereq_(\"pbf\"),\n          SimpleGlyph = function SimpleGlyph(t, e, a) {\n        var l = 1;\n        this.advance = t.advance, this.left = t.left - a - l, this.top = t.top + a + l, this.rect = e;\n      },\n          GlyphSource = function GlyphSource(t) {\n        this.url = t && normalizeURL(t), this.atlases = {}, this.stacks = {}, this.loading = {};\n      };\n\n      GlyphSource.prototype.getSimpleGlyphs = function (t, e, a, l) {\n        var i = this;\n        void 0 === this.stacks[t] && (this.stacks[t] = {}), void 0 === this.atlases[t] && (this.atlases[t] = new GlyphAtlas());\n\n        for (var r = {}, o = this.stacks[t], s = this.atlases[t], n = 3, h = {}, p = 0, u = function u(e) {\n          var l = Math.floor(e / 256);\n\n          if (o[l]) {\n            var i = o[l].glyphs[e],\n                u = s.addGlyph(a, t, i, n);\n            i && (r[e] = new SimpleGlyph(i, u, n));\n          } else void 0 === h[l] && (h[l] = [], p++), h[l].push(e);\n        }, c = 0; c < e.length; c++) {\n          var y = e[c],\n              f = String.fromCharCode(y);\n          u(y), verticalizePunctuation.lookup[f] && u(verticalizePunctuation.lookup[f].charCodeAt(0));\n        }\n\n        p || l(void 0, r, t);\n\n        var v = function v(e, o, u) {\n          if (!e) for (var c = i.stacks[t][o] = u.stacks[0], y = 0; y < h[o].length; y++) {\n            var f = h[o][y],\n                v = c.glyphs[f],\n                d = s.addGlyph(a, t, v, n);\n            v && (r[f] = new SimpleGlyph(v, d, n));\n          }\n          p--, p || l(void 0, r, t);\n        };\n\n        for (var d in h) {\n          i.loadRange(t, d, v);\n        }\n      }, GlyphSource.prototype.loadRange = function (t, e, a) {\n        if (256 * e > 65535) return a(\"glyphs > 65535 not supported\");\n        void 0 === this.loading[t] && (this.loading[t] = {});\n        var l = this.loading[t];\n        if (l[e]) l[e].push(a);else {\n          l[e] = [a];\n          var i = 256 * e + \"-\" + (256 * e + 255),\n              r = glyphUrl(t, i, this.url);\n          ajax.getArrayBuffer(r, function (t, a) {\n            for (var i = !t && new Glyphs(new Protobuf(a.data)), r = 0; r < l[e].length; r++) {\n              l[e][r](t, e, i);\n            }\n\n            delete l[e];\n          });\n        }\n      }, GlyphSource.prototype.getGlyphAtlas = function (t) {\n        return this.atlases[t];\n      }, module.exports = GlyphSource;\n    }, {\n      \"../symbol/glyph_atlas\": 166,\n      \"../util/ajax\": 193,\n      \"../util/glyphs\": 205,\n      \"../util/mapbox\": 209,\n      \"../util/verticalize_punctuation\": 217,\n      \"pbf\": 24\n    }],\n    168: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = function (e) {\n        function t(t) {\n          g.push(e[t]), l++;\n        }\n\n        function r(e, t, r) {\n          var n = u[e];\n          return delete u[e], u[t] = n, g[n].geometry[0].pop(), g[n].geometry[0] = g[n].geometry[0].concat(r[0]), n;\n        }\n\n        function n(e, t, r) {\n          var n = i[t];\n          return delete i[t], i[e] = n, g[n].geometry[0].shift(), g[n].geometry[0] = r[0].concat(g[n].geometry[0]), n;\n        }\n\n        function o(e, t, r) {\n          var n = r ? t[0][t[0].length - 1] : t[0][0];\n          return e + \":\" + n.x + \":\" + n.y;\n        }\n\n        for (var i = {}, u = {}, g = [], l = 0, m = 0; m < e.length; m++) {\n          var y = e[m],\n              c = y.geometry,\n              f = y.text;\n\n          if (f) {\n            var a = o(f, c),\n                s = o(f, c, !0);\n\n            if (a in u && s in i && u[a] !== i[s]) {\n              var v = n(a, s, c),\n                  d = r(a, s, g[v].geometry);\n              delete i[a], delete u[s], u[o(f, g[d].geometry, !0)] = d, g[v].geometry = null;\n            } else a in u ? r(a, s, c) : s in i ? n(a, s, c) : (t(m), i[a] = l - 1, u[s] = l - 1);\n          } else t(m);\n        }\n\n        return g.filter(function (e) {\n          return e.geometry;\n        });\n      };\n    }, {}],\n    169: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function SymbolQuad(t, e, n, a, i, o, r, l, u, c, h) {\n        this.anchorPoint = t, this.tl = e, this.tr = n, this.bl = a, this.br = i, this.tex = o, this.anchorAngle = r, this.glyphAngle = l, this.minScale = u, this.maxScale = c, this.writingMode = h;\n      }\n\n      function getIconQuads(t, e, n, a, i, o, r, l, u) {\n        var c,\n            h,\n            g,\n            s,\n            m = e.image,\n            d = i.layout,\n            x = 1,\n            f = e.top - x / m.pixelRatio,\n            S = e.left - x / m.pixelRatio,\n            p = e.bottom + x / m.pixelRatio,\n            y = e.right + x / m.pixelRatio;\n\n        if (\"none\" !== d[\"icon-text-fit\"] && r) {\n          var M = y - S,\n              P = p - f,\n              w = d[\"text-size\"] / 24,\n              v = r.left * w,\n              b = r.right * w,\n              I = r.top * w,\n              Q = r.bottom * w,\n              _ = b - v,\n              G = Q - I,\n              R = d[\"icon-text-fit-padding\"][0],\n              D = d[\"icon-text-fit-padding\"][1],\n              V = d[\"icon-text-fit-padding\"][2],\n              L = d[\"icon-text-fit-padding\"][3],\n              A = \"width\" === d[\"icon-text-fit\"] ? .5 * (G - P) : 0,\n              B = \"height\" === d[\"icon-text-fit\"] ? .5 * (_ - M) : 0,\n              E = \"width\" === d[\"icon-text-fit\"] || \"both\" === d[\"icon-text-fit\"] ? _ : M,\n              F = \"height\" === d[\"icon-text-fit\"] || \"both\" === d[\"icon-text-fit\"] ? G : P;\n\n          c = new Point(v + B - L, I + A - R), h = new Point(v + B + D + E, I + A - R), g = new Point(v + B + D + E, I + A + V + F), s = new Point(v + B - L, I + A + V + F);\n        } else c = new Point(S, f), h = new Point(y, f), g = new Point(y, p), s = new Point(S, p);\n\n        var q = i.getLayoutValue(\"icon-rotate\", l, u) * Math.PI / 180;\n\n        if (o) {\n          var N = a[t.segment];\n\n          if (t.y === N.y && t.x === N.x && t.segment + 1 < a.length) {\n            var k = a[t.segment + 1];\n            q += Math.atan2(t.y - k.y, t.x - k.x) + Math.PI;\n          } else q += Math.atan2(t.y - N.y, t.x - N.x);\n        }\n\n        if (q) {\n          var z = Math.sin(q),\n              j = Math.cos(q),\n              C = [j, -z, z, j];\n          c = c.matMult(C), h = h.matMult(C), s = s.matMult(C), g = g.matMult(C);\n        }\n\n        var H = {\n          x: m.textureRect.x - x,\n          y: m.textureRect.y - x,\n          w: m.textureRect.w + 2 * x,\n          h: m.textureRect.h + 2 * x\n        };\n        return [new SymbolQuad(new Point(t.x, t.y), c, h, s, g, H, 0, 0, minScale, 1 / 0)];\n      }\n\n      function getGlyphQuads(t, e, n, a, i, o, r, l) {\n        for (var u = 24, c = i.getLayoutValue(\"text-rotate\", r, l) * Math.PI / 180, h = i.layout[\"text-keep-upright\"], g = i.getLayoutValue(\"text-offset\", r, l).map(function (t) {\n          return t * u;\n        }), s = e.positionedGlyphs, m = [], d = minScale, x = 0; x < s.length; x++) {\n          var f = s[x],\n              S = f.glyph;\n\n          if (S) {\n            var p = S.rect;\n\n            if (p) {\n              var y = (f.x + S.advance / 2) * n,\n                  M = void 0;\n              o ? (M = [], d = Math.max(d, getLineGlyphs(M, t, y, a, t.segment, !1)), h && (d = Math.max(d, getLineGlyphs(M, t, y, a, t.segment, !0)))) : M = [{\n                anchorPoint: new Point(t.x, t.y),\n                upsideDown: !1,\n                angle: 0,\n                maxScale: 1 / 0,\n                minScale: minScale\n              }];\n\n              for (var P = {\n                upright: calculateBaseQuad(f, S, p, g),\n                upsideDown: calculateBaseQuad(f, S, p, [g[0], -g[1]])\n              }, w = 0; w < M.length; w++) {\n                var v = M[w],\n                    b = P[v.upsideDown ? \"upsideDown\" : \"upright\"],\n                    I = b.tl,\n                    Q = b.tr,\n                    _ = b.bl,\n                    G = b.br;\n\n                if (c) {\n                  var R = Math.sin(c),\n                      D = Math.cos(c),\n                      V = [D, -R, R, D];\n                  I = I.matMult(V), Q = Q.matMult(V), _ = _.matMult(V), G = G.matMult(V);\n                }\n\n                var L = Math.max(v.minScale, d),\n                    A = (t.angle + (v.upsideDown ? Math.PI : 0) + 2 * Math.PI) % (2 * Math.PI),\n                    B = (v.angle + (v.upsideDown ? Math.PI : 0) + 2 * Math.PI) % (2 * Math.PI);\n                m.push(new SymbolQuad(v.anchorPoint, I, Q, _, G, p, A, B, L, v.maxScale, e.writingMode));\n              }\n            }\n          }\n        }\n\n        return m;\n      }\n\n      function calculateBaseQuad(t, e, n, a) {\n        var i = t.x + e.left + a[0],\n            o = t.y - e.top + a[1],\n            r = i + n.w,\n            l = o + n.h,\n            u = new Point(t.x, e.advance / 2),\n            c = new Point(i, o),\n            h = new Point(r, o),\n            g = new Point(i, l),\n            s = new Point(r, l);\n        return 0 !== t.angle && (c._sub(u)._rotate(t.angle)._add(u), h._sub(u)._rotate(t.angle)._add(u), g._sub(u)._rotate(t.angle)._add(u), s._sub(u)._rotate(t.angle)._add(u)), {\n          tl: c,\n          tr: h,\n          bl: g,\n          br: s\n        };\n      }\n\n      function getLineGlyphs(t, e, n, a, i, o) {\n        for (var r = n >= 0 ^ o, l = Math.abs(n), u = new Point(e.x, e.y), c = getSegmentEnd(r, a, i), h = {\n          anchor: u,\n          end: c,\n          index: i,\n          minScale: getMinScaleForSegment(l, u, c),\n          maxScale: 1 / 0\n        };;) {\n          if (insertSegmentGlyph(t, h, r, o), h.minScale <= e.scale) return e.scale;\n          var g = getNextVirtualSegment(h, a, l, r);\n          if (!g) return h.minScale;\n          h = g;\n        }\n      }\n\n      function insertSegmentGlyph(t, e, n, a) {\n        var i = Math.atan2(e.end.y - e.anchor.y, e.end.x - e.anchor.x),\n            o = n ? i : i + Math.PI;\n        t.push({\n          anchorPoint: e.anchor,\n          upsideDown: a,\n          minScale: e.minScale,\n          maxScale: e.maxScale,\n          angle: (o + 2 * Math.PI) % (2 * Math.PI)\n        });\n      }\n\n      function getVirtualSegmentAnchor(t, e, n) {\n        var a = e.sub(t)._unit();\n\n        return t.sub(a._mult(n));\n      }\n\n      function getMinScaleForSegment(t, e, n) {\n        var a = e.dist(n);\n        return t / a;\n      }\n\n      function getSegmentEnd(t, e, n) {\n        return t ? e[n + 1] : e[n];\n      }\n\n      function getNextVirtualSegment(t, e, n, a) {\n        for (var i = t.end, o = i, r = t.index; o.equals(i);) {\n          if (a && r + 2 < e.length) r += 1;else {\n            if (a || 0 === r) return null;\n            r -= 1;\n          }\n          o = getSegmentEnd(a, e, r);\n        }\n\n        var l = getVirtualSegmentAnchor(i, o, t.anchor.dist(t.end));\n        return {\n          anchor: l,\n          end: o,\n          index: r,\n          minScale: getMinScaleForSegment(n, l, o),\n          maxScale: t.minScale\n        };\n      }\n\n      var Point = _dereq_(\"point-geometry\");\n\n      module.exports = {\n        getIconQuads: getIconQuads,\n        getGlyphQuads: getGlyphQuads,\n        SymbolQuad: SymbolQuad\n      };\n      var minScale = .5;\n    }, {\n      \"point-geometry\": 25\n    }],\n    170: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function PositionedGlyph(e, t, i, n, a) {\n        this.codePoint = e, this.x = t, this.y = i, this.glyph = n || null, this.angle = a;\n      }\n\n      function Shaping(e, t, i, n, a, r, o) {\n        this.positionedGlyphs = e, this.text = t, this.top = i, this.bottom = n, this.left = a, this.right = r, this.writingMode = o;\n      }\n\n      function breakLines(e, t) {\n        for (var i = [], n = 0, a = 0, r = t; a < r.length; a += 1) {\n          var o = r[a];\n          i.push(e.substring(n, o)), n = o;\n        }\n\n        return n < e.length && i.push(e.substring(n, e.length)), i;\n      }\n\n      function shapeText(e, t, i, n, a, r, o, s, l, h, c) {\n        var u = e.trim();\n        c === WritingMode.vertical && (u = verticalizePunctuation(u));\n        var d,\n            p = [],\n            g = new Shaping(p, u, l[1], l[1], l[0], l[0], c);\n        return d = rtlTextPlugin.processBidirectionalText ? rtlTextPlugin.processBidirectionalText(u, determineLineBreaks(u, s, i, t)) : breakLines(u, determineLineBreaks(u, s, i, t)), shapeLines(g, t, d, n, a, r, o, l, c, s, h), !!p.length && g;\n      }\n\n      function determineAverageLineWidth(e, t, i, n) {\n        var a = 0;\n\n        for (var r in e) {\n          var o = n[e.charCodeAt(r)];\n          o && (a += o.advance + t);\n        }\n\n        var s = Math.max(1, Math.ceil(a / i));\n        return a / s;\n      }\n\n      function calculateBadness(e, t, i, n) {\n        var a = Math.pow(e - t, 2);\n        return n ? e < t ? a / 2 : 2 * a : a + Math.abs(i) * i;\n      }\n\n      function calculatePenalty(e, t) {\n        var i = 0;\n        return 10 === e && (i -= 1e4), 40 !== e && 65288 !== e || (i += 50), 41 !== t && 65289 !== t || (i += 50), i;\n      }\n\n      function evaluateBreak(e, t, i, n, a, r) {\n        for (var o = null, s = calculateBadness(t, i, a, r), l = 0, h = n; l < h.length; l += 1) {\n          var c = h[l],\n              u = t - c.x,\n              d = calculateBadness(u, i, a, r) + c.badness;\n          d <= s && (o = c, s = d);\n        }\n\n        return {\n          index: e,\n          x: t,\n          priorBreak: o,\n          badness: s\n        };\n      }\n\n      function leastBadBreaks(e) {\n        return e ? leastBadBreaks(e.priorBreak).concat(e.index) : [];\n      }\n\n      function determineLineBreaks(e, t, i, n) {\n        if (!i) return [];\n        if (!e) return [];\n\n        for (var a = [], r = determineAverageLineWidth(e, t, i, n), o = 0, s = 0; s < e.length; s++) {\n          var l = e.charCodeAt(s),\n              h = n[l];\n          h && !whitespace[l] && (o += h.advance + t), s < e.length - 1 && (breakable[l] || scriptDetection.charAllowsIdeographicBreaking(l)) && a.push(evaluateBreak(s + 1, o, r, a, calculatePenalty(l, e.charCodeAt(s + 1)), !1));\n        }\n\n        return leastBadBreaks(evaluateBreak(e.length, o, r, a, 0, !0));\n      }\n\n      function shapeLines(e, t, i, n, a, r, o, s, l, h, c) {\n        var u = -17,\n            d = 0,\n            p = u,\n            g = 0,\n            v = e.positionedGlyphs;\n\n        for (var f in i) {\n          var x = i[f].trim();\n\n          if (x.length) {\n            for (var B = v.length, k = 0; k < x.length; k++) {\n              var y = x.charCodeAt(k),\n                  P = t[y];\n              P && (scriptDetection.charHasUprightVerticalOrientation(y) && l !== WritingMode.horizontal ? (v.push(new PositionedGlyph(y, d, 0, P, -Math.PI / 2)), d += c + h) : (v.push(new PositionedGlyph(y, d, p, P, 0)), d += P.advance + h));\n            }\n\n            if (v.length !== B) {\n              var b = d - h;\n              g = Math.max(b, g), justifyLine(v, t, B, v.length - 1, o);\n            }\n\n            d = 0, p += n;\n          } else p += n;\n        }\n\n        align(v, o, a, r, g, n, i.length);\n        var m = i.length * n;\n        e.top += -r * m, e.bottom = e.top + m, e.left += -a * g, e.right = e.left + g;\n      }\n\n      function justifyLine(e, t, i, n, a) {\n        if (a) for (var r = t[e[n].codePoint].advance, o = (e[n].x + r) * a, s = i; s <= n; s++) {\n          e[s].x -= o;\n        }\n      }\n\n      function align(e, t, i, n, a, r, o) {\n        for (var s = (t - i) * a, l = (-n * o + .5) * r, h = 0; h < e.length; h++) {\n          e[h].x += s, e[h].y += l;\n        }\n      }\n\n      function shapeIcon(e, t) {\n        var i = t[0],\n            n = t[1],\n            a = i - e.displaySize[0] / 2,\n            r = a + e.displaySize[0],\n            o = n - e.displaySize[1] / 2,\n            s = o + e.displaySize[1];\n        return new PositionedIcon(e, o, s, a, r);\n      }\n\n      function PositionedIcon(e, t, i, n, a) {\n        this.image = e, this.top = t, this.bottom = i, this.left = n, this.right = a;\n      }\n\n      var scriptDetection = _dereq_(\"../util/script_detection\"),\n          verticalizePunctuation = _dereq_(\"../util/verticalize_punctuation\"),\n          rtlTextPlugin = _dereq_(\"../source/rtl_text_plugin\"),\n          WritingMode = {\n        horizontal: 1,\n        vertical: 2\n      };\n\n      module.exports = {\n        shapeText: shapeText,\n        shapeIcon: shapeIcon,\n        WritingMode: WritingMode\n      };\n      var whitespace = {\n        9: !0,\n        10: !0,\n        11: !0,\n        12: !0,\n        13: !0,\n        32: !0\n      },\n          breakable = {\n        10: !0,\n        32: !0,\n        38: !0,\n        40: !0,\n        41: !0,\n        43: !0,\n        45: !0,\n        47: !0,\n        173: !0,\n        183: !0,\n        8203: !0,\n        8208: !0,\n        8211: !0,\n        8231: !0\n      };\n    }, {\n      \"../source/rtl_text_plugin\": 90,\n      \"../util/script_detection\": 210,\n      \"../util/verticalize_punctuation\": 217\n    }],\n    171: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function spriteAtlasElement(t) {\n        var e = {\n          x: t.rect.x + padding,\n          y: t.rect.y + padding,\n          w: t.rect.w - 2 * padding,\n          h: t.rect.h - 2 * padding\n        };\n        return {\n          sdf: t.sdf,\n          pixelRatio: t.pixelRatio,\n          isNativePixelRatio: t.pixelRatio === browser.devicePixelRatio,\n          textureRect: e,\n          tl: [e.x, e.y],\n          br: [e.x + e.w, e.y + e.h],\n          displaySize: [e.w / t.pixelRatio, e.h / t.pixelRatio]\n        };\n      }\n\n      function copyBitmap(t, e, i, r, a, h, s, o, n, d, p) {\n        var l,\n            u,\n            f = r * e + i,\n            g = o * h + s;\n        if (p) for (g -= h, u = -1; u <= d; u++, g += h) {\n          for (f = ((u + d) % d + r) * e + i, l = -1; l <= n; l++) {\n            a[g + l] = t[f + (l + n) % n];\n          }\n        } else for (u = 0; u < d; u++, f += e, g += h) {\n          for (l = 0; l < n; l++) {\n            a[g + l] = t[f + l];\n          }\n        }\n      }\n\n      var ShelfPack = _dereq_(\"@mapbox/shelf-pack\"),\n          browser = _dereq_(\"../util/browser\"),\n          util = _dereq_(\"../util/util\"),\n          window = _dereq_(\"../util/window\"),\n          Evented = _dereq_(\"../util/evented\"),\n          padding = 1,\n          SpriteAtlas = function (t) {\n        function e(e, i) {\n          t.call(this), this.images = {}, this.data = !1, this.texture = 0, this.filter = 0, this.width = e * browser.devicePixelRatio, this.height = i * browser.devicePixelRatio, this.shelfPack = new ShelfPack(this.width, this.height), this.dirty = !0;\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getPixelSize = function () {\n          return [this.width, this.height];\n        }, e.prototype.allocateImage = function (t, e) {\n          var i = t + 2 * padding,\n              r = e + 2 * padding,\n              a = this.shelfPack.packOne(i, r);\n          return a ? a : (util.warnOnce(\"SpriteAtlas out of space.\"), null);\n        }, e.prototype.addImage = function (t, e, i) {\n          var r, a, h;\n          if (e instanceof window.HTMLImageElement ? (r = e.width, a = e.height, e = browser.getImageData(e), h = 1) : (r = i.width, a = i.height, h = i.pixelRatio || 1), ArrayBuffer.isView(e) && (e = new Uint32Array(e.buffer)), !(e instanceof Uint32Array)) return this.fire(\"error\", {\n            error: new Error(\"Image provided in an invalid format. Supported formats are HTMLImageElement and ArrayBufferView.\")\n          });\n          if (this.images[t]) return this.fire(\"error\", {\n            error: new Error(\"An image with this name already exists.\")\n          });\n          var s = this.allocateImage(r, a);\n          return s ? (this.images[t] = {\n            rect: s,\n            width: r,\n            height: a,\n            pixelRatio: h,\n            sdf: !1\n          }, this.copy(e, r, s, {\n            x: 0,\n            y: 0,\n            width: r,\n            height: a\n          }, !1), void this.fire(\"data\", {\n            dataType: \"style\"\n          })) : this.fire(\"error\", {\n            error: new Error(\"There is not enough space to add this image.\")\n          });\n        }, e.prototype.removeImage = function (t) {\n          var e = this.images[t];\n          return delete this.images[t], e ? (this.shelfPack.unref(e.rect), void this.fire(\"data\", {\n            dataType: \"style\"\n          })) : this.fire(\"error\", {\n            error: new Error(\"No image with this name exists.\")\n          });\n        }, e.prototype.getIcon = function (t) {\n          return this._getImage(t, !1);\n        }, e.prototype.getPattern = function (t) {\n          return this._getImage(t, !0);\n        }, e.prototype._getImage = function (t, e) {\n          if (this.images[t]) return spriteAtlasElement(this.images[t]);\n          if (!this.sprite) return null;\n          var i = this.sprite.getSpritePosition(t);\n          if (!i.width || !i.height) return null;\n          var r = this.allocateImage(i.width, i.height);\n          if (!r) return null;\n          var a = {\n            rect: r,\n            width: i.width,\n            height: i.height,\n            sdf: i.sdf,\n            pixelRatio: i.pixelRatio\n          };\n          if (this.images[t] = a, !this.sprite.imgData) return null;\n          var h = new Uint32Array(this.sprite.imgData.buffer);\n          return this.copy(h, this.sprite.width, r, i, e), spriteAtlasElement(a);\n        }, e.prototype.allocate = function () {\n          var t = this;\n\n          if (!this.data) {\n            this.data = new Uint32Array(this.width * this.height);\n\n            for (var e = 0; e < this.data.length; e++) {\n              t.data[e] = 0;\n            }\n          }\n        }, e.prototype.copy = function (t, e, i, r, a) {\n          this.allocate();\n          var h = this.data;\n          copyBitmap(t, e, r.x, r.y, h, this.getPixelSize()[0], i.x + padding, i.y + padding, r.width, r.height, a), this.dirty = !0;\n        }, e.prototype.setSprite = function (t) {\n          t && this.canvas && (this.canvas.width = this.width, this.canvas.height = this.height), this.sprite = t;\n        }, e.prototype.addIcons = function (t, e) {\n          for (var i = this, r = {}, a = 0, h = t; a < h.length; a += 1) {\n            var s = h[a];\n            r[s] = i.getIcon(s);\n          }\n\n          e(null, r);\n        }, e.prototype.bind = function (t, e) {\n          var i = !1;\n          this.texture ? t.bindTexture(t.TEXTURE_2D, this.texture) : (this.texture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0), i = !0);\n          var r = e ? t.LINEAR : t.NEAREST;\n          r !== this.filter && (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, r), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, r), this.filter = r), this.dirty && (this.allocate(), i ? t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, this.width, this.height, 0, t.RGBA, t.UNSIGNED_BYTE, new Uint8Array(this.data.buffer)) : t.texSubImage2D(t.TEXTURE_2D, 0, 0, 0, this.width, this.height, t.RGBA, t.UNSIGNED_BYTE, new Uint8Array(this.data.buffer)), this.dirty = !1);\n        }, e;\n      }(Evented);\n\n      module.exports = SpriteAtlas;\n    }, {\n      \"../util/browser\": 194,\n      \"../util/evented\": 202,\n      \"../util/util\": 215,\n      \"../util/window\": 196,\n      \"@mapbox/shelf-pack\": 2\n    }],\n    172: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var rtlTextPlugin = _dereq_(\"../source/rtl_text_plugin\");\n\n      module.exports = function (e, r, t, a) {\n        var l = r.getLayoutValue(\"text-transform\", t, a);\n        return \"uppercase\" === l ? e = e.toLocaleUpperCase() : \"lowercase\" === l && (e = e.toLocaleLowerCase()), rtlTextPlugin.applyArabicShaping && (e = rtlTextPlugin.applyArabicShaping(e)), e;\n      };\n    }, {\n      \"../source/rtl_text_plugin\": 90\n    }],\n    173: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../util/dom\"),\n          Point = _dereq_(\"point-geometry\"),\n          handlers = {\n        scrollZoom: _dereq_(\"./handler/scroll_zoom\"),\n        boxZoom: _dereq_(\"./handler/box_zoom\"),\n        dragRotate: _dereq_(\"./handler/drag_rotate\"),\n        dragPan: _dereq_(\"./handler/drag_pan\"),\n        keyboard: _dereq_(\"./handler/keyboard\"),\n        doubleClickZoom: _dereq_(\"./handler/dblclick_zoom\"),\n        touchZoomRotate: _dereq_(\"./handler/touch_zoom_rotate\")\n      };\n\n      module.exports = function (e, t) {\n        function n(e) {\n          h(\"mouseout\", e);\n        }\n\n        function o(t) {\n          e.stop(), L = DOM.mousePos(g, t), h(\"mousedown\", t), E = !0;\n        }\n\n        function r(t) {\n          var n = e.dragRotate && e.dragRotate.isActive();\n          p && !n && h(\"contextmenu\", p), p = null, E = !1, h(\"mouseup\", t);\n        }\n\n        function a(t) {\n          if (!(e.dragPan && e.dragPan.isActive() || e.dragRotate && e.dragRotate.isActive())) {\n            for (var n = t.toElement || t.target; n && n !== g;) {\n              n = n.parentNode;\n            }\n\n            n === g && h(\"mousemove\", t);\n          }\n        }\n\n        function u(t) {\n          e.stop(), f(\"touchstart\", t), !t.touches || t.touches.length > 1 || (b ? (clearTimeout(b), b = null, h(\"dblclick\", t)) : b = setTimeout(l, 300));\n        }\n\n        function i(e) {\n          f(\"touchmove\", e);\n        }\n\n        function c(e) {\n          f(\"touchend\", e);\n        }\n\n        function d(e) {\n          f(\"touchcancel\", e);\n        }\n\n        function l() {\n          b = null;\n        }\n\n        function s(e) {\n          var t = DOM.mousePos(g, e);\n          t.equals(L) && h(\"click\", e);\n        }\n\n        function v(e) {\n          h(\"dblclick\", e), e.preventDefault();\n        }\n\n        function m(t) {\n          var n = e.dragRotate && e.dragRotate.isActive();\n          E || n ? E && (p = t) : h(\"contextmenu\", t), t.preventDefault();\n        }\n\n        function h(t, n) {\n          var o = DOM.mousePos(g, n);\n          return e.fire(t, {\n            lngLat: e.unproject(o),\n            point: o,\n            originalEvent: n\n          });\n        }\n\n        function f(t, n) {\n          var o = DOM.touchPos(g, n),\n              r = o.reduce(function (e, t, n, o) {\n            return e.add(t.div(o.length));\n          }, new Point(0, 0));\n          return e.fire(t, {\n            lngLat: e.unproject(r),\n            point: r,\n            lngLats: o.map(function (t) {\n              return e.unproject(t);\n            }, this),\n            points: o,\n            originalEvent: n\n          });\n        }\n\n        var g = e.getCanvasContainer(),\n            p = null,\n            E = !1,\n            L = null,\n            b = null;\n\n        for (var q in handlers) {\n          e[q] = new handlers[q](e, t), t.interactive && t[q] && e[q].enable(t[q]);\n        }\n\n        g.addEventListener(\"mouseout\", n, !1), g.addEventListener(\"mousedown\", o, !1), g.addEventListener(\"mouseup\", r, !1), g.addEventListener(\"mousemove\", a, !1), g.addEventListener(\"touchstart\", u, !1), g.addEventListener(\"touchend\", c, !1), g.addEventListener(\"touchmove\", i, !1), g.addEventListener(\"touchcancel\", d, !1), g.addEventListener(\"click\", s, !1), g.addEventListener(\"dblclick\", v, !1), g.addEventListener(\"contextmenu\", m, !1);\n      };\n    }, {\n      \"../util/dom\": 201,\n      \"./handler/box_zoom\": 181,\n      \"./handler/dblclick_zoom\": 182,\n      \"./handler/drag_pan\": 183,\n      \"./handler/drag_rotate\": 184,\n      \"./handler/keyboard\": 185,\n      \"./handler/scroll_zoom\": 186,\n      \"./handler/touch_zoom_rotate\": 187,\n      \"point-geometry\": 25\n    }],\n    174: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          interpolate = _dereq_(\"../style-spec/util/interpolate\"),\n          browser = _dereq_(\"../util/browser\"),\n          LngLat = _dereq_(\"../geo/lng_lat\"),\n          LngLatBounds = _dereq_(\"../geo/lng_lat_bounds\"),\n          Point = _dereq_(\"point-geometry\"),\n          Evented = _dereq_(\"../util/evented\"),\n          Camera = function (t) {\n        function e(e, i) {\n          t.call(this), this.moving = !1, this.transform = e, this._bearingSnap = i.bearingSnap;\n        }\n\n        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getCenter = function () {\n          return this.transform.center;\n        }, e.prototype.setCenter = function (t, e) {\n          return this.jumpTo({\n            center: t\n          }, e);\n        }, e.prototype.panBy = function (t, e, i) {\n          return t = Point.convert(t).mult(-1), this.panTo(this.transform.center, util.extend({\n            offset: t\n          }, e), i);\n        }, e.prototype.panTo = function (t, e, i) {\n          return this.easeTo(util.extend({\n            center: t\n          }, e), i);\n        }, e.prototype.getZoom = function () {\n          return this.transform.zoom;\n        }, e.prototype.setZoom = function (t, e) {\n          return this.jumpTo({\n            zoom: t\n          }, e), this;\n        }, e.prototype.zoomTo = function (t, e, i) {\n          return this.easeTo(util.extend({\n            zoom: t\n          }, e), i);\n        }, e.prototype.zoomIn = function (t, e) {\n          return this.zoomTo(this.getZoom() + 1, t, e), this;\n        }, e.prototype.zoomOut = function (t, e) {\n          return this.zoomTo(this.getZoom() - 1, t, e), this;\n        }, e.prototype.getBearing = function () {\n          return this.transform.bearing;\n        }, e.prototype.setBearing = function (t, e) {\n          return this.jumpTo({\n            bearing: t\n          }, e), this;\n        }, e.prototype.rotateTo = function (t, e, i) {\n          return this.easeTo(util.extend({\n            bearing: t\n          }, e), i);\n        }, e.prototype.resetNorth = function (t, e) {\n          return this.rotateTo(0, util.extend({\n            duration: 1e3\n          }, t), e), this;\n        }, e.prototype.snapToNorth = function (t, e) {\n          return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t, e) : this;\n        }, e.prototype.getPitch = function () {\n          return this.transform.pitch;\n        }, e.prototype.setPitch = function (t, e) {\n          return this.jumpTo({\n            pitch: t\n          }, e), this;\n        }, e.prototype.fitBounds = function (t, e, i) {\n          if (e = util.extend({\n            padding: {\n              top: 0,\n              bottom: 0,\n              right: 0,\n              left: 0\n            },\n            offset: [0, 0],\n            maxZoom: this.transform.maxZoom\n          }, e), \"number\" == typeof e.padding) {\n            var o = e.padding;\n            e.padding = {\n              top: o,\n              bottom: o,\n              right: o,\n              left: o\n            };\n          }\n\n          if (!util.deepEqual(Object.keys(e.padding).sort(function (t, e) {\n            return t < e ? -1 : t > e ? 1 : 0;\n          }), [\"bottom\", \"left\", \"right\", \"top\"])) return void util.warnOnce(\"options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'\");\n          t = LngLatBounds.convert(t);\n          var n = [e.padding.left - e.padding.right, e.padding.top - e.padding.bottom],\n              r = Math.min(e.padding.right, e.padding.left),\n              a = Math.min(e.padding.top, e.padding.bottom);\n          e.offset = [e.offset[0] + n[0], e.offset[1] + n[1]];\n          var s = Point.convert(e.offset),\n              h = this.transform,\n              p = h.project(t.getNorthWest()),\n              u = h.project(t.getSouthEast()),\n              c = u.sub(p),\n              m = (h.width - 2 * r - 2 * Math.abs(s.x)) / c.x,\n              f = (h.height - 2 * a - 2 * Math.abs(s.y)) / c.y;\n          return f < 0 || m < 0 ? void util.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\") : (e.center = h.unproject(p.add(u).div(2)), e.zoom = Math.min(h.scaleZoom(h.scale * Math.min(m, f)), e.maxZoom), e.bearing = 0, e.linear ? this.easeTo(e, i) : this.flyTo(e, i));\n        }, e.prototype.jumpTo = function (t, e) {\n          this.stop();\n          var i = this.transform,\n              o = !1,\n              n = !1,\n              r = !1;\n          return \"zoom\" in t && i.zoom !== +t.zoom && (o = !0, i.zoom = +t.zoom), \"center\" in t && (i.center = LngLat.convert(t.center)), \"bearing\" in t && i.bearing !== +t.bearing && (n = !0, i.bearing = +t.bearing), \"pitch\" in t && i.pitch !== +t.pitch && (r = !0, i.pitch = +t.pitch), this.fire(\"movestart\", e).fire(\"move\", e), o && this.fire(\"zoomstart\", e).fire(\"zoom\", e).fire(\"zoomend\", e), n && this.fire(\"rotate\", e), r && this.fire(\"pitchstart\", e).fire(\"pitch\", e).fire(\"pitchend\", e), this.fire(\"moveend\", e);\n        }, e.prototype.easeTo = function (t, e) {\n          var i = this;\n          this.stop(), t = util.extend({\n            offset: [0, 0],\n            duration: 500,\n            easing: util.ease\n          }, t), t.animate === !1 && (t.duration = 0), t.smoothEasing && 0 !== t.duration && (t.easing = this._smoothOutEasing(t.duration));\n          var o = this.transform,\n              n = this.getZoom(),\n              r = this.getBearing(),\n              a = this.getPitch(),\n              s = \"zoom\" in t ? +t.zoom : n,\n              h = \"bearing\" in t ? this._normalizeBearing(t.bearing, r) : r,\n              p = \"pitch\" in t ? +t.pitch : a,\n              u = o.centerPoint.add(Point.convert(t.offset)),\n              c = o.pointLocation(u),\n              m = LngLat.convert(t.center || c);\n\n          this._normalizeCenter(m);\n\n          var f,\n              g,\n              d = o.project(c),\n              l = o.project(m).sub(d),\n              v = o.zoomScale(s - n);\n          return t.around && (f = LngLat.convert(t.around), g = o.locationPoint(f)), this.zooming = s !== n, this.rotating = r !== h, this.pitching = p !== a, this._prepareEase(e, t.noMoveStart), clearTimeout(this._onEaseEnd), this._ease(function (t) {\n            if (this.zooming && (o.zoom = interpolate(n, s, t)), this.rotating && (o.bearing = interpolate(r, h, t)), this.pitching && (o.pitch = interpolate(a, p, t)), f) o.setLocationAtPoint(f, g);else {\n              var i = o.zoomScale(o.zoom - n),\n                  c = s > n ? Math.min(2, v) : Math.max(.5, v),\n                  m = Math.pow(c, 1 - t),\n                  b = o.unproject(d.add(l.mult(t * m)).mult(i));\n              o.setLocationAtPoint(o.renderWorldCopies ? b.wrap() : b, u);\n            }\n\n            this._fireMoveEvents(e);\n          }, function () {\n            t.delayEndEvents ? i._onEaseEnd = setTimeout(function () {\n              return i._easeToEnd(e);\n            }, t.delayEndEvents) : i._easeToEnd(e);\n          }, t), this;\n        }, e.prototype._prepareEase = function (t, e) {\n          this.moving = !0, e || this.fire(\"movestart\", t), this.zooming && this.fire(\"zoomstart\", t), this.pitching && this.fire(\"pitchstart\", t);\n        }, e.prototype._fireMoveEvents = function (t) {\n          this.fire(\"move\", t), this.zooming && this.fire(\"zoom\", t), this.rotating && this.fire(\"rotate\", t), this.pitching && this.fire(\"pitch\", t);\n        }, e.prototype._easeToEnd = function (t) {\n          var e = this.zooming,\n              i = this.pitching;\n          this.moving = !1, this.zooming = !1, this.rotating = !1, this.pitching = !1, e && this.fire(\"zoomend\", t), i && this.fire(\"pitchend\", t), this.fire(\"moveend\", t);\n        }, e.prototype.flyTo = function (t, e) {\n          function i(t) {\n            var e = (M * M - z * z + (t ? -1 : 1) * L * L * E * E) / (2 * (t ? M : z) * L * E);\n            return Math.log(Math.sqrt(e * e + 1) - e);\n          }\n\n          function o(t) {\n            return (Math.exp(t) - Math.exp(-t)) / 2;\n          }\n\n          function n(t) {\n            return (Math.exp(t) + Math.exp(-t)) / 2;\n          }\n\n          function r(t) {\n            return o(t) / n(t);\n          }\n\n          var a = this;\n          this.stop(), t = util.extend({\n            offset: [0, 0],\n            speed: 1.2,\n            curve: 1.42,\n            easing: util.ease\n          }, t);\n          var s = this.transform,\n              h = this.getZoom(),\n              p = this.getBearing(),\n              u = this.getPitch(),\n              c = \"zoom\" in t ? util.clamp(+t.zoom, s.minZoom, s.maxZoom) : h,\n              m = \"bearing\" in t ? this._normalizeBearing(t.bearing, p) : p,\n              f = \"pitch\" in t ? +t.pitch : u,\n              g = s.zoomScale(c - h),\n              d = s.centerPoint.add(Point.convert(t.offset)),\n              l = s.pointLocation(d),\n              v = LngLat.convert(t.center || l);\n\n          this._normalizeCenter(v);\n\n          var b = s.project(l),\n              y = s.project(v).sub(b),\n              _ = t.curve,\n              z = Math.max(s.width, s.height),\n              M = z / g,\n              E = y.mag();\n\n          if (\"minZoom\" in t) {\n            var T = util.clamp(Math.min(t.minZoom, h, c), s.minZoom, s.maxZoom),\n                x = z / s.zoomScale(T - h);\n            _ = Math.sqrt(x / E * 2);\n          }\n\n          var L = _ * _,\n              j = i(0),\n              Z = function Z(t) {\n            return n(j) / n(j + _ * t);\n          },\n              w = function w(t) {\n            return z * ((n(j) * r(j + _ * t) - o(j)) / L) / E;\n          },\n              P = (i(1) - j) / _;\n\n          if (Math.abs(E) < 1e-6 || isNaN(P)) {\n            if (Math.abs(z - M) < 1e-6) return this.easeTo(t, e);\n            var q = M < z ? -1 : 1;\n            P = Math.abs(Math.log(M / z)) / _, w = function w() {\n              return 0;\n            }, Z = function Z(t) {\n              return Math.exp(q * _ * t);\n            };\n          }\n\n          if (\"duration\" in t) t.duration = +t.duration;else {\n            var B = \"screenSpeed\" in t ? +t.screenSpeed / _ : +t.speed;\n            t.duration = 1e3 * P / B;\n          }\n          return this.zooming = !0, this.rotating = p !== m, this.pitching = f !== u, this._prepareEase(e, !1), this._ease(function (t) {\n            var i = t * P,\n                o = 1 / Z(i);\n            s.zoom = h + s.scaleZoom(o), this.rotating && (s.bearing = interpolate(p, m, t)), this.pitching && (s.pitch = interpolate(u, f, t));\n            var n = s.unproject(b.add(y.mult(w(i))).mult(o));\n            s.setLocationAtPoint(s.renderWorldCopies ? n.wrap() : n, d), this._fireMoveEvents(e);\n          }, function () {\n            return a._easeToEnd(e);\n          }, t), this;\n        }, e.prototype.isEasing = function () {\n          return !!this._abortFn;\n        }, e.prototype.isMoving = function () {\n          return this.moving;\n        }, e.prototype.stop = function () {\n          return this._abortFn && (this._abortFn(), this._finishEase()), this;\n        }, e.prototype._ease = function (t, e, i) {\n          this._finishFn = e, this._abortFn = browser.timed(function (e) {\n            t.call(this, i.easing(e)), 1 === e && this._finishEase();\n          }, i.animate === !1 ? 0 : i.duration, this);\n        }, e.prototype._finishEase = function () {\n          delete this._abortFn;\n          var t = this._finishFn;\n          delete this._finishFn, t.call(this);\n        }, e.prototype._normalizeBearing = function (t, e) {\n          t = util.wrap(t, -180, 180);\n          var i = Math.abs(t - e);\n          return Math.abs(t - 360 - e) < i && (t -= 360), Math.abs(t + 360 - e) < i && (t += 360), t;\n        }, e.prototype._normalizeCenter = function (t) {\n          var e = this.transform;\n\n          if (e.renderWorldCopies && !e.lngRange) {\n            var i = t.lng - e.center.lng;\n            t.lng += i > 180 ? -360 : i < -180 ? 360 : 0;\n          }\n        }, e.prototype._smoothOutEasing = function (t) {\n          var e = util.ease;\n\n          if (this._prevEase) {\n            var i = this._prevEase,\n                o = (Date.now() - i.start) / i.duration,\n                n = i.easing(o + .01) - i.easing(o),\n                r = .27 / Math.sqrt(n * n + 1e-4) * .01,\n                a = Math.sqrt(.0729 - r * r);\n            e = util.bezier(r, a, .25, 1);\n          }\n\n          return this._prevEase = {\n            start: new Date().getTime(),\n            duration: t,\n            easing: e\n          }, e;\n        }, e;\n      }(Evented);\n\n      module.exports = Camera;\n    }, {\n      \"../geo/lng_lat\": 61,\n      \"../geo/lng_lat_bounds\": 62,\n      \"../style-spec/util/interpolate\": 122,\n      \"../util/browser\": 194,\n      \"../util/evented\": 202,\n      \"../util/util\": 215,\n      \"point-geometry\": 25\n    }],\n    175: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          config = _dereq_(\"../../util/config\"),\n          AttributionControl = function AttributionControl(t) {\n        this.options = t, util.bindAll([\"_updateEditLink\", \"_updateData\", \"_updateCompact\"], this);\n      };\n\n      AttributionControl.prototype.getDefaultPosition = function () {\n        return \"bottom-right\";\n      }, AttributionControl.prototype.onAdd = function (t) {\n        var i = this.options && this.options.compact;\n        return this._map = t, this._container = DOM.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-attrib\"), i && this._container.classList.add(\"mapboxgl-compact\"), this._updateAttributions(), this._updateEditLink(), this._map.on(\"sourcedata\", this._updateData), this._map.on(\"moveend\", this._updateEditLink), void 0 === i && (this._map.on(\"resize\", this._updateCompact), this._updateCompact()), this._container;\n      }, AttributionControl.prototype.onRemove = function () {\n        this._container.parentNode.removeChild(this._container), this._map.off(\"sourcedata\", this._updateData), this._map.off(\"moveend\", this._updateEditLink), this._map.off(\"resize\", this._updateCompact), this._map = void 0;\n      }, AttributionControl.prototype._updateEditLink = function () {\n        this._editLink || (this._editLink = this._container.querySelector(\".mapbox-improve-map\"));\n        var t = [{\n          key: \"owner\",\n          value: this.styleOwner\n        }, {\n          key: \"id\",\n          value: this.styleId\n        }, {\n          key: \"access_token\",\n          value: config.ACCESS_TOKEN\n        }];\n\n        if (this._editLink) {\n          var i = t.reduce(function (i, e, o) {\n            return void 0 !== e.value && (i += e.key + \"=\" + e.value + (o < t.length - 1 ? \"&\" : \"\")), i;\n          }, \"?\");\n          this._editLink.href = \"https://www.mapbox.com/feedback/\" + i + (this._map._hash ? this._map._hash.getHashString(!0) : \"\");\n        }\n      }, AttributionControl.prototype._updateData = function (t) {\n        t && \"metadata\" === t.sourceDataType && (this._updateAttributions(), this._updateEditLink());\n      }, AttributionControl.prototype._updateAttributions = function () {\n        if (this._map.style) {\n          var t = [];\n\n          if (this._map.style.stylesheet) {\n            var i = this._map.style.stylesheet;\n            this.styleOwner = i.owner, this.styleId = i.id;\n          }\n\n          var e = this._map.style.sourceCaches;\n\n          for (var o in e) {\n            var n = e[o].getSource();\n            n.attribution && t.indexOf(n.attribution) < 0 && t.push(n.attribution);\n          }\n\n          t.sort(function (t, i) {\n            return t.length - i.length;\n          }), t = t.filter(function (i, e) {\n            for (var o = e + 1; o < t.length; o++) {\n              if (t[o].indexOf(i) >= 0) return !1;\n            }\n\n            return !0;\n          }), this._container.innerHTML = t.join(\" | \"), this._editLink = null;\n        }\n      }, AttributionControl.prototype._updateCompact = function () {\n        var t = this._map.getCanvasContainer().offsetWidth <= 640;\n\n        this._container.classList[t ? \"add\" : \"remove\"](\"mapboxgl-compact\");\n      }, module.exports = AttributionControl;\n    }, {\n      \"../../util/config\": 198,\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215\n    }],\n    176: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          window = _dereq_(\"../../util/window\"),\n          FullscreenControl = function FullscreenControl() {\n        this._fullscreen = !1, util.bindAll([\"_onClickFullscreen\", \"_changeIcon\"], this), \"onfullscreenchange\" in window.document ? this._fullscreenchange = \"fullscreenchange\" : \"onmozfullscreenchange\" in window.document ? this._fullscreenchange = \"mozfullscreenchange\" : \"onwebkitfullscreenchange\" in window.document ? this._fullscreenchange = \"webkitfullscreenchange\" : \"onmsfullscreenchange\" in window.document && (this._fullscreenchange = \"MSFullscreenChange\");\n      };\n\n      FullscreenControl.prototype.onAdd = function (e) {\n        var n = \"mapboxgl-ctrl\",\n            l = this._container = DOM.create(\"div\", n + \" mapboxgl-ctrl-group\"),\n            t = this._fullscreenButton = DOM.create(\"button\", n + \"-icon \" + n + \"-fullscreen\", this._container);\n        return t.setAttribute(\"aria-label\", \"Toggle fullscreen\"), t.type = \"button\", this._fullscreenButton.addEventListener(\"click\", this._onClickFullscreen), this._mapContainer = e.getContainer(), window.document.addEventListener(this._fullscreenchange, this._changeIcon), l;\n      }, FullscreenControl.prototype.onRemove = function () {\n        this._container.parentNode.removeChild(this._container), this._map = null, window.document.removeEventListener(this._fullscreenchange, this._changeIcon);\n      }, FullscreenControl.prototype._isFullscreen = function () {\n        return this._fullscreen;\n      }, FullscreenControl.prototype._changeIcon = function () {\n        var e = window.document.fullscreenElement || window.document.mozFullScreenElement || window.document.webkitFullscreenElement || window.document.msFullscreenElement;\n\n        if (e === this._mapContainer !== this._fullscreen) {\n          this._fullscreen = !this._fullscreen;\n          var n = \"mapboxgl-ctrl\";\n          this._fullscreenButton.classList.toggle(n + \"-shrink\"), this._fullscreenButton.classList.toggle(n + \"-fullscreen\");\n        }\n      }, FullscreenControl.prototype._onClickFullscreen = function () {\n        this._isFullscreen() ? window.document.exitFullscreen ? window.document.exitFullscreen() : window.document.mozCancelFullScreen ? window.document.mozCancelFullScreen() : window.document.msExitFullscreen ? window.document.msExitFullscreen() : window.document.webkitCancelFullScreen && window.document.webkitCancelFullScreen() : this._mapContainer.requestFullscreen ? this._mapContainer.requestFullscreen() : this._mapContainer.mozRequestFullScreen ? this._mapContainer.mozRequestFullScreen() : this._mapContainer.msRequestFullscreen ? this._mapContainer.msRequestFullscreen() : this._mapContainer.webkitRequestFullscreen && this._mapContainer.webkitRequestFullscreen();\n      }, module.exports = FullscreenControl;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    177: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function checkGeolocationSupport(t) {\n        void 0 !== supportsGeolocation ? t(supportsGeolocation) : void 0 !== window.navigator.permissions ? window.navigator.permissions.query({\n          name: \"geolocation\"\n        }).then(function (o) {\n          supportsGeolocation = \"denied\" !== o.state, t(supportsGeolocation);\n        }) : (supportsGeolocation = !!window.navigator.geolocation, t(supportsGeolocation));\n      }\n\n      var Evented = _dereq_(\"../../util/evented\"),\n          DOM = _dereq_(\"../../util/dom\"),\n          window = _dereq_(\"../../util/window\"),\n          util = _dereq_(\"../../util/util\"),\n          defaultGeoPositionOptions = {\n        enableHighAccuracy: !1,\n        timeout: 6e3\n      },\n          className = \"mapboxgl-ctrl\",\n          supportsGeolocation,\n          GeolocateControl = function (t) {\n        function o(o) {\n          t.call(this), this.options = o || {}, util.bindAll([\"_onSuccess\", \"_onError\", \"_finish\", \"_setupUI\"], this);\n        }\n\n        return t && (o.__proto__ = t), o.prototype = Object.create(t && t.prototype), o.prototype.constructor = o, o.prototype.onAdd = function (t) {\n          return this._map = t, this._container = DOM.create(\"div\", className + \" \" + className + \"-group\"), checkGeolocationSupport(this._setupUI), this._container;\n        }, o.prototype.onRemove = function () {\n          this._container.parentNode.removeChild(this._container), this._map = void 0;\n        }, o.prototype._onSuccess = function (t) {\n          this._map.jumpTo({\n            center: [t.coords.longitude, t.coords.latitude],\n            zoom: 17,\n            bearing: 0,\n            pitch: 0\n          }), this.fire(\"geolocate\", t), this._finish();\n        }, o.prototype._onError = function (t) {\n          this.fire(\"error\", t), this._finish();\n        }, o.prototype._finish = function () {\n          this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;\n        }, o.prototype._setupUI = function (t) {\n          t !== !1 && (this._container.addEventListener(\"contextmenu\", function (t) {\n            return t.preventDefault();\n          }), this._geolocateButton = DOM.create(\"button\", className + \"-icon \" + className + \"-geolocate\", this._container), this._geolocateButton.type = \"button\", this._geolocateButton.setAttribute(\"aria-label\", \"Geolocate\"), this.options.watchPosition && this._geolocateButton.setAttribute(\"aria-pressed\", !1), this._geolocateButton.addEventListener(\"click\", this._onClickGeolocate.bind(this)));\n        }, o.prototype._onClickGeolocate = function () {\n          var t = util.extend(defaultGeoPositionOptions, this.options && this.options.positionOptions || {});\n          this.options.watchPosition ? void 0 !== this._geolocationWatchID ? (this._geolocateButton.classList.remove(\"mapboxgl-watching\"), this._geolocateButton.setAttribute(\"aria-pressed\", !1), window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0) : (this._geolocateButton.classList.add(\"mapboxgl-watching\"), this._geolocateButton.setAttribute(\"aria-pressed\", !0), this._geolocationWatchID = window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, t)) : (window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, t), this._timeoutId = setTimeout(this._finish, 1e4));\n        }, o;\n      }(Evented);\n\n      module.exports = GeolocateControl;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/evented\": 202,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    178: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          LogoControl = function LogoControl() {\n        util.bindAll([\"_updateLogo\"], this);\n      };\n\n      LogoControl.prototype.onAdd = function (o) {\n        return this._map = o, this._container = DOM.create(\"div\", \"mapboxgl-ctrl\"), this._map.on(\"sourcedata\", this._updateLogo), this._updateLogo(), this._container;\n      }, LogoControl.prototype.onRemove = function () {\n        this._container.parentNode.removeChild(this._container), this._map.off(\"sourcedata\", this._updateLogo);\n      }, LogoControl.prototype.getDefaultPosition = function () {\n        return \"bottom-left\";\n      }, LogoControl.prototype._updateLogo = function (o) {\n        if (o && \"metadata\" === o.sourceDataType) if (!this._container.childNodes.length && this._logoRequired()) {\n          var t = DOM.create(\"a\", \"mapboxgl-ctrl-logo\");\n          t.target = \"_blank\", t.href = \"https://www.mapbox.com/\", t.setAttribute(\"aria-label\", \"Mapbox logo\"), this._container.appendChild(t), this._map.off(\"data\", this._updateLogo);\n        } else this._container.childNodes.length && !this._logoRequired() && this.onRemove();\n      }, LogoControl.prototype._logoRequired = function () {\n        if (this._map.style) {\n          var o = this._map.style.sourceCaches;\n\n          for (var t in o) {\n            var e = o[t].getSource();\n            if (e.mapbox_logo) return !0;\n          }\n\n          return !1;\n        }\n      }, module.exports = LogoControl;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215\n    }],\n    179: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function copyMouseEvent(t) {\n        return new window.MouseEvent(t.type, {\n          button: 2,\n          buttons: 2,\n          bubbles: !0,\n          cancelable: !0,\n          detail: t.detail,\n          view: t.view,\n          screenX: t.screenX,\n          screenY: t.screenY,\n          clientX: t.clientX,\n          clientY: t.clientY,\n          movementX: t.movementX,\n          movementY: t.movementY,\n          ctrlKey: t.ctrlKey,\n          shiftKey: t.shiftKey,\n          altKey: t.altKey,\n          metaKey: t.metaKey\n        });\n      }\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          window = _dereq_(\"../../util/window\"),\n          util = _dereq_(\"../../util/util\"),\n          className = \"mapboxgl-ctrl\",\n          NavigationControl = function NavigationControl() {\n        util.bindAll([\"_rotateCompassArrow\"], this);\n      };\n\n      NavigationControl.prototype._rotateCompassArrow = function () {\n        var t = \"rotate(\" + this._map.transform.angle * (180 / Math.PI) + \"deg)\";\n        this._compassArrow.style.transform = t;\n      }, NavigationControl.prototype.onAdd = function (t) {\n        return this._map = t, this._container = DOM.create(\"div\", className + \" \" + className + \"-group\", t.getContainer()), this._container.addEventListener(\"contextmenu\", this._onContextMenu.bind(this)), this._zoomInButton = this._createButton(className + \"-icon \" + className + \"-zoom-in\", \"Zoom In\", t.zoomIn.bind(t)), this._zoomOutButton = this._createButton(className + \"-icon \" + className + \"-zoom-out\", \"Zoom Out\", t.zoomOut.bind(t)), this._compass = this._createButton(className + \"-icon \" + className + \"-compass\", \"Reset North\", t.resetNorth.bind(t)), this._compassArrow = DOM.create(\"span\", className + \"-compass-arrow\", this._compass), this._compass.addEventListener(\"mousedown\", this._onCompassDown.bind(this)), this._onCompassMove = this._onCompassMove.bind(this), this._onCompassUp = this._onCompassUp.bind(this), this._map.on(\"rotate\", this._rotateCompassArrow), this._rotateCompassArrow(), this._container;\n      }, NavigationControl.prototype.onRemove = function () {\n        this._container.parentNode.removeChild(this._container), this._map.off(\"rotate\", this._rotateCompassArrow), this._map = void 0;\n      }, NavigationControl.prototype._onContextMenu = function (t) {\n        t.preventDefault();\n      }, NavigationControl.prototype._onCompassDown = function (t) {\n        0 === t.button && (DOM.disableDrag(), window.document.addEventListener(\"mousemove\", this._onCompassMove), window.document.addEventListener(\"mouseup\", this._onCompassUp), this._map.getCanvasContainer().dispatchEvent(copyMouseEvent(t)), t.stopPropagation());\n      }, NavigationControl.prototype._onCompassMove = function (t) {\n        0 === t.button && (this._map.getCanvasContainer().dispatchEvent(copyMouseEvent(t)), t.stopPropagation());\n      }, NavigationControl.prototype._onCompassUp = function (t) {\n        0 === t.button && (window.document.removeEventListener(\"mousemove\", this._onCompassMove), window.document.removeEventListener(\"mouseup\", this._onCompassUp), DOM.enableDrag(), this._map.getCanvasContainer().dispatchEvent(copyMouseEvent(t)), t.stopPropagation());\n      }, NavigationControl.prototype._createButton = function (t, o, e) {\n        var n = DOM.create(\"button\", t, this._container);\n        return n.type = \"button\", n.setAttribute(\"aria-label\", o), n.addEventListener(\"click\", function () {\n          e();\n        }), n;\n      }, module.exports = NavigationControl;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    180: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function updateScale(t, e, o) {\n        var n = o && o.maxWidth || 100,\n            i = t._container.clientHeight / 2,\n            a = getDistance(t.unproject([0, i]), t.unproject([n, i]));\n\n        if (o && \"imperial\" === o.unit) {\n          var r = 3.2808 * a;\n\n          if (r > 5280) {\n            var l = r / 5280;\n            setScale(e, n, l, \"mi\");\n          } else setScale(e, n, r, \"ft\");\n        } else setScale(e, n, a, \"m\");\n      }\n\n      function setScale(t, e, o, n) {\n        var i = getRoundNum(o),\n            a = i / o;\n        \"m\" === n && i >= 1e3 && (i /= 1e3, n = \"km\"), t.style.width = e * a + \"px\", t.innerHTML = i + n;\n      }\n\n      function getDistance(t, e) {\n        var o = 6371e3,\n            n = Math.PI / 180,\n            i = t.lat * n,\n            a = e.lat * n,\n            r = Math.sin(i) * Math.sin(a) + Math.cos(i) * Math.cos(a) * Math.cos((e.lng - t.lng) * n),\n            l = o * Math.acos(Math.min(r, 1));\n        return l;\n      }\n\n      function getRoundNum(t) {\n        var e = Math.pow(10, (\"\" + Math.floor(t)).length - 1),\n            o = t / e;\n        return o = o >= 10 ? 10 : o >= 5 ? 5 : o >= 3 ? 3 : o >= 2 ? 2 : 1, e * o;\n      }\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          ScaleControl = function ScaleControl(t) {\n        this.options = t, util.bindAll([\"_onMove\"], this);\n      };\n\n      ScaleControl.prototype.getDefaultPosition = function () {\n        return \"bottom-left\";\n      }, ScaleControl.prototype._onMove = function () {\n        updateScale(this._map, this._container, this.options);\n      }, ScaleControl.prototype.onAdd = function (t) {\n        return this._map = t, this._container = DOM.create(\"div\", \"mapboxgl-ctrl mapboxgl-ctrl-scale\", t.getContainer()), this._map.on(\"move\", this._onMove), this._onMove(), this._container;\n      }, ScaleControl.prototype.onRemove = function () {\n        this._container.parentNode.removeChild(this._container), this._map.off(\"move\", this._onMove), this._map = void 0;\n      }, module.exports = ScaleControl;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215\n    }],\n    181: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          LngLatBounds = _dereq_(\"../../geo/lng_lat_bounds\"),\n          util = _dereq_(\"../../util/util\"),\n          window = _dereq_(\"../../util/window\"),\n          BoxZoomHandler = function BoxZoomHandler(o) {\n        this._map = o, this._el = o.getCanvasContainer(), this._container = o.getContainer(), util.bindAll([\"_onMouseDown\", \"_onMouseMove\", \"_onMouseUp\", \"_onKeyDown\"], this);\n      };\n\n      BoxZoomHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, BoxZoomHandler.prototype.isActive = function () {\n        return !!this._active;\n      }, BoxZoomHandler.prototype.enable = function () {\n        this.isEnabled() || (this._map.dragPan && this._map.dragPan.disable(), this._el.addEventListener(\"mousedown\", this._onMouseDown, !1), this._map.dragPan && this._map.dragPan.enable(), this._enabled = !0);\n      }, BoxZoomHandler.prototype.disable = function () {\n        this.isEnabled() && (this._el.removeEventListener(\"mousedown\", this._onMouseDown), this._enabled = !1);\n      }, BoxZoomHandler.prototype._onMouseDown = function (o) {\n        o.shiftKey && 0 === o.button && (window.document.addEventListener(\"mousemove\", this._onMouseMove, !1), window.document.addEventListener(\"keydown\", this._onKeyDown, !1), window.document.addEventListener(\"mouseup\", this._onMouseUp, !1), DOM.disableDrag(), this._startPos = DOM.mousePos(this._el, o), this._active = !0);\n      }, BoxZoomHandler.prototype._onMouseMove = function (o) {\n        var e = this._startPos,\n            t = DOM.mousePos(this._el, o);\n        this._box || (this._box = DOM.create(\"div\", \"mapboxgl-boxzoom\", this._container), this._container.classList.add(\"mapboxgl-crosshair\"), this._fireEvent(\"boxzoomstart\", o));\n        var n = Math.min(e.x, t.x),\n            i = Math.max(e.x, t.x),\n            s = Math.min(e.y, t.y),\n            a = Math.max(e.y, t.y);\n        DOM.setTransform(this._box, \"translate(\" + n + \"px,\" + s + \"px)\"), this._box.style.width = i - n + \"px\", this._box.style.height = a - s + \"px\";\n      }, BoxZoomHandler.prototype._onMouseUp = function (o) {\n        if (0 === o.button) {\n          var e = this._startPos,\n              t = DOM.mousePos(this._el, o),\n              n = new LngLatBounds().extend(this._map.unproject(e)).extend(this._map.unproject(t));\n          this._finish(), e.x === t.x && e.y === t.y ? this._fireEvent(\"boxzoomcancel\", o) : this._map.fitBounds(n, {\n            linear: !0\n          }).fire(\"boxzoomend\", {\n            originalEvent: o,\n            boxZoomBounds: n\n          });\n        }\n      }, BoxZoomHandler.prototype._onKeyDown = function (o) {\n        27 === o.keyCode && (this._finish(), this._fireEvent(\"boxzoomcancel\", o));\n      }, BoxZoomHandler.prototype._finish = function () {\n        this._active = !1, window.document.removeEventListener(\"mousemove\", this._onMouseMove, !1), window.document.removeEventListener(\"keydown\", this._onKeyDown, !1), window.document.removeEventListener(\"mouseup\", this._onMouseUp, !1), this._container.classList.remove(\"mapboxgl-crosshair\"), this._box && (this._box.parentNode.removeChild(this._box), this._box = null), DOM.enableDrag();\n      }, BoxZoomHandler.prototype._fireEvent = function (o, e) {\n        return this._map.fire(o, {\n          originalEvent: e\n        });\n      }, module.exports = BoxZoomHandler;\n    }, {\n      \"../../geo/lng_lat_bounds\": 62,\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    182: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DoubleClickZoomHandler = function DoubleClickZoomHandler(o) {\n        this._map = o, this._onDblClick = this._onDblClick.bind(this);\n      };\n\n      DoubleClickZoomHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, DoubleClickZoomHandler.prototype.enable = function () {\n        this.isEnabled() || (this._map.on(\"dblclick\", this._onDblClick), this._enabled = !0);\n      }, DoubleClickZoomHandler.prototype.disable = function () {\n        this.isEnabled() && (this._map.off(\"dblclick\", this._onDblClick), this._enabled = !1);\n      }, DoubleClickZoomHandler.prototype._onDblClick = function (o) {\n        this._map.zoomTo(this._map.getZoom() + (o.originalEvent.shiftKey ? -1 : 1), {\n          around: o.lngLat\n        }, o);\n      }, module.exports = DoubleClickZoomHandler;\n    }, {}],\n    183: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          window = _dereq_(\"../../util/window\"),\n          inertiaLinearity = .3,\n          inertiaEasing = util.bezier(0, 0, inertiaLinearity, 1),\n          inertiaMaxSpeed = 1400,\n          inertiaDeceleration = 2500,\n          DragPanHandler = function DragPanHandler(t) {\n        this._map = t, this._el = t.getCanvasContainer(), util.bindAll([\"_onDown\", \"_onMove\", \"_onUp\", \"_onTouchEnd\", \"_onMouseUp\"], this);\n      };\n\n      DragPanHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, DragPanHandler.prototype.isActive = function () {\n        return !!this._active;\n      }, DragPanHandler.prototype.enable = function () {\n        this.isEnabled() || (this._el.classList.add(\"mapboxgl-touch-drag-pan\"), this._el.addEventListener(\"mousedown\", this._onDown), this._el.addEventListener(\"touchstart\", this._onDown), this._enabled = !0);\n      }, DragPanHandler.prototype.disable = function () {\n        this.isEnabled() && (this._el.classList.remove(\"mapboxgl-touch-drag-pan\"), this._el.removeEventListener(\"mousedown\", this._onDown), this._el.removeEventListener(\"touchstart\", this._onDown), this._enabled = !1);\n      }, DragPanHandler.prototype._onDown = function (t) {\n        this._ignoreEvent(t) || this.isActive() || (t.touches ? (window.document.addEventListener(\"touchmove\", this._onMove), window.document.addEventListener(\"touchend\", this._onTouchEnd)) : (window.document.addEventListener(\"mousemove\", this._onMove), window.document.addEventListener(\"mouseup\", this._onMouseUp)), window.addEventListener(\"blur\", this._onMouseUp), this._active = !1, this._startPos = this._pos = DOM.mousePos(this._el, t), this._inertia = [[Date.now(), this._pos]]);\n      }, DragPanHandler.prototype._onMove = function (t) {\n        if (!this._ignoreEvent(t)) {\n          this.isActive() || (this._active = !0, this._map.moving = !0, this._fireEvent(\"dragstart\", t), this._fireEvent(\"movestart\", t));\n          var e = DOM.mousePos(this._el, t),\n              n = this._map;\n          n.stop(), this._drainInertiaBuffer(), this._inertia.push([Date.now(), e]), n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos), e), this._fireEvent(\"drag\", t), this._fireEvent(\"move\", t), this._pos = e, t.preventDefault();\n        }\n      }, DragPanHandler.prototype._onUp = function (t) {\n        var e = this;\n\n        if (this.isActive()) {\n          this._active = !1, this._fireEvent(\"dragend\", t), this._drainInertiaBuffer();\n\n          var n = function n() {\n            e._map.moving = !1, e._fireEvent(\"moveend\", t);\n          },\n              i = this._inertia;\n\n          if (i.length < 2) return void n();\n          var o = i[i.length - 1],\n              r = i[0],\n              a = o[1].sub(r[1]),\n              s = (o[0] - r[0]) / 1e3;\n          if (0 === s || o[1].equals(r[1])) return void n();\n          var u = a.mult(inertiaLinearity / s),\n              d = u.mag();\n          d > inertiaMaxSpeed && (d = inertiaMaxSpeed, u._unit()._mult(d));\n          var h = d / (inertiaDeceleration * inertiaLinearity),\n              v = u.mult(-h / 2);\n\n          this._map.panBy(v, {\n            duration: 1e3 * h,\n            easing: inertiaEasing,\n            noMoveStart: !0\n          }, {\n            originalEvent: t\n          });\n        }\n      }, DragPanHandler.prototype._onMouseUp = function (t) {\n        this._ignoreEvent(t) || (this._onUp(t), window.document.removeEventListener(\"mousemove\", this._onMove), window.document.removeEventListener(\"mouseup\", this._onMouseUp), window.removeEventListener(\"blur\", this._onMouseUp));\n      }, DragPanHandler.prototype._onTouchEnd = function (t) {\n        this._ignoreEvent(t) || (this._onUp(t), window.document.removeEventListener(\"touchmove\", this._onMove), window.document.removeEventListener(\"touchend\", this._onTouchEnd));\n      }, DragPanHandler.prototype._fireEvent = function (t, e) {\n        return this._map.fire(t, {\n          originalEvent: e\n        });\n      }, DragPanHandler.prototype._ignoreEvent = function (t) {\n        var e = this._map;\n        if (e.boxZoom && e.boxZoom.isActive()) return !0;\n        if (e.dragRotate && e.dragRotate.isActive()) return !0;\n        if (t.touches) return t.touches.length > 1;\n        if (t.ctrlKey) return !0;\n        var n = 1,\n            i = 0;\n        return \"mousemove\" === t.type ? t.buttons & 0 === n : t.button && t.button !== i;\n      }, DragPanHandler.prototype._drainInertiaBuffer = function () {\n        for (var t = this._inertia, e = Date.now(), n = 160; t.length > 0 && e - t[0][0] > n;) {\n          t.shift();\n        }\n      }, module.exports = DragPanHandler;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    184: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          window = _dereq_(\"../../util/window\"),\n          inertiaLinearity = .25,\n          inertiaEasing = util.bezier(0, 0, inertiaLinearity, 1),\n          inertiaMaxSpeed = 180,\n          inertiaDeceleration = 720,\n          DragRotateHandler = function DragRotateHandler(t, e) {\n        this._map = t, this._el = t.getCanvasContainer(), this._bearingSnap = e.bearingSnap, this._pitchWithRotate = e.pitchWithRotate !== !1, util.bindAll([\"_onDown\", \"_onMove\", \"_onUp\"], this);\n      };\n\n      DragRotateHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, DragRotateHandler.prototype.isActive = function () {\n        return !!this._active;\n      }, DragRotateHandler.prototype.enable = function () {\n        this.isEnabled() || (this._el.addEventListener(\"mousedown\", this._onDown), this._enabled = !0);\n      }, DragRotateHandler.prototype.disable = function () {\n        this.isEnabled() && (this._el.removeEventListener(\"mousedown\", this._onDown), this._enabled = !1);\n      }, DragRotateHandler.prototype._onDown = function (t) {\n        this._ignoreEvent(t) || this.isActive() || (window.document.addEventListener(\"mousemove\", this._onMove), window.document.addEventListener(\"mouseup\", this._onUp), window.addEventListener(\"blur\", this._onUp), this._active = !1, this._inertia = [[Date.now(), this._map.getBearing()]], this._startPos = this._pos = DOM.mousePos(this._el, t), this._center = this._map.transform.centerPoint, t.preventDefault());\n      }, DragRotateHandler.prototype._onMove = function (t) {\n        if (!this._ignoreEvent(t)) {\n          this.isActive() || (this._active = !0, this._map.moving = !0, this._fireEvent(\"rotatestart\", t), this._fireEvent(\"movestart\", t), this._pitchWithRotate && this._fireEvent(\"pitchstart\", t));\n          var e = this._map;\n          e.stop();\n          var i = this._pos,\n              n = DOM.mousePos(this._el, t),\n              r = .8 * (i.x - n.x),\n              a = (i.y - n.y) * -.5,\n              o = e.getBearing() - r,\n              s = e.getPitch() - a,\n              h = this._inertia,\n              _ = h[h.length - 1];\n          this._drainInertiaBuffer(), h.push([Date.now(), e._normalizeBearing(o, _[1])]), e.transform.bearing = o, this._pitchWithRotate && (this._fireEvent(\"pitch\", t), e.transform.pitch = s), this._fireEvent(\"rotate\", t), this._fireEvent(\"move\", t), this._pos = n;\n        }\n      }, DragRotateHandler.prototype._onUp = function (t) {\n        var e = this;\n\n        if (!this._ignoreEvent(t) && (window.document.removeEventListener(\"mousemove\", this._onMove), window.document.removeEventListener(\"mouseup\", this._onUp), window.removeEventListener(\"blur\", this._onUp), this.isActive())) {\n          this._active = !1, this._fireEvent(\"rotateend\", t), this._drainInertiaBuffer();\n\n          var i = this._map,\n              n = i.getBearing(),\n              r = this._inertia,\n              a = function a() {\n            Math.abs(n) < e._bearingSnap ? i.resetNorth({\n              noMoveStart: !0\n            }, {\n              originalEvent: t\n            }) : (e._map.moving = !1, e._fireEvent(\"moveend\", t)), e._pitchWithRotate && e._fireEvent(\"pitchend\", t);\n          };\n\n          if (r.length < 2) return void a();\n\n          var o = r[0],\n              s = r[r.length - 1],\n              h = r[r.length - 2],\n              _ = i._normalizeBearing(n, h[1]),\n              v = s[1] - o[1],\n              p = v < 0 ? -1 : 1,\n              d = (s[0] - o[0]) / 1e3;\n\n          if (0 === v || 0 === d) return void a();\n          var u = Math.abs(v * (inertiaLinearity / d));\n          u > inertiaMaxSpeed && (u = inertiaMaxSpeed);\n          var l = u / (inertiaDeceleration * inertiaLinearity),\n              g = p * u * (l / 2);\n          _ += g, Math.abs(i._normalizeBearing(_, 0)) < this._bearingSnap && (_ = i._normalizeBearing(0, _)), i.rotateTo(_, {\n            duration: 1e3 * l,\n            easing: inertiaEasing,\n            noMoveStart: !0\n          }, {\n            originalEvent: t\n          });\n        }\n      }, DragRotateHandler.prototype._fireEvent = function (t, e) {\n        return this._map.fire(t, {\n          originalEvent: e\n        });\n      }, DragRotateHandler.prototype._ignoreEvent = function (t) {\n        var e = this._map;\n        if (e.boxZoom && e.boxZoom.isActive()) return !0;\n        if (e.dragPan && e.dragPan.isActive()) return !0;\n        if (t.touches) return t.touches.length > 1;\n        var i = t.ctrlKey ? 1 : 2,\n            n = t.ctrlKey ? 0 : 2,\n            r = t.button;\n        return \"undefined\" != typeof InstallTrigger && 2 === t.button && t.ctrlKey && window.navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0 && (r = 0), \"mousemove\" === t.type ? t.buttons & 0 === i : !this.isActive() && r !== n;\n      }, DragRotateHandler.prototype._drainInertiaBuffer = function () {\n        for (var t = this._inertia, e = Date.now(), i = 160; t.length > 0 && e - t[0][0] > i;) {\n          t.shift();\n        }\n      }, module.exports = DragRotateHandler;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    185: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function easeOut(e) {\n        return e * (2 - e);\n      }\n\n      var panStep = 100,\n          bearingStep = 15,\n          pitchStep = 10,\n          KeyboardHandler = function KeyboardHandler(e) {\n        this._map = e, this._el = e.getCanvasContainer(), this._onKeyDown = this._onKeyDown.bind(this);\n      };\n\n      KeyboardHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, KeyboardHandler.prototype.enable = function () {\n        this.isEnabled() || (this._el.addEventListener(\"keydown\", this._onKeyDown, !1), this._enabled = !0);\n      }, KeyboardHandler.prototype.disable = function () {\n        this.isEnabled() && (this._el.removeEventListener(\"keydown\", this._onKeyDown), this._enabled = !1);\n      }, KeyboardHandler.prototype._onKeyDown = function (e) {\n        if (!(e.altKey || e.ctrlKey || e.metaKey)) {\n          var t = 0,\n              a = 0,\n              n = 0,\n              r = 0,\n              i = 0;\n\n          switch (e.keyCode) {\n            case 61:\n            case 107:\n            case 171:\n            case 187:\n              t = 1;\n              break;\n\n            case 189:\n            case 109:\n            case 173:\n              t = -1;\n              break;\n\n            case 37:\n              e.shiftKey ? a = -1 : (e.preventDefault(), r = -1);\n              break;\n\n            case 39:\n              e.shiftKey ? a = 1 : (e.preventDefault(), r = 1);\n              break;\n\n            case 38:\n              e.shiftKey ? n = 1 : (e.preventDefault(), i = -1);\n              break;\n\n            case 40:\n              e.shiftKey ? n = -1 : (i = 1, e.preventDefault());\n              break;\n\n            default:\n              return;\n          }\n\n          var s = this._map,\n              o = s.getZoom(),\n              d = {\n            duration: 300,\n            delayEndEvents: 500,\n            easing: easeOut,\n            zoom: t ? Math.round(o) + t * (e.shiftKey ? 2 : 1) : o,\n            bearing: s.getBearing() + a * bearingStep,\n            pitch: s.getPitch() + n * pitchStep,\n            offset: [-r * panStep, -i * panStep],\n            center: s.getCenter()\n          };\n          s.easeTo(d, {\n            originalEvent: e\n          });\n        }\n      }, module.exports = KeyboardHandler;\n    }, {}],\n    186: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          browser = _dereq_(\"../../util/browser\"),\n          window = _dereq_(\"../../util/window\"),\n          ua = window.navigator.userAgent.toLowerCase(),\n          firefox = ua.indexOf(\"firefox\") !== -1,\n          safari = ua.indexOf(\"safari\") !== -1 && ua.indexOf(\"chrom\") === -1,\n          ScrollZoomHandler = function ScrollZoomHandler(e) {\n        this._map = e, this._el = e.getCanvasContainer(), util.bindAll([\"_onWheel\", \"_onTimeout\"], this);\n      };\n\n      ScrollZoomHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, ScrollZoomHandler.prototype.enable = function (e) {\n        this.isEnabled() || (this._el.addEventListener(\"wheel\", this._onWheel, !1), this._el.addEventListener(\"mousewheel\", this._onWheel, !1), this._enabled = !0, this._aroundCenter = e && \"center\" === e.around);\n      }, ScrollZoomHandler.prototype.disable = function () {\n        this.isEnabled() && (this._el.removeEventListener(\"wheel\", this._onWheel), this._el.removeEventListener(\"mousewheel\", this._onWheel), this._enabled = !1);\n      }, ScrollZoomHandler.prototype._onWheel = function (e) {\n        var t;\n        \"wheel\" === e.type ? (t = e.deltaY, firefox && e.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL && (t /= browser.devicePixelRatio), e.deltaMode === window.WheelEvent.DOM_DELTA_LINE && (t *= 40)) : \"mousewheel\" === e.type && (t = -e.wheelDeltaY, safari && (t /= 3));\n        var o = browser.now(),\n            i = o - (this._time || 0);\n        this._pos = DOM.mousePos(this._el, e), this._time = o, 0 !== t && t % 4.000244140625 === 0 ? this._type = \"wheel\" : 0 !== t && Math.abs(t) < 4 ? this._type = \"trackpad\" : i > 400 ? (this._type = null, this._lastValue = t, this._timeout = setTimeout(this._onTimeout, 40)) : this._type || (this._type = Math.abs(i * t) < 200 ? \"trackpad\" : \"wheel\", this._timeout && (clearTimeout(this._timeout), this._timeout = null, t += this._lastValue)), e.shiftKey && t && (t /= 4), this._type && this._zoom(-t, e), e.preventDefault();\n      }, ScrollZoomHandler.prototype._onTimeout = function () {\n        this._type = \"wheel\", this._zoom(-this._lastValue);\n      }, ScrollZoomHandler.prototype._zoom = function (e, t) {\n        if (0 !== e) {\n          var o = this._map,\n              i = 2 / (1 + Math.exp(-Math.abs(e / 100)));\n          e < 0 && 0 !== i && (i = 1 / i);\n          var l = o.ease ? o.ease.to : o.transform.scale,\n              s = o.transform.scaleZoom(l * i);\n          o.zoomTo(s, {\n            duration: \"wheel\" === this._type ? 200 : 0,\n            around: this._aroundCenter ? o.getCenter() : o.unproject(this._pos),\n            delayEndEvents: 200,\n            smoothEasing: !0\n          }, {\n            originalEvent: t\n          });\n        }\n      }, module.exports = ScrollZoomHandler;\n    }, {\n      \"../../util/browser\": 194,\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    187: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../../util/dom\"),\n          util = _dereq_(\"../../util/util\"),\n          window = _dereq_(\"../../util/window\"),\n          inertiaLinearity = .15,\n          inertiaEasing = util.bezier(0, 0, inertiaLinearity, 1),\n          inertiaDeceleration = 12,\n          inertiaMaxSpeed = 2.5,\n          significantScaleThreshold = .15,\n          significantRotateThreshold = 4,\n          TouchZoomRotateHandler = function TouchZoomRotateHandler(t) {\n        this._map = t, this._el = t.getCanvasContainer(), util.bindAll([\"_onStart\", \"_onMove\", \"_onEnd\"], this);\n      };\n\n      TouchZoomRotateHandler.prototype.isEnabled = function () {\n        return !!this._enabled;\n      }, TouchZoomRotateHandler.prototype.enable = function (t) {\n        this.isEnabled() || (this._el.classList.add(\"mapboxgl-touch-zoom-rotate\"), this._el.addEventListener(\"touchstart\", this._onStart, !1), this._enabled = !0, this._aroundCenter = t && \"center\" === t.around);\n      }, TouchZoomRotateHandler.prototype.disable = function () {\n        this.isEnabled() && (this._el.classList.remove(\"mapboxgl-touch-zoom-rotate\"), this._el.removeEventListener(\"touchstart\", this._onStart), this._enabled = !1);\n      }, TouchZoomRotateHandler.prototype.disableRotation = function () {\n        this._rotationDisabled = !0;\n      }, TouchZoomRotateHandler.prototype.enableRotation = function () {\n        this._rotationDisabled = !1;\n      }, TouchZoomRotateHandler.prototype._onStart = function (t) {\n        if (2 === t.touches.length) {\n          var e = DOM.mousePos(this._el, t.touches[0]),\n              o = DOM.mousePos(this._el, t.touches[1]);\n          this._startVec = e.sub(o), this._startScale = this._map.transform.scale, this._startBearing = this._map.transform.bearing, this._gestureIntent = void 0, this._inertia = [], window.document.addEventListener(\"touchmove\", this._onMove, !1), window.document.addEventListener(\"touchend\", this._onEnd, !1);\n        }\n      }, TouchZoomRotateHandler.prototype._onMove = function (t) {\n        if (2 === t.touches.length) {\n          var e = DOM.mousePos(this._el, t.touches[0]),\n              o = DOM.mousePos(this._el, t.touches[1]),\n              i = e.add(o).div(2),\n              n = e.sub(o),\n              a = n.mag() / this._startVec.mag(),\n              r = this._rotationDisabled ? 0 : 180 * n.angleWith(this._startVec) / Math.PI,\n              s = this._map;\n\n          if (this._gestureIntent) {\n            var h = {\n              duration: 0,\n              around: s.unproject(i)\n            };\n            \"rotate\" === this._gestureIntent && (h.bearing = this._startBearing + r), \"zoom\" !== this._gestureIntent && \"rotate\" !== this._gestureIntent || (h.zoom = s.transform.scaleZoom(this._startScale * a)), s.stop(), this._drainInertiaBuffer(), this._inertia.push([Date.now(), a, i]), s.easeTo(h, {\n              originalEvent: t\n            });\n          } else {\n            var u = Math.abs(1 - a) > significantScaleThreshold,\n                l = Math.abs(r) > significantRotateThreshold;\n            l ? this._gestureIntent = \"rotate\" : u && (this._gestureIntent = \"zoom\"), this._gestureIntent && (this._startVec = n, this._startScale = s.transform.scale, this._startBearing = s.transform.bearing);\n          }\n\n          t.preventDefault();\n        }\n      }, TouchZoomRotateHandler.prototype._onEnd = function (t) {\n        window.document.removeEventListener(\"touchmove\", this._onMove), window.document.removeEventListener(\"touchend\", this._onEnd), this._drainInertiaBuffer();\n        var e = this._inertia,\n            o = this._map;\n        if (e.length < 2) return void o.snapToNorth({}, {\n          originalEvent: t\n        });\n        var i = e[e.length - 1],\n            n = e[0],\n            a = o.transform.scaleZoom(this._startScale * i[1]),\n            r = o.transform.scaleZoom(this._startScale * n[1]),\n            s = a - r,\n            h = (i[0] - n[0]) / 1e3,\n            u = i[2];\n        if (0 === h || a === r) return void o.snapToNorth({}, {\n          originalEvent: t\n        });\n        var l = s * inertiaLinearity / h;\n        Math.abs(l) > inertiaMaxSpeed && (l = l > 0 ? inertiaMaxSpeed : -inertiaMaxSpeed);\n        var d = 1e3 * Math.abs(l / (inertiaDeceleration * inertiaLinearity)),\n            c = a + l * d / 2e3;\n        c < 0 && (c = 0), o.easeTo({\n          zoom: c,\n          duration: d,\n          easing: inertiaEasing,\n          around: this._aroundCenter ? o.getCenter() : o.unproject(u)\n        }, {\n          originalEvent: t\n        });\n      }, TouchZoomRotateHandler.prototype._drainInertiaBuffer = function () {\n        for (var t = this._inertia, e = Date.now(), o = 160; t.length > 2 && e - t[0][0] > o;) {\n          t.shift();\n        }\n      }, module.exports = TouchZoomRotateHandler;\n    }, {\n      \"../../util/dom\": 201,\n      \"../../util/util\": 215,\n      \"../../util/window\": 196\n    }],\n    188: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"../util/util\"),\n          window = _dereq_(\"../util/window\"),\n          Hash = function Hash() {\n        util.bindAll([\"_onHashChange\", \"_updateHash\"], this);\n      };\n\n      Hash.prototype.addTo = function (t) {\n        return this._map = t, window.addEventListener(\"hashchange\", this._onHashChange, !1), this._map.on(\"moveend\", this._updateHash), this;\n      }, Hash.prototype.remove = function () {\n        return window.removeEventListener(\"hashchange\", this._onHashChange, !1), this._map.off(\"moveend\", this._updateHash), delete this._map, this;\n      }, Hash.prototype.getHashString = function (t) {\n        var a = this._map.getCenter(),\n            h = Math.round(100 * this._map.getZoom()) / 100,\n            e = Math.max(0, Math.ceil(Math.log(h) / Math.LN2)),\n            n = Math.round(a.lng * Math.pow(10, e)) / Math.pow(10, e),\n            o = Math.round(a.lat * Math.pow(10, e)) / Math.pow(10, e),\n            i = this._map.getBearing(),\n            s = this._map.getPitch(),\n            r = \"\";\n\n        return r += t ? \"#/\" + n + \"/\" + o + \"/\" + h : \"#\" + h + \"/\" + o + \"/\" + n, (i || s) && (r += \"/\" + Math.round(10 * i) / 10), s && (r += \"/\" + Math.round(s)), r;\n      }, Hash.prototype._onHashChange = function () {\n        var t = window.location.hash.replace(\"#\", \"\").split(\"/\");\n        return t.length >= 3 && (this._map.jumpTo({\n          center: [+t[2], +t[1]],\n          zoom: +t[0],\n          bearing: +(t[3] || 0),\n          pitch: +(t[4] || 0)\n        }), !0);\n      }, Hash.prototype._updateHash = function () {\n        var t = this.getHashString();\n        window.history.replaceState(\"\", \"\", t);\n      }, module.exports = Hash;\n    }, {\n      \"../util/util\": 215,\n      \"../util/window\": 196\n    }],\n    189: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function removeNode(t) {\n        t.parentNode && t.parentNode.removeChild(t);\n      }\n\n      var util = _dereq_(\"../util/util\"),\n          browser = _dereq_(\"../util/browser\"),\n          window = _dereq_(\"../util/window\"),\n          DOM = _dereq_(\"../util/dom\"),\n          ajax = _dereq_(\"../util/ajax\"),\n          Style = _dereq_(\"../style/style\"),\n          AnimationLoop = _dereq_(\"../style/animation_loop\"),\n          Painter = _dereq_(\"../render/painter\"),\n          Transform = _dereq_(\"../geo/transform\"),\n          Hash = _dereq_(\"./hash\"),\n          bindHandlers = _dereq_(\"./bind_handlers\"),\n          Camera = _dereq_(\"./camera\"),\n          LngLat = _dereq_(\"../geo/lng_lat\"),\n          LngLatBounds = _dereq_(\"../geo/lng_lat_bounds\"),\n          Point = _dereq_(\"point-geometry\"),\n          AttributionControl = _dereq_(\"./control/attribution_control\"),\n          LogoControl = _dereq_(\"./control/logo_control\"),\n          isSupported = _dereq_(\"mapbox-gl-supported\"),\n          defaultMinZoom = 0,\n          defaultMaxZoom = 22,\n          defaultOptions = {\n        center: [0, 0],\n        zoom: 0,\n        bearing: 0,\n        pitch: 0,\n        minZoom: defaultMinZoom,\n        maxZoom: defaultMaxZoom,\n        interactive: !0,\n        scrollZoom: !0,\n        boxZoom: !0,\n        dragRotate: !0,\n        dragPan: !0,\n        keyboard: !0,\n        doubleClickZoom: !0,\n        touchZoomRotate: !0,\n        bearingSnap: 7,\n        hash: !1,\n        attributionControl: !0,\n        failIfMajorPerformanceCaveat: !1,\n        preserveDrawingBuffer: !1,\n        trackResize: !0,\n        renderWorldCopies: !0,\n        refreshExpiredTiles: !0\n      },\n          Map = function (t) {\n        function e(e) {\n          var o = this;\n          if (e = util.extend({}, defaultOptions, e), null != e.minZoom && null != e.maxZoom && e.minZoom > e.maxZoom) throw new Error(\"maxZoom must be greater than minZoom\");\n          var i = new Transform(e.minZoom, e.maxZoom, e.renderWorldCopies);\n\n          if (t.call(this, i, e), this._interactive = e.interactive, this._failIfMajorPerformanceCaveat = e.failIfMajorPerformanceCaveat, this._preserveDrawingBuffer = e.preserveDrawingBuffer, this._trackResize = e.trackResize, this._bearingSnap = e.bearingSnap, this._refreshExpiredTiles = e.refreshExpiredTiles, \"string\" == typeof e.container) {\n            if (this._container = window.document.getElementById(e.container), !this._container) throw new Error(\"Container '\" + e.container + \"' not found.\");\n          } else this._container = e.container;\n\n          this.animationLoop = new AnimationLoop(), e.maxBounds && this.setMaxBounds(e.maxBounds), util.bindAll([\"_onWindowOnline\", \"_onWindowResize\", \"_contextLost\", \"_contextRestored\", \"_update\", \"_render\", \"_onData\", \"_onDataLoading\"], this), this._setupContainer(), this._setupPainter(), this.on(\"move\", this._update.bind(this, !1)), this.on(\"zoom\", this._update.bind(this, !0)), this.on(\"moveend\", function () {\n            o.animationLoop.set(300), o._rerender();\n          }), \"undefined\" != typeof window && (window.addEventListener(\"online\", this._onWindowOnline, !1), window.addEventListener(\"resize\", this._onWindowResize, !1)), bindHandlers(this, e), this._hash = e.hash && new Hash().addTo(this), this._hash && this._hash._onHashChange() || this.jumpTo({\n            center: e.center,\n            zoom: e.zoom,\n            bearing: e.bearing,\n            pitch: e.pitch\n          }), this._classes = [], this.resize(), e.classes && this.setClasses(e.classes), e.style && this.setStyle(e.style), e.attributionControl && this.addControl(new AttributionControl()), this.addControl(new LogoControl(), e.logoPosition), this.on(\"style.load\", function () {\n            this.transform.unmodified && this.jumpTo(this.style.stylesheet), this.style.update(this._classes, {\n              transition: !1\n            });\n          }), this.on(\"data\", this._onData), this.on(\"dataloading\", this._onDataLoading);\n        }\n\n        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;\n        var o = {\n          showTileBoundaries: {},\n          showCollisionBoxes: {},\n          showOverdrawInspector: {},\n          repaint: {},\n          vertices: {}\n        };\n        return e.prototype.addControl = function (t, e) {\n          void 0 === e && t.getDefaultPosition && (e = t.getDefaultPosition()), void 0 === e && (e = \"top-right\");\n          var o = t.onAdd(this),\n              i = this._controlPositions[e];\n          return e.indexOf(\"bottom\") !== -1 ? i.insertBefore(o, i.firstChild) : i.appendChild(o), this;\n        }, e.prototype.removeControl = function (t) {\n          return t.onRemove(this), this;\n        }, e.prototype.addClass = function (t, e) {\n          return util.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\"), this._classes.indexOf(t) >= 0 || \"\" === t ? this : (this._classes.push(t), this._classOptions = e, this.style && this.style.updateClasses(), this._update(!0));\n        }, e.prototype.removeClass = function (t, e) {\n          util.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\");\n\n          var o = this._classes.indexOf(t);\n\n          return o < 0 || \"\" === t ? this : (this._classes.splice(o, 1), this._classOptions = e, this.style && this.style.updateClasses(), this._update(!0));\n        }, e.prototype.setClasses = function (t, e) {\n          util.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\");\n\n          for (var o = {}, i = 0; i < t.length; i++) {\n            \"\" !== t[i] && (o[t[i]] = !0);\n          }\n\n          return this._classes = Object.keys(o), this._classOptions = e, this.style && this.style.updateClasses(), this._update(!0);\n        }, e.prototype.hasClass = function (t) {\n          return util.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\"), this._classes.indexOf(t) >= 0;\n        }, e.prototype.getClasses = function () {\n          return util.warnOnce(\"Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.\"), this._classes;\n        }, e.prototype.resize = function () {\n          var t = this._containerDimensions(),\n              e = t[0],\n              o = t[1];\n\n          return this._resizeCanvas(e, o), this.transform.resize(e, o), this.painter.resize(e, o), this.fire(\"movestart\").fire(\"move\").fire(\"resize\").fire(\"moveend\");\n        }, e.prototype.getBounds = function () {\n          var t = new LngLatBounds(this.transform.pointLocation(new Point(0, this.transform.height)), this.transform.pointLocation(new Point(this.transform.width, 0)));\n          return (this.transform.angle || this.transform.pitch) && (t.extend(this.transform.pointLocation(new Point(this.transform.size.x, 0))), t.extend(this.transform.pointLocation(new Point(0, this.transform.size.y)))), t;\n        }, e.prototype.setMaxBounds = function (t) {\n          if (t) {\n            var e = LngLatBounds.convert(t);\n            this.transform.lngRange = [e.getWest(), e.getEast()], this.transform.latRange = [e.getSouth(), e.getNorth()], this.transform._constrain(), this._update();\n          } else null !== t && void 0 !== t || (this.transform.lngRange = [], this.transform.latRange = [], this._update());\n\n          return this;\n        }, e.prototype.setMinZoom = function (t) {\n          if (t = null === t || void 0 === t ? defaultMinZoom : t, t >= defaultMinZoom && t <= this.transform.maxZoom) return this.transform.minZoom = t, this._update(), this.getZoom() < t && this.setZoom(t), this;\n          throw new Error(\"minZoom must be between \" + defaultMinZoom + \" and the current maxZoom, inclusive\");\n        }, e.prototype.getMinZoom = function () {\n          return this.transform.minZoom;\n        }, e.prototype.setMaxZoom = function (t) {\n          if (t = null === t || void 0 === t ? defaultMaxZoom : t, t >= this.transform.minZoom) return this.transform.maxZoom = t, this._update(), this.getZoom() > t && this.setZoom(t), this;\n          throw new Error(\"maxZoom must be greater than the current minZoom\");\n        }, e.prototype.getMaxZoom = function () {\n          return this.transform.maxZoom;\n        }, e.prototype.project = function (t) {\n          return this.transform.locationPoint(LngLat.convert(t));\n        }, e.prototype.unproject = function (t) {\n          return this.transform.pointLocation(Point.convert(t));\n        }, e.prototype.on = function (e, o, i) {\n          var r = this;\n          if (void 0 === i) return t.prototype.on.call(this, e, o);\n\n          var s = function () {\n            if (\"mouseenter\" === e || \"mouseover\" === e) {\n              var t = !1,\n                  s = function s(_s) {\n                var n = r.queryRenderedFeatures(_s.point, {\n                  layers: [o]\n                });\n                n.length ? t || (t = !0, i.call(r, util.extend({\n                  features: n\n                }, _s, {\n                  type: e\n                }))) : t = !1;\n              },\n                  n = function n() {\n                t = !1;\n              };\n\n              return {\n                layer: o,\n                listener: i,\n                delegates: {\n                  mousemove: s,\n                  mouseout: n\n                }\n              };\n            }\n\n            if (\"mouseleave\" === e || \"mouseout\" === e) {\n              var a = !1,\n                  h = function h(t) {\n                var s = r.queryRenderedFeatures(t.point, {\n                  layers: [o]\n                });\n                s.length ? a = !0 : a && (a = !1, i.call(r, util.extend({}, t, {\n                  type: e\n                })));\n              },\n                  l = function l(t) {\n                a && (a = !1, i.call(r, util.extend({}, t, {\n                  type: e\n                })));\n              };\n\n              return {\n                layer: o,\n                listener: i,\n                delegates: {\n                  mousemove: h,\n                  mouseout: l\n                }\n              };\n            }\n\n            var u = function u(t) {\n              var e = r.queryRenderedFeatures(t.point, {\n                layers: [o]\n              });\n              e.length && i.call(r, util.extend({\n                features: e\n              }, t));\n            };\n\n            return {\n              layer: o,\n              listener: i,\n              delegates: (d = {}, d[e] = u, d)\n            };\n            var d;\n          }();\n\n          this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[e] = this._delegatedListeners[e] || [], this._delegatedListeners[e].push(s);\n\n          for (var n in s.delegates) {\n            r.on(n, s.delegates[n]);\n          }\n\n          return this;\n        }, e.prototype.off = function (e, o, i) {\n          var r = this;\n          if (void 0 === i) return t.prototype.off.call(this, e, o);\n          if (this._delegatedListeners && this._delegatedListeners[e]) for (var s = this._delegatedListeners[e], n = 0; n < s.length; n++) {\n            var a = s[n];\n\n            if (a.layer === o && a.listener === i) {\n              for (var h in a.delegates) {\n                r.off(h, a.delegates[h]);\n              }\n\n              return s.splice(n, 1), r;\n            }\n          }\n        }, e.prototype.queryRenderedFeatures = function () {\n          function t(t) {\n            return t instanceof Point || Array.isArray(t);\n          }\n\n          var e,\n              o = {};\n          return 2 === arguments.length ? (e = arguments[0], o = arguments[1]) : 1 === arguments.length && t(arguments[0]) ? e = arguments[0] : 1 === arguments.length && (o = arguments[0]), this.style ? this.style.queryRenderedFeatures(this._makeQueryGeometry(e), o, this.transform.zoom, this.transform.angle) : [];\n        }, e.prototype._makeQueryGeometry = function (t) {\n          var e = this;\n          void 0 === t && (t = [Point.convert([0, 0]), Point.convert([this.transform.width, this.transform.height])]);\n          var o,\n              i = t instanceof Point || \"number\" == typeof t[0];\n\n          if (i) {\n            var r = Point.convert(t);\n            o = [r];\n          } else {\n            var s = [Point.convert(t[0]), Point.convert(t[1])];\n            o = [s[0], new Point(s[1].x, s[0].y), s[1], new Point(s[0].x, s[1].y), s[0]];\n          }\n\n          return o = o.map(function (t) {\n            return e.transform.pointCoordinate(t);\n          });\n        }, e.prototype.querySourceFeatures = function (t, e) {\n          return this.style.querySourceFeatures(t, e);\n        }, e.prototype.setStyle = function (t, e) {\n          var o = (!e || e.diff !== !1) && this.style && t && !(t instanceof Style) && \"string\" != typeof t;\n          if (o) try {\n            return this.style.setState(t) && this._update(!0), this;\n          } catch (t) {\n            util.warnOnce(\"Unable to perform style diff: \" + (t.message || t.error || t) + \".  Rebuilding the style from scratch.\");\n          }\n          return this.style && (this.style.setEventedParent(null), this.style._remove(), this.off(\"rotate\", this.style._redoPlacement), this.off(\"pitch\", this.style._redoPlacement), this.off(\"move\", this.style._redoPlacement)), t ? (t instanceof Style ? this.style = t : this.style = new Style(t, this), this.style.setEventedParent(this, {\n            style: this.style\n          }), this.on(\"rotate\", this.style._redoPlacement), this.on(\"pitch\", this.style._redoPlacement), this.on(\"move\", this.style._redoPlacement), this) : (this.style = null, this);\n        }, e.prototype.getStyle = function () {\n          if (this.style) return this.style.serialize();\n        }, e.prototype.isStyleLoaded = function () {\n          return this.style ? this.style.loaded() : util.warnOnce(\"There is no style added to the map.\");\n        }, e.prototype.addSource = function (t, e) {\n          return this.style.addSource(t, e), this._update(!0), this;\n        }, e.prototype.isSourceLoaded = function (t) {\n          var e = this.style && this.style.sourceCaches[t];\n          return void 0 === e ? void this.fire(\"error\", {\n            error: new Error(\"There is no source with ID '\" + t + \"'\")\n          }) : e.loaded();\n        }, e.prototype.areTilesLoaded = function () {\n          var t = this.style && this.style.sourceCaches;\n\n          for (var e in t) {\n            var o = t[e],\n                i = o._tiles;\n\n            for (var r in i) {\n              var s = i[r];\n              if (\"loaded\" !== s.state && \"errored\" !== s.state) return !1;\n            }\n          }\n\n          return !0;\n        }, e.prototype.addSourceType = function (t, e, o) {\n          return this.style.addSourceType(t, e, o);\n        }, e.prototype.removeSource = function (t) {\n          return this.style.removeSource(t), this._update(!0), this;\n        }, e.prototype.getSource = function (t) {\n          return this.style.getSource(t);\n        }, e.prototype.addImage = function (t, e, o) {\n          this.style.spriteAtlas.addImage(t, e, o);\n        }, e.prototype.removeImage = function (t) {\n          this.style.spriteAtlas.removeImage(t);\n        }, e.prototype.loadImage = function (t, e) {\n          ajax.getImage(t, e);\n        }, e.prototype.addLayer = function (t, e) {\n          return this.style.addLayer(t, e), this._update(!0), this;\n        }, e.prototype.moveLayer = function (t, e) {\n          return this.style.moveLayer(t, e), this._update(!0), this;\n        }, e.prototype.removeLayer = function (t) {\n          return this.style.removeLayer(t), this._update(!0), this;\n        }, e.prototype.getLayer = function (t) {\n          return this.style.getLayer(t);\n        }, e.prototype.setFilter = function (t, e) {\n          return this.style.setFilter(t, e), this._update(!0), this;\n        }, e.prototype.setLayerZoomRange = function (t, e, o) {\n          return this.style.setLayerZoomRange(t, e, o), this._update(!0), this;\n        }, e.prototype.getFilter = function (t) {\n          return this.style.getFilter(t);\n        }, e.prototype.setPaintProperty = function (t, e, o, i) {\n          return this.style.setPaintProperty(t, e, o, i), this._update(!0), this;\n        }, e.prototype.getPaintProperty = function (t, e, o) {\n          return this.style.getPaintProperty(t, e, o);\n        }, e.prototype.setLayoutProperty = function (t, e, o) {\n          return this.style.setLayoutProperty(t, e, o), this._update(!0), this;\n        }, e.prototype.getLayoutProperty = function (t, e) {\n          return this.style.getLayoutProperty(t, e);\n        }, e.prototype.setLight = function (t) {\n          return this.style.setLight(t), this._update(!0), this;\n        }, e.prototype.getLight = function () {\n          return this.style.getLight();\n        }, e.prototype.getContainer = function () {\n          return this._container;\n        }, e.prototype.getCanvasContainer = function () {\n          return this._canvasContainer;\n        }, e.prototype.getCanvas = function () {\n          return this._canvas;\n        }, e.prototype._containerDimensions = function () {\n          var t = 0,\n              e = 0;\n          return this._container && (t = this._container.offsetWidth || 400, e = this._container.offsetHeight || 300), [t, e];\n        }, e.prototype._setupContainer = function () {\n          var t = this._container;\n          t.classList.add(\"mapboxgl-map\");\n          var e = this._canvasContainer = DOM.create(\"div\", \"mapboxgl-canvas-container\", t);\n          this._interactive && e.classList.add(\"mapboxgl-interactive\"), this._canvas = DOM.create(\"canvas\", \"mapboxgl-canvas\", e), this._canvas.style.position = \"absolute\", this._canvas.addEventListener(\"webglcontextlost\", this._contextLost, !1), this._canvas.addEventListener(\"webglcontextrestored\", this._contextRestored, !1), this._canvas.setAttribute(\"tabindex\", 0), this._canvas.setAttribute(\"aria-label\", \"Map\");\n\n          var o = this._containerDimensions();\n\n          this._resizeCanvas(o[0], o[1]);\n\n          var i = this._controlContainer = DOM.create(\"div\", \"mapboxgl-control-container\", t),\n              r = this._controlPositions = {};\n          [\"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\"].forEach(function (t) {\n            r[t] = DOM.create(\"div\", \"mapboxgl-ctrl-\" + t, i);\n          });\n        }, e.prototype._resizeCanvas = function (t, e) {\n          var o = window.devicePixelRatio || 1;\n          this._canvas.width = o * t, this._canvas.height = o * e, this._canvas.style.width = t + \"px\", this._canvas.style.height = e + \"px\";\n        }, e.prototype._setupPainter = function () {\n          var t = util.extend({\n            failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,\n            preserveDrawingBuffer: this._preserveDrawingBuffer\n          }, isSupported.webGLContextAttributes),\n              e = this._canvas.getContext(\"webgl\", t) || this._canvas.getContext(\"experimental-webgl\", t);\n\n          return e ? void (this.painter = new Painter(e, this.transform)) : void this.fire(\"error\", {\n            error: new Error(\"Failed to initialize WebGL\")\n          });\n        }, e.prototype._contextLost = function (t) {\n          t.preventDefault(), this._frameId && (browser.cancelFrame(this._frameId), this._frameId = null), this.fire(\"webglcontextlost\", {\n            originalEvent: t\n          });\n        }, e.prototype._contextRestored = function (t) {\n          this._setupPainter(), this.resize(), this._update(), this.fire(\"webglcontextrestored\", {\n            originalEvent: t\n          });\n        }, e.prototype.loaded = function () {\n          return !this._styleDirty && !this._sourcesDirty && !(!this.style || !this.style.loaded());\n        }, e.prototype._update = function (t) {\n          return this.style ? (this._styleDirty = this._styleDirty || t, this._sourcesDirty = !0, this._rerender(), this) : this;\n        }, e.prototype._render = function () {\n          return this.style && this._styleDirty && (this._styleDirty = !1, this.style.update(this._classes, this._classOptions), this._classOptions = null, this.style._recalculate(this.transform.zoom)), this.style && this._sourcesDirty && (this._sourcesDirty = !1, this.style._updateSources(this.transform)), this.painter.render(this.style, {\n            showTileBoundaries: this.showTileBoundaries,\n            showOverdrawInspector: this._showOverdrawInspector,\n            rotating: this.rotating,\n            zooming: this.zooming\n          }), this.fire(\"render\"), this.loaded() && !this._loaded && (this._loaded = !0, this.fire(\"load\")), this._frameId = null, this.animationLoop.stopped() || (this._styleDirty = !0), (this._sourcesDirty || this._repaint || this._styleDirty) && this._rerender(), this;\n        }, e.prototype.remove = function () {\n          this._hash && this._hash.remove(), browser.cancelFrame(this._frameId), this._frameId = null, this.setStyle(null), \"undefined\" != typeof window && (window.removeEventListener(\"resize\", this._onWindowResize, !1), window.removeEventListener(\"online\", this._onWindowOnline, !1));\n          var t = this.painter.gl.getExtension(\"WEBGL_lose_context\");\n          t && t.loseContext(), removeNode(this._canvasContainer), removeNode(this._controlContainer), this._container.classList.remove(\"mapboxgl-map\"), this.fire(\"remove\");\n        }, e.prototype._rerender = function () {\n          this.style && !this._frameId && (this._frameId = browser.frame(this._render));\n        }, e.prototype._onWindowOnline = function () {\n          this._update();\n        }, e.prototype._onWindowResize = function () {\n          this._trackResize && this.stop().resize()._update();\n        }, o.showTileBoundaries.get = function () {\n          return !!this._showTileBoundaries;\n        }, o.showTileBoundaries.set = function (t) {\n          this._showTileBoundaries !== t && (this._showTileBoundaries = t, this._update());\n        }, o.showCollisionBoxes.get = function () {\n          return !!this._showCollisionBoxes;\n        }, o.showCollisionBoxes.set = function (t) {\n          this._showCollisionBoxes !== t && (this._showCollisionBoxes = t, this.style._redoPlacement());\n        }, o.showOverdrawInspector.get = function () {\n          return !!this._showOverdrawInspector;\n        }, o.showOverdrawInspector.set = function (t) {\n          this._showOverdrawInspector !== t && (this._showOverdrawInspector = t, this._update());\n        }, o.repaint.get = function () {\n          return !!this._repaint;\n        }, o.repaint.set = function (t) {\n          this._repaint = t, this._update();\n        }, o.vertices.get = function () {\n          return !!this._vertices;\n        }, o.vertices.set = function (t) {\n          this._vertices = t, this._update();\n        }, e.prototype._onData = function (t) {\n          this._update(\"style\" === t.dataType), this.fire(t.dataType + \"data\", t);\n        }, e.prototype._onDataLoading = function (t) {\n          this.fire(t.dataType + \"dataloading\", t);\n        }, Object.defineProperties(e.prototype, o), e;\n      }(Camera);\n\n      module.exports = Map;\n    }, {\n      \"../geo/lng_lat\": 61,\n      \"../geo/lng_lat_bounds\": 62,\n      \"../geo/transform\": 63,\n      \"../render/painter\": 76,\n      \"../style/animation_loop\": 145,\n      \"../style/style\": 148,\n      \"../util/ajax\": 193,\n      \"../util/browser\": 194,\n      \"../util/dom\": 201,\n      \"../util/util\": 215,\n      \"../util/window\": 196,\n      \"./bind_handlers\": 173,\n      \"./camera\": 174,\n      \"./control/attribution_control\": 175,\n      \"./control/logo_control\": 178,\n      \"./hash\": 188,\n      \"mapbox-gl-supported\": 22,\n      \"point-geometry\": 25\n    }],\n    190: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DOM = _dereq_(\"../util/dom\"),\n          LngLat = _dereq_(\"../geo/lng_lat\"),\n          Point = _dereq_(\"point-geometry\"),\n          smartWrap = _dereq_(\"../util/smart_wrap\"),\n          Marker = function Marker(t, e) {\n        this._offset = Point.convert(e && e.offset || [0, 0]), this._update = this._update.bind(this), this._onMapClick = this._onMapClick.bind(this), t || (t = DOM.create(\"div\")), t.classList.add(\"mapboxgl-marker\"), this._element = t, this._popup = null;\n      };\n\n      Marker.prototype.addTo = function (t) {\n        return this.remove(), this._map = t, t.getCanvasContainer().appendChild(this._element), t.on(\"move\", this._update), t.on(\"moveend\", this._update), this._update(), this._map.on(\"click\", this._onMapClick), this;\n      }, Marker.prototype.remove = function () {\n        return this._map && (this._map.off(\"click\", this._onMapClick), this._map.off(\"move\", this._update), this._map.off(\"moveend\", this._update), this._map = null), DOM.remove(this._element), this._popup && this._popup.remove(), this;\n      }, Marker.prototype.getLngLat = function () {\n        return this._lngLat;\n      }, Marker.prototype.setLngLat = function (t) {\n        return this._lngLat = LngLat.convert(t), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;\n      }, Marker.prototype.getElement = function () {\n        return this._element;\n      }, Marker.prototype.setPopup = function (t) {\n        return this._popup && (this._popup.remove(), this._popup = null), t && (this._popup = t, this._popup.setLngLat(this._lngLat)), this;\n      }, Marker.prototype._onMapClick = function (t) {\n        var e = t.originalEvent.target,\n            p = this._element;\n        this._popup && (e === p || p.contains(e)) && this.togglePopup();\n      }, Marker.prototype.getPopup = function () {\n        return this._popup;\n      }, Marker.prototype.togglePopup = function () {\n        var t = this._popup;\n        t && (t.isOpen() ? t.remove() : t.addTo(this._map));\n      }, Marker.prototype._update = function (t) {\n        this._map && (this._map.transform.renderWorldCopies && (this._lngLat = smartWrap(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset), t && \"moveend\" !== t.type || (this._pos = this._pos.round()), DOM.setTransform(this._element, \"translate(\" + this._pos.x + \"px, \" + this._pos.y + \"px)\"));\n      }, module.exports = Marker;\n    }, {\n      \"../geo/lng_lat\": 61,\n      \"../util/dom\": 201,\n      \"../util/smart_wrap\": 211,\n      \"point-geometry\": 25\n    }],\n    191: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function normalizeOffset(t) {\n        if (t) {\n          if (\"number\" == typeof t) {\n            var o = Math.round(Math.sqrt(.5 * Math.pow(t, 2)));\n            return {\n              top: new Point(0, t),\n              \"top-left\": new Point(o, o),\n              \"top-right\": new Point(-o, o),\n              bottom: new Point(0, -t),\n              \"bottom-left\": new Point(o, -o),\n              \"bottom-right\": new Point(-o, -o),\n              left: new Point(t, 0),\n              right: new Point(-t, 0)\n            };\n          }\n\n          if (isPointLike(t)) {\n            var e = Point.convert(t);\n            return {\n              top: e,\n              \"top-left\": e,\n              \"top-right\": e,\n              bottom: e,\n              \"bottom-left\": e,\n              \"bottom-right\": e,\n              left: e,\n              right: e\n            };\n          }\n\n          return {\n            top: Point.convert(t.top || [0, 0]),\n            \"top-left\": Point.convert(t[\"top-left\"] || [0, 0]),\n            \"top-right\": Point.convert(t[\"top-right\"] || [0, 0]),\n            bottom: Point.convert(t.bottom || [0, 0]),\n            \"bottom-left\": Point.convert(t[\"bottom-left\"] || [0, 0]),\n            \"bottom-right\": Point.convert(t[\"bottom-right\"] || [0, 0]),\n            left: Point.convert(t.left || [0, 0]),\n            right: Point.convert(t.right || [0, 0])\n          };\n        }\n\n        return normalizeOffset(new Point(0, 0));\n      }\n\n      function isPointLike(t) {\n        return t instanceof Point || Array.isArray(t);\n      }\n\n      var util = _dereq_(\"../util/util\"),\n          Evented = _dereq_(\"../util/evented\"),\n          DOM = _dereq_(\"../util/dom\"),\n          LngLat = _dereq_(\"../geo/lng_lat\"),\n          Point = _dereq_(\"point-geometry\"),\n          window = _dereq_(\"../util/window\"),\n          smartWrap = _dereq_(\"../util/smart_wrap\"),\n          defaultOptions = {\n        closeButton: !0,\n        closeOnClick: !0\n      },\n          Popup = function (t) {\n        function o(o) {\n          t.call(this), this.options = util.extend(Object.create(defaultOptions), o), util.bindAll([\"_update\", \"_onClickClose\"], this);\n        }\n\n        return t && (o.__proto__ = t), o.prototype = Object.create(t && t.prototype), o.prototype.constructor = o, o.prototype.addTo = function (t) {\n          return this._map = t, this._map.on(\"move\", this._update), this.options.closeOnClick && this._map.on(\"click\", this._onClickClose), this._update(), this;\n        }, o.prototype.isOpen = function () {\n          return !!this._map;\n        }, o.prototype.remove = function () {\n          return this._content && this._content.parentNode && this._content.parentNode.removeChild(this._content), this._container && (this._container.parentNode.removeChild(this._container), delete this._container), this._map && (this._map.off(\"move\", this._update), this._map.off(\"click\", this._onClickClose), delete this._map), this.fire(\"close\"), this;\n        }, o.prototype.getLngLat = function () {\n          return this._lngLat;\n        }, o.prototype.setLngLat = function (t) {\n          return this._lngLat = LngLat.convert(t), this._pos = null, this._update(), this;\n        }, o.prototype.setText = function (t) {\n          return this.setDOMContent(window.document.createTextNode(t));\n        }, o.prototype.setHTML = function (t) {\n          var o,\n              e = window.document.createDocumentFragment(),\n              n = window.document.createElement(\"body\");\n\n          for (n.innerHTML = t;;) {\n            if (o = n.firstChild, !o) break;\n            e.appendChild(o);\n          }\n\n          return this.setDOMContent(e);\n        }, o.prototype.setDOMContent = function (t) {\n          return this._createContent(), this._content.appendChild(t), this._update(), this;\n        }, o.prototype._createContent = function () {\n          this._content && this._content.parentNode && this._content.parentNode.removeChild(this._content), this._content = DOM.create(\"div\", \"mapboxgl-popup-content\", this._container), this.options.closeButton && (this._closeButton = DOM.create(\"button\", \"mapboxgl-popup-close-button\", this._content), this._closeButton.type = \"button\", this._closeButton.setAttribute(\"aria-label\", \"Close popup\"), this._closeButton.innerHTML = \"&#215;\", this._closeButton.addEventListener(\"click\", this._onClickClose));\n        }, o.prototype._update = function () {\n          if (this._map && this._lngLat && this._content) {\n            this._container || (this._container = DOM.create(\"div\", \"mapboxgl-popup\", this._map.getContainer()), this._tip = DOM.create(\"div\", \"mapboxgl-popup-tip\", this._container), this._container.appendChild(this._content)), this._map.transform.renderWorldCopies && (this._lngLat = smartWrap(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat);\n            var t = this.options.anchor,\n                o = normalizeOffset(this.options.offset);\n\n            if (!t) {\n              var e = this._container.offsetWidth,\n                  n = this._container.offsetHeight;\n              t = this._pos.y + o.bottom.y < n ? [\"top\"] : this._pos.y > this._map.transform.height - n ? [\"bottom\"] : [], this._pos.x < e / 2 ? t.push(\"left\") : this._pos.x > this._map.transform.width - e / 2 && t.push(\"right\"), t = 0 === t.length ? \"bottom\" : t.join(\"-\");\n            }\n\n            var i = this._pos.add(o[t]).round(),\n                r = {\n              top: \"translate(-50%,0)\",\n              \"top-left\": \"translate(0,0)\",\n              \"top-right\": \"translate(-100%,0)\",\n              bottom: \"translate(-50%,-100%)\",\n              \"bottom-left\": \"translate(0,-100%)\",\n              \"bottom-right\": \"translate(-100%,-100%)\",\n              left: \"translate(0,-50%)\",\n              right: \"translate(-100%,-50%)\"\n            },\n                s = this._container.classList;\n\n            for (var p in r) {\n              s.remove(\"mapboxgl-popup-anchor-\" + p);\n            }\n\n            s.add(\"mapboxgl-popup-anchor-\" + t), DOM.setTransform(this._container, r[t] + \" translate(\" + i.x + \"px,\" + i.y + \"px)\");\n          }\n        }, o.prototype._onClickClose = function () {\n          this.remove();\n        }, o;\n      }(Evented);\n\n      module.exports = Popup;\n    }, {\n      \"../geo/lng_lat\": 61,\n      \"../util/dom\": 201,\n      \"../util/evented\": 202,\n      \"../util/smart_wrap\": 211,\n      \"../util/util\": 215,\n      \"../util/window\": 196,\n      \"point-geometry\": 25\n    }],\n    192: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Actor = function Actor(t, e, a) {\n        this.target = t, this.parent = e, this.mapId = a, this.callbacks = {}, this.callbackID = 0, this.receive = this.receive.bind(this), this.target.addEventListener(\"message\", this.receive, !1);\n      };\n\n      Actor.prototype.send = function (t, e, a, r, s) {\n        var i = a ? this.mapId + \":\" + this.callbackID++ : null;\n        a && (this.callbacks[i] = a), this.target.postMessage({\n          targetMapId: s,\n          sourceMapId: this.mapId,\n          type: t,\n          id: String(i),\n          data: e\n        }, r);\n      }, Actor.prototype.receive = function (t) {\n        var e,\n            a = this,\n            r = t.data,\n            s = r.id;\n\n        if (!r.targetMapId || this.mapId === r.targetMapId) {\n          var i = function i(t, e, r) {\n            a.target.postMessage({\n              sourceMapId: a.mapId,\n              type: \"<response>\",\n              id: String(s),\n              error: t ? String(t) : null,\n              data: e\n            }, r);\n          };\n\n          if (\"<response>\" === r.type) e = this.callbacks[r.id], delete this.callbacks[r.id], e && e(r.error || null, r.data);else if (\"undefined\" != typeof r.id && this.parent[r.type]) this.parent[r.type](r.sourceMapId, r.data, i);else if (\"undefined\" != typeof r.id && this.parent.getWorkerSource) {\n            var p = r.type.split(\".\"),\n                d = this.parent.getWorkerSource(r.sourceMapId, p[0]);\n            d[p[1]](r.data, i);\n          } else this.parent[r.type](r.data);\n        }\n      }, Actor.prototype.remove = function () {\n        this.target.removeEventListener(\"message\", this.receive, !1);\n      }, module.exports = Actor;\n    }, {}],\n    193: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function sameOrigin(e) {\n        var t = window.document.createElement(\"a\");\n        return t.href = e, t.protocol === window.document.location.protocol && t.host === window.document.location.host;\n      }\n\n      var window = _dereq_(\"./window\"),\n          AJAXError = function (e) {\n        function t(t, r) {\n          e.call(this, t), this.status = r;\n        }\n\n        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t;\n      }(Error);\n\n      exports.getJSON = function (e, t) {\n        var r = new window.XMLHttpRequest();\n        return r.open(\"GET\", e, !0), r.setRequestHeader(\"Accept\", \"application/json\"), r.onerror = function (e) {\n          t(e);\n        }, r.onload = function () {\n          if (r.status >= 200 && r.status < 300 && r.response) {\n            var e;\n\n            try {\n              e = JSON.parse(r.response);\n            } catch (e) {\n              return t(e);\n            }\n\n            t(null, e);\n          } else t(new AJAXError(r.statusText, r.status));\n        }, r.send(), r;\n      }, exports.getArrayBuffer = function (e, t) {\n        var r = new window.XMLHttpRequest();\n        return r.open(\"GET\", e, !0), r.responseType = \"arraybuffer\", r.onerror = function (e) {\n          t(e);\n        }, r.onload = function () {\n          return 0 === r.response.byteLength && 200 === r.status ? t(new Error(\"http status 200 returned without content.\")) : void (r.status >= 200 && r.status < 300 && r.response ? t(null, {\n            data: r.response,\n            cacheControl: r.getResponseHeader(\"Cache-Control\"),\n            expires: r.getResponseHeader(\"Expires\")\n          }) : t(new AJAXError(r.statusText, r.status)));\n        }, r.send(), r;\n      };\n      var transparentPngUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\";\n      exports.getImage = function (e, t) {\n        return exports.getArrayBuffer(e, function (e, r) {\n          if (e) return t(e);\n          var n = new window.Image(),\n              o = window.URL || window.webkitURL;\n\n          n.onload = function () {\n            t(null, n), o.revokeObjectURL(n.src);\n          };\n\n          var s = new window.Blob([new Uint8Array(r.data)], {\n            type: \"image/png\"\n          });\n          n.cacheControl = r.cacheControl, n.expires = r.expires, n.src = r.data.byteLength ? o.createObjectURL(s) : transparentPngUrl;\n        });\n      }, exports.getVideo = function (e, t) {\n        var r = window.document.createElement(\"video\");\n\n        r.onloadstart = function () {\n          t(null, r);\n        };\n\n        for (var n = 0; n < e.length; n++) {\n          var o = window.document.createElement(\"source\");\n          sameOrigin(e[n]) || (r.crossOrigin = \"Anonymous\"), o.src = e[n], r.appendChild(o);\n        }\n\n        return r;\n      };\n    }, {\n      \"./window\": 196\n    }],\n    194: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var window = _dereq_(\"./window\");\n\n      module.exports.now = function () {\n        return window.performance && window.performance.now ? window.performance.now.bind(window.performance) : Date.now.bind(Date);\n      }();\n\n      var frame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\n      exports.frame = function (e) {\n        return frame(e);\n      };\n\n      var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\n      exports.cancelFrame = function (e) {\n        cancel(e);\n      }, exports.timed = function (e, n, t) {\n        function o(i) {\n          r || (i = module.exports.now(), i >= a + n ? e.call(t, 1) : (e.call(t, (i - a) / n), exports.frame(o)));\n        }\n\n        if (!n) return e.call(t, 1), null;\n        var r = !1,\n            a = module.exports.now();\n        return exports.frame(o), function () {\n          r = !0;\n        };\n      }, exports.getImageData = function (e) {\n        var n = window.document.createElement(\"canvas\"),\n            t = n.getContext(\"2d\");\n        return n.width = e.width, n.height = e.height, t.drawImage(e, 0, 0, e.width, e.height), t.getImageData(0, 0, e.width, e.height).data;\n      }, exports.supported = _dereq_(\"mapbox-gl-supported\"), exports.hardwareConcurrency = window.navigator.hardwareConcurrency || 4, Object.defineProperty(exports, \"devicePixelRatio\", {\n        get: function get() {\n          return window.devicePixelRatio;\n        }\n      }), exports.supportsWebp = !1;\n      var webpImgTest = window.document.createElement(\"img\");\n      webpImgTest.onload = function () {\n        exports.supportsWebp = !0;\n      }, webpImgTest.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\";\n    }, {\n      \"./window\": 196,\n      \"mapbox-gl-supported\": 22\n    }],\n    195: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var WebWorkify = _dereq_(\"webworkify\"),\n          window = _dereq_(\"../window\"),\n          workerURL = window.URL.createObjectURL(new WebWorkify(_dereq_(\"../../source/worker\"), {\n        bare: !0\n      }));\n\n      module.exports = function () {\n        return new window.Worker(workerURL);\n      };\n    }, {\n      \"../../source/worker\": 99,\n      \"../window\": 196,\n      \"webworkify\": 40\n    }],\n    196: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      module.exports = self;\n    }, {}],\n    197: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function compareAreas(e, r) {\n        return r.area - e.area;\n      }\n\n      var quickselect = _dereq_(\"quickselect\"),\n          calculateSignedArea = _dereq_(\"./util\").calculateSignedArea;\n\n      module.exports = function (e, r) {\n        var a = e.length;\n        if (a <= 1) return [e];\n\n        for (var t, u, c = [], i = 0; i < a; i++) {\n          var l = calculateSignedArea(e[i]);\n          0 !== l && (e[i].area = Math.abs(l), void 0 === u && (u = l < 0), u === l < 0 ? (t && c.push(t), t = [e[i]]) : t.push(e[i]));\n        }\n\n        if (t && c.push(t), r > 1) for (var n = 0; n < c.length; n++) {\n          c[n].length <= r || (quickselect(c[n], r, 1, c[n].length - 1, compareAreas), c[n] = c[n].slice(0, r));\n        }\n        return c;\n      };\n    }, {\n      \"./util\": 215,\n      \"quickselect\": 27\n    }],\n    198: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var config = {\n        API_URL: \"https://api.mapbox.com\",\n        REQUIRE_ACCESS_TOKEN: !0,\n        ACCESS_TOKEN: null\n      };\n      module.exports = config;\n    }, {}],\n    199: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var DictionaryCoder = function DictionaryCoder(r) {\n        var t = this;\n        this._stringToNumber = {}, this._numberToString = [];\n\n        for (var o = 0; o < r.length; o++) {\n          var i = r[o];\n          t._stringToNumber[i] = o, t._numberToString[o] = i;\n        }\n      };\n\n      DictionaryCoder.prototype.encode = function (r) {\n        return this._stringToNumber[r];\n      }, DictionaryCoder.prototype.decode = function (r) {\n        return this._numberToString[r];\n      }, module.exports = DictionaryCoder;\n    }, {}],\n    200: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var util = _dereq_(\"./util\"),\n          Actor = _dereq_(\"./actor\"),\n          Dispatcher = function Dispatcher(t, r) {\n        var o = this;\n        this.workerPool = t, this.actors = [], this.currentActor = 0, this.id = util.uniqueId();\n\n        for (var i = this.workerPool.acquire(this.id), e = 0; e < i.length; e++) {\n          var s = i[e],\n              c = new Actor(s, r, o.id);\n          c.name = \"Worker \" + e, o.actors.push(c);\n        }\n      };\n\n      Dispatcher.prototype.broadcast = function (t, r, o) {\n        o = o || function () {}, util.asyncAll(this.actors, function (o, i) {\n          o.send(t, r, i);\n        }, o);\n      }, Dispatcher.prototype.send = function (t, r, o, i, e) {\n        return (\"number\" != typeof i || isNaN(i)) && (i = this.currentActor = (this.currentActor + 1) % this.actors.length), this.actors[i].send(t, r, o, e), i;\n      }, Dispatcher.prototype.remove = function () {\n        this.actors.forEach(function (t) {\n          t.remove();\n        }), this.actors = [], this.workerPool.release(this.id);\n      }, module.exports = Dispatcher;\n    }, {\n      \"./actor\": 192,\n      \"./util\": 215\n    }],\n    201: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function testProp(e) {\n        for (var t = 0; t < e.length; t++) {\n          if (e[t] in docStyle) return e[t];\n        }\n\n        return e[0];\n      }\n\n      function suppressClick(e) {\n        e.preventDefault(), e.stopPropagation(), window.removeEventListener(\"click\", suppressClick, !0);\n      }\n\n      var Point = _dereq_(\"point-geometry\"),\n          window = _dereq_(\"./window\");\n\n      exports.create = function (e, t, o) {\n        var n = window.document.createElement(e);\n        return t && (n.className = t), o && o.appendChild(n), n;\n      };\n\n      var docStyle = window.document.documentElement.style,\n          selectProp = testProp([\"userSelect\", \"MozUserSelect\", \"WebkitUserSelect\", \"msUserSelect\"]),\n          userSelect;\n      exports.disableDrag = function () {\n        selectProp && (userSelect = docStyle[selectProp], docStyle[selectProp] = \"none\");\n      }, exports.enableDrag = function () {\n        selectProp && (docStyle[selectProp] = userSelect);\n      };\n      var transformProp = testProp([\"transform\", \"WebkitTransform\"]);\n      exports.setTransform = function (e, t) {\n        e.style[transformProp] = t;\n      }, exports.suppressClick = function () {\n        window.addEventListener(\"click\", suppressClick, !0), window.setTimeout(function () {\n          window.removeEventListener(\"click\", suppressClick, !0);\n        }, 0);\n      }, exports.mousePos = function (e, t) {\n        var o = e.getBoundingClientRect();\n        return t = t.touches ? t.touches[0] : t, new Point(t.clientX - o.left - e.clientLeft, t.clientY - o.top - e.clientTop);\n      }, exports.touchPos = function (e, t) {\n        for (var o = e.getBoundingClientRect(), n = [], r = \"touchend\" === t.type ? t.changedTouches : t.touches, s = 0; s < r.length; s++) {\n          n.push(new Point(r[s].clientX - o.left - e.clientLeft, r[s].clientY - o.top - e.clientTop));\n        }\n\n        return n;\n      }, exports.remove = function (e) {\n        e.parentNode && e.parentNode.removeChild(e);\n      };\n    }, {\n      \"./window\": 196,\n      \"point-geometry\": 25\n    }],\n    202: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function _addEventListener(e, t, n) {\n        n[e] = n[e] || [], n[e].push(t);\n      }\n\n      function _removeEventListener(e, t, n) {\n        if (n && n[e]) {\n          var i = n[e].indexOf(t);\n          i !== -1 && n[e].splice(i, 1);\n        }\n      }\n\n      var util = _dereq_(\"./util\"),\n          Evented = function Evented() {};\n\n      Evented.prototype.on = function (e, t) {\n        return this._listeners = this._listeners || {}, _addEventListener(e, t, this._listeners), this;\n      }, Evented.prototype.off = function (e, t) {\n        return _removeEventListener(e, t, this._listeners), _removeEventListener(e, t, this._oneTimeListeners), this;\n      }, Evented.prototype.once = function (e, t) {\n        return this._oneTimeListeners = this._oneTimeListeners || {}, _addEventListener(e, t, this._oneTimeListeners), this;\n      }, Evented.prototype.fire = function (e, t) {\n        var n = this;\n\n        if (this.listens(e)) {\n          t = util.extend({}, t, {\n            type: e,\n            target: this\n          });\n\n          for (var i = this._listeners && this._listeners[e] ? this._listeners[e].slice() : [], s = 0; s < i.length; s++) {\n            i[s].call(n, t);\n          }\n\n          for (var r = this._oneTimeListeners && this._oneTimeListeners[e] ? this._oneTimeListeners[e].slice() : [], o = 0; o < r.length; o++) {\n            r[o].call(n, t), _removeEventListener(e, r[o], n._oneTimeListeners);\n          }\n\n          this._eventedParent && this._eventedParent.fire(e, util.extend({}, t, \"function\" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData));\n        } else util.endsWith(e, \"error\") && console.error(t && t.error || t || \"Empty error event\");\n\n        return this;\n      }, Evented.prototype.listens = function (e) {\n        return this._listeners && this._listeners[e] && this._listeners[e].length > 0 || this._oneTimeListeners && this._oneTimeListeners[e] && this._oneTimeListeners[e].length > 0 || this._eventedParent && this._eventedParent.listens(e);\n      }, Evented.prototype.setEventedParent = function (e, t) {\n        return this._eventedParent = e, this._eventedParentData = t, this;\n      }, module.exports = Evented;\n    }, {\n      \"./util\": 215\n    }],\n    203: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function compareMax(e, t) {\n        return t.max - e.max;\n      }\n\n      function Cell(e, t, n, r) {\n        this.p = new Point(e, t), this.h = n, this.d = pointToPolygonDist(this.p, r), this.max = this.d + this.h * Math.SQRT2;\n      }\n\n      function pointToPolygonDist(e, t) {\n        for (var n = !1, r = 1 / 0, o = 0; o < t.length; o++) {\n          for (var i = t[o], l = 0, u = i.length, s = u - 1; l < u; s = l++) {\n            var a = i[l],\n                h = i[s];\n            a.y > e.y != h.y > e.y && e.x < (h.x - a.x) * (e.y - a.y) / (h.y - a.y) + a.x && (n = !n), r = Math.min(r, distToSegmentSquared(e, a, h));\n          }\n        }\n\n        return (n ? 1 : -1) * Math.sqrt(r);\n      }\n\n      function getCentroidCell(e) {\n        for (var t = 0, n = 0, r = 0, o = e[0], i = 0, l = o.length, u = l - 1; i < l; u = i++) {\n          var s = o[i],\n              a = o[u],\n              h = s.x * a.y - a.x * s.y;\n          n += (s.x + a.x) * h, r += (s.y + a.y) * h, t += 3 * h;\n        }\n\n        return new Cell(n / t, r / t, 0, e);\n      }\n\n      var Queue = _dereq_(\"tinyqueue\"),\n          Point = _dereq_(\"point-geometry\"),\n          distToSegmentSquared = _dereq_(\"./intersection_tests\").distToSegmentSquared;\n\n      module.exports = function (e, t, n) {\n        t = t || 1;\n\n        for (var r, o, i, l, u = e[0], s = 0; s < u.length; s++) {\n          var a = u[s];\n          (!s || a.x < r) && (r = a.x), (!s || a.y < o) && (o = a.y), (!s || a.x > i) && (i = a.x), (!s || a.y > l) && (l = a.y);\n        }\n\n        var h = i - r,\n            p = l - o,\n            y = Math.min(h, p),\n            x = y / 2,\n            d = new Queue(null, compareMax);\n        if (0 === y) return [r, o];\n\n        for (var g = r; g < i; g += y) {\n          for (var f = o; f < l; f += y) {\n            d.push(new Cell(g + x, f + x, x, e));\n          }\n        }\n\n        for (var m = getCentroidCell(e), c = d.length; d.length;) {\n          var v = d.pop();\n          (v.d > m.d || !m.d) && (m = v, n && console.log(\"found best %d after %d probes\", Math.round(1e4 * v.d) / 1e4, c)), v.max - m.d <= t || (x = v.h / 2, d.push(new Cell(v.p.x - x, v.p.y - x, x, e)), d.push(new Cell(v.p.x + x, v.p.y - x, x, e)), d.push(new Cell(v.p.x - x, v.p.y + x, x, e)), d.push(new Cell(v.p.x + x, v.p.y + x, x, e)), c += 4);\n        }\n\n        return n && (console.log(\"num probes: \" + c), console.log(\"best distance: \" + m.d)), m.p;\n      };\n    }, {\n      \"./intersection_tests\": 206,\n      \"point-geometry\": 25,\n      \"tinyqueue\": 29\n    }],\n    204: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var WorkerPool = _dereq_(\"./worker_pool\"),\n          globalWorkerPool;\n\n      module.exports = function () {\n        return globalWorkerPool || (globalWorkerPool = new WorkerPool()), globalWorkerPool;\n      };\n    }, {\n      \"./worker_pool\": 218\n    }],\n    205: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function Glyphs(a, e) {\n        this.stacks = a.readFields(readFontstacks, [], e);\n      }\n\n      function readFontstacks(a, e, r) {\n        if (1 === a) {\n          var t = r.readMessage(readFontstack, {\n            glyphs: {}\n          });\n          e.push(t);\n        }\n      }\n\n      function readFontstack(a, e, r) {\n        if (1 === a) e.name = r.readString();else if (2 === a) e.range = r.readString();else if (3 === a) {\n          var t = r.readMessage(readGlyph, {});\n          e.glyphs[t.id] = t;\n        }\n      }\n\n      function readGlyph(a, e, r) {\n        1 === a ? e.id = r.readVarint() : 2 === a ? e.bitmap = r.readBytes() : 3 === a ? e.width = r.readVarint() : 4 === a ? e.height = r.readVarint() : 5 === a ? e.left = r.readSVarint() : 6 === a ? e.top = r.readSVarint() : 7 === a && (e.advance = r.readVarint());\n      }\n\n      module.exports = Glyphs;\n    }, {}],\n    206: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function polygonIntersectsPolygon(n, t) {\n        for (var e = 0; e < n.length; e++) {\n          if (polygonContainsPoint(t, n[e])) return !0;\n        }\n\n        for (var r = 0; r < t.length; r++) {\n          if (polygonContainsPoint(n, t[r])) return !0;\n        }\n\n        return !!lineIntersectsLine(n, t);\n      }\n\n      function multiPolygonIntersectsBufferedMultiPoint(n, t, e) {\n        for (var r = 0; r < n.length; r++) {\n          for (var o = n[r], i = 0; i < t.length; i++) {\n            for (var l = t[i], u = 0; u < l.length; u++) {\n              var s = l[u];\n              if (polygonContainsPoint(o, s)) return !0;\n              if (pointIntersectsBufferedLine(s, o, e)) return !0;\n            }\n          }\n        }\n\n        return !1;\n      }\n\n      function multiPolygonIntersectsMultiPolygon(n, t) {\n        if (1 === n.length && 1 === n[0].length) return multiPolygonContainsPoint(t, n[0][0]);\n\n        for (var e = 0; e < t.length; e++) {\n          for (var r = t[e], o = 0; o < r.length; o++) {\n            if (multiPolygonContainsPoint(n, r[o])) return !0;\n          }\n        }\n\n        for (var i = 0; i < n.length; i++) {\n          for (var l = n[i], u = 0; u < l.length; u++) {\n            if (multiPolygonContainsPoint(t, l[u])) return !0;\n          }\n\n          for (var s = 0; s < t.length; s++) {\n            if (lineIntersectsLine(l, t[s])) return !0;\n          }\n        }\n\n        return !1;\n      }\n\n      function multiPolygonIntersectsBufferedMultiLine(n, t, e) {\n        for (var r = 0; r < t.length; r++) {\n          for (var o = t[r], i = 0; i < n.length; i++) {\n            var l = n[i];\n            if (l.length >= 3) for (var u = 0; u < o.length; u++) {\n              if (polygonContainsPoint(l, o[u])) return !0;\n            }\n            if (lineIntersectsBufferedLine(l, o, e)) return !0;\n          }\n        }\n\n        return !1;\n      }\n\n      function lineIntersectsBufferedLine(n, t, e) {\n        if (n.length > 1) {\n          if (lineIntersectsLine(n, t)) return !0;\n\n          for (var r = 0; r < t.length; r++) {\n            if (pointIntersectsBufferedLine(t[r], n, e)) return !0;\n          }\n        }\n\n        for (var o = 0; o < n.length; o++) {\n          if (pointIntersectsBufferedLine(n[o], t, e)) return !0;\n        }\n\n        return !1;\n      }\n\n      function lineIntersectsLine(n, t) {\n        if (0 === n.length || 0 === t.length) return !1;\n\n        for (var e = 0; e < n.length - 1; e++) {\n          for (var r = n[e], o = n[e + 1], i = 0; i < t.length - 1; i++) {\n            var l = t[i],\n                u = t[i + 1];\n            if (lineSegmentIntersectsLineSegment(r, o, l, u)) return !0;\n          }\n        }\n\n        return !1;\n      }\n\n      function lineSegmentIntersectsLineSegment(n, t, e, r) {\n        return isCounterClockwise(n, e, r) !== isCounterClockwise(t, e, r) && isCounterClockwise(n, t, e) !== isCounterClockwise(n, t, r);\n      }\n\n      function pointIntersectsBufferedLine(n, t, e) {\n        var r = e * e;\n        if (1 === t.length) return n.distSqr(t[0]) < r;\n\n        for (var o = 1; o < t.length; o++) {\n          var i = t[o - 1],\n              l = t[o];\n          if (distToSegmentSquared(n, i, l) < r) return !0;\n        }\n\n        return !1;\n      }\n\n      function distToSegmentSquared(n, t, e) {\n        var r = t.distSqr(e);\n        if (0 === r) return n.distSqr(t);\n        var o = ((n.x - t.x) * (e.x - t.x) + (n.y - t.y) * (e.y - t.y)) / r;\n        return o < 0 ? n.distSqr(t) : o > 1 ? n.distSqr(e) : n.distSqr(e.sub(t)._mult(o)._add(t));\n      }\n\n      function multiPolygonContainsPoint(n, t) {\n        for (var e, r, o, i = !1, l = 0; l < n.length; l++) {\n          e = n[l];\n\n          for (var u = 0, s = e.length - 1; u < e.length; s = u++) {\n            r = e[u], o = e[s], r.y > t.y != o.y > t.y && t.x < (o.x - r.x) * (t.y - r.y) / (o.y - r.y) + r.x && (i = !i);\n          }\n        }\n\n        return i;\n      }\n\n      function polygonContainsPoint(n, t) {\n        for (var e = !1, r = 0, o = n.length - 1; r < n.length; o = r++) {\n          var i = n[r],\n              l = n[o];\n          i.y > t.y != l.y > t.y && t.x < (l.x - i.x) * (t.y - i.y) / (l.y - i.y) + i.x && (e = !e);\n        }\n\n        return e;\n      }\n\n      var isCounterClockwise = _dereq_(\"./util\").isCounterClockwise;\n\n      module.exports = {\n        multiPolygonIntersectsBufferedMultiPoint: multiPolygonIntersectsBufferedMultiPoint,\n        multiPolygonIntersectsMultiPolygon: multiPolygonIntersectsMultiPolygon,\n        multiPolygonIntersectsBufferedMultiLine: multiPolygonIntersectsBufferedMultiLine,\n        polygonIntersectsPolygon: polygonIntersectsPolygon,\n        distToSegmentSquared: distToSegmentSquared\n      };\n    }, {\n      \"./util\": 215\n    }],\n    207: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var unicodeBlockLookup = {\n        \"Latin-1 Supplement\": function Latin1Supplement(n) {\n          return n >= 128 && n <= 255;\n        },\n        Arabic: function Arabic(n) {\n          return n >= 1536 && n <= 1791;\n        },\n        \"Arabic Supplement\": function ArabicSupplement(n) {\n          return n >= 1872 && n <= 1919;\n        },\n        \"Arabic Extended-A\": function ArabicExtendedA(n) {\n          return n >= 2208 && n <= 2303;\n        },\n        \"Hangul Jamo\": function HangulJamo(n) {\n          return n >= 4352 && n <= 4607;\n        },\n        \"Unified Canadian Aboriginal Syllabics\": function UnifiedCanadianAboriginalSyllabics(n) {\n          return n >= 5120 && n <= 5759;\n        },\n        \"Unified Canadian Aboriginal Syllabics Extended\": function UnifiedCanadianAboriginalSyllabicsExtended(n) {\n          return n >= 6320 && n <= 6399;\n        },\n        \"General Punctuation\": function GeneralPunctuation(n) {\n          return n >= 8192 && n <= 8303;\n        },\n        \"Letterlike Symbols\": function LetterlikeSymbols(n) {\n          return n >= 8448 && n <= 8527;\n        },\n        \"Number Forms\": function NumberForms(n) {\n          return n >= 8528 && n <= 8591;\n        },\n        \"Miscellaneous Technical\": function MiscellaneousTechnical(n) {\n          return n >= 8960 && n <= 9215;\n        },\n        \"Control Pictures\": function ControlPictures(n) {\n          return n >= 9216 && n <= 9279;\n        },\n        \"Optical Character Recognition\": function OpticalCharacterRecognition(n) {\n          return n >= 9280 && n <= 9311;\n        },\n        \"Enclosed Alphanumerics\": function EnclosedAlphanumerics(n) {\n          return n >= 9312 && n <= 9471;\n        },\n        \"Geometric Shapes\": function GeometricShapes(n) {\n          return n >= 9632 && n <= 9727;\n        },\n        \"Miscellaneous Symbols\": function MiscellaneousSymbols(n) {\n          return n >= 9728 && n <= 9983;\n        },\n        \"Miscellaneous Symbols and Arrows\": function MiscellaneousSymbolsAndArrows(n) {\n          return n >= 11008 && n <= 11263;\n        },\n        \"CJK Radicals Supplement\": function CJKRadicalsSupplement(n) {\n          return n >= 11904 && n <= 12031;\n        },\n        \"Kangxi Radicals\": function KangxiRadicals(n) {\n          return n >= 12032 && n <= 12255;\n        },\n        \"Ideographic Description Characters\": function IdeographicDescriptionCharacters(n) {\n          return n >= 12272 && n <= 12287;\n        },\n        \"CJK Symbols and Punctuation\": function CJKSymbolsAndPunctuation(n) {\n          return n >= 12288 && n <= 12351;\n        },\n        Hiragana: function Hiragana(n) {\n          return n >= 12352 && n <= 12447;\n        },\n        Katakana: function Katakana(n) {\n          return n >= 12448 && n <= 12543;\n        },\n        Bopomofo: function Bopomofo(n) {\n          return n >= 12544 && n <= 12591;\n        },\n        \"Hangul Compatibility Jamo\": function HangulCompatibilityJamo(n) {\n          return n >= 12592 && n <= 12687;\n        },\n        Kanbun: function Kanbun(n) {\n          return n >= 12688 && n <= 12703;\n        },\n        \"Bopomofo Extended\": function BopomofoExtended(n) {\n          return n >= 12704 && n <= 12735;\n        },\n        \"CJK Strokes\": function CJKStrokes(n) {\n          return n >= 12736 && n <= 12783;\n        },\n        \"Katakana Phonetic Extensions\": function KatakanaPhoneticExtensions(n) {\n          return n >= 12784 && n <= 12799;\n        },\n        \"Enclosed CJK Letters and Months\": function EnclosedCJKLettersAndMonths(n) {\n          return n >= 12800 && n <= 13055;\n        },\n        \"CJK Compatibility\": function CJKCompatibility(n) {\n          return n >= 13056 && n <= 13311;\n        },\n        \"CJK Unified Ideographs Extension A\": function CJKUnifiedIdeographsExtensionA(n) {\n          return n >= 13312 && n <= 19903;\n        },\n        \"Yijing Hexagram Symbols\": function YijingHexagramSymbols(n) {\n          return n >= 19904 && n <= 19967;\n        },\n        \"CJK Unified Ideographs\": function CJKUnifiedIdeographs(n) {\n          return n >= 19968 && n <= 40959;\n        },\n        \"Yi Syllables\": function YiSyllables(n) {\n          return n >= 40960 && n <= 42127;\n        },\n        \"Yi Radicals\": function YiRadicals(n) {\n          return n >= 42128 && n <= 42191;\n        },\n        \"Hangul Jamo Extended-A\": function HangulJamoExtendedA(n) {\n          return n >= 43360 && n <= 43391;\n        },\n        \"Hangul Syllables\": function HangulSyllables(n) {\n          return n >= 44032 && n <= 55215;\n        },\n        \"Hangul Jamo Extended-B\": function HangulJamoExtendedB(n) {\n          return n >= 55216 && n <= 55295;\n        },\n        \"Private Use Area\": function PrivateUseArea(n) {\n          return n >= 57344 && n <= 63743;\n        },\n        \"CJK Compatibility Ideographs\": function CJKCompatibilityIdeographs(n) {\n          return n >= 63744 && n <= 64255;\n        },\n        \"Arabic Presentation Forms-A\": function ArabicPresentationFormsA(n) {\n          return n >= 64336 && n <= 65023;\n        },\n        \"Vertical Forms\": function VerticalForms(n) {\n          return n >= 65040 && n <= 65055;\n        },\n        \"CJK Compatibility Forms\": function CJKCompatibilityForms(n) {\n          return n >= 65072 && n <= 65103;\n        },\n        \"Small Form Variants\": function SmallFormVariants(n) {\n          return n >= 65104 && n <= 65135;\n        },\n        \"Arabic Presentation Forms-B\": function ArabicPresentationFormsB(n) {\n          return n >= 65136 && n <= 65279;\n        },\n        \"Halfwidth and Fullwidth Forms\": function HalfwidthAndFullwidthForms(n) {\n          return n >= 65280 && n <= 65519;\n        }\n      };\n      module.exports = unicodeBlockLookup;\n    }, {}],\n    208: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var LRUCache = function LRUCache(t, e) {\n        this.max = t, this.onRemove = e, this.reset();\n      };\n\n      LRUCache.prototype.reset = function () {\n        var t = this;\n\n        for (var e in t.data) {\n          t.onRemove(t.data[e]);\n        }\n\n        return this.data = {}, this.order = [], this;\n      }, LRUCache.prototype.add = function (t, e) {\n        if (this.has(t)) this.order.splice(this.order.indexOf(t), 1), this.data[t] = e, this.order.push(t);else if (this.data[t] = e, this.order.push(t), this.order.length > this.max) {\n          var r = this.get(this.order[0]);\n          r && this.onRemove(r);\n        }\n        return this;\n      }, LRUCache.prototype.has = function (t) {\n        return t in this.data;\n      }, LRUCache.prototype.keys = function () {\n        return this.order;\n      }, LRUCache.prototype.get = function (t) {\n        if (!this.has(t)) return null;\n        var e = this.data[t];\n        return delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e;\n      }, LRUCache.prototype.getWithoutRemoving = function (t) {\n        if (!this.has(t)) return null;\n        var e = this.data[t];\n        return e;\n      }, LRUCache.prototype.remove = function (t) {\n        if (!this.has(t)) return this;\n        var e = this.data[t];\n        return delete this.data[t], this.onRemove(e), this.order.splice(this.order.indexOf(t), 1), this;\n      }, LRUCache.prototype.setMaxSize = function (t) {\n        var e = this;\n\n        for (this.max = t; this.order.length > this.max;) {\n          var r = e.get(e.order[0]);\n          r && e.onRemove(r);\n        }\n\n        return this;\n      }, module.exports = LRUCache;\n    }, {}],\n    209: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function makeAPIURL(r, e) {\n        var t = parseUrl(config.API_URL);\n        if (r.protocol = t.protocol, r.authority = t.authority, !config.REQUIRE_ACCESS_TOKEN) return formatUrl(r);\n        if (e = e || config.ACCESS_TOKEN, !e) throw new Error(\"An API access token is required to use Mapbox GL. \" + help);\n        if (\"s\" === e[0]) throw new Error(\"Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). \" + help);\n        return r.params.push(\"access_token=\" + e), formatUrl(r);\n      }\n\n      function isMapboxURL(r) {\n        return 0 === r.indexOf(\"mapbox:\");\n      }\n\n      function replaceTempAccessToken(r) {\n        for (var e = 0; e < r.length; e++) {\n          0 === r[e].indexOf(\"access_token=tk.\") && (r[e] = \"access_token=\" + (config.ACCESS_TOKEN || \"\"));\n        }\n      }\n\n      function parseUrl(r) {\n        var e = r.match(urlRe);\n        if (!e) throw new Error(\"Unable to parse URL object\");\n        return {\n          protocol: e[1],\n          authority: e[2],\n          path: e[3] || \"/\",\n          params: e[4] ? e[4].split(\"&\") : []\n        };\n      }\n\n      function formatUrl(r) {\n        var e = r.params.length ? \"?\" + r.params.join(\"&\") : \"\";\n        return r.protocol + \"://\" + r.authority + r.path + e;\n      }\n\n      var config = _dereq_(\"./config\"),\n          browser = _dereq_(\"./browser\"),\n          help = \"See https://www.mapbox.com/api-documentation/#access-tokens\";\n\n      exports.isMapboxURL = isMapboxURL, exports.normalizeStyleURL = function (r, e) {\n        if (!isMapboxURL(r)) return r;\n        var t = parseUrl(r);\n        return t.path = \"/styles/v1\" + t.path, makeAPIURL(t, e);\n      }, exports.normalizeGlyphsURL = function (r, e) {\n        if (!isMapboxURL(r)) return r;\n        var t = parseUrl(r);\n        return t.path = \"/fonts/v1\" + t.path, makeAPIURL(t, e);\n      }, exports.normalizeSourceURL = function (r, e) {\n        if (!isMapboxURL(r)) return r;\n        var t = parseUrl(r);\n        return t.path = \"/v4/\" + t.authority + \".json\", t.params.push(\"secure\"), makeAPIURL(t, e);\n      }, exports.normalizeSpriteURL = function (r, e, t, o) {\n        var a = parseUrl(r);\n        return isMapboxURL(r) ? (a.path = \"/styles/v1\" + a.path + \"/sprite\" + e + t, makeAPIURL(a, o)) : (a.path += \"\" + e + t, formatUrl(a));\n      };\n      var imageExtensionRe = /(\\.(png|jpg)\\d*)(?=$)/;\n\n      exports.normalizeTileURL = function (r, e, t) {\n        if (!e || !isMapboxURL(e)) return r;\n        var o = parseUrl(r),\n            a = browser.devicePixelRatio >= 2 || 512 === t ? \"@2x\" : \"\",\n            s = browser.supportsWebp ? \".webp\" : \"$1\";\n        return o.path = o.path.replace(imageExtensionRe, \"\" + a + s), replaceTempAccessToken(o.params), formatUrl(o);\n      };\n\n      var urlRe = /^(\\w+):\\/\\/([^\\/?]*)(\\/[^?]+)?\\??(.+)?/;\n    }, {\n      \"./browser\": 194,\n      \"./config\": 198\n    }],\n    210: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var isChar = _dereq_(\"./is_char_in_unicode_block\");\n\n      module.exports.allowsIdeographicBreaking = function (a) {\n        for (var i = 0, r = a; i < r.length; i += 1) {\n          var s = r[i];\n          if (!exports.charAllowsIdeographicBreaking(s.charCodeAt(0))) return !1;\n        }\n\n        return !0;\n      }, module.exports.allowsVerticalWritingMode = function (a) {\n        for (var i = 0, r = a; i < r.length; i += 1) {\n          var s = r[i];\n          if (exports.charHasUprightVerticalOrientation(s.charCodeAt(0))) return !0;\n        }\n\n        return !1;\n      }, module.exports.allowsLetterSpacing = function (a) {\n        for (var i = 0, r = a; i < r.length; i += 1) {\n          var s = r[i];\n          if (!exports.charAllowsLetterSpacing(s.charCodeAt(0))) return !1;\n        }\n\n        return !0;\n      }, module.exports.charAllowsLetterSpacing = function (a) {\n        return !isChar.Arabic(a) && !isChar[\"Arabic Supplement\"](a) && !isChar[\"Arabic Extended-A\"](a) && !isChar[\"Arabic Presentation Forms-A\"](a) && !isChar[\"Arabic Presentation Forms-B\"](a);\n      }, module.exports.charAllowsIdeographicBreaking = function (a) {\n        return !(a < 11904) && (!!isChar[\"Bopomofo Extended\"](a) || !!isChar.Bopomofo(a) || !!isChar[\"CJK Compatibility Forms\"](a) || !!isChar[\"CJK Compatibility Ideographs\"](a) || !!isChar[\"CJK Compatibility\"](a) || !!isChar[\"CJK Radicals Supplement\"](a) || !!isChar[\"CJK Strokes\"](a) || !!isChar[\"CJK Symbols and Punctuation\"](a) || !!isChar[\"CJK Unified Ideographs Extension A\"](a) || !!isChar[\"CJK Unified Ideographs\"](a) || !!isChar[\"Enclosed CJK Letters and Months\"](a) || !!isChar[\"Halfwidth and Fullwidth Forms\"](a) || !!isChar.Hiragana(a) || !!isChar[\"Ideographic Description Characters\"](a) || !!isChar[\"Kangxi Radicals\"](a) || !!isChar[\"Katakana Phonetic Extensions\"](a) || !!isChar.Katakana(a) || !!isChar[\"Vertical Forms\"](a) || !!isChar[\"Yi Radicals\"](a) || !!isChar[\"Yi Syllables\"](a));\n      }, exports.charHasUprightVerticalOrientation = function (a) {\n        return 746 === a || 747 === a || !(a < 4352) && (!!isChar[\"Bopomofo Extended\"](a) || !!isChar.Bopomofo(a) || !(!isChar[\"CJK Compatibility Forms\"](a) || a >= 65097 && a <= 65103) || !!isChar[\"CJK Compatibility Ideographs\"](a) || !!isChar[\"CJK Compatibility\"](a) || !!isChar[\"CJK Radicals Supplement\"](a) || !!isChar[\"CJK Strokes\"](a) || !(!isChar[\"CJK Symbols and Punctuation\"](a) || a >= 12296 && a <= 12305 || a >= 12308 && a <= 12319 || 12336 === a) || !!isChar[\"CJK Unified Ideographs Extension A\"](a) || !!isChar[\"CJK Unified Ideographs\"](a) || !!isChar[\"Enclosed CJK Letters and Months\"](a) || !!isChar[\"Hangul Compatibility Jamo\"](a) || !!isChar[\"Hangul Jamo Extended-A\"](a) || !!isChar[\"Hangul Jamo Extended-B\"](a) || !!isChar[\"Hangul Jamo\"](a) || !!isChar[\"Hangul Syllables\"](a) || !!isChar.Hiragana(a) || !!isChar[\"Ideographic Description Characters\"](a) || !!isChar.Kanbun(a) || !!isChar[\"Kangxi Radicals\"](a) || !!isChar[\"Katakana Phonetic Extensions\"](a) || !(!isChar.Katakana(a) || 12540 === a) || !(!isChar[\"Halfwidth and Fullwidth Forms\"](a) || 65288 === a || 65289 === a || 65293 === a || a >= 65306 && a <= 65310 || 65339 === a || 65341 === a || 65343 === a || a >= 65371 && a <= 65503 || 65507 === a || a >= 65512 && a <= 65519) || !(!isChar[\"Small Form Variants\"](a) || a >= 65112 && a <= 65118 || a >= 65123 && a <= 65126) || !!isChar[\"Unified Canadian Aboriginal Syllabics\"](a) || !!isChar[\"Unified Canadian Aboriginal Syllabics Extended\"](a) || !!isChar[\"Vertical Forms\"](a) || !!isChar[\"Yijing Hexagram Symbols\"](a) || !!isChar[\"Yi Syllables\"](a) || !!isChar[\"Yi Radicals\"](a));\n      }, exports.charHasNeutralVerticalOrientation = function (a) {\n        return !(!isChar[\"Latin-1 Supplement\"](a) || 167 !== a && 169 !== a && 174 !== a && 177 !== a && 188 !== a && 189 !== a && 190 !== a && 215 !== a && 247 !== a) || !(!isChar[\"General Punctuation\"](a) || 8214 !== a && 8224 !== a && 8225 !== a && 8240 !== a && 8241 !== a && 8251 !== a && 8252 !== a && 8258 !== a && 8263 !== a && 8264 !== a && 8265 !== a && 8273 !== a) || !!isChar[\"Letterlike Symbols\"](a) || !!isChar[\"Number Forms\"](a) || !(!isChar[\"Miscellaneous Technical\"](a) || !(a >= 8960 && a <= 8967 || a >= 8972 && a <= 8991 || a >= 8996 && a <= 9e3 || 9003 === a || a >= 9085 && a <= 9114 || a >= 9150 && a <= 9165 || 9167 === a || a >= 9169 && a <= 9179 || a >= 9186 && a <= 9215)) || !(!isChar[\"Control Pictures\"](a) || 9251 === a) || !!isChar[\"Optical Character Recognition\"](a) || !!isChar[\"Enclosed Alphanumerics\"](a) || !!isChar[\"Geometric Shapes\"](a) || !(!isChar[\"Miscellaneous Symbols\"](a) || a >= 9754 && a <= 9759) || !(!isChar[\"Miscellaneous Symbols and Arrows\"](a) || !(a >= 11026 && a <= 11055 || a >= 11088 && a <= 11097 || a >= 11192 && a <= 11243)) || !!isChar[\"CJK Symbols and Punctuation\"](a) || !!isChar.Katakana(a) || !!isChar[\"Private Use Area\"](a) || !!isChar[\"CJK Compatibility Forms\"](a) || !!isChar[\"Small Form Variants\"](a) || !!isChar[\"Halfwidth and Fullwidth Forms\"](a) || 8734 === a || 8756 === a || 8757 === a || a >= 9984 && a <= 10087 || a >= 10102 && a <= 10131 || 65532 === a || 65533 === a;\n      }, exports.charHasRotatedVerticalOrientation = function (a) {\n        return !(exports.charHasUprightVerticalOrientation(a) || exports.charHasNeutralVerticalOrientation(a));\n      };\n    }, {\n      \"./is_char_in_unicode_block\": 207\n    }],\n    211: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var LngLat = _dereq_(\"../geo/lng_lat\");\n\n      module.exports = function (n, t, l) {\n        if (n = new LngLat(n.lng, n.lat), t) {\n          var a = new LngLat(n.lng - 360, n.lat),\n              i = new LngLat(n.lng + 360, n.lat),\n              o = l.locationPoint(n).distSqr(t);\n          l.locationPoint(a).distSqr(t) < o ? n = a : l.locationPoint(i).distSqr(t) < o && (n = i);\n        }\n\n        for (; Math.abs(n.lng - l.center.lng) > 180;) {\n          var e = l.locationPoint(n);\n          if (e.x >= 0 && e.y >= 0 && e.x <= l.width && e.y <= l.height) break;\n          n.lng > l.center.lng ? n.lng -= 360 : n.lng += 360;\n        }\n\n        return n;\n      };\n    }, {\n      \"../geo/lng_lat\": 61\n    }],\n    212: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function createStructArrayType(t) {\n        var e = JSON.stringify(t);\n        if (structArrayTypeCache[e]) return structArrayTypeCache[e];\n\n        var r = void 0 === t.alignment ? 1 : t.alignment,\n            i = 0,\n            n = 0,\n            a = [\"Uint8\"],\n            o = t.members.map(function (t) {\n          a.indexOf(t.type) < 0 && a.push(t.type);\n          var e = sizeOf(t.type),\n              o = i = align(i, Math.max(r, e)),\n              s = t.components || 1;\n          return n = Math.max(n, e), i += e * s, {\n            name: t.name,\n            type: t.type,\n            components: s,\n            offset: o\n          };\n        }),\n            s = align(i, Math.max(n, r)),\n            p = function (t) {\n          function e() {\n            t.apply(this, arguments);\n          }\n\n          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e;\n        }(Struct);\n\n        p.prototype.alignment = r, p.prototype.size = s;\n\n        for (var y = 0, c = o; y < c.length; y += 1) {\n          for (var h = c[y], u = 0; u < h.components; u++) {\n            var f = h.name + (1 === h.components ? \"\" : u);\n            Object.defineProperty(p.prototype, f, {\n              get: createGetter(h, u),\n              set: createSetter(h, u)\n            });\n          }\n        }\n\n        var m = function (t) {\n          function e() {\n            t.apply(this, arguments);\n          }\n\n          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e;\n        }(StructArray);\n\n        return m.prototype.members = o, m.prototype.StructType = p, m.prototype.bytesPerElement = s, m.prototype.emplaceBack = createEmplaceBack(o, s), m.prototype._usedTypes = a, structArrayTypeCache[e] = m, m;\n      }\n\n      function align(t, e) {\n        return Math.ceil(t / e) * e;\n      }\n\n      function sizeOf(t) {\n        return viewTypes[t].BYTES_PER_ELEMENT;\n      }\n\n      function getArrayViewName(t) {\n        return t.toLowerCase();\n      }\n\n      function createEmplaceBack(t, e) {\n        for (var r = [], i = [], n = \"var i = this.length;\\nthis.resize(this.length + 1);\\n\", a = 0, o = t; a < o.length; a += 1) {\n          var s = o[a],\n              p = sizeOf(s.type);\n          r.indexOf(p) < 0 && (r.push(p), n += \"var o\" + p.toFixed(0) + \" = i * \" + (e / p).toFixed(0) + \";\\n\");\n\n          for (var y = 0; y < s.components; y++) {\n            var c = \"v\" + i.length,\n                h = \"o\" + p.toFixed(0) + \" + \" + (s.offset / p + y).toFixed(0);\n            n += \"this.\" + getArrayViewName(s.type) + \"[\" + h + \"] = \" + c + \";\\n\", i.push(c);\n          }\n        }\n\n        return n += \"return i;\", new Function(i.toString(), n);\n      }\n\n      function createMemberComponentString(t, e) {\n        var r = \"this._pos\" + sizeOf(t.type).toFixed(0),\n            i = (t.offset / sizeOf(t.type) + e).toFixed(0),\n            n = r + \" + \" + i;\n        return \"this._structArray.\" + getArrayViewName(t.type) + \"[\" + n + \"]\";\n      }\n\n      function createGetter(t, e) {\n        return new Function(\"return \" + createMemberComponentString(t, e) + \";\");\n      }\n\n      function createSetter(t, e) {\n        return new Function(\"x\", createMemberComponentString(t, e) + \" = x;\");\n      }\n\n      module.exports = createStructArrayType;\n\n      var viewTypes = {\n        Int8: Int8Array,\n        Uint8: Uint8Array,\n        Uint8Clamped: Uint8ClampedArray,\n        Int16: Int16Array,\n        Uint16: Uint16Array,\n        Int32: Int32Array,\n        Uint32: Uint32Array,\n        Float32: Float32Array,\n        Float64: Float64Array\n      },\n          Struct = function Struct(t, e) {\n        this._structArray = t, this._pos1 = e * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;\n      },\n          DEFAULT_CAPACITY = 128,\n          RESIZE_MULTIPLIER = 5,\n          StructArray = function StructArray(t) {\n        this.isTransferred = !1, void 0 !== t ? (this.arrayBuffer = t.arrayBuffer, this.length = t.length, this.capacity = this.arrayBuffer.byteLength / this.bytesPerElement, this._refreshViews()) : (this.capacity = -1, this.resize(0));\n      };\n\n      StructArray.serialize = function () {\n        return {\n          members: this.prototype.members,\n          alignment: this.prototype.StructType.prototype.alignment,\n          bytesPerElement: this.prototype.bytesPerElement\n        };\n      }, StructArray.prototype.serialize = function (t) {\n        return this._trim(), t && (this.isTransferred = !0, t.push(this.arrayBuffer)), {\n          length: this.length,\n          arrayBuffer: this.arrayBuffer\n        };\n      }, StructArray.prototype.get = function (t) {\n        return new this.StructType(this, t);\n      }, StructArray.prototype._trim = function () {\n        this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());\n      }, StructArray.prototype.resize = function (t) {\n        if (this.length = t, t > this.capacity) {\n          this.capacity = Math.max(t, Math.floor(this.capacity * RESIZE_MULTIPLIER), DEFAULT_CAPACITY), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);\n          var e = this.uint8;\n          this._refreshViews(), e && this.uint8.set(e);\n        }\n      }, StructArray.prototype._refreshViews = function () {\n        for (var t = this, e = 0, r = t._usedTypes; e < r.length; e += 1) {\n          var i = r[e];\n          t[getArrayViewName(i)] = new viewTypes[i](t.arrayBuffer);\n        }\n      }, StructArray.prototype.toArray = function (t, e) {\n        for (var r = this, i = [], n = t; n < e; n++) {\n          var a = r.get(n);\n          i.push(a);\n        }\n\n        return i;\n      };\n      var structArrayTypeCache = {};\n    }, {}],\n    213: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var browser = _dereq_(\"./browser\"),\n          Throttler = function Throttler(t, o) {\n        this.frequency = t, this.throttledFunction = o, this.lastInvocation = 0;\n      };\n\n      Throttler.prototype.invoke = function () {\n        var t = this;\n\n        if (!this.pendingInvocation) {\n          var o = 0 === this.lastInvocation ? 0 : this.lastInvocation + this.frequency - browser.now();\n          o <= 0 ? (this.lastInvocation = browser.now(), this.throttledFunction()) : this.pendingInvocation = setTimeout(function () {\n            t.pendingInvocation = void 0, t.lastInvocation = browser.now(), t.throttledFunction();\n          }, o);\n        }\n      }, Throttler.prototype.stop = function () {\n        this.pendingInvocation && (clearTimeout(this.pendingInvocation), this.pendingInvocation = void 0);\n      }, module.exports = Throttler;\n    }, {\n      \"./browser\": 194\n    }],\n    214: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      function resolveTokens(e, n) {\n        return n.replace(/{([^{}]+)}/g, function (n, r) {\n          return r in e ? e[r] : \"\";\n        });\n      }\n\n      module.exports = resolveTokens;\n    }, {}],\n    215: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var UnitBezier = _dereq_(\"@mapbox/unitbezier\"),\n          Coordinate = _dereq_(\"../geo/coordinate\"),\n          Point = _dereq_(\"point-geometry\");\n\n      exports.easeCubicInOut = function (r) {\n        if (r <= 0) return 0;\n        if (r >= 1) return 1;\n        var e = r * r,\n            t = e * r;\n        return 4 * (r < .5 ? t : 3 * (r - e) + t - .75);\n      }, exports.bezier = function (r, e, t, n) {\n        var o = new UnitBezier(r, e, t, n);\n        return function (r) {\n          return o.solve(r);\n        };\n      }, exports.ease = exports.bezier(.25, .1, .25, 1), exports.clamp = function (r, e, t) {\n        return Math.min(t, Math.max(e, r));\n      }, exports.wrap = function (r, e, t) {\n        var n = t - e,\n            o = ((r - e) % n + n) % n + e;\n        return o === e ? t : o;\n      }, exports.asyncAll = function (r, e, t) {\n        if (!r.length) return t(null, []);\n        var n = r.length,\n            o = new Array(r.length),\n            a = null;\n        r.forEach(function (r, i) {\n          e(r, function (r, e) {\n            r && (a = r), o[i] = e, 0 === --n && t(a, o);\n          });\n        });\n      }, exports.values = function (r) {\n        var e = [];\n\n        for (var t in r) {\n          e.push(r[t]);\n        }\n\n        return e;\n      }, exports.keysDifference = function (r, e) {\n        var t = [];\n\n        for (var n in r) {\n          n in e || t.push(n);\n        }\n\n        return t;\n      }, exports.extend = function (r) {\n        for (var e = [], t = arguments.length - 1; t-- > 0;) {\n          e[t] = arguments[t + 1];\n        }\n\n        for (var n = 0, o = e; n < o.length; n += 1) {\n          var a = o[n];\n\n          for (var i in a) {\n            r[i] = a[i];\n          }\n        }\n\n        return r;\n      }, exports.pick = function (r, e) {\n        for (var t = {}, n = 0; n < e.length; n++) {\n          var o = e[n];\n          o in r && (t[o] = r[o]);\n        }\n\n        return t;\n      };\n      var id = 1;\n      exports.uniqueId = function () {\n        return id++;\n      }, exports.bindAll = function (r, e) {\n        r.forEach(function (r) {\n          e[r] && (e[r] = e[r].bind(e));\n        });\n      }, exports.getCoordinatesCenter = function (r) {\n        for (var e = 1 / 0, t = 1 / 0, n = -(1 / 0), o = -(1 / 0), a = 0; a < r.length; a++) {\n          e = Math.min(e, r[a].column), t = Math.min(t, r[a].row), n = Math.max(n, r[a].column), o = Math.max(o, r[a].row);\n        }\n\n        var i = n - e,\n            u = o - t,\n            s = Math.max(i, u),\n            c = Math.max(0, Math.floor(-Math.log(s) / Math.LN2));\n        return new Coordinate((e + n) / 2, (t + o) / 2, 0).zoomTo(c);\n      }, exports.endsWith = function (r, e) {\n        return r.indexOf(e, r.length - e.length) !== -1;\n      }, exports.mapObject = function (r, e, t) {\n        var n = this,\n            o = {};\n\n        for (var a in r) {\n          o[a] = e.call(t || n, r[a], a, r);\n        }\n\n        return o;\n      }, exports.filterObject = function (r, e, t) {\n        var n = this,\n            o = {};\n\n        for (var a in r) {\n          e.call(t || n, r[a], a, r) && (o[a] = r[a]);\n        }\n\n        return o;\n      }, exports.deepEqual = function (r, e) {\n        if (Array.isArray(r)) {\n          if (!Array.isArray(e) || r.length !== e.length) return !1;\n\n          for (var t = 0; t < r.length; t++) {\n            if (!exports.deepEqual(r[t], e[t])) return !1;\n          }\n\n          return !0;\n        }\n\n        if (\"object\" == typeof r && null !== r && null !== e) {\n          if (\"object\" != typeof e) return !1;\n          var n = Object.keys(r);\n          if (n.length !== Object.keys(e).length) return !1;\n\n          for (var o in r) {\n            if (!exports.deepEqual(r[o], e[o])) return !1;\n          }\n\n          return !0;\n        }\n\n        return r === e;\n      }, exports.clone = function (r) {\n        return Array.isArray(r) ? r.map(exports.clone) : \"object\" == typeof r && r ? exports.mapObject(r, exports.clone) : r;\n      }, exports.arraysIntersect = function (r, e) {\n        for (var t = 0; t < r.length; t++) {\n          if (e.indexOf(r[t]) >= 0) return !0;\n        }\n\n        return !1;\n      };\n      var warnOnceHistory = {};\n      exports.warnOnce = function (r) {\n        warnOnceHistory[r] || (\"undefined\" != typeof console && console.warn(r), warnOnceHistory[r] = !0);\n      }, exports.isCounterClockwise = function (r, e, t) {\n        return (t.y - r.y) * (e.x - r.x) > (e.y - r.y) * (t.x - r.x);\n      }, exports.calculateSignedArea = function (r) {\n        for (var e = 0, t = 0, n = r.length, o = n - 1, a = void 0, i = void 0; t < n; o = t++) {\n          a = r[t], i = r[o], e += (i.x - a.x) * (a.y + i.y);\n        }\n\n        return e;\n      }, exports.isClosedPolygon = function (r) {\n        if (r.length < 4) return !1;\n        var e = r[0],\n            t = r[r.length - 1];\n        return !(Math.abs(e.x - t.x) > 0 || Math.abs(e.y - t.y) > 0) && Math.abs(exports.calculateSignedArea(r)) > .01;\n      }, exports.sphericalToCartesian = function (r) {\n        var e = r[0],\n            t = r[1],\n            n = r[2];\n        return t += 90, t *= Math.PI / 180, n *= Math.PI / 180, [e * Math.cos(t) * Math.sin(n), e * Math.sin(t) * Math.sin(n), e * Math.cos(n)];\n      }, exports.parseCacheControl = function (r) {\n        var e = /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g,\n            t = {};\n\n        if (r.replace(e, function (r, e, n, o) {\n          var a = n || o;\n          return t[e] = !a || a.toLowerCase(), \"\";\n        }), t[\"max-age\"]) {\n          var n = parseInt(t[\"max-age\"], 10);\n          isNaN(n) ? delete t[\"max-age\"] : t[\"max-age\"] = n;\n        }\n\n        return t;\n      };\n    }, {\n      \"../geo/coordinate\": 60,\n      \"@mapbox/unitbezier\": 3,\n      \"point-geometry\": 25\n    }],\n    216: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var Feature = function Feature(e, t, r, o) {\n        this.type = \"Feature\", this._vectorTileFeature = e, e._z = t, e._x = r, e._y = o, this.properties = e.properties, null != e.id && (this.id = e.id);\n      },\n          prototypeAccessors = {\n        geometry: {}\n      };\n\n      prototypeAccessors.geometry.get = function () {\n        return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;\n      }, prototypeAccessors.geometry.set = function (e) {\n        this._geometry = e;\n      }, Feature.prototype.toJSON = function () {\n        var e = this,\n            t = {\n          geometry: this.geometry\n        };\n\n        for (var r in e) {\n          \"_geometry\" !== r && \"_vectorTileFeature\" !== r && (t[r] = e[r]);\n        }\n\n        return t;\n      }, Object.defineProperties(Feature.prototype, prototypeAccessors), module.exports = Feature;\n    }, {}],\n    217: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var scriptDetection = _dereq_(\"./script_detection\");\n\n      module.exports = function (t) {\n        for (var o = \"\", e = 0; e < t.length; e++) {\n          var r = t.charCodeAt(e + 1) || null,\n              l = t.charCodeAt(e - 1) || null,\n              i = (!r || !scriptDetection.charHasRotatedVerticalOrientation(r) || module.exports.lookup[t[e + 1]]) && (!l || !scriptDetection.charHasRotatedVerticalOrientation(l) || module.exports.lookup[t[e - 1]]);\n          o += i && module.exports.lookup[t[e]] ? module.exports.lookup[t[e]] : t[e];\n        }\n\n        return o;\n      }, module.exports.lookup = {\n        \"!\": \"︕\",\n        \"#\": \"＃\",\n        $: \"＄\",\n        \"%\": \"％\",\n        \"&\": \"＆\",\n        \"(\": \"︵\",\n        \")\": \"︶\",\n        \"*\": \"＊\",\n        \"+\": \"＋\",\n        \",\": \"︐\",\n        \"-\": \"︲\",\n        \".\": \"・\",\n        \"/\": \"／\",\n        \":\": \"︓\",\n        \";\": \"︔\",\n        \"<\": \"︿\",\n        \"=\": \"＝\",\n        \">\": \"﹀\",\n        \"?\": \"︖\",\n        \"@\": \"＠\",\n        \"[\": \"﹇\",\n        \"\\\\\": \"＼\",\n        \"]\": \"﹈\",\n        \"^\": \"＾\",\n        _: \"︳\",\n        \"`\": \"｀\",\n        \"{\": \"︷\",\n        \"|\": \"―\",\n        \"}\": \"︸\",\n        \"~\": \"～\",\n        \"¢\": \"￠\",\n        \"£\": \"￡\",\n        \"¥\": \"￥\",\n        \"¦\": \"￤\",\n        \"¬\": \"￢\",\n        \"¯\": \"￣\",\n        \"–\": \"︲\",\n        \"—\": \"︱\",\n        \"‘\": \"﹃\",\n        \"’\": \"﹄\",\n        \"“\": \"﹁\",\n        \"”\": \"﹂\",\n        \"…\": \"︙\",\n        \"‧\": \"・\",\n        \"₩\": \"￦\",\n        \"、\": \"︑\",\n        \"。\": \"︒\",\n        \"〈\": \"︿\",\n        \"〉\": \"﹀\",\n        \"《\": \"︽\",\n        \"》\": \"︾\",\n        \"「\": \"﹁\",\n        \"」\": \"﹂\",\n        \"『\": \"﹃\",\n        \"』\": \"﹄\",\n        \"【\": \"︻\",\n        \"】\": \"︼\",\n        \"〔\": \"︹\",\n        \"〕\": \"︺\",\n        \"〖\": \"︗\",\n        \"〗\": \"︘\",\n        \"！\": \"︕\",\n        \"（\": \"︵\",\n        \"）\": \"︶\",\n        \"，\": \"︐\",\n        \"－\": \"︲\",\n        \"．\": \"・\",\n        \"：\": \"︓\",\n        \"；\": \"︔\",\n        \"＜\": \"︿\",\n        \"＞\": \"﹀\",\n        \"？\": \"︖\",\n        \"［\": \"﹇\",\n        \"］\": \"﹈\",\n        \"＿\": \"︳\",\n        \"｛\": \"︷\",\n        \"｜\": \"―\",\n        \"｝\": \"︸\",\n        \"｟\": \"︵\",\n        \"｠\": \"︶\",\n        \"｡\": \"︒\",\n        \"｢\": \"﹁\",\n        \"｣\": \"﹂\"\n      };\n    }, {\n      \"./script_detection\": 210\n    }],\n    218: [function (_dereq_, module, exports) {\n      \"use strict\";\n\n      var WebWorker = _dereq_(\"./web_worker\"),\n          WorkerPool = function WorkerPool() {\n        this.active = {};\n      };\n\n      WorkerPool.prototype.acquire = function (r) {\n        var e = this;\n\n        if (!this.workers) {\n          var o = _dereq_(\"../\").workerCount;\n\n          for (this.workers = []; this.workers.length < o;) {\n            e.workers.push(new WebWorker());\n          }\n        }\n\n        return this.active[r] = !0, this.workers.slice();\n      }, WorkerPool.prototype.release = function (r) {\n        delete this.active[r], 0 === Object.keys(this.active).length && (this.workers.forEach(function (r) {\n          r.terminate();\n        }), this.workers = null);\n      }, module.exports = WorkerPool;\n    }, {\n      \"../\": 64,\n      \"./web_worker\": 195\n    }]\n  }, {}, [64])(64);\n});","map":null,"metadata":{},"sourceType":"script"}