{"map":"{\"version\":3,\"sources\":[\"/Users/coenstange/Documents/GitSSH/funda-pricemap/map3d/src/deckgl-overlay.js\",\"/Users/coenstange/Documents/GitSSH/funda-pricemap/map3d/src/index.js\"],\"names\":[\"LIGHT_SETTINGS\",\"lightsPosition\",\"ambientRatio\",\"diffuseRatio\",\"specularRatio\",\"lightsStrength\",\"numberOfLights\",\"DeckGLOverlay\",\"_this$props\",\"this\",\"props\",\"viewport\",\"data\",\"colorScale\",\"layer\",\"GeoJsonLayer\",\"id\",\"opacity\",\"stroked\",\"filled\",\"extruded\",\"wireframe\",\"fp64\",\"getElevation\",\"f\",\"Math\",\"sqrt\",\"properties\",\"valuePerSqm\",\"getFillColor\",\"growth\",\"getLineColor\",\"lightSettings\",\"pickable\",\"Boolean\",\"onHover\",\"react_default\",\"a\",\"createElement\",\"dist_esm\",\"Object\",\"assign\",\"layers\",\"initWebGLParameters\",\"latitude\",\"longitude\",\"zoom\",\"maxZoom\",\"pitch\",\"bearing\",\"Component\",\"DATA_URL\",\"r\",\"Root\",\"_this\",\"classCallCheck\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"state\",\"objectSpread\",\"defaultViewport\",\"width\",\"height\",\"requestJson\",\"error\",\"response\",\"setState\",\"window\",\"addEventListener\",\"_resize\",\"bind\",\"_onViewportChange\",\"innerWidth\",\"innerHeight\",\"_this$state\",\"esm\",\"onViewportChange\",\"mapboxApiAccessToken\",\"deckgl_overlay_DeckGLOverlay\",\"render\",\"src_Root\",\"document\",\"getElementById\"],\"mappings\":\"4RAGMA,EAAiB,CACrBC,eAAgB,EAAE,IAAK,KAAM,KAAO,MAAO,KAAM,KACjDC,aAAc,GACdC,aAAc,GACdC,cAAe,GACfC,eAAgB,CAAC,EAAK,EAAK,EAAK,GAChCC,eAAgB,GAGGC,mLAaV,IAAAC,EACgCC,KAAKC,MAApCC,EADDH,EACCG,SAAUC,EADXJ,EACWI,KAAMC,EADjBL,EACiBK,WAExB,IAAKD,EACH,OAAO,KAGT,IAAME,EAAQ,IAAIC,EAAAA,EAAa,CAC7BC,GAAI,UACJJ,KAAAA,EACAK,QAAS,GACTC,SAAS,EACTC,QAAQ,EACRC,UAAU,EACVC,WAAW,EACXC,MAAM,EACNC,aAAc,SAAAC,GAAC,OAA0C,GAAtCC,KAAKC,KAAKF,EAAEG,WAAWC,cAC1CC,aAAc,SAAAL,GAAC,OAAIX,EAAWW,EAAEG,WAAWG,SAC3CC,aAAc,SAAAP,GAAC,MAAI,CAAC,IAAK,IAAK,MAC9BQ,cAAehC,EACfiC,SAAUC,QAAQzB,KAAKC,MAAMyB,SAC7BA,QAAS1B,KAAKC,MAAMyB,UAGtB,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAADC,OAAAC,OAAA,GAAY9B,EAAZ,CAAsB+B,OAAQ,CAAC5B,GAAQ6B,qBAAmB,+CAnC5D,MAAO,CACLC,SAAU,OACVC,WAAY,OACZC,KAAM,GACNC,QAAS,GACTC,MAAO,GACPC,QAAS,UAT4BC,EAAAA,oBCArCC,EAAW,2BAEXtC,EAAa,SAAAuC,GAAC,MAAI,CAAK,IAAJA,EAAS,IAAK,KAAO,EAAIA,KAE5CC,cAEJ,SAAAA,EAAY3C,GAAO,IAAA4C,EAAA,OAAAd,OAAAe,EAAA,EAAAf,CAAA/B,KAAA4C,IACjBC,EAAAd,OAAAgB,EAAA,EAAAhB,CAAA/B,KAAA+B,OAAAiB,EAAA,EAAAjB,CAAAa,GAAAK,KAAAjD,KAAMC,KACDiD,MAAQ,CACXhD,SAAS6B,OAAAoB,EAAA,EAAApB,CAAA,GACJjC,EAAcsD,gBADX,CAENC,MAAO,IACPC,OAAQ,MAEVnD,KAAM,MAGRoD,OAAAA,EAAAA,EAAAA,CAAYb,EAAU,SAACc,EAAOC,GACvBD,GACHX,EAAKa,SAAS,CAAEvD,KAAMsD,MAbTZ,mFAmBjBc,OAAOC,iBAAiB,SAAU5D,KAAK6D,QAAQC,KAAK9D,OACpDA,KAAK6D,4CAIL7D,KAAK+D,kBAAkB,CACrBV,MAAOM,OAAOK,WACdV,OAAQK,OAAOM,wDAID/D,GAChBF,KAAK0D,SAAS,CACZxD,SAAS6B,OAAAoB,EAAA,EAAApB,CAAA,GAAM/B,KAAKkD,MAAMhD,SAAaA,sCAIlC,IAAAgE,EACoBlE,KAAKkD,MAAxBhD,EADDgE,EACChE,SAAUC,EADX+D,EACW/D,KAElB,OACEwB,EAAAC,EAAAC,cAACsC,EAAA,EAADpC,OAAAC,OAAA,GACM9B,EADN,CAEEkE,iBAAkBpE,KAAK+D,kBAAkBD,KAAK9D,MAC9CqE,qBApDa,8FAqDb1C,EAAAC,EAAAC,cAACyC,EAAD,CAAepE,SAAUA,EACvBC,KAAMA,EACNC,WAAYA,YAhDHqC,EAAAA,WAsDnB8B,OAAAA,EAAAA,OAAAA,CAAO5C,EAAAC,EAAAC,cAAC2C,EAAD,MAAUC,SAASC,eAAe\",\"sourcesContent\":[\"import React, { Component } from 'react';\\nimport DeckGL, { GeoJsonLayer } from 'deck.gl';\\n\\nconst LIGHT_SETTINGS = {\\n  lightsPosition: [-125, 50.5, 5000, -122.8, 48.5, 8000],\\n  ambientRatio: 0.2,\\n  diffuseRatio: 0.5,\\n  specularRatio: 0.3,\\n  lightsStrength: [1.0, 0.0, 2.0, 0.0],\\n  numberOfLights: 2\\n};\\n\\nexport default class DeckGLOverlay extends Component {\\n\\n  static get defaultViewport() {\\n    return {\\n      latitude: 49.254,\\n      longitude: -123.13,\\n      zoom: 11,\\n      maxZoom: 16,\\n      pitch: 45,\\n      bearing: 0\\n    };\\n  }\\n\\n  render() {\\n    const { viewport, data, colorScale } = this.props;\\n\\n    if (!data) {\\n      return null;\\n    }\\n\\n    const layer = new GeoJsonLayer({\\n      id: 'geojson',\\n      data,\\n      opacity: 0.8,\\n      stroked: false,\\n      filled: true,\\n      extruded: true,\\n      wireframe: true,\\n      fp64: true,\\n      getElevation: f => Math.sqrt(f.properties.valuePerSqm) * 10,\\n      getFillColor: f => colorScale(f.properties.growth),\\n      getLineColor: f => [255, 255, 255],\\n      lightSettings: LIGHT_SETTINGS,\\n      pickable: Boolean(this.props.onHover),\\n      onHover: this.props.onHover\\n    });\\n\\n    return (\\n      <DeckGL {...viewport} layers={[layer]} initWebGLParameters />\\n    );\\n  }\\n}\",\"/* global window,document */\\nimport React, { Component } from 'react';\\nimport { render } from 'react-dom';\\nimport MapGL from 'react-map-gl';\\nimport DeckGLOverlay from './deckgl-overlay.js';\\n\\nimport { json as requestJson } from 'd3-request';\\n\\n// Set your mapbox token here\\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiY29lbnM5NyIsImEiOiJjam5objg4YWQwNWVlM3B0ZHd0NGV2aDdpIn0.0Jg6jNjAROAafiP9QB_i6w'; // eslint-disable-line\\n\\n// Source data GeoJSON\\nconst DATA_URL = 'map/postcodemap.wsg.json'; // eslint-disable-line\\n\\nconst colorScale = r => [r * 255, 140, 200 * (1 - r)];\\n\\nclass Root extends Component {\\n\\n  constructor(props) {\\n    super(props);\\n    this.state = {\\n      viewport: {\\n        ...DeckGLOverlay.defaultViewport,\\n        width: 500,\\n        height: 500\\n      },\\n      data: null\\n    };\\n\\n    requestJson(DATA_URL, (error, response) => {\\n      if (!error) {\\n        this.setState({ data: response });\\n      }\\n    });\\n  }\\n\\n  componentDidMount() {\\n    window.addEventListener('resize', this._resize.bind(this));\\n    this._resize();\\n  }\\n\\n  _resize() {\\n    this._onViewportChange({\\n      width: window.innerWidth,\\n      height: window.innerHeight\\n    });\\n  }\\n\\n  _onViewportChange(viewport) {\\n    this.setState({\\n      viewport: { ...this.state.viewport, ...viewport }\\n    });\\n  }\\n\\n  render() {\\n    const { viewport, data } = this.state;\\n\\n    return (\\n      <MapGL\\n        {...viewport}\\n        onViewportChange={this._onViewportChange.bind(this)}\\n        mapboxApiAccessToken={MAPBOX_TOKEN}>\\n        <DeckGLOverlay viewport={viewport}\\n          data={data}\\n          colorScale={colorScale} />\\n      </MapGL>\\n    );\\n  }\\n}\\n\\nrender(<Root />, document.getElementById('root'));\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){e.exports=n(167)},150:function(e,t){},151:function(e,t){},152:function(e,t){},167:function(e,t,n){\"use strict\";n.r(t);var i=n(84),o=n(1),r=n(3),a=n(8),s=n(7),c=n(9),u=n(15),p=n.n(u),l=n(93),h=n(120),d=n(86),w={lightsPosition:[-125,50.5,5e3,-122.8,48.5,8e3],ambientRatio:.2,diffuseRatio:.5,specularRatio:.3,lightsStrength:[1,0,2,0],numberOfLights:2},f=function(e){function t(){return Object(o.a)(this,t),Object(a.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){var e=this.props,t=e.viewport,n=e.data,i=e.colorScale;if(!n)return null;var o=new d.a({id:\"geojson\",data:n,opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,fp64:!0,getElevation:function(e){return 10*Math.sqrt(e.properties.valuePerSqm)},getFillColor:function(e){return i(e.properties.growth)},getLineColor:function(e){return[255,255,255]},lightSettings:w,pickable:Boolean(this.props.onHover),onHover:this.props.onHover});return p.a.createElement(d.b,Object.assign({},t,{layers:[o],initWebGLParameters:!0}))}}],[{key:\"defaultViewport\",get:function(){return{latitude:49.254,longitude:-123.13,zoom:11,maxZoom:16,pitch:45,bearing:0}}}]),t}(u.Component),b=n(121),g=\"map/postcodemap.wsg.json\",j=function(e){return[255*e,140,200*(1-e)]},m=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(a.a)(this,Object(s.a)(t).call(this,e))).state={viewport:Object(i.a)({},f.defaultViewport,{width:500,height:500}),data:null},Object(b.a)(g,function(e,t){e||n.setState({data:t})}),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){window.addEventListener(\"resize\",this._resize.bind(this)),this._resize()}},{key:\"_resize\",value:function(){this._onViewportChange({width:window.innerWidth,height:window.innerHeight})}},{key:\"_onViewportChange\",value:function(e){this.setState({viewport:Object(i.a)({},this.state.viewport,e)})}},{key:\"render\",value:function(){var e=this.state,t=e.viewport,n=e.data;return p.a.createElement(h.a,Object.assign({},t,{onViewportChange:this._onViewportChange.bind(this),mapboxApiAccessToken:\"pk.eyJ1IjoiY29lbnM5NyIsImEiOiJjam5objg4YWQwNWVlM3B0ZHd0NGV2aDdpIn0.0Jg6jNjAROAafiP9QB_i6w\"}),p.a.createElement(f,{viewport:t,data:n,colorScale:j}))}}]),t}(u.Component);Object(l.render)(p.a.createElement(m,null),document.getElementById(\"root\"))}},[[136,2,1]]]);","extractedComments":[]}